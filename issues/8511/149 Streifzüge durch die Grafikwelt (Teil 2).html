<!DOCTYPE html>
<html lang="de">

<head>
    <title>Streifzüge durch die Grafikwelt (Teil 2)</title>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="../style.css">
    <meta name="author" content="Heimo Ponnath, gk">
    <meta name="64er.issue" content="11/85">
    <meta name="64er.pages" content="149-154">
    <meta name="64er.head1" content="Grafikwelt">
    <meta name="64er.head2" content="C 64">
    <meta name="64er.toc_category" content="Kurse">
    <meta name="64er.index_title" content="Streifzüge durch die Grafikwelt (Teil 2)">
    <meta name="64er.index_category" content="Kurse|Grafik">
    <meta name="64er.id" content="grafik_welt">
</head>

<body>
    <article>
        <h1>Streifzüge durch die Grafikwelt (Teil 2)</h1>
        <p class="intro">Grafik mit dem C 64, dem C 128 oder einem anderen Computer. Auf Bildschirm, Drucker oder Plotter. Unser Grafik-System nimmt Formen an.</p>

        <p>Die in dieser und den kommenden Folgen gezeigten Programme sollen möglichst weitgehend unabhängig sein von der Art des verwendeten Grafik-Systems. 0b Sie also einen Commodore 64 mit HiRes-3 oder GBasic (oder&hellip;) benutzen und die Ausgabe auf dem Bildschirm, dem Drucker oder einem Plotter stattfinden lassen, ob Sie zu den Glücklichen gehören, die schon einen Commodore C 128 vor sich stehen haben&hellip; all das soll möglichst weitgehend erfaßt sein. Nicht immer — gestehe ich ganz freimütig — läßt sich so eine Allgemeingültigkeit erreichen. Besonders in dieser Folge werden die drei größeren Programme noch spezialisiert sein. Die kleineren aber — die fürs Auge — sollen diese Anforderungen schon erfüllen.</p>

        <p>Dazu werde ich allgemein verständliche Befehlsworte verwenden (wie zum Beispiel LINIE oder PUNKT etc.) und deren Entsprechung in zwei Grafik-Systemen angeben: In HiRes-3-Syntax und in der Syntax, die mit dem Plotter 1520 verwendet wird. Falls Sie ein anderes System benutzen oder einen C 128 Ihr eigen nennen, dürfte es Ihnen nicht schwerfallen, die Syntax-Anpassungen vorzunehmen. Folgende zehn Befehle sollen zunächst vorgestellt werden (wobei sich später noch der eine oder andere zusätzliche Befehl als nötig herausstellen kann):</p>

        <h3>INIT</h3>

        <p>Werde ich immer dann verwenden, wenn die Grafik initialisiert werden soll. Damit wird die Grafik eingeschaltet, eine eventuell Bit-Map eingerichtet und gelöscht und die Farbgebung bestimmt.</p>

        <h3>START</h3>

        <p>Soll das Grafiksystem in einen definierten Ausgangszustand bringen.</p>

        <h3>MITTE</h3>

        <p>Legt den Koordinatenursprung in die Bildmitte.</p>

        <h3>PUNKT(X,Y)</h3>

        <p>Setzt einen Punkt an die Stelle X,Y.</p>

        <h3>LINIE(XA,YA,XB,YB)</h3>

        <p>Zieht eine Linie vom Ausgangspunkt XA,YA zum Endpunkt XB,YB.</p>

        <h3>KREIS(XM,YM,RX,RY)</h3>

        <p>Zeichnet eine Ellipse (RX ungleich RY) oder einen Kreis (RX = RY) um den Mittelpunkt XM, YM mit den Radien RX und RY.</p>

        <h3>TEXT(A$,XT,YT)</h3>

        <p>Schreibt den Text A$ ab der Bildstelle XT,YT.</p>

        <h3>SHOW</h3>

        <p>Ein erstelltes Bild wird gezeigt.</p>

        <h3>NORMAL</h3>

        <p>Schaltet den Grafik-Modus ab.</p>

        <h3>GRESET</h3>

        <p>Führt einen Grafik-System-Reset aus. Danach muß für erneute Benutzung der Grafik wieder neu initialisiert werden.</p>

        <p>In der Tabelle 1 sind diese allgemeinen Befehle aufgeführt zusammen mit den Übersetzungen in die Syntax von HiRes-3 und die des Plotters 1520:</p>

        <figure>
            <table>
                <tr>
                    <th>Wort</th>
                    <th>HIRES-3-Syntax</th>
                    <th>Plotter-Syntax</th>
                </tr>

                <tr>
                    <td>INIT</td>
                    <td>
                        POKE53280,0 (Rahmen schwarz)<br>
                        SYS37498 (HIRES anschalten)<br>
                        HFL,6,12 (blau auf grau)
                    </td>
                    <td>
                        OPEN1,6,1 (Plot X,Y)<br>
                        OPEN2,6,2 (Stiftfarbe)<br>
                        PRINT #2,0 (schwarz)<br>
                        CLOSE2<br>
                        PRINT #1,"M";0,-200
                    </td>
                </tr>

                <tr>
                    <td>START</td>
                    <td>
                        TRS,0,320,0,200<br>
                        legt Ursprung nach links unten<br>
                        x von 0 bis 320<br>
                        y von 0 bis 200
                    </td>
                    <td>
                        PRINT #1,"I"<br>
                        Papiervorschub um 200 Einheiten. Dort auch Koordinatenursprung.<br>
                    </td>
                </tr>

                <tr>
                    <td>MITTE</td>
                    <td>
                        TRS,-160,160,-100,100<br>
                        Ursprung in Bildschirmmitte
                    </td>
                    <td>
                        PRINT #1,"R";240,0<br>
                        PRINT #1,"I"<br>
                        Ursprung in Papiermitte.
                    </td>
                </tr>

                <tr>
                    <td>PUNKT(X,Y)</td>
                    <td>TPK,X,Y</td>
                    <td>
                        PRINT #1,"R";X,Y<br>
                        PRINT #1,"J";X+2,Y+2<br>
                        PRINT #1,"R";X,Y<br>
                        etwas ungenau, weil einzelner Punkt nicht sichtbar. Deshalb sehr kleiner Strich.
                    </td>
                </tr>

                <tr>
                    <td>LINIE(XA,YA,XB,YB)</td>
                    <td>TLN,XA,YA,XB,YB</td>
                    <td>
                        PRINT #1,"R";XA,YA<br>
                        PRINT #1,"J";XB,YB
                    </td>
                </tr>

                <tr>
                    <td>KREIS(XM,YM,RX,RY)</td>
                    <td>TKR,XM,YM,RX,RY,2*Pi</td>
                    <td>
                        Hier braucht man ein kleines Programm:<br>
                        M=50:D=360*π/(M*180)<br>
                        DIMT(M):T(0)=2*π<br>
                        FORI=1TOM:T(I)=T(I-1)+D<br>
                        PRINT #1,"R";RX*COS(T(I-1))+XM,RY*SIN(T(I-1))+YM<br>
                        PRINT #1,"J";RX*COS(T(I))+XM,RY*SIN(T(I))+YM<br>
                        NEXTI
                    </td>
                </tr>

                <tr>
                    <td>TEXT(A$,XT,YT)</td>
                    <td>TEX,A$,XT,YT</td>
                    <td>
                        OPEN4,6:PRINT #1,"R";XT,YT<br>
                        PRINT #4,A$:CLOSE4<br>
                        PRINT #1,"M";240,YT<br>
                        PRINT #1,"I"
                    </td>
                </tr>

                <tr>
                    <td>SHOW</td>
                    <td>HAN</td>
                    <td>
                        PRINT #1,"R";0,-200<br>
                        Papiervorschub um 200 Einheiten
                    </td>
                </tr>

                <tr>
                    <td>NORMAL</td>
                    <td>HOF</td>
                    <td>CLOSE1</td>
                </tr>

                <tr>
                    <td>GRESES</td>
                    <td>LOE:AUS</td>
                    <td>
                        OPEN7,6,7:PRINT #7:CLOSE7
                    </td>
                </tr>
            </table>
            <figcaption>Tabelle 1. Die grundlegenden allgemeinen Grafik-Befehle und ihre Übersetzung in HiRes-3- oder Plotter-Syntax</figcaption>
        </figure>

        <p>Sehen wir uns das nun an zwei netten Beispielen an. Als erstes das Programm »verschlungene Spiralen«, welches (siehe Bilder 1a, 1b) mehrere Spiralen (nämlich N), die mit einem Startwinkel W aus dem Zentrum heraustreten, zu einer Scheibe mit dem Radius R anordnet.</p>

        <figure>
            <img src="149-1a.png" alt="">
            <figcaption>Bild 1a. Verschlungene Spiralen mH HiRes-3</figcaption>
        </figure>
        <figure>
            <img src="149-1b.png" alt="">
            <figcaption>Bild 1b. Dasselbe mit dem Plotter 1520</figcaption>
        </figure>

        <p>Das Programm »Spiralen« (Listing 1) verwendet die allgemeinen Grafik-Befehle. Dieses Listing kann jedoch nicht auf dem C 64 laufen. Aber je nachdem, welchen Computer Sie verwenden, oder welche Basic-Erweiterung, können Sie deren Befehle hier einsetzen. Listing 2 und Listing 3 geben zwei Beispiele.</p>

        <p>Probieren Sie nun mal aus — unter Zuhilfenahme der Tabelle 1 — anstelle der allgemeinen Befehle die HiRes-3-Syntax einzusetzen. Dabei sollte dann etwas Ähnliches herauskommen wie Listing 2, HiRes-Spiralen:</p>

        <p>Unter Verwendung der Plotter-Syntax entsteht das Programm Plotter-Spiralen (Listing 3).</p>

        <p>Sollten Sie ein anderes Grafik-System benutzen, können Sie solch ein Programm auf ähnlich simple Weise übersetzen.</p>

        <p>Als zweites Beispiel soll das Programm »Fensterrose« dienen (der Name rührt daher, daß das Ergebnis aussieht, wie die Fensterrosen in alten gotischen Kirchen). Auch hier biete ich Ihnen drei Versionen: »Fensterrose« ist das mit den allgemeinen Grafik-Befehlen (Listing 4), HiRes-Fensterrose ist die HiRes-3-Fassung (Listing 5) und »Plotter-Fensterrose« schließlich die Plotter-Version (Listing 6).</p>

        <p>Die Ergebnisse finden Sie als Bilder 2a und 2b:</p>

        <figure>
            <img src="149-2a.png" alt="">
            <figcaption>Bild 2a. Der Matrixdrucker gibt es nur undeutlich wieder: Fensterrose mittels HiRes-3</figcaption>
        </figure>
        <figure>
            <img src="149-2b.png" alt="">
            <figcaption>Bild 2b. Von bestechender Schönheit: Die Fensterrose mit dem Plotter gezeichnet</figcaption>
        </figure>

        <p>Die Fensterrose-Programme fragen nach der Anzahl der Stützpunkte auf dem Kreisumfang, dann nach dem gewünschten Radius und schließlich noch nach dem Ort, an den der Text gedruckt werden soll. Wie Sie feststellen werden, ist Fensterrose sehr vielseitig, und auf dem Bildschirm lassen sich in der HiRes-Version Moiree-Muster erzeugen.</p>

        <h3>1. Eine »Business-Anwendung«</h3>

        <p>Eines der Themen, auf die wir in den nächsten Folgen zu sprechen kommen werden, ist die sogenannte Präsentationsgrafik, die häufig im kaufmännischen Bereich Verwendung findet. Darunter versteht man zum Beispiel Balkendiagramme oder die vielgeliebten Tortendiagramme. Das hier gezeigte Beispiel arbeitet mit HiRes-3 und unter Umständen einem Drucker. Es bedient sich eines sogenannten Abweichungs-Balkendiagrammes. Von maximal 50 eingegebenen Werten (Umsatzziffern, Gewinne, etc.) stellt es den Mittelwert als horizontale Linie dar und daran dann die positiven oder negativen Abweichungen der einzelnen Eingabebeträge. Außerdem gibt das Programm Auskunft über den Zahlenwert des Mittels und die maximalen Abweichungen. Ein Beispiel für solch ein Diagramm sehen Sie in Bild 3:</p>

        <figure>
            <img src="149-3.png" alt="">
            <figcaption>Bild 3. Das Abweichungs-Balken-Diagramm</figcaption>
        </figure>

        <p>Das Programm »Abweichungen« (Listing 7) erfragt zunächst die Anzahl der Werte, dann jeden Einzelwert. Es ist leicht zu ändern, so daß es die Werte auch von der Diskette oder Kassette nehmen kann. Am Ende der grafischen Darstellung können Sie durch »D« einen Ausdruck auf dem Drucker 1526 (oder kompatible) erzielen, durch »N« eine neue Eingabe starten oder durch »E« das Programm beenden.</p>

        <h3>2. Ein Plotter-Programm</h3>

        <p>Grafik und Mathematik sind nicht voneinander zu trennen. Eine häufige Anwendung ist die Untersuchung von 2D-Funktionen durch die grafische Darstellung. Die Zeiten der mühselig berechneten Wertetabellen und der Kurvendiskussion sind zwar noch nicht ganz vorbei (es gibt halt doch noch einige exotische Funktionen, die dem Computer widerstehen), für die weitaus meisten Anwendungen ist aber das hier vorgestellte Programm »Funktionenplot« (Listing 8) leistungsfähig genug. Es bedarf dazu eines Plotters 1520. Zunächst wird vorgestellt, welche Funktion sich derzeit im Programm befindet. Man hat nun die Möglichkeit, eine neue Funktion einzuspeisen. Danach bestimmt man selbst, wie das Koordinatensystem aussehen soll (bei einer Ausdehnung von mehr als 25 Einheiten in X-Richtung wird keine Skalierung mehr vorgenommen) und man bestimmt, in welchem Teil des Systems die Funktion darzustellen ist. Ein Beispiel für die entstehenden Plots zeigt Bild 4.</p>

        <figure>
            <img src="149-4.png" alt="">
            <figcaption>Bild 4. Ein Beispiel zur Arbeit des Plotter-Programmes zur Darstellung von Funktionen</figcaption>
        </figure>

        <p>Es gibt noch eine Menge Raffinessen, die in diesem Beispielprogramm fehlen. Aber die Untersuchung von Funktionen wird uns ebenfalls eine der kommenden Grafik-Folgen beschäftigen. Dort sollen dann auch alle Feinheiten zur Sprache kommen.</p>

        <h3>3. Ein 3D-Programm</h3>

        <p>Das letzte Beispielprogramm ist die HiRes-3-Version unseres 3D-Funktionenprogrammes aus den früheren Folgen. Dort war es — weil es in Basic geschrieben war — schon eine arge Geduldprobe, auf ein komplettes Bild zu warten. Nun geht es etwas schneller. Dafür finden wir allerdings eine Möglichkeit vorerst nicht mehr vor: Die verdeckten Linien werden nicht mehr ausgeblendet. Die Ursache dafür ist die Verwendung des FUNKT-Befehles aus Hi-Res-3. In späteren Grafik-Folgen wird uns aber die 3D-Programmierung noch eine Weile fesseln und dort sollen dann auch die »hidden line«- und »hidden surface«-Programmtechniken behandelt werden.</p>

        <p>Auch hier wird Ihnen zu Beginn die im Programm gerade enthaltene 3D-Funktion gezeigt und Sie haben die Möglichkeit, statt dessen eine andere einzusetzen. Dann werden Eingaben zum Koordinatensystem verlangt:</p>

        <ul class="plain">
            <li>XU = unterer X-Achsenwert</li>
            <li>XO = oberer — " —</li>
            <li>YU und YO = dasselbe für die Y-Achse</li>
            <li>ZU und ZO = dasselbe für die Z-Achse.</li>
        </ul>

        <p>Die maximal und minimal zulässigen Werte für die Z-Achse sind bestimmt durch die Bildschirmdarstellung und die Angaben für die beiden anderen Achsen. Sie werden vor der Z-Werte-Eingabe ausgedruckt. Danach hat man die Möglichkeit, Parameter für die Zeichnung der 3D-Funktion einzugeben. Abgefragt werden die Zeichen- und die Hintergrundfarbe, die Schrittweite in Z-Richtung und der Bereich in X- (aber auch in Z-) Richtung von XA bis XE (und von ZA bis ZE), in dem die Funktion zu zeichnen ist. Wenn das Bild fertig ist, wird oben noch die Funktionsgleichung ausgedruckt. Mit einem Tastendruck gelangt man dann in ein Menü, welches mit »E« die Beendigung des Programmes, mit »G« das Zurückschalten auf den Grafik-Bildschirm (ein Tastendruck führt dann wieder ins Menü), mit »N« den Neubeginn des Programmes und mit »D« den Ausdruck auf dem Drucker 1526 (und kompatible) erlaubt. Ein Beispiel für einen 1526-Ausdruck zeigt Bild 5:</p>

        <figure>
            <img src="149-5.png" alt="">
            <figcaption>Bild 5. HiRes-3 zeichnet 3D-Funktionen</figcaption>
        </figure>

        <p>Das Programm ist als 3D-Programm hier abgedruckt (Listing 9). Es erfordert das vorherige Laden von HiRes-3 (mit den Text-Befehlen).</p>

        <address class="author">(Heimo Ponnath/gk)</address>

        <h3>Literatur:</h3>

        <p class="source">[1] Theo Pavlidis: Algorithms for Graphics and Image Processing, Berlin-Heidelberg 1982: Springer-Verlag, ISBN 3-540-11338-X</p>

        <figure>
            <pre data-filename="spiralen" data-name="Spiralen"></pre>
            <figcaption>Listing 1. Spiralen. Das Spiralen-Programm mit den allgemeinen Grafik-Befehlen</figcaption>
        </figure>
        <figure>
            <pre data-filename="hires-spiralen" data-name="HiRes-Spiralen"></pre>
            <figcaption>Listing 2. HiRes-Spiralen. Die Übersetzung in die Syntax von HiRes-3</figcaption>
        </figure>
        <figure>
            <pre data-filename="plotter-spiralen" data-name="Plotter-Spiralen"></pre>
            <figcaption>Listing 3. Plotter-Spiralen. Das Spiralen-Programm mit der Plotter-Syntax</figcaption>
        </figure>
        <figure>
            <pre data-filename="fensterrose" data-name="Fensterrose"></pre>
            <figcaption>Listing 4. Fensterrose. Ein gotisches Rundfenster, programmiert mit allgemeinen Grafik-Befehlen</figcaption>
        </figure>
        <figure>
            <pre data-filename="hires-fensteros" data-name="HiRes-Fensterrose"></pre>
            <figcaption>Listing 5. Hires-Fensterrose. Fensterrose, übersetzt in die HiRes-3-Syntax</figcaption>
        </figure>
        <figure>
            <pre data-filename="plot-fensterros" data-name="Plotter-Fensterrose"></pre>
            <figcaption>Listing 6. Plotter-Fensterrose. Die Übersetzung in die Plotter-Sprache</figcaption>
        </figure>
        <figure>
            <pre data-filename="abweichungen" data-name="Abweichungen"></pre>
            <figcaption>Listing 7. Abweichungen. Ermittelt und zeichnet den Durchschnitt und die Abweichungen davon: Das Programm Abweichungen</figcaption>
        </figure>
        <figure>
            <pre data-filename="funktionenplot" data-name="Funktionenplot"></pre>
            <figcaption>Listing 8. Funktionenplot. Erspart die Wertetabelle: Das Programm Funktionenplot</figcaption>
        </figure>
        <figure>
            <pre data-filename="3d-programm" data-name="3D-Programm"></pre>
            <figcaption>Listing 9. 3D-Programm. Schnell geworden: Das 3D-Programm aus der Grafik-Serie mit HiRes-3.</figcaption>
        </figure>

    </article>
</body>

</html>