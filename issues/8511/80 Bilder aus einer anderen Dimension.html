<!DOCTYPE html>
<html lang="de">

<head>
    <title>Bilder aus einer anderen Dimension</title>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="../style.css">
    <meta name="author" content="Gerhard Pehland, og">
    <meta name="64er.issue" content="11/85">
    <meta name="64er.pages" content="80-84">
    <meta name="64er.head1" content="Grafik">
    <meta name="64er.head2" content="C 64">
    <meta name="64er.toc_title" content="<b>Mathematische Kunst: Apfelmännchen — Bilder aus einer anderen Dimension</b>">
    <meta name="64er.toc_category" content="Listings zum Abtippen">
    <meta name="64er.index_title" content="Bilder aus einer anderen Dimension (Apfelmännchen)">
    <meta name="64er.index_category" content="Listings zum Abtippen|Grafik">
    <meta name="64er.id" content="apfelmännchen">
</head>

<body>
    <article>
        <h1>Bilder aus einer anderen Dimension</h1>
        <p class="intro">Kunst aus dem Computer ist auf Großrechnern im Kommen. Daß es auch mit dem C 64 geht, zeigt dieses Programm.</p>

        <p>Mit Hilfe einer einfachen Formel lassen sich die erstaunlichsten Grafiken erzeugen. Das Apfelmännchen, wie man diese Grafiken auch bezeichnet, wurde zuerst von dem Mathematiker Mandelbrot entdeckt. Das Apfelmännchen stellt einen Ausschnitt aus der Ebene der komplexen Zahlen dar. Die mathematischen Grundlagen dazu werden in Bild 1 erläutert.</p>

        <p><strong>Hinweise zum Abtippen.</strong> Tippen Sie das Maschinenprogramm (Listing 1) mit dem MSE ein und speichern Sie es unter dem Namen »APFELROUTINEN«. Dann geben Sie das Basic-Programm (Listing 2) mit dem Checksummer ein und speichern es ebenfalls. Die REM-Zahlen können weggelassen werden, da sie im Programm nicht angesprungen werden. Nach dem Starten des Basic-Programms wird das Maschinenprogramm automatisch nachgeladen. Außerdem werden die Zeiger für den Beginn der Variablen verändert. Wenn man eine Grafik geladen hat und erneut das Basic-Programm speichert, wird die Grafik daran angehängt.</p>

        <h3>Die Bedienung des Programms</h3>

        <p>Vom Menü aus lassen sich folgende Unterpunkte anwählen:<br>
            <strong>Neue Werte</strong>: Hier können Sie die Grenzen für Realteil (linker/rechter Rand) und Imaginärteil (oberer/unterer Rand) der Zahlen (siehe Bild 1) eingeben, die Sie darstellen wollen. Das Ausgangsbild aller Apfelmännchen finden Sie mit den Parametern: linker Rand —0.7, rechter Rand 2.1, unterer Rand —1, oberer Rand 1. Die maximale Tiefe bestimmt, nach wievielen Iterationen (Wiederholungen) abgebrochen wird. Es sind Werte von 5 bis 254 zugelassen. Je größer die Tiefe, desto mehr Details treten am Rand der Figur zutage. Beachten Sie aber, daß eine große Tiefe auch eine lange Rechenzeit bedeutet. Nach Eingabe der Tiefe werden Sie gefragt, ob die fertige Grafik auf Diskette gespeichert werden soll — zum Beispiel, wenn Sie den Computer über Nacht rechnen lassen. Falls Ihnen die Werte nicht gefallen sollten, können Sie jetzt noch mit dem Linkspfeil ins Menü zurück. Wenn Sie die Grafik speichern lassen, muß ein File-Namen eingegeben werden. Nach der letzten Eingabe beginnt der Aufbau des Bildes. Das Programm kann dann nur noch durch RUN/STOP-RESTORE abgebrochen werden. Natürlich kann eine abgebrochene Berechnung nach einem RUN gespeichert werden, zum Beispiel um später einen Ausschnitt zu berechnen. Denn statt die Grenzen als Zahlen einzugeben, können Sie auch einen Ausschnitt aus einem bereits bestehenden Bild berechnen lassen.<br>
            <strong>Ausschnitt</strong>: Am linken oberen Rand erscheint ein weißes Eck, mit dem Sie die linke obere Ecke des neuen Bildes markieren. Gesteuert wird es mit den Cursortasten, und fixiert mit der Space-Taste. Mit dem rechten unteren Eck wird genauso verfahren. Der Ausschnitt sollte ungefähr die Form des Bildschirms haben, da sonst die Grafik stark verzerrt wird. Mit der Eingabe der maximalen Tiefe geht es dann weiter wie bei der Eingabe von neuen Werten.<br>
            <strong>Bild ansehen</strong>: Unter diesem Menüpunkt können Sie sich eine fertige Grafik ansehen. Mit den Funktionstasten können Sie die Farben verändern. Zurück ins Menü geht es mit dem Linkspfeil.<br>
            <strong>Speichern</strong>: Ein fertiges Bild kann auf Diskette gespeichert werden. Dabei wird an den Filenamen die Endung ».pic« angehängt. Zusätzlich werden die Parameter des Bildes mit auf Diskette abgelegt.<br>
            <strong>Laden</strong>: Bilder von Diskette können unter Angabe des Namens von Diskette geladen werden. Die Endung ».pic« ist dabei nicht mitanzugeben. Nach Beendigung des Ladevorgangs werden die dem Ausschnitt entsprechenden Parameter angezeigt.<br>
            <strong>Directory</strong>: Nach Aufruf dieser Funktion wird ein Verzeichnis aller Bilder, die mit ».pic« enden, auf dem Bildschirm gelistet. Effekt: Durch zyklisches Vertauschen der Farbwerte entsteht der Eindruck eines bewegten Bildes. Auch hier können Sie die Farben mit den Funktionstasten verändern. Ins Menü zurück kommt man wieder mit dem Linkspfeil.
        </p>

        <h3>Programmbeschreibung</h3>

        <p>Die wesentlichen Routinen sind im Maschinenprogramm enthalten, das den Bereich von $C800 bis $CBlE belegt. Es gibt folgende Einsprungadressen:</p>

        <p>TODO TABLE</p>

        <p>Adresse Variable Routine Funktion der Routine<br>
            51200 USRIN übergibt Werte an Maschi<br>
            nenprogramm<br>
            51207 USROUT übergibt Werte an Basic<br>
            51214 M1 MULTION Grafik einschalten<br>
            51217 MO MULTIOFF Grafik ausschalten<br>
            51220 SC SETCOL Farben setzen<br>
            51223 BG BEGIN Berechnen der Grafik<br>
            51226 SA SAVEPIC Bild speichern<br>
            51229 L0 LOADPIC Bild laden<br>
            51232 CL CLRSCR Grafikbildschirm löschen</p>

        <p>Die Adressen der Variablen, die im Assemblerprogramm verwendet werden, können Sie dem Source-Code (Listing 3) entnehmen. Für die Arithmetik des Berechnungsteils werden die Routinen des Basic-Interpreters benutzt. Der Berechnungsteil des Maschinenprogramms folgt dem Algorithmus des Struktogramms (Bild 2). Das Basic-Programm enthält folgende Unterprogramme:</p>

        <figure>
            <img src="80-2.png" alt="">
            <figcaption>Bild 2. Struktogramm des Berechnungs-Algorithmus</figcaption>
        </figure>

        <p>TODO TABLE</p>

        <p>Ab Zeile Funktion<br>
            1000 Eingabe neuer Werte<br>
            2000 Ausschnitt<br>
            3000 Grafik ansehen<br>
            4000 Bild speichern<br>
            5000 Bild laden<br>
            5500 Directory<br>
            7000 Bewegungseffekt</p>

        <p>Die Übergabe der Werte für die Ränder an das Assemblerprogramm erfolgt über die USR-Funktion. Dabei werden die Zahlen von Basic aus in den Fließkomma-Akku geschrieben. Eine kurze Unterroutine speichert die Zahlen dann an ihre richtige Adresse. Dazu wird von Basic aus direkt in das Maschinenprogramm die jeweilige Adresse gePOKEt (Variable XI, XA, Y1, YA). Auf ähnliche Weise werden auch die Parameter eines geladenen Bildes an Basic übergeben.</p>

        <h3>Die Demo-Bilder</h3>

        <p>Die Demo-Bilder sind auf der Programmservice-Diskette enthalten. Sie können diese laden und gleich mit der Erstellung eines Ausschnitts beginnen. Wir hoffen, daß die Beispielbilder Sie ein wenig auf den Geschmack gebracht haben und wünschen Ihnen viel Spaß auf Ihrer Entdeckungsfahrt durch die unendlichen Weiten der Mathematik.</p>

        <address class="author">(Gerhard Pehland/og)</address>

        <figure>
            <p>Eine komplexe Zahl besteht aus zwei Zahlen, dem Real- und dem Imaginärteil. Bei diesem Programm werden die beiden Anteile durch die X- und Y-Koordinate auf dem Grafikbildschirm repräsentiert. Das heißt die Koordinaten jedes Punktes auf dem Bildschirm stehen für eine komplexe Zahl, die im folgenden »C« genannt wird.<br>
                Wie entstehen nun diese fantastischen Grafiken?</p>

            <p>Es beginnt mit der komplexen Zahl 0. Davon wird die Zahl C abgezogen. Es ergibt sich eine neue komplexe Zahl, die jetzt quadriert wird. Vom Ergebnis wird wieder C abgezogen, dann quadriert und so weiter. Dabei entsteht eine Folge von Zahlen, die eine merkwürdige Eigenschaft hat: Für manche Werte von C ergibt sich, daß die Elemente der Folge immer kleiner werden, bei anderen Werten steigt sie schnell an. Dazwischen gibt es aber Werte, bei denen die Folge lange unschlüssig hin und her pendelt, bis sie steigt oder fällt. Die Farbe eines Punktes auf dem Bildschirm wird bestimmt, indem man den dazugehörigen Wert C in die Folge einsetzt und so lange immer wieder abzieht und quadriert, bis die Elemente der Folge eine gewisse Grenze überschreiten. Aus der Anzahl der Iterationen ergibt sich die Farbe des entsprechenden Punktes. Natürlich muß man die Berechnung irgendwann beenden. Das geschieht zum einen, wenn die Folge das Grenzkriterium überschritten hat, oder wenn die maximale Tiefe erreicht ist. Führt man diese Berechnungen für alle Punkte des Bildschirms durch, entstehen typische Grafiken (siehe Seite 169). Das Struktogramm (Bild 2) zeigt Ihnen den genauen Ablauf und die verwendeten Formeln. Die Bedeutung der Variablen können Sie dem Source-Code (Listing 3) entnehmen. Ein typisches Beispiel ist das Ausgangsbild mit den oben angegebenen Werten. In der Bildschirmmitte liegen die Werte von C, bei denen die Folge sofort sinkt. Ganz außen steigt die Folge schnell an. Interessant ist die Grenzschicht dazwischen. Hier gibt es die bizarrsten Muster, die Sie mit »Ausschnitt« (siehe Text) herausvergrößern können. Bei der Vergrößerung zeigt sich eine weitere Eigenschaft dieser Bilder: Am Rande des großen Apfelmännchens sitzen nämlich noch unzählige weitere, kleinere Männchen, auf denen noch kleinere Figuren sitzen. Diese Eigenschaft wird Selbstähnlichkeit genannt. Aber auch andere Muster tauchen immer wieder auf, mal größer, mal kleiner.</p>

            <p>Zum Schluß noch ein Wort zur Rechenzeit: Obwohl die Berechnungsroutine in Assembler geschrieben ist, muß man auf die fertige Grafik manchmal bis zu 8 (acht!) Stunden warten, da ja für 32 000 Punkte bis zu 250 mal quadriert, subtrahiert und verglichen wird.</p>

            <figcaption>Bild 1. Die mathematischen Grundlagen</figcaption>
        </figure>

        <p class="intro">Man glaubt es kaum, was man aus dem C 64 herausholen kann. Bestes Beispiel sind diese Grafiken, die Sie natürlich auch selbst erstellen können. Das Programm dazu finden Sie in dieser Ausgabe.</p>

        <figure>
            <img src="169-1.png" alt="">
            <figcaption>Bild 1. Die Urform aller Apfelmännchen</figcaption>
        </figure>
        <figure>
            <img src="169-2.png" alt="">
            <figcaption>Bild 2. Das ist keine Verkleinerung, sondern ein Ausschnitt aus der Spitze des Apfelmännchens.</figcaption>
        </figure>
        <figure>
            <img src="169-3.png" alt="">
            <figcaption>Bild 3. Ganz rechts, in Bild 2 nur als schwarzer Punkt zu sehen, tritt die Selbstähnlichkeit dieser Grafiken deutlich zu Tage.</figcaption>
        </figure>
        <figure>
            <img src="169-4.png" alt="">
            <figcaption>Bild 4. In einem ganz anderen Bereich am Rand der Ausgangsform findet man spiralförmige Strukturen.</figcaption>
        </figure>
        <figure>
            <img src="169-5.png" alt="">
            <figcaption>Bild 5. Ungefähr fünf Stunden Berechnungszeit sind keine Seltenheit. Probieren Sie doch mal die Werte 0.763; 0.768; 0.0999; 0.103 mit einer Tiefe von 254.</figcaption>
        </figure>
        <figure>
            <img src="169-6.png" alt="">
            <figcaption>Bild 6. Farblich abgestimmt kann man die Bilder durchaus als Kunstwerke der Mathematik betrachten.</figcaption>
        </figure>

        <figure>
            <pre data-filename="apfelroutinen.prg" data-name="Apfelmännchen (Maschinenprogramm)" data-mse=mse1></pre>
            <figcaption>Listing 1. Maschinenprogramm zu »Apfelmännchen«. Bitte mit dem MSE eingeben.</figcaption>
        </figure>
        <div class="binary_download" data-filename="apfelroutinen.prg" data-name="Apfelmännchen (Maschinenprogramm)"></div>
        <figure>
            <pre data-filename="apfelmann" data-name="Apfelmännchen (Basic-Teil)"></pre>
            <figcaption>Listing 2. Den Basic-Teil geben Sie mit dem Checksummer ein. Beachten Sie dazu die Hinweise auf Seite 54.</figcaption>
        </figure>

        <figure>
            <pre>TODO</pre>
            <figcaption>Listing 3. Das Source-Code-Listing des Apfelmännchens</figcaption>
        </figure>

        <div class="binary_download" data-filename="apfelmann.pic.prg" data-name="apfelmann.pic"></div>
    </article>
</body>

</html>