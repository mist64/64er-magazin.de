<!DOCTYPE html>
<html lang="de">

<head>
    <title>Mit 4 Baud über den Balkon</title>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="../style.css">
    <meta name="author" content="M. Schneider, D. Schwuchow, kg">
    <meta name="64er.issue" content="10/84">
    <meta name="64er.pages" content="166-171">
    <meta name="64er.head1" content="So machen's andere">
    <meta name="64er.head2" content="C 64">
    <meta name="64er.toc_category" content="So machen's andere">
    <meta name="64er.index_title" content="Mit vier Baud über den Balkon">
    <meta name="64er.index_category" content="So machen’s andere|Lichttelefon">
    <meta name="64er.id" content="balkon">
</head>

<body>
    <article>
        <h1>Mit 4 Baud über den Balkon</h1>

        <p class="intro">Man stelle sich vor: Der Nachbar morst mit einer Taschenlampe und Ihr Computer empfängt die Zeichen. Auf dem Bildschirm zeigt er Ihnen an, was Ihr Nachbar will. Nicht möglich? In Sindelfingen schon. Zwei Computer senden und empfangen Lichtzeichen. Datenfernübertragung von Balkon zu Balkon.</p>

        <figure>
            <img src="166-a.png" alt="">
            <figcaption>Von Balkon zu Balkon. Die Gegenstelle (Pfeil) ist immerhin 200 m entfernt.</figcaption>
        </figure>
        <figure>
            <img src="166-b.png" alt="">
            <figcaption>In Großaufnahme das Empfangsgerät</figcaption>
        </figure>

        <p>Die Nachbarn haben sich inzwischen daran gewöhnt. Immer wenn es dunkel wird, blinken auf zwei Balkons Morsezeichen auf. Dann wissen die Anwohner, daß die beiden 19jährigen Freunde Mark Schneider und Dietmar Schwuchow wieder mit ihren Computern spielen.</p>

        <p>Die Computer-Karriere der beiden begann vor zwei Jahren: Wie viele andere auch studierten sie Handbücher, tippten Listings ab, schrieben schließlich eigene Spiele und »Nutzprogramme«. Im Frühjahr brach bei beiden der Spieltrieb durch. »Wir waren es leid, immer getrennt mit unseren Computern zu arbeiten. So kamen wir auf die Idee, sie als Kommunikationsmittel einzusetzen. Ein Kabel oder ein Akustikkoppler war uns jedoch zu langweilig«, erklärten Dietmar und Mark, die beide gerade ihr Abitur erfolgreich hinter sich gebracht haben.</p>

        <p>Die Freunde wohnen so nah beieinander, daß sie sich vom Balkon aus zuwinken können. Daher erschien es ihnen am einfachsten, Lichtimpulse für die Datenübertragung zu nutzen. Schnell einigten sich die Elektronik-Fans über diesen Weg. »Klar wußten wir von ersten Moment an, daß wir damit keine professionelle Datenfernübertragung machen können. Was uns reizt, ist vielmehr das Basteln und Spielen. Unter diesem Vorzeichen sehen wir auch unser selbstgebautes Lichttelefon«. Für Mark und Dietmar zählt das Außergewöhnliche ihrer Sende- und Empfangseinrichtung mehr als ein tatsächlicher Nutzen.</p>

        <p>Vier Monate brauchten sie, um die Idee in die Tat umzusetzen. Jetzt spielen sie zusammen »Schiffchen versenken« — jeder an seinem Computer. Der übernimmt mittlerweile »artig« die Ver- und Entschlüsselung der Daten sowie das »Morsen« bei der Übertragung. Vier Bit huschen in jeder Sekunde von Balkon zu Balkon und übermitteln die Züge an den jeweils anderen Computer.</p>

        <p>Zunächst machten sich die Computer-Freaks über die Hardware her. Die beiden Computer, ein C 64 und ein Sinclair ZX Spectrum, mußten durch entsprechende Elektronik mitje einer Lampe als Sender und einem Fotowiderstand als Empfänger verbunden werden.</p>

        <figure>
            <img src="166-c.png" alt="">
            <figcaption>Die beiden Elektronikbastler</figcaption>
        </figure>

        <h2>Ins Innenteben des Computers wurde nicht eingegriffen</h2>

        <p>Da Mark und Dietmar nicht unbedingt in das Innenleben der Computer eingreifen wollten, nutzten sie die vorhandenen Anschlüsse. Der Tonausgang dient zum Ansteuern der Lampe: beim C 64 ist dies der Audio-Ausgang und beim ZX Spectrum der Recorderanschluß. Den Signalempfang übernimmt der jeweilige Joystick-Port.</p>

        <p>Es war von vornherein vorgesehen, nur bei Dunkelheit zu übertragen. Trotzdem — die erste Schaltung erwies sich bei den Testläufen als zu unempfindlich. Mit einer verbesserten Elektronik war dieses Problem schnell gelöst.</p>

        <p>Nachdem sich die beiden Freunde auf einen gemeinsamen Code geeinigt hatten, kam der große Moment: der erste richtige Übertragungsversuch. Jedem Bustaben wurde ein Fünf-Bit-Code zugeordnet. Es handelte sich um eine serielle Übermittlung, wobei die Lampe bei gesetztem Bit kurz aufblinkte. Das Senden begann mit einem Synchronisationssignal, um damit den empfangenden Computer auf den Übertragungstakt einzustellen. Da Basic für diese Zwecke nicht präzise genug arbeitet, kamen Mark und Dietmar auf die Idee, den internen Zeitzähler zu nutzen. Es funktionierte, die Daten wurden im Sekundenrhythmus übertragen — jede Sekunde ein Bit.</p>

        <p>Ganz zufrieden waren die Elektronik-Tüfftler noch nicht. Bei mehr als 20 Zeichen gab es noch Ungenauigkeiten in der Übertragung. Außerdem war ein Baud (Bit pro Sekunde) doch ein bißchen zu langsam. Fazit: Die Software wurde umgeschrieben, so daß die Geschwindigkeit jetzt vier Baud beträgt. Auch bei größeren Datenmengen fällt nur selten ein gesendetes Bit über den Balkon — die Information kommt zuverlässig beim anderen an.</p>

        <figure>
            <img src="166-d.png" alt="">
            <figcaption>So sieht die Hardware aus</figcaption>
        </figure>

        <p>Derzeit arbeiten Mark und Dietmar an der nächsten Verbesserung ihrer Datenfernübertragung. Die Auswertung von zwischengespeicherten Daten ist momentan erst möglich, nachdem alle Bits im Computer angekommen sind. Geplant ist ein Maschinenprogramm, das die empfangenen Zeichen sofort decodiert und ausdruckt. Die Lust am Basteln hält weiter an. Das nächste Projekt — ein Plotter aus Fischer-Technik-Bauteilen — steht kurz vor der Vollendung. Aber auch den »Ernst des Lebens« will sich — zumindest Mark — mit Computern versüßen. Bereits am Gymnasium hat er Lehrer »gespielt«. Jetzt versucht er, sein Computer-Wissen in der Volkshochschule »loszuwerden«.</p>

        <address class="author">(M. Schneider/D. Schwuchow/kg)</address>

        <h2>Ablauf der Datenübertragung</h2>

        <p>Die Datenübermittlung beginnt wie es sich gehört: Der Sender »klingelt« zunächst beim Empfänger. Dazu setzt er ein Blinksignal von % Hz, das bedeutet 2 Sekunden Licht an, 2 Sekunden aus und so weiter. Der Empfänger muß seine Bereitschaft signalisieren. Kennzeichen: einmal 4 Sekunden lang aufblinken. Wird dieses sogenannte Bereitschaftssignal erkannt, schaltet der vorher blinkende Computer auf Texteingabe um und beginnt zu senden. Der »angeklingelte« Computer stellt nach dem Abschicken des Bereitschaftssignals sofort auf Empfang um. Damit ist die Richtung der Informationsübermittlung festgelegt. Sie wechselt jetzt regelmäßig ohne vorheriges »Klingeln«.</p>

        <p>Jeder Sendevorgang beginnt mit einem Synchronisationssignal — einem Aufblinken von 3 Sekunden Dauer. Eine Sekunde später folgen die Kontrollbytes: Zweimal fünf Bit im Viertelsekundenrhythmus. Damit wird dem empfangenden Computer mitgeteilt, wieviele Zeichen die Nachricht beinhaltet und wie oft demnach die Empfangsschleife durchlaufen werden muß, bevor er decodieren darf. Das Synchronisationssignal dauert drei Sekunden, dann folgt eine Sekunde lang Sendepause. Erst jetzt wird die eigentliche Nachricht geschickt, ebenfalls im Viertelsekundentakt.</p>

        <p>Die Übertragungsrichtung wechselt am Ende der Mitteilung automatisch und der vorherige Empfänger startet seinen Sendevorgang mit dem Synchronisationssignal.</p>

        <p>Wie kann der Empfänger dem Sender mitteilen, daß er nur »Schrott« mitbekommt, wenn die Übertragung immer nur auf eine Richtung festgelegt ist? Dafür gibt es eine Maschinen-Code-Routine.</p>

        <p>Falls der Empfänger während der Übertragung einen Fehler feststellt, so drückt er einfach eine Error-Taste, beim C 64 ist dies die obere linke Pfeiltaste. Damit schaltet er seinen Computer auf »Texteingabe«, was bedeutet, er kann jetzt senden und dem anderen mitteilen, daß etwas falsch angekommen ist. Das</p>

        <p>Synchronisationssignal dauert dann — zur Unterscheidung von normaler, fehlerfreier Übermittlung — allerdings 10 Sekunden. Obwohl der andere Computer in dem Moment noch eifrig weitersendet (er hat ja keine Ahnung, daß etwas nicht richtig rüberkommt) erkennt er ein Dauersignal von mehr als 5 Sekunden. Nach der Warnung schaltet er auf Empfang, um die Fehlermeldung des anderen aufzunehmen.</p>

        <h2>Hardwarebeschreibung</h2>

        <p>Computer und ein Teil der Elektronik sind im Zimmer untergebracht — der Rest des sogenannten Lichttelefons steckt in einem Sende- und Empfangskästchen auf dem Balkon. Bild 3 zeigt, was drinnen und was draußen steht.</p>

        <figure>
            <img src="166-3.png" alt="">
            <figcaption>Bild 3. Die Verbindung zwischen drinnen und draußen</figcaption>
        </figure>

        <p>Mark und Dietmar müssen bei der Datenübertragung eine Strecke von etwa 200 m überwinden. Das erfordert ein relativ intensives Lichtsignal, damit die Information überhaupt beim anderen ankommt. Eine 12V/10W-Lampe erbringt die notwendige Leistung.</p>

        <p>Als Spannungsquelle für die Lampe dient ein ausrangierter (Rennbahn-)Trafo. Die 12V des Trafos sind außerdem mit einem Spannungsregler des Typs 7805 verbunden, der für eine konstante 5V-Spannung der zusätzlichen Hardware sorgt (Bild 1).</p>

        <figure>
            <img src="166-1.png" alt="">
            <figcaption>Bild 1. Spannungsversorgung 5 V DC (Gleichstrom)</figcaption>
        </figure>

        <p>Die Sende- und Empfangskästchen sind mit Schirmklemmen am Balkongeländer befestigt. Nimmt man den Regenschutz — aus Pappe und aufgeklebter Aluminiumfolie — ab, so wird ein quaderförmige Holzgehäuse von 7 x 7 x 12 cm frei. In die Vorderwand wurde ein Loch für die Linse gesägt, die wiederum fest in einem Papprohr sitzt. Das Sendeelement (Lampe) und Empfangsteil, der lichtempfindliche Widerstand (LDR), müssen im Brennpunkt der Linse sein. Da diese fest eingebaut ist, wird eine genaue Einstellung nur durch Verschieben der Platine erreicht, auf die die Bauteile gelötet sind (Bild 6).</p>

        <figure>
            <img src="166-6.png" alt="">
            <figcaption>Bild 6. Aufbau des Sende- und Empfangskästchens</figcaption>
        </figure>

        <p>Die Kästchen auf dem Balkon sind über ein vierpoliges abgeschirmtes Kabel mit der Elektronik im Zimmer verbunden. Das Ende des Kabels bildet ein DIN-Stecker, mit der in Bild 2 dargestellten Stiftbelegung.</p>

        <figure>
            <img src="166-2.png" alt="">
            1: GND (Ground-Masse)<br>
            2: L+ (12 V)<br>
            3: Signal von LDR<br>
            4: +5 V<br>
            5: Testsignal für LED
            <figcaption>Bild 2. Pinbelegung des DIN-Steckers</figcaption>
        </figure>

        <p>Das Senden funktioniert nach einem einfachen Prinzip: Beim Morsen wird für logisch »1« am Audioausgang des Computers ein Tonsignal abgegeben, das durch die Schaltung (Bild 4) verstärkt und digitalisiert wird. Als Folge davon schließt das Relais und die Lampe im Sendekästchen leuchtet auf.</p>

        <figure>
            <img src="166-4.png" alt="">
            <figcaption>Bild 4. C 64 Sende-Block</figcaption>
        </figure>

        <p>Beim Empfangen (Bild 5) vergleicht der Operationsverstärker (OP3) die Signale von beiden Spannungsteilern, die durch den lichtempfindlichen Widerstand (LDR) mit dem 100 KOhm-Widerstand und dem Regler 47 KOhm gebildet werden. Dieser Verstärker ist auch für die hohe Empfindlichkeit verantwortlich. Die nachfolgende Schaltung ist für langsame Helligkeitsschwankungen unempfindlich. Lediglich bei Lichteinfall setzt sie ein Flipflop und nimmt es bei Dunkelheit zurück. Dieses Flipflop steuert das Relais für den Joystick-Eingang an. Darüber hinaus bietet es eine doppelte Kontrolle beim Empfang: sowohl auf dem Balkon beim Einstellen der Kästchen über die LED als auch im Zimmer durch den BEEP.</p>

        <figure>
            <img src="166-5.png" alt="">
            <figcaption>Bild 5. C 64 Empfangs-Block</figcaption>
        </figure>

        <figure>
            <table>
                <tbody>
                    <tr>
                        <td>Code</td>
                        <td>Tafel 1</td>
                        <td>Tafel 2</td>
                    </tr>
                    <tr>
                        <td>11111</td>
                        <td>Space</td>
                        <td>0</td>
                    </tr>
                    <tr>
                        <td>00001</td>
                        <td>A</td>
                        <td>1</td>
                    </tr>
                    <tr>
                        <td>00010</td>
                        <td>B</td>
                        <td>2</td>
                    </tr>
                    <tr>
                        <td>00011</td>
                        <td>C</td>
                        <td>3</td>
                    </tr>
                    <tr>
                        <td>00100</td>
                        <td>D</td>
                        <td>4</td>
                    </tr>
                    <tr>
                        <td>00101</td>
                        <td>E</td>
                        <td>5</td>
                    </tr>
                    <tr>
                        <td>00110</td>
                        <td>F</td>
                        <td>6</td>
                    </tr>
                    <tr>
                        <td>00111</td>
                        <td>G</td>
                        <td>7</td>
                    </tr>
                    <tr>
                        <td>01000</td>
                        <td>H</td>
                        <td>8</td>
                    </tr>
                    <tr>
                        <td>01001</td>
                        <td>I</td>
                        <td>9</td>
                    </tr>
                    <tr>
                        <td>01010</td>
                        <td>J</td>
                        <td>(</td>
                    </tr>
                    <tr>
                        <td>01011</td>
                        <td>K</td>
                        <td>)</td>
                    </tr>
                    <tr>
                        <td>01100</td>
                        <td>L</td>
                        <td>.</td>
                    </tr>
                    <tr>
                        <td>01101</td>
                        <td>M</td>
                        <td>&amp;</td>
                    </tr>
                    <tr>
                        <td>01110</td>
                        <td>N</td>
                        <td>+</td>
                    </tr>
                    <tr>
                        <td>01111</td>
                        <td>O</td>
                        <td>—</td>
                    </tr>
                    <tr>
                        <td>10000</td>
                        <td>P</td>
                        <td>*</td>
                    </tr>
                    <tr>
                        <td>10001</td>
                        <td>Q</td>
                        <td>/</td>
                    </tr>
                    <tr>
                        <td>10010</td>
                        <td>R</td>
                        <td>.</td>
                    </tr>
                    <tr>
                        <td>10011</td>
                        <td>S</td>
                        <td>,</td>
                    </tr>
                    <tr>
                        <td>10100</td>
                        <td>T</td>
                        <td>:</td>
                    </tr>
                    <tr>
                        <td>10101</td>
                        <td>U</td>
                        <td>;</td>
                    </tr>
                    <tr>
                        <td>10110</td>
                        <td>V</td>
                        <td>&gt;</td>
                    </tr>
                    <tr>
                        <td>10111</td>
                        <td>W</td>
                        <td>&lt;</td>
                    </tr>
                    <tr>
                        <td>11000</td>
                        <td>X</td>
                        <td><sub>=</sub></td>
                    </tr>
                    <tr>
                        <td>11001</td>
                        <td>Y</td>
                        <td>?</td>
                    </tr>
                    <tr>
                        <td>11010</td>
                        <td>Z</td>
                        <td>!</td>
                    </tr>
                    <tr>
                        <td>11011</td>
                        <td>Tafel 2</td>
                        <td>—</td>
                    </tr>
                    <tr>
                        <td>11100</td>
                        <td>—</td>
                        <td>—</td>
                    </tr>
                    <tr>
                        <td>11101</td>
                        <td>—</td>
                        <td>—</td>
                    </tr>
                    <tr>
                        <td>11110</td>
                        <td>—</td>
                        <td>—</td>
                    </tr>
                </tbody>
            </table>

            <figcaption>Die Zeichen aus Tafel 2 werden als Zwei-Byte-Code verschlüsselt. Das Byte »11011« dient als »Schaltbyte« zu dieser Tafel. Die Zeichen »Komma« und »Doppelpunkt« werden aus eingabetechnischen Gründen als »■« beziehungsweise als »[« eingegeben.</figcaption>
        </figure>

        <figure>
            <table>
                <tbody>
                    <tr>
                        <td>Zeilen 6-31</td>
                        <td>Allgemeine Vorbereitungen<br>
                            Einlesen der MC-Daten, Setzen der Tonregister
                        </td>
                    </tr>
                    <tr>
                        <td>40-42</td>
                        <td>Speicherstelle 828 wird auf ihren Inhalt abgefragt. Daraufhin wird entsprechend zu »Empfang« oder »Senden« verzweigt. Diese Konstruktion entstand aus dem Wunsch, alle gesetzten Variablen durch »RUN« zu löschen und nicht einzeln.</td>
                    </tr>
                    <tr>
                        <td>100-115</td>
                        <td>Hauptmenü</td>
                    </tr>
                    <tr>
                        <td>300-340</td>
                        <td>Zunächst werden hier die beiden Kontrollbyte, die dem Empfänger die Länge der Nachricht angeben, empfangen. Dies ist nötig, da das eigentliche Empfangsprogramm die empfangenen Bits nur zwischenspeichert und somit kein Endsignal erkennen kann.</td>
                    </tr>
                    <tr>
                        <td>400-483</td>
                        <td>Decodierung der beim Empfang ab Speicherstelle 38000 zwischengespeicherten Bits sowie Textausgabe</td>
                    </tr>
                    <tr>
                        <td>500-650</td>
                        <td>Empfangsschleife</td>
                    </tr>
                    <tr>
                        <td>10000-10140</td>
                        <td>Texteingabe und anschließende Codierung<br>
                            Zwischenspeicherung der Bits vor der Sendung
                        </td>
                    </tr>
                    <tr>
                        <td>10200-10300</td>
                        <td>Bildung der Kontrollbyte</td>
                    </tr>
                    <tr>
                        <td>12000-12330</td>
                        <td>Senden der Kontrollbyte</td>
                    </tr>
                    <tr>
                        <td>12400-12650</td>
                        <td>Sendeschleife</td>
                    </tr>
                    <tr>
                        <td>14000-14034</td>
                        <td>Empfangsbereitschaft melden</td>
                    </tr>
                    <tr>
                        <td>20000-20120</td>
                        <td>»Klingeln«</td>
                    </tr>
                    <tr>
                        <td>21000-21010</td>
                        <td>MC-Daten</td>
                    </tr>
                </tbody>
            </table>
            <figcaption>Erläuterungen zum Lichttelefon-Listing:</figcaption>
        </figure>

        <figure>
            <pre data-filename="licht-tele(4baud" data-name="Lichttelefon"></pre>
            <figcaption>Listing »Lichttelefon«</figcaption>
        </figure>

    </article>

</body>

</html>
