<!DOCTYPE html>
<html lang="de">

<head>
    <title>SMU – Der Maskengenerator</title>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="../style.css">
    <meta name="author" content="Georg Krcal, ah">
    <meta name="64er.issue" content="12/85">
    <meta name="64er.pages" content="50,63-66,68-69,71-75">
    <meta name="64er.head1" content="Listing des Monats">
    <meta name="64er.head2" content="C 64">
    <meta name="64er.toc_title" content="<b>Listing des Monats: SMU – Der Maskengenerator</b>">
    <meta name="64er.toc_category" content="Wettbewerbe">
    <!-- <meta name="64er.toc_category" content="Listings zum Abtippen"> -->
    <meta name="64er.index_title" content="SMU – Der Maskengenerator (LdM)">
    <meta name="64er.index_category" content="Listings zum Abtippen|Datei">
    <meta name="64er.id" content="smu">
</head>

<body>
    <article>
        <h1>SMU – Der Maskengenerator</h1>
        <p class="intro">Programmieren Sie gerne Datenverarbeitungsprogramme? Dann braucnen Sie diese Erweiterung. Mit ihr können Bildschirmmasken mit numerischen und alphanumerischen Feldern erstellt und anschließend in eigene Basic-Programme eingebunden werden.</p>

        <figure>
            <img src="50-1.png" alt="">
            <figcaption>Eine Maske wird definiert</figcaption>
        </figure>
        <figure>
            <img src="50-2.png" alt="">
            <figcaption>So sieht die Maske in Aktion aus (Demoprogramm LIT.VERW.)</figcaption>
        </figure>

        <p>Das Programmpaket »SMU« (Screen Management Utility) dient zur Erstellung von Bildschirmmasken und deren einfache Handhabung durch ein erweitertes Basic.</p>

        <p>Angelehnt an professionelle Bildschirm-Maskengeneratoren kann auf einfache Weise eine Bildschirmmaske erstellt und auf Diskette gespeichert werden. Wenn Sie jetzt denken, schon wieder ein Maskengenerator, dann haben Sie weit gefehlt. Dieser Maskengenerator erstellt nicht stur eine Maske durch Erzeugen von PRINT-Zeilen, wie es andere Maskengeneratoren machen, sondern es lassen sich natürlich zusammen mit der Maske numerische und alphanumerische Felder definieren. Mit der Basic-Erweiterung können die so erstellten Masken in eigene Programme eingebunden werden. Der Vorteil dieses Programms liegt auf der Hand. Es ist nicht mehr erforderlich, sich über die Programmierung von Eingabefeldern und Masken in selbstgeschriebenen Dateiverwaltungsprogrammen Gedanken zu machen. Die Programmierung übernimmt ab jetzt der Maskengenerator. Sie müssen sich nur noch überlegen, wo die Eingabefelder stehen und wie sie aussehen sollen. Das Erstellen der Masken ist denkbar einfach. Wird der Maskengenerator »SMU« geladen und mit dem Basic-Befehl RUN gestartet, muß man sich zuerst entscheiden, ob eine neue Maske erstellt oder eine alte bearbeitet werden soll. Hat man sich für das Erstellen einer neuen Maske entschieden, wird der Bildschirm gelöscht und ein Cursor erscheint. Wie gewohnt, läßt sich dieser Cursor mit den entsprechenden Steuertasten auf dem Bildschirm bewegen. Überall dort, wo ein Eingabefeld definiert werden soll, dient das »!«-Zeichen als Platzhalter für alphanumerische und das »# «-Zeichen als Platzhalter für numerische Zeichen. Aber Vorsicht; diese beiden Zeichen dürfen im erklärenden Text nicht erscheinen. Um später die Länge des Eingabefeldes zu erkennen, empfiehlt es sich, den Anfang und das Ende mit einem beliebigen Zeichen zu markieren. Ist die Maske erstellt, kann sie durch zweimaliges Drücken der »F1«-Taste auf einem zuvor bestimmten Gerät gespeichert werden. Mit der Basic-Erweiterung »SMUBU« läßt sich die so erstellte und gespeicherte Maske in eigene Basic-Programme einbinden. Ein Demoprogramm (LIT.VERW.) zeigt, wie einfach und dennoch effizient die Handhabung solcher Masken sein kann.</p>

        <address class="author">(Georg Krcal/ah)</address>

        <aside>
            <h2>Lebenslauf</h2>

            <p>Am 3.2.1965 in Wien geboren, kam ich erst während meiner Ausbildung zum Chemiker mit der Computerei (soweit man diesen Anfang so nennen kann) in Berührung. Wie alles einmal klein und zaghaft beginnt, so auch meine Programmierkünste. Diesen bescheidenen Anfang machte ein programmierbarer UPN-Taschenrechner mit 49 Programmierschritten. Allerdings lernte ich bald darauf Basic im Selbststudium, frei nach dem Motto: Probieren geht über studieren. Meine Basic-Kenntnisse konnte ich bei einem Bekannten an einem Commodore 8032 vertiefen. Kurze Zeit später entstand auf einem P2000-Computer ein Textverarbeitungsprogramm.</p>

            <p>1983 entschloß ich mich dann zum Kauf eines C 64. Vom langsamen Basic wenig angetan, wurde fortan in Maschinensprache programmiert. Die Konfrontation mit bildschirmgesteuerten Programmen weckte in mir den Wunsch, ähnliche Möglichkeiten auf dem C 64 zu realisieren, zumal der bedienungsunfreundliche INPUT-Befehl des Basic-Interpreters häufig mehr Schaden anrichtet als er nutzt. Wer hat es schon gern, wenn seine mühsam generierten Bildschirm-Layouts durch ein versehentliches CLR zerstört werden oder der Interpreter nach einer vermeintlich richtigen Eingabe »extra ignored« meldet? Ein Maskengenerator und entsprechende Funktionen waren also notwendig. Aber wo beginnen? Schützenhilfe gab es kaum. Die meisten Anwender waren gerade noch dabei, die Grafikfähigkeiten zu erkunden und Soundeffekte zu programmieren. Auf Fragen, wie der Computer String-Arrays anlegt, wußte ich keine Antwort. Diese Unwissenheit war jedoch kein Hindernis, die 2,5 KByte große Befehlserweiterung (SMUBU), an der ich etwa ein halbes Jahr gearbeitet habe, zu entwickeln. Hoffentlich macht SMU, wie ich meinen Maskengenerator getauft habe, all jenen Freude, die mit dem C 64 nicht nur spielen, sondern ihn auch sinnvoll einsetzen wollen.</p>

            <address class="author">(Georg Krcal)</address>
        </aside>

        <p class="intro">»Screen Management Utility« dient zur professionellen Erstellung von Bildschirmmasken unter Berücksichtigung von alphanumerischen und numerischen Feldern. Diese Masken lassen sich durch ein erweitertes Basic in eigene Programme einbinden.</p>

        <p>SMU (Listing 1) ist für alle jene verwendbar, die ihren Basic-Programmen einen professionellen Anstrich geben möchten. SMU zielt auf die Verwaltung von Bildschirmmasken ab, wie sie auch bei kommerziellen Programmen verwendet werden. Mit SMU können Bildschirmmasken auf einfachem Wege erstellt und anschließend mit Basic-Befehlen verwaltet werden. SMU besteht aus drei Programmteilen dem Maskengenerator »SMU« (Listing 1), einem Maschinenprogramm (Listing 2) und einer Befehlserweiterung »SMUBU« (Listing 3). Sind alle drei Programme abgetippt, wird der Maskengenerator mit LOAD "SMU",8 geladen und mit RUN gestartet. Die Maschinenprogramme werden automatisch nachgeladen. Zunächst einige Worte zu dem Prinzip einer Bildschirmmaske. Eine Bildschirmmaske ist aus Feldern und Informationsbegriffen aufgebaut. Wem das zu wenig anschaulich ist, der kann eine Bildschirmmaske (kurz Maske) mit einem unausgefüllten Formular vergleichen. Der Informationsbegriff (IB) wäre dabei der Teil, der dem Ausfüllenden erklärt, was auszufüllen ist; das Feld, der Freiraum hinter der Angabebezeichnung. Somit ergibt sich, daß die Informationsbegriffe Literale sind, die mit der Maske immer ausgegeben werden. Die Felder einer Maske vermögen nun Informationen aufzunehmen, die entweder vom Bediener oder vom Programm kommen. Im ersten Fall füllt der Bediener die Maske aus, die Feldinhalte werden anschließend Variablen zugewiesen, im zweiten Fall werden Variableninhalte in die Felder übertragen.</p>

        <p>Die Art und Weise, wie ein Bediener solch eine Maske ausfüllt, läßt sich in zwei Gruppen unterteilen:</p>

        <ol>
            <li>Die Zwangseingabe; der Benutzer muß die Felder so ausfüllen, wie das Programm es vorschreibt.</li>
            <li>Die wahlfreie Eingabe; der Benutzer trifft selbst die Wahl, welches Feld er ausfüllt.</li>
        </ol>


        <p>Bei SMU wurde eine Verknüpfung beider Methoden gewählt, nach einem ausgefüllten Feld springt der Cursor in das nächste, mit den Funktionstasten kann aber stets ein beliebiges Feld der Maske angesprungen werden, genauere Erklärungen dazu folgen noch.</p>

        <p>Welchen Vorteil bieten nun Masken gegenüber den herkömmlichen Eingabeverfahren (wie zum Beispiel INPUT)? Der Hauptvorteil liegt in der Fehlerkorrektur, die Feldinhalte können vom Benutzer so lange verändert werden, bis alle Eingaben richtig sind. Ein weiterer Pluspunkt ist die feste Länge eines Feldinhaltes, ein alphanumerischer Feldinhalt wird der Stringvariablen mit einer fixen Länge übergeben. Letztlich kann der Bediener keine Gestaltungsversuche am Bildschirm mehr machen, die die meisten CBM-Computer (so auch der C 64) ziemlich oft aus der Fassung bringen (redo from start, extra ignored).</p>

        <h2>Der Maskengenerator</h2>

        <p>Beginnen wir mit der Beschreibung des Maskengenerators und mit der Erstellung einer Bildschirmmaske mit dem Programm SMU.</p>

        <p>Wie bereits erklärt, besteht eine Maske aus Literalen und Feldern, für den Maskengenerator ist alles literal, was nicht Feld ist. Das mag vorerst nicht viel aussagen, aber nachdem festgelegt worden ist, was ein Feld ist, versteht man auch, wie man eine SMU-Maske zu erstellen hat. Der Maskengenerator unterscheidet zwei Feldarten:</p>

        <ol>
            <li>Alphanumerische Felder</li>
            <li>Numerische Felder</li>
        </ol>


        <p>Diese Feldarten werden bei der Erstellung der Maske mit zwei eigens ausgewählten Zeichen gekennzeichnet. Dabei markiert das Rufzeichen (!) ein alphanumerisches Feld, das Channelzeichen (#) das numerische Feld. Überall dort, wo am Bildschirm diese Zeichen stehen, erkennt der Maskengenerator ein Feld. Eine Besonderheit dieses Maskengenerators ist, daß eine Folge mehrerer solcher Zeichen, als ein einziges Feld interpretiert wird. Zum Beispiel istdie Folge »!!!!!« für den Maskengenerator ein einziges alphanumerisches Feld, mit einer Feldlänge von fünf Zeichen. SMU kann bis zu 255 Felder verwalten. Ein Feld darf eine maximale Länge von 255 Zeichen nicht überschreiten. Eine Verknüpfung von einem alphanumerischen Feld und einem numerischen Feld zu einem einzigen Feld ist nicht möglich. So ist die Felddefinitionsfolge »!!!##« lediglich die unmittelbare Folge eines numerischen Feldes auf ein alphanumerisches Feld von drei Zeichen Länge. Eine SMU-Maske umfaßt einen Bildschirm von 23 Zeilen (0 bis 22), die restlichen zwei Zeilen sind während der Maskenerstellung nicht erreichbar und werden vom Maskengenerator auch nicht analysiert. Welche Wirkung haben nun diese Feldmarkierungen? Überall dort, wo bei der Maskenerstellung diese Feldbezeichner gestanden haben, werden später (siehe Maskenaufruf durch den SCREEN-Befehl) Leerzeichen ausgegeben. Hier kann der Benutzer seine Eingaben machen, den Cursor bewegen, Zeichen einfügen oder löschen. Numerische Felder erlauben nur die Eingabe von Zahlen (0 bis 9), Punkt (.), Plus (+), Minus (-) und dem Exponentzeichen (e). Bei einem alphanumerischen Feld sind alle Zeichen (mit Ausnahme von Hochkomma) für die Eingabe zugelassen. Beachtenswert bei den numerischen Feldern ist noch, daß Zahlen, die eine Bereichsüberschreitung des Computers zur Folge haben würden, von SMU zurückgewiesen werden. Das heißt allerdings, daß ein numerisches Feld mit zum Beispiel 255 Zeichen nicht sinnvoll ist, der C 64 kann solch eine große Zahl ja nicht mehr verwalten (unter der Voraussetzung, daß das Feld vollständig ausgefüllt wird).</p>

        <h2>Die Basic-Erweiterung SMUBU</h2>

        <p class="noindent">Zehn neue Befehle sind nach der Initialisierung der Erweiterung SMUBU (Listing 3) mit SYS 9*4096 zugänglich. Vor jedem SMUBU-Befehl steht ein Rufzeichen (!).</p>

        <p class="noindent">Nachdem die Erweiterung mit SYS 9 * 4096 gestartet wurde, stehen die Befehle SETIN, CLEIN, MASK, SCREEN, WMASK, IMASK, IOMASK, -, INLINE und DIER zur Verfügung.</p>

        <h3>! SETIN:</h3>

        <p class="noindent">Dieser Befehl sperrt die Wirkung der Tasten STOP und STOP/RESTORE. Das laufende Basic-Programm kann vom Benutzer nicht mehr unterbrochen werden.</p>

        <h3>! CLEIN:</h3>

        <p class="noindent">Dieser Befehl hebt die Wirkung von SETIN wieder auf.</p>

        <h3>! MASK name,geräteadresse,stringarray(x):</h3>

        <p class="noindent">Damit wird von der Diskette eine Maske geladen und die Daten für die Maske in das Feld ab dem String mit dem Index x gespeichert. Es bedeutet:</p>

        <ul class="plain">
            <li><strong>name</strong>: kann eine Stringvariable sein, die den Namen enthält, oder direkt der Name, eingefaßt in Hochkommata.</li>
            <li><strong>geräteadresse</strong>: ist die Geräteadresse der Floppy (8,9 und so weiter).</li>
            <li><strong>stringarray (x)</strong>: ist ein eindimensionales Feld, x ist der Index, ab dem die Maskendaten im Feld gespeichert werden sollten.
            </li>
        </ul>

        <p class="noindent">Zum Beispiel:
            <code>10 DIM M$(14)
                20 !MASK"MENU",8,M$(0)
            </code>
            Es wird von dem Laufwerk mit der Geräteadresse 8 die Maske mit dem Namen »menu« geladen. Die Maskendaten befinden sich ab M$(0) im Speicher. Die Daten einer Maske benötigen einen Platz von 15 Strings zu je 255 Zeichen, das heißt, daß die Maskendaten im obigen Beispiel in den Speichern M$(0) bis einschließlich M$(14) zu finden sind.
        </p>

        <h3>! SCREEN Stringarray(x):</h3>

        <p class="noindent">Wie bereits angeklungen, wird durch diesen Befehl eine Maske aufgerufen. Dieser Befehl bringt eine Maske auf den Bildschirm. Gleichzeitig werden die Daten der Felder (Position, Länge und Feldart) SMUBU übermittelt, alle weiteren Befehle, die mit einer Maske operieren, greifen darauf zu. Dies ist selbst dann der Fall, wenn der Bildschirm durch CHR$(142) gelöscht worden ist. SMUBU greift bei Maskenoperationen immer auf die Daten der mit SCREEN aufgerufenen Maske zurück.</p>

        <ul class="plain">
            <li><strong>stringarray(x)</strong>: ist ein eindimensionales Stringarray, x ist der Index, ab dem die Daten einer SMU-Maske gespeichert sind.</li>
        </ul>

        <p class="noindent">Zum Beispiel:
            <code>30 !SCREEN M$(0)</code>
            Es würde die im ersten Beispiel geladene Maske auf den Bildschirm geschrieben werden.
        </p>

        <p class="noindent"> Wichtig ist, daß durch x auch wirklich der Beginn der Maske indiziert wird, so hätte»!SCREEN M$(1)« im Beispiel zu einer Fehlermeldung geführt (siehe SMUBU - Fehlermeldungen).</p>

        <h3>! WMASK var1,var2,var3,&hellip;.:</h3>

        <p class="noindent">Dieser Befehl ähnelt dem Basic-Befehl PRINT. Er schreibt allerdings die Inhalte der Variablen (String und Zahlenvariable) in die Felder der Maske. Zuvor werden die Felder der Maske gelöscht. Bei WMASK ist zu beachten:</p>

        <ol>
            <li>Die Übergabe der Variableninhalte an die Felder erfolgt sequentiell, das heißt 1. Variable nach Feld1, 2. Variable nach Feld2, und so weiter.</li>
            <li>Es dürfen Zahlenvariable nur numerischen Feldern, Strings nur alphanumerischen Feldern zugeordnet werden. Ist dies nicht der Fall, folgt die Fehlermeldung: type mismatch error.</li>
            <li>Leerstrings bewirken keine Ausgabe, Zahlenvariable ohne Inhalt die Ausgabe von 0.</li>
            <li>Zahlen werden linksbündig ausgegeben.</li>
            <li>Überschreitet die Länge einer Variablen (Zahl, String) die Feldlänge, wird nur bis zum Feldende ausgegeben.</li>
            <li>Der Befehl WMASK fordert eine Variablenliste (analog dem Basic-Befehl INPUT), Stringoperationen und dergleichen sind nicht zulässig.</li>
        </ol>

        <p class="noindent">var1,var2,var3&hellip;stellt die Variablenliste dar.</p>

        <h3>! IMASK übergabe,var1,var2,var3,&hellip;.</h3>

        <p class="noindent">Dieser Befehl veranlaßt die Eingabe von der Maske, die zuletzt mit dem SCREEN-Befehl auf den Schirm geschrieben wurde. Es werden alle Felder der Maske gelöscht und der Cursoraufdaserste Zeichendes ersten Feldesgesetzt. Jetzt kann der Bediener die einzelnen Felder der Maske ausfüllen.</p>

        <p>Die Cursortasten, INST, DEL, CLR, HOME und RETURN wirken nur auf die Felder der aktuellen Maske.</p>

        <p class="noindent">Die Sondertasten (F1 bis F8) haben eine Übergabefunktion, ähnlich dem RETURN im herkömmlichen INPUT-Befehl. Durch das Drücken einer dieser acht Tasten, beendet der Bediener die Maskeneingabe. Welche dieser Tasten wirksam werden darf, legt der Programmierer in</p>

        <ul class="plain">
            <li><strong>Übergabe</strong> fest. Übergabe ist ein String oder eine Zeichenkette eingeschlossen in Hochkomma, die nur die Zeichenkodes von F1 bis F8 enthalten darf. In diesem String oder mit dieser Zeichenkette legt der Programmierer fest, welche der acht Funktionstasten (F1 &hellip; F8) die Beendigung der Eingabe bewirken können.</li>
            <li><strong>var1,var2,var3,&hellip;.</strong> sind Variable. Sie müssen in der gleichen Reihenfolge wie die Felder der aufgerufenen Maske stehen, es gilt das gleiche, was bereits für WMASK gesagt wurde, nur daß hier die Feldinhalte in die Variablen übertragen werden. Dabei ist zu beachten, daß bei einem alphanumerischen Feld stets die gesamte Feldlänge in die Variable übertragen wird, gleichgültig, wie viele Zeichen der Bediener eingegeben hat. Zum Beispiel umfaßt ein Feld 20 Zeichen, der Bediener trägt aber nur »Peter« ein, dann werden dem String zusätzlich 15 Leerzeichen mitgegeben.</li>
        </ul>

        <p>Mit welcher Taste der Bediener die Maskeneingabe abgeschlossen hat, kann durch Auslesen der Speicherstelle 2 festgestellt werden. Dabei entspricht der Inhalt der Speicherstelle der Tastennummer (1 für F1, 2 für F2, bis 8 für F8).</p>

        <p>Beispiel: Eine Maske habe 2 Felder, ein alphanumerisches Feld mit 20 Zeichen Länge und ein numerisches Feld mit einer Länge von 5 Stellen (letztere Längenangabe ist nur der Vollständigkeit halber). Durch Drücken von F1 und F2 kann der Bediener die Maskeneingabe beenden.
            <code>120 AB$ = CHR$(133) + CHR$(137)
                130 !IMASK AB$,F1$,F2
                140 ON PEEK(2) GOTO 150,160
                150 REM EINGABE MIT F1 ABGESCHLOSSEN
                160 REM EINGABE MIT F2 ABGESCHLOSSEN
            </code>
        </p>

        <p>In diesem Beispiel würde SMUBU das Drücken der Tasten F3 bis F8 ignorieren. Anschließend befindet sich der Feldinhalt von Feld 1 in F1$ und die Zahl von Feld 2 in F2$.</p>

        <h3>!IOMASK übergabe,var1,var2,var3,&hellip;. :</h3>

        <p class="noindent">Dieser Befehl stellt die Verknüpfung von WMASK mit IMASK dar. Zunächst werden die Felder der Maske gelöscht, die Variableninhalte in die Felder übertragen (analog WMASK) und danach der Cursor auf die erste Stelle des ersten Feldes positioniert (wie bei IMASK-Befehl), nun kann der Bediener die Felder verändern. Die Bedeutung von »Übergabe« und »var1,var2,var3,&hellip;.« sind der Erklärung von IMASK zu entnehmen.</p>

        <h3>! ← var1,var2,var3.:</h3>

        <p class="noindent">SMUBU kann 255 Felder verwalten, müßte man aber 255 Variable in einer Kette, in eine einzige Basic-Zeile stopfen, hätte man einige Schwierigkeiten. Eine Basic-Zeile darf beim C 64 ja bekanntlich nur 255 Zeichen (Token und Zeichen) beinhalten. Das daraus entstehende Dilemma umgeht dieser Befehl. Er setzt die Variablenliste fort, die durch den Befehl WMASK, IMASK oder IOMASK begonnen wurde. Allerdings muß bei der vorhergehenden Liste ein Verweis auf diesen Befehl vorhanden sein. Dieser Verweis ist der Pfeil nach links hinter einem Komma, anstelle einer Variablen. Es muß aber mindestens eine Variable vor einem solchen Verweis vorhanden sein. In der nächsten Basic-Zeile muß nun der obige Befehl stehen, dieser darf ebenfalls einen Verweis besitzen.</p>

        <p class="noindent">Das Beispiel aus der Erklärung für IMASK könnte daher auch so aussehen:
            <code>130 !IMASK AB$,F1$,←
                135 !← F2
            </code>
            Wichtig ist auch noch, daß der Verweis wie ein REM-Befehl gehandhabt wird. Alle folgenden Befehle innerhalb der Zeile werden ignoriert.
        </p>

        <h3>! INLINE zeile,spalte,zeichen,string :</h3>

        <p class="noindent">Dieser Befehl ermöglicht es, den Cursor an eine beliebige Position zu setzen. Ab dieser Position wird eine Eingabe erwartet. Es bedeutet:</p>

        <ul class="plain">
            <li><strong>zeile</strong>: die Zeilenangabe (0 bis 24), in einer Variablen oder als Festwert.</li>
            <li><strong>spalte</strong>: die Spaltenangabe (0 bis 39). Als Variable oder als Festwert.</li>
            <li><strong>zeichen</strong>: die Anzahl der Zeichen, die eingegeben werden dürfen (0 bis 255). Als Variable oder als Festwert.</li>
            <li><strong>string</strong>: eine Stringvariable, der die Eingabe übermittelt wird, sie hat danach die Länge »zeichen«.</li>
        </ul>

        <p>Die Eingabe ist hier nicht so komfortabel, wie beim herkömmlichen INPUT-Befehl. DEL löscht das letzte Zeichen. Hochkommata und alle Funktionstasten (außer RETURN) werden ignoriert. Mit RETURN wird die Eingabe abgeschlossen.</p>

        <h3>! DIER fehlernummer,fehlermeldung,tracknummer, sektornummer:</h3>

        <p class="noindent">Mit diesem Befehl wird vom Laufwerk mit der Geräteadresse 8 eine eventuelle Fehlermeldung eingelesen.</p>

        <ul class="plain">
            <li><strong>fehlernummer</strong>: ist eine Variable, der die Fehlernummer zugewiesen wird.</li>
            <li><strong>fehlermeldung</strong>: ist ein String, dem die Fehlermeldung im Klartext zugewiesen wird.</li>
            <li><strong>tracknummer</strong> und <strong>sektornummer</strong>: sind Variable, denen die Tracknummer und die Sektornummer in dem der Fehler aufgetaucht ist, zugewiesen werden.</li>
        </ul>

        <h2>Das Basic-Programm SMU</h2>

        <p>Nach der Erklärung der einzelnen Befehle von SMUBU, soll noch auf die Arbeitsweise mit SMU eingegangen werden. Nach dem Programmstart erscheint eine Menüzeile:
            <code>MA-ALT MA-NEU UTILITY DRUCKEN ENDE</code>
            Durch Drücken von »j« wird der in Inversschrift dargestellt Programmteil ausgewählt. RETURN bewegt die Inversschrift weiter.
        </p>

        <p class="noindent">Es bedeutet:</p>

        <ul class="plain">
            <li><strong>MA - ALT</strong>: Laden einer Maske und deren Veränderung.</li>
            <li><strong>MA - NEU</strong>: Erstellen einer neuen Maske.</li>
            <li><strong>UTILITY</strong>: Bereitstellen von SMUBU auf der Diskette zum Nachladen.</li>
            <li><strong>DRUCKEN</strong>: Laden einer Maske und ausdrucken.</li>
            <li><strong>ENDE</strong>: SMU beenden.</li>
        </ul>

        <h3>MA - NEU</h3>

        <p class="noindent">SMU fragt nach dem Maskennamen und der Geräteadresse. Danach wird der Bildschirm gelöscht und die Maske kann entworfen werden. Dabei wird mit »!« ein alphanumerisches und mit «#« ein numerisches Feld festgelegt. Der Maskengenerator faßt jedes Zeichen, das von den beiden Zeichen unterschiedlich ist, als eine Feldbegrenzung beziehungsweise als ein Literal auf.</p>

        <p>
        <p>Vorsicht! Die Tasten DEL und INST wirken nicht mehr wie gewohnt!</p>

        <ul class="plain">
            <li><strong>DEL</strong>: löscht die Zeile in der sich der Cursor befindet und zieht alle anderen Zeilen nach.</li>
            <li><strong>INST</strong>: fügt eine Zeile ab der Cursorposition ein und schiebt die restlichen Zeilen nach unten.</li>
        </ul>

        <p class="noindent">Durch Drücken von F1 beginnt der Maskengenerator seine Analyse und schreibt die Maskendaten auf Diskette. Es erfolgt die Rückkehr ins Menü.</p>

        <h3>MA - ALT</h3>

        <p class="noindent">SMU fragt den alten Maskennamen ab und setzt wie in »MA - NEU« beschrieben fort. Allerdings wird die geladene Maske auf den Bildschirm gebracht und der Schirm nicht gelöscht.</p>

        <h3>UTILITY:</h3>

        <p class="noindent">Es wird unter dem Namen »SMUBU« ein Lader auf Diskette erzeugt.</p>

        <h3>DRUCKER</h3>

        <p class="noindent">lädt die mit Namen spezifizierte Maske und druckt sie aus. Die Geräteadressen sind auf einen GP100 von Seikosha zugeschnitten, sie können durch Veränderung der Parameter in Zeile 730 leicht verändert werden.</p>

        <h2>Fehlermeldung von SMUBU</h2>

        <p>Fehler werden immer gemacht, SMUBU enthält einige Fehlermeldungen, die dem Programmierer bei der Korrektur auf die Sprünge helfen sollen:</p>

        <ul class="plain">
            <li><strong>not smu file:</strong><br>
                Es wurde versucht eine Maske mit MASK von der Diskette zu laden, die nicht SMU-Format besitzt. Dieser Fehler tritt auch auf, wenn das File nicht gefunden wurde oder eine andere Fileart als ein sequentielles File ahgesprochen wurde.
            </li>
            <li><strong>not smu data:</strong><br>
                Es wurde versucht mit SCREEN ein Stringarray anzusprechen, das keine SMU-Maskendaten enthält. Meist tritt der Fehler deshalb auf, weil ein falscher Index gewählt wurde.
            </li>
            <li><strong>no smu mask:</strong><br>
                Dieser Fehler kann nur einmal auftreten. Nur dann, wenn noch keine Maske mit SCREEN auf den Schirm gebracht wurde, aber ein Zugriff auf eine Maske mit WMASK, IMASK oder IOMASK versucht wurde.
            </li>
            <li><strong>array not found:</strong><br>
                Es wurde bei den Befehlen MASK oder SCREEN auf ein Feld zugegriffen, das nicht existiert.
            </li>
            <li><strong>transmit error:</strong><br>
                Dieser Fehler tritt bei IMASK oder IOMASK auf, wenn der Übergabestring:
                <ol>
                    <li>nicht vorhanden ist</li>
                    <li>leer ist</li>
                    <li>ein Zeichen enthält, dessen Kode von F1 bis F8 unterschiedlich ist.</li>
                </ol>
            </li>
            <li><strong>missing link command:</strong><br>
                In WMASK, IMASK oder IOMASK wurde ein Verweis auf die Fortsetzung der Variablenliste gegeben, der in der folgenden Zeile nicht erfolgt ist.
            </li>
            <li><strong>illegal position:</strong><br>
                Bei INLINE wurden Zeilen- beziehungsweise Spaltenangaben verwendet, die über den zulässigen Bereich hinausgehen.
            </li>
        </ul>

        <p class="noindent">Ein Fehler, der von SMUBU nicht berücksichtigt wurde: Greift man auf eine Maske (mit WMASK, IMASK oder IOMASK), die keine Felder enthält, zeigt der Interpreter die interessantesten Verhaltensweisen, sofern der Computer nicht gleich abstürzt.</p>

        <h2>Initialisierung und Einsatz</h2>

        <p>Da SMUBU im Speicherbereich ab $9000 abgelegt ist, muß er vor dem Zugriff von Basic her geschützt werden (der Bereich $C000 &hellip; $CFFF wurde bewußt vermieden, damit der Programmierer selbst noch die Möglichkeit hat, andere Maschinenroutinen laufen zu lassen). Der Schutz geschieht am einfachsten dadurch, daß man das Basic-RAM-Ende herabsetzt (POKE 56,144). SMUBU bindet man in seine eigenen Programme am besten folgendermaßen ein: Mit UTILITY erstellt man den Objektcode von SMUBU auf einer geeigneten Diskette. Die ersten Zeilen jedes Programmes in dem SMUBU verwendet werden soll, sehen nun so aus:
            <code>0 IFA=0 THEN POKE 56,144:CLR:A=1LOAD"SMUBU",8,1
                1 CLR:SYS 9*4096:REM INITIALISIEREN VON SMU
            </code>
        </p>

        <p class="noindent">Wo kann man SMUBU nun überall einsetzen? Bei Dateiverwaltungen, Plattenarchiven, Adreßverwaltungen und vielem mehr, kurzum, überall dort, wo viel mit Eingabe und Ausgabe operiert wird, aber lediglich Daten sich verändern.</p>

        <h2>Tips zu SMU</h2>

        <ol>
            <li>Beim Maskenerstellen mit SMU grenzt man die Felder am besten durch Graphikzeichen (zum Beispiel senkrechte Striche) ein. Dadurch sind die Felder beim späteren Aufruf der Maske klar erkennbar.</li>
            <li>Da die Maske nicht den ganzen Bildschirm in Anspruch nimmt, kann in den letzten beiden Zeilen ein Kommentar untergebracht werden, zum Beispiel welche Sondertaste welche Funktion im Programm hat.</li>
            <li>Dadurch, daß man bei MASK und SCREEN selbst bestimmen kann, ab welcher Position die Maskendaten im Array stehen, kann man sich lästiges Nachladen von Masken (falls in einem Programm mit mehreren Masken gleichzeitig gearbeitet werden sollte) ersparen, indem man die Masken hintereinander ablegt.</li>
            <li>SMU überliest Variablen von MASK, IMASK und IOMASK die keinem Feld mehr zugeordnet werden können. Baut man seine Masken geschickt auf, kann man also mit einem WMASK-, IMASK- oder IOMASK-Befehl mehrere Masken abarbeiten.</li>
        </ol>


        <h2>LITVERW. eine Literaturverwaltung</h2>

        <p>LIT.VERW. (Listing 4) ist ein Demoprogramm für eine SMU-Anwendung. Um mit diesem Programm arbeiten zu können, sind folgende Schritte erforderlich:</p>

        <ol>
            <li>Programm »MASKE« (Listing 5) mit dem MSE abtippen und speichern.</li>
            <li>Programm »MASKE« mit LOAD"MASKE",8,1 laden.</li>
            <li>NEW &lt;RETURN&gt; eingeben.</li>
            <li>Listing 6 »SEQ.SAVE« abtippen und mit RUN starten.</li>
        </ol>

        <p class="noindent">Anschließend befindet sich ein sequentielles File mit dem Namen »ZEITSCHRIFT« auf Ihrer Diskette. Bei diesem File handelt es sich um eine mit dem SMU erstellte Maske. Die Felder der Maske haben folgende Bedeutung:</p>

        <ul class="plain">
            <li><strong>Stichwort:</strong> Ein Stichwort, unter dem der Zeitschriftenartikel oder das Buch einzuordnen ist.</li>
            <li><strong>Titel:</strong> Der Titel des Zeitschriftenartikels oder des Buches.</li>
            <li><strong>Autor:</strong> Der Name des Autors im Format: Nachname, Vorname. Der Vorname ist im allgemeinen kürzer.</li>
            <li><strong>Verlag:</strong> Der Name des Verlages.</li>
            <li><strong>Ort:</strong> Der Erscheinungsort der Zeitschrift oder des Buches.</li>
            <li><strong>Jahr:</strong> Jahr der Veröffentlichung des Artikels oder des Buches.</li>
            <li><strong>Seite</strong>: Die Seitenangabe.</li>
            <li><strong>Buch</strong>: Wenn sich das Zitat auf eine Zeitschrift bezieht muß dieses Feld mit »n« ausgefüllt sein.</li>
            <li><strong>Ausgabenummer</strong>: Nur bei einer Zeitschrift von Bedeutung (zum Beispiel 64’er). Die Ausgabenummer der Zeitschrift.</li>
            <li><strong>Zeitschriftenname</strong>: Name der Zeitschrift</li>
        </ul>

        <p class="noindent">LIT.VERW. ist ein maskengesteuertes Programm, den Funktionstasten kommt folgende Bedeutung zu:</p>

        <ul class="plain">
            <li><strong>F1 Eingabe:</strong><br>
                Ein Literaturzitat wird in die Datei aufgenommen und in Abhängigkeit von den Suchbegriffen eingeordnet. Da manchmal große Teile des Speichers »umgestellt« werden müssen, dauert dieser Eingabeteil mit zunehmender Größe der Datei immer länger.
            </li>
            <li><strong>F2 Drucken:</strong><br>
                Der Maskeninhalt wird als Literaturzitat auf dem Drucker ausgegeben. Dieses Zitat sieht für Bücher folgendermaßen aus:
                <ul class="plain">
                    <li>Nachname, Vorn.:</li>
                    <li>Buchtitel.</li>
                    <li>Erscheinungsort: Verlagsname, Veröffentlichungsjahr, Seite.</li>
                </ul>
                Für Zeitschriften wurde folgende Zitatangabe verwendet:
                <ul class="plain">
                    <li>Nachname, Vorn.: Artikeltitel.</li>
                    <li>Zeitschriftenname Ausgabenummer (Erscheinungsjahr) Seite.</li>
                </ul>
            </li>
            <li><strong>F3 Suchen:</strong><br>
                Es wird die bestehende Datei nach den angegebenen Suchkriterien durchsucht. Als Suchkriterien gelten der Name des Autors und das Stichwort. Eine Verknüpfung beider Kriterien ist dabei möglich. Alle weiteren Feldinhalte haben auf die Suchroutine keinerlei Einfluß.
            </li>
            <li><strong>F4 Index</strong><br>
                Es wird ein Gesamtindex der Datei ausgegeben. Die Stichwörter sind, wie auch die Autoren alphabetisch geordnet, etwaige Abweichungen sind auf die Ordnung der ASCII-Zeichen zurückzuführen. Die Zahlen hinter dem Stichwort, beziehungsweise dem Autor verweisen auf die Angabe bei der Literaturstelle.
            </li>
            <li><strong>F5 Weiter:</strong><br>
                Setzt den Suchlauf nach Suchkriterien fort. Wurde zum Beispiel nach einem Autor gesucht, dieser gefunden und angezeigt, kann durch Drücken der Taste F5 der Suchlauf nach weiteren Literaturstellen des Autors fortgesetzt werden. Findet sich kein Datum in der Datei mehr, wird die Maske gelöscht.
            </li>
            <li><strong>F6 Ende:</strong><br>
                beendet LIT.VERW. indem es neu eingegebene Literaturzitate sichert. Danach wird der Bildschirm gelöscht und das Programm abgebrochen.
            </li>
        </ul>

        <p>Einiges zum Programm: Das Programm kann jedem Stichwort maximal 255 Verweise zuordnen. Wird dieser Bereich überschritten, erfolgt ein Programmabbruch mit der Meldung: Stichworttabellenüberlauf. Analoges gilt für die Autoren. Wenn das Programm zum erstenmal gestartet wird, das heißt wenn eine neue Datei angelegt wird, muß man die Frage:
            <code>Bestehende Datei [j/n] ?</code>
            durch Drücken der Taste »N« beantworten. Die Druckerparameter der OPEN-Sequenz in Zeile 1100, 1200 und 9310 sind für einen Seikosha GP 100 VC zugeschnitten, sie müssen für andere Druckermodelle also angepaßt werden. Weiter bewirkt CHR$(14) in den Zeilen 1220, 1340 und 1470 die Eröffnung des Shift In-Modus, CHR$(15) beendet den Modus.
        </p>

        <address class="author">(Georg Krcal/ah)</address>

        <figure>
            <pre data-filename="smu" data-name="SMU"></pre>
            <figcaption>Listing 1. Der Maskengenerator »SMU«</figcaption>
        </figure>
        <figure>
            <pre data-filename="smu.m.prg" data-name="SMU (Maschinenprogramm)" data-mse=mse1></pre>
            <figcaption>Listing 2. Das Maschinenprogramm zu »SMU«. Beachten Sie bitte die Eingabehinweise auf Seite 54</figcaption>
        </figure>
        <div class="binary_download" data-filename="smu.m.prg" data-name="SMU (Maschinenprogramm)"></div>
        <figure>
            <pre data-filename="smubu.prg" data-name="SMUBU" data-mse=mse1></pre>
            <figcaption>Listing 3. Mit dem Programm »SMUBU« lassen sich durch 10 neue Basic-Befehle Masken in eigene Programme einbinden</figcaption>
        </figure>
        <div class="binary_download" data-filename="smubu.prg" data-name="SMUBU"></div>
        <figure>
            <pre data-filename="lit.verw." data-name="LITVERW"></pre>
            <figcaption>Listing 4. »LITVERW« ist ein Demoprogramm zur Literaturverwaltung</figcaption>
        </figure>
        <figure>
            <pre data-filename="maske.prg" data-name="Maske" data-mse=mse1></pre>
            <figcaption>Listing 5. Hilfsprogramm »Maske«</figcaption>
        </figure>
        <div class="binary_download" data-filename="maske.prg" data-name="Maske"></div>
        <figure>
            <pre data-filename="seq.save" data-name="SEQ.SAVE"></pre>
            <figcaption>Listing 6. Das Programm »SEQ.SAVE« generiert aus dem Hilfsprogramm »Maske« das sequentielle File »Zeitschrift«.</figcaption>
        </figure>

    </article>
</body>

</html>