<!DOCTYPE html>
<html lang="de">

<head>
    <title>Disketten-Meister</title>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="../style.css">
    <meta name="author" content="Armin Haas, rg">
    <meta name="64er.issue" content="Sonderheft 1/85">
    <meta name="64er.pages" content="51-54">
    <meta name="64er.head1" content="Disketten-Meister">
    <meta name="64er.head2" content="C 64">
    <meta name="64er.toc_title" content="Disketten-Meister (C 64)">
    <meta name="64er.toc_category" content="">
    <meta name="64er.index_category" content="Listings zum Abtippen|Floppy">
    <meta name="64er.id" content="diskettenmeister">
</head>

<body>
    <article>
        <h1>Disketten-Meister</h1>

        <p class="intro">Um leichter mit der Diskette arbeiten zu können, benötigen Sie nur diese kleine Basic-Erweiterung.</p>

        <p>Die hier vorgestellte Basic-Erweiterung umfaßt 24 neue Befehle, die es ermöglichen, den Umgang mit dem Diskettenlaufwerk sowohl im Direktmodus als auch im Programm erheblich zu vereinfachen. Autostart, menügesteuertes Laden von Programmen sowie das Speichern von Maschinenprogrammen sind nur 3 der vielen Möglichkeiten dieses Programms.</p>

        <p>Die Befehle im Einzelnen:</p>

        <h3>@</h3>

        <p>Der Fehlerkanal des Laufwerks wird gelesen und auf dem Bildschirm angezeigt.</p>

        <h3>@S</h3>

        <p>Der Fehlerkanal wird gelesen und die Nummer des Fehlers in Speicherstelle 251 abgelegt. Die Abfrage erfolgt nun mit PRINT PEEK (251). Die Bedeutung der Fehlernummern ist aus dem Floppy-Bedienungshandbuch Seite 36 bis 39 zu entnehmen.</p>

        <h3>$</h3>

        <p>Das Inhaltsverzeichnis der Diskette wird auf dem Bildschirm seitenweise angezeigt, das heißt daß die Ausgabe nach 23 Zeilen stoppt und das Programm eine Menüzeile ausgibt. Nun hat man die Möglichkeit die folgenden Zeilen zu listen oder die Ausgabe zu beenden.</p>

        <h3>$$</h3>

        <p>Dieser Befehl erlaubt es auf einfachste Art ein Programm zu laden ohne den Namen des Programms einzugeben. Hier wird das Inhaltsverzeichnis der Diskette gelistet, wobei jeder Zeile eine Programmnummer vorangestellt ist. Sind 20 Zeilen ausgegeben, so erscheint eine Menüzeile. Man kann nun die nächste Seite listen, die Ausgabe beenden, oder ein Programm laden. Drückt man nun die Taste für »Laden«, so ist nur die Nummer des Programms einzugeben, »RETURN« zu drücken und das jeweilige Programm wird in den Basic-Speicher geladen. Es besteht die Möglichkeit durch ein der Programmnummer nachgestelltes &amp;-Zeichen einen Autostart durchzuführen.</p>

        <h3>#</h3>

        <p>Die aktuelle Geräteadresse wird auf dem Bildschirm angezeigt. Sie wird beim Start des Programms automatisch auf 8 gesetzt.</p>

        <h3>#9</h3>

        <p>Ändern der Geräteadresse. Alle folgenden Befehle beziehen sich auf Geräteadresse 9.</p>

        <h3>#8</h3>

        <p>Alle Befehle beziehen sich wieder auf Geräteadresse 8.</p>

        <h3>#E</h3>

        <p>Die Befehlserweiterung wird ausgeschaltet. Dies ist notwendig, wenn man ein anderes Maschinenprogramm in den Speicher ab $C000 laden will, ohne daß das System aussteigt. Alle Zeiger werden wieder in ihre Ausgangsposition gesetzt.</p>

        <h3>£"Name"</h3>

        <p>Die Startadresse des jeweiligen Programms wird auf dem Bildschirm angezeigt. Dieser Befehl kann bei unbekannten Startadressen von Maschinenprogrammen eine nützliche Hilfe sein.</p>

        <h3>%"Name"</h3>

        <p>Das Programm mit dem angegebenen Namen wird geladen. Dieser Befehl lädt ein Programm immer an die Adresse, die im Programm abgespeichert ist. Es lassen sich so auch Maschinenprogramme laden.</p>

        <h3>&amp;"Name"</h3>

        <p>Autostart-Befehl. Das Programm wird geladen und danach selbständig gestartet. Dies ist nur mit Programmen möglich, die im Basic-Speicher abgelegt sind.</p>

        <h3>!"Name"</h3>

        <p>Das im Speicher befindliche Basic-Programm wird unter dem angegeben Namen auf Diskette gespeichert.</p>

        <h3>!"Name",S,E</h3>

        <p>Dieser Befehl ermöglicht das Speichern von Maschinenprogrammen, wobei »S« die Startadresse und »E« die Endadresse ist. Es muß beachtet werden, daß »E« die Endadresse + 1 des abzuspeichernden Bereichs ist.</p>

        <h3>V</h3>

        <p>Der Validate-Befehl wird ausgeführt.</p>

        <h3>←I</h3>

        <p>Initialisiert eine Diskette.</p>

        <h3>←N"Name,ID"</h3>

        <p>Formatiert eine Diskette.</p>

        <h3>←N"Name"</h3>

        <p>Reformatiert eine Diskette ohne Änderung der ID. Dies funktioniert jedoch nur bei bereits formatierten Disketten.</p>

        <h3>←C"nf=af"</h3>

        <p>Das File »af« wird mit dem Namen »nf« kopiert.</p>

        <h3>←C"nf=file1,file2"</h3>

        <p>Es besteht die Möglichkeit maximal 4 sequentielle Datenfiles zu einem mit neuem Namen zusammenzufassen.</p>

        <h3>←R"nfn=afn"</h3>

        <p>Das File mit dem Namen »afn« wird zu »nfn« umbenannt.</p>

        <h3>←S"file"</h3>

        <p>Das File mit dem Namen »file« wird gelöscht.</p>

        <h3>←S"file1,file2,.."</h3>

        <p>Es können auch mehrere Files gleichzeitig gelöscht werden.</p>

        <h3>←S"fi*"</h3>

        <p>Es werden alle Files gelöscht, die mit dem Buchstaben »fi« beginnen.</p>

        <h3>←S"*"</h3>

        <p>Alle Files einer Diskette werden gelöscht.</p>

        <p>Eingabe des Programms<br>
            Das Basic-Programm bildet jeweils von fünf DATA-Zeilen eine Prüfsumme. Ist diese fehlerhaft, so stoppt das Programm und zeigt die jeweilige Blocknummer auf dem Bildschirm an. Waren die Prüfsummen aller 20 Blocks fehlerfrei, stoppt das Programm mit dem Hinweis die richtige Diskette einzulegen. Nach Drücken einer Taste wird das Maschinenprogramm unter dem Namen »Disk-Master/M« auf Diskette gespeichert. Um das Laden und Starten zu erleichtern, muß der Basic-Lader eingetippt werden.</p>

        <p>Laden des Programms mit Basic-Lader:<br>
            LOAD"Disk-Master",8. Ist die Ready-Meldung erfolgt, so ist einfach RUN einzugeben und das Maschinenprogramm wird geladen und gestartet.<br>
            direkt:<br>
            LOAD"Disk-Master/M",8,1. Ist die Ready-Meldung erfolgt, muß das Programm mit SYS 49152 gestartet werden.</p>

        <p>Allgemeine Hinweise zur Programmbenutzung:<br>
            Will man im Rahmen eines Basic-Programmes einen Befehl hinter einer »IF&hellip;THEN« Abfrage benutzen, so ist vor dem Befehl ein Doppelpunkt zu setzen, da sonst eine Fehlermeldung ausgegeben wird.</p>

        <p>Sollen die Befehle —N, —R, —S, —C im Programm verwendet werden, so sollten die nachfolgenden Parameter in einer String-Variablen gespeichert sein.</p>

        <p>Will man im Anschluß an »Disk-Master« noch andere Programme abspeichern, so darf die Startadresse des folgenden Programms nicht kleiner als $C900 sein.</p>

        <address class="author">(Armin Haas/rg)</address>

        <figure>
            <table>
                <tr>
                    <td>@</td>
                    <td>Fehlerkanal lesen und anzeigen</td>
                </tr>
                <tr>
                    <td>@S</td>
                    <td>Fehlerkanal lesen und speichern</td>
                </tr>
                <tr>
                    <td>$</td>
                    <td>Inhaltsverzeichnis der Diskette anzeigen</td>
                </tr>
                <tr>
                    <td>$$</td>
                    <td>Menügesteuertes Laden von Programmen</td>
                </tr>
                <tr>
                    <td>#</td>
                    <td>Aktuelle Geräteadresse abfragen</td>
                </tr>
                <tr>
                    <td>#9</td>
                    <td>Geräteadresse = 9</td>
                </tr>
                <tr>
                    <td>#8</td>
                    <td>Geräteadresse = 8</td>
                </tr>
                <tr>
                    <td>#E</td>
                    <td>Programm ausschalten</td>
                </tr>
                <tr>
                    <td>£"Name"</td>
                    <td>Startadresse ermitteln und anzeigen</td>
                </tr>
                <tr>
                    <td>%"Name"</td>
                    <td>Programm absolut laden</td>
                </tr>
                <tr>
                    <td>&amp;"Name"</td>
                    <td>Programm laden und starten</td>
                </tr>
                <tr>
                    <td>!"Name"</td>
                    <td>Programm speichern</td>
                </tr>
                <tr>
                    <td>!"Name",A,B</td>
                    <td>Maschinenprogramm speichern</td>
                </tr>
                <tr>
                    <td>←V</td>
                    <td>Validate-Befehl ausführen</td>
                </tr>
                <tr>
                    <td>←I</td>
                    <td>Initialisiert Diskette</td>
                </tr>
                <tr>
                    <td>←N"Name,ID"</td>
                    <td>Formatiert Diskette</td>
                </tr>
                <tr>
                    <td>←N"Name"</td>
                    <td>Reformatiert Diskette</td>
                </tr>
                <tr>
                    <td>←C"nf = af"</td>
                    <td>Kopiert File</td>
                </tr>
                <tr>
                    <td>←C"nf=file1,file2"</td>
                    <td>Verkettet SEQ-Files (max. 4)</td>
                </tr>
                <tr>
                    <td>←R"nfn=afn"</td>
                    <td>File umbenennen</td>
                </tr>
                <tr>
                    <td>←S"file"</td>
                    <td>File löschen</td>
                </tr>
                <tr>
                    <td>←S"file1,file2,..."</td>
                    <td>Mehrere Files gleichzeitig löschen</td>
                </tr>
                <tr>
                    <td>←S"fi*"</td>
                    <td>Alle Files mit Anfangsbuchstaben »fi« werden gelöscht</td>
                </tr>
                <tr>
                    <td>←S"*"</td>
                    <td>Alle Files der Diskette werden gelöscht</td>
                </tr>
            </table>
            <figcaption>Befehlsübersicht »Disk-Master«</figcaption>
        </figure>

        <figure>
            <pre data-filename="lader_disk-maste" data-name="Disk-Master (Basic-Lader)" data-checksummer="1"></pre>
        </figure>
        <div class="binary_download" data-filename="disk-master_m.prg" data-name="Disk-Master (Maschinencode)"></div>
        <figure>
            <pre data-filename="disk-master" data-name="Disk-Master (DATAs)" data-checksummer="1"></pre>
        </figure>

        <aside class="fehlerteufelchen" id="fehlerteufelchen">
            <h2>Fehlerteufelchen</h2>
            <p>Zwei Zeilen wurden nur halb abgedruckt. Die kompletten Zeilen lauten:<br>
                1020 DATA 134,193,76,174,167,32,76,195,32,114,195,96,174,160,192,160<br>
                1350 DATA 255,133,253,169,0,160,10,24,101,251,136,208,250,24,101,252</p>
            <!-- 64'er 2/1985 -->
        </aside>

    </article>

</body>

</html>
