<!DOCTYPE html>
<html lang="de">

<head>
    <title>Track 18 — Das Chaos organisieren</title>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="../style.css">
    <meta name="author" content="Andreas Kölbach, ev">
    <meta name="64er.issue" content="Sonderheft 1/85">
    <meta name="64er.pages" content="46-51">
    <meta name="64er.head1" content="Track 18">
    <meta name="64er.head2" content="C 64">
    <meta name="64er.toc_title" content="Track 18 — Das Chaos organisieren (C 64)">
    <meta name="64er.toc_category" content="">
    <meta name="64er.index_category" content="Listings zum Abtippen|Floppy">
    <meta name="64er.id" content="track18">
</head>

<body>
    <article>
        <h1>Track 18 — Das Chaos organisieren</h1>

        <p class="intro">
        Nur der Dumme räumt auf, das Genie beherrscht das Chaos. Aber mal ganz ernsthaft, wem ist es noch nicht passiert, daß nach einer Kopieraktion von drei zusammengehörigen Programmen sich zwei davon auf der falschen Diskette wiederfanden, oder daß ihm die Reihenfolge seiner Programme nicht gefiel und er bei dem Versuch das zu ändern nach einigen Stunden SCRATCH &amp; SAVE verzweifelt aufgab?</p>

        <p>Dies muß ein Ende haben, dachte ich mir und ging daran, ein Werkzeug zu entwickeln, daß das Chaos beherrscht und Ordnung in wirre Diskettenverhältnisse bringt. Ob das Programm deswegen geniale Züge trägt, verbietet mir die Bescheidenheit zu diskutieren. Bleiben wir bei den Fakten.</p>

        <p>Track 18 ist von der Grundkonzeption her dafür gedacht, ein Diskettendirectory umzusortieren und an geeigneter Stelle Bemerkungen anzubringen. Darüber hinaus bietet es einige nützliche und teilweise nicht alltägliche Features. So zum Beispiel die Möglichkeit, eine Bemerkung (etwa Informationen über einzelne Programme) in einen freien Bereich auf Spur 18 zu schreiben. Sollte jemand, wie ich auch, es vorziehen, Schreibschutzaufkleber zum Beschriften seiner Disketten zu verwenden, es sei ihm gewährt - Track 18 bietet auch einen Softschutz. Auch die Möglichkeit einzelne Files zu schützen, die das DOS der 1541 vorsieht, wird genutzt.</p>

        <p>Das Programm arbeitet ausschließlich mit Spur 18 (Hex $12), wenn man von den Auswirkungen einiger Diskettenbefehle absieht.</p>

        <p>Die Programmbedienung wird dem Anwender durch konsequente Menüführung leicht gemacht.</p>

        <p>Der Aufbau en Detail:</p>

        <p><strong>Das Hauptmenü:</strong><br>
            Directory einlesen<br>
            Directory bearbeiten<br>
            Neues Directory schreiben<br>
            Directory von Disk<br>
            Disk Command senden<br>
            Diskettennamen ändern<br>
            Disk-Kommentar<br>
            Files schützen/freigeben<br>
            Schreibschutz<br>
            Ende</p>

        <p>Der aktuelle Menüpunkt ist durch reverse Schrift hervorgehoben. Die Auswahl der Positionen erfolgt über die Cursor-up/down Taste, die den reversen »Balken« verschiebt. Aus dem angewählten Programmteil kann zu jedem Zeitpunkt durch F1 ins Hauptmenü zurückgekehrt werden.</p>

        <h3>Directory einlesen</h3>

        <p>Dieser Menüpunkt gehört zu dem auch optisch abgetrennten Komplex »Directory bearbeiten«. Das Directory muß zur Bearbeitung in den Speicher gelesen werden. Nur hier wird umgestellt, sortiert und eingefügt. Und um genau diese Dinge zu tun, bewege der geneigte Anwender den reversen Balken auf den Menüpunkt.</p>

        <h3>Directory bearbeiten</h3>

        <p>Sofort nach Betätigen der Return-Taste (vorausgesetzt man hat vorher das Directory eingelesen) erscheint ein komplettes Inhaltsverzeichnis auf dem Bildschirm. Die bis zu 144 Files werden auf 9 Seiten dargestellt, die mit der Cursor-up/down Taste umgeblättert werden können. Komplett heißt, auch freie Plätze, die durch SCRATCH entstanden sind, werden angezeigt und können mit den Funktionen<br>
            F3 = Sortieren<br>
            F5 = Einfügen<br>
            F7 = Löschen<br>
            wie jeder andere Fileeintrag behandelt werden. So kann ein Freiplatz an eine Stelle verschoben werden, wo beim nächsten SAVE der Programmname aufgenommen werden soll.</p>

        <h3>Sortieren</h3>

        <p>Die Routine ermöglicht das Verschieben eines Files von einer Position zu einer anderen. Nach Drücken von F3 wird erst nach der Platznummer des Files gefragt, das verschoben werden soll, dann wohin es geschoben werden soll.</p>

        <h3>Einfügen</h3>

        <p>Hier wird nach der Platznummer gefragt, vor die eine Bemerkung gestellt werden soll. Da das System niemandem vorschreibt, welcher Art eine solche Bemerkung sein soll, — es wird unverbindlich eine Reihe Bindestriche angeboten — fragt es noch nach dem Bemerkungstext. Dieser wird dann als Programmfile getarnt in die Inhaltsliste aufgenommen. Ein Versuch diesen »blinden Passagier« durch LOAD später aufzurufen endet allerdings mit einem ERROR, da der Verweis auf den Fileanfang auf der Diskette fehlt.</p>

        <h3>Löschen</h3>

        <p>Dieser Menüpunkt ist mit etwas Vorsicht zu genießen. Nach Angabe der gewünschten Platznummer wird dieser Platz, ob Bemerkung, ob File, schonungslos gestrichen — wohlgemerkt nur im Speicher. Erst die Rückkehr ins Hauptmenü und dann die Anwahl des Punktes.</p>

        <h3>Neues Directory schreiben</h3>

        <p>bannt alle Veränderungen auf die Diskette. Da dieser Programmteil alle, auch ungewollte Änderungen am Directory endgültig macht, wird zur Sicherheit noch einmal eine Befehlsbestätigung verlangt. Sollte man sich seiner Sache nicht ganz sicher sein, ist es ratsam, noch einmal einzulesen.</p>

        <p>Ein auf die Diskette zurückgeschriebenes Inhaltsverzeichnis ist natürlich ohne Einschränkungen funktionsfähig.</p>

        <h3>Directory von Disk</h3>

        <p>Dieser Programmteil stellt das im Moment tatsächlich auf der Diskette vorhandene Directory dar, ebenfalls in Seiten zu je 16 Files. Die Routine ist nicht übermäßig schnell und kann daher zu jedem Zeitpunkt mit F1 abgebrochen werden. Man kann auf diese Weise sofort den Erfolg seiner Arbeit kontrollieren, denn die Art der Darstellung entspricht genau dem »LOAD "$"« Befehl in Basic.</p>

        <p>Die im Folgenden beschriebenen Programmfunktionen beinhalten praktisch alles, was man braucht, wenn man die in Spur 18 enthaltenen Informationen verändert. Zunächst jedoch die einzige Routine, die etwas aus dem Rahmen fällt, weil sie nicht auf Spur 18 begrenzt ist:</p>

        <h3>Disk-Kommando senden</h3>

        <p>Ohne OPEN-Anweisung kann jeder Befehl, den das DOS versteht, an die Diskettenstation geschickt werden. Das Format der Befehle ist dasselbe wie bei »OPEN«. Jedoch wird nur der Teil gebraucht, der normalerweise in Anführungszeichen steht. Ein Befehl darf bis zu 70 Zeichen lang sein.</p>

        <h3>Diskettennamen ändern</h3>

        <p>Wer möchte nicht manchmal eine Diskette umbenennen, ohne sie gleich zu formatieren? Name und ID sind gemeinsam oder einzeln veränderbar, ohne die übrigen Informationen auf der Diskette zu berühren. Ein echter Leckerbissen.</p>

        <h3>Disk-Kommentar</h3>

        <p>Hier wird brachliegender Speicherplatz sinnvoll genutzt! In 80 freie Bytes des Block 0 auf Spur 18 kann eine 80 Zeichen lange Bemerkung geschrieben werden. Nach dem Anwählen dieses Menüpunktes gelangt man in ein Untermenü mit den Positionen:</p>

        <h3>Lesen</h3>

        <p>hier wird nur der vorhandene Text ausgelesen.</p>

        <h3>Schreiben</h3>

        <p>Vor jedem Schreibvorgang wird der schon vorhandene Text eingelesen und im vier Zeilen langen Arbeitsfeld dargestellt. Er kann nun überschrieben oder zeilenweise editiert werden.</p>

        <h3>Files schützen/freigeben</h3>

        <p>Das DOS bietet eine Möglichkeit, einzelne Files vor versehentlichem »exitus« zu beschützen. Ein geschütztes File kann nicht geSCRATCHt werden. Es ist höchstens noch mit der Löschen-Funktion von »Track 18« auszuradieren (außer man gibt es vorher wieder frei).</p>

        <p>Und hier ist die vielleicht wichtigste Routine:</p>

        <h3>Schreibschutz</h3>

        <p>Was bisher nur mit einem Klebeschild zu bewerkstelligen war, findet nun unsichtbar softmäßig auf der Diskette statt. Eine Diskette, die mit »Track 18« geschützt ist, verweigert jeglichen Schreibzugriff. Lesen ist weiterhin problemlos möglich. Als Kennzeichen steht in der Namenszeile des Directory beim Laden nicht mehr 2A, sondern zwei »Kleiner«-Zeichen.</p>

        <p>Der Vollständigkeit halber befindet sich noch die Anweisung</p>

        <h3>Ende</h3>

        <p>im Menü. Das Programm beendet sich nach einer Rückfrage selbst mit einem normalen END. Wer möchte, kann statt der END-Anweisung den Befehl SYS 64738 einfügen. Damit findet dann ein Reset statt, und der Computer steht für weitere Aufgaben wieder jungfräulich zur Verfügung.</p>

        <p>Nach dieser ausführlichen Erläuterung bleibt mir nur noch ein Ratschlag: Für Probeläufe nach dem Eintippen und zum Einarbeiten auf jeden Fall eine besondere Probediskette verwenden, damit bei Eingabefehlern keine wichtigen Daten oder Programme zerstört werden.</p>

        <h2>Tips zum Tippen</h2>

        <p>Die im Programm verwendeten REM-Zeilen dienen nur der optischen Gliederung des Listings. Sie werden von keiner Sprunganweisung angesprungen, so daß man ohne unangenehme Folgen darauf verzichten kann.<br>
            Die folgende »PRINT AT«-Maschinenroutine habe ich dem Data Becker Buch »64 Intern« entnommen. Sie ist die kürzeste, die mir bekannt ist. Im Programm wird sie mit SYS P,x,y aufgerufen, wobei P=828 (=$033C).</p>

        <pre>033C JSR $AEFD prüft auf Komma
033F JSR $B79E holt numerischen Wert ins X-Register
0342 TXA
0343 PHA
0344 JSR $AEFD
0347 JSR $AEFD
034A PLA
034B TAY
034C CLC
034D JMP $FFF0 Cursor setzen</pre>


        <p>Allen leidenschaftlichen Programmierern und Programmverbesserern sei gesagt: »Track 18« ist ausbaufähig! Für diesen Zweck habe ich mir Mühe gegeben, das Programm modular aufzubauen und zumindest die wichtigsten Routinen wasserdicht zu machen. Das heißt, vor dem Aufruf mit GOSUB werden die benötigten Werte in einige festgelegte Variablen geschrieben und die Routine gibt ihre Antwort über andere festgelegte Variablen. Jede andere von der Routine benutzte Variable wird direkt am Ort des Geschehens neu belegt (Arrays und Programmkonstanten ausgenommen). Wer diesem Prinzip treu bleibt, wird bei einem Ausbau des Programms keine Probleme haben.</p>

        <address class="author">(Andreas Kölbach / ev)</address>

        <figure>
            <pre data-filename="track 18" data-name="Track 18" data-checksummer="1"></pre>
        </figure>

        <aside class="fehlerteufelchen" id="fehlerteufelchen">
            <h2>Fehlerteufelchen</h2>
            <p>Die Prüfsumme in der Zeile 2520 muß &lt;230&gt; lauten.<br>
                Zeile 50005: Das geSHIFTete Pi muß als &lt; Commodore &gt; + A eingegeben werden.</p>
            <!-- 64'er 2/1985 -->
        </aside>

    </article>

</body>

</html>
