
# Anwendungen für jedermann \[3,5\]

Es gibt Leute, die haben sich den C 64 gekauft, ein wenig die Tastatur getestet, vielleicht noch ein paar Spiele erworben, aber ihn dann so langsam in der Ecke verschwinden lassen. Fragt man sie dann, warum sie nichts mehr mit dem Computer machen, sieht man manchmal nur ein Schulterzucken oder es kommen resignierte Äußerungen wie »Ich kann ja nichts vernünftiges mit ihm anfangen.« Bohrt man dann noch etwas weiter und macht vielleicht sogar einige Vorschläge, dann kommt sehr oft ein »ja, das wäre interessant, könnte ich gebrauchen«.

Wir haben für Sie eine Menge interessanter Anwendungen herausgepickt. Bei einigen werden Sie sicherlich sofort sagen »Her damit, das brauch ich«. Und damit möglichst viele der gleichen Meinung sind, präsentieren wir Ihnen Programme für die verschiedensten Anwendungen.

### Fundgrube für Statistiker

Der Hobby-»Manager« unter Ihnen wird einige Programme entdecken, die ihn lebhaft interessieren werden. Da ist zum Beispiel die **Aktienverwaltung**, die Sie auf dem taufenden hält über die derzeitigen und künftigen Aktienkurse Damit Sie Trends schnell erkennen können, vielleicht sogar schneller als das Fernsehen, erstellt der **Wahlhelfer** eine eigene Hochrechnung. Die **Grafik-Erweiterung** setzt die Daten der beiden Programme um in schöne, anschauliche Bilder. Als Besitzer des Printer/Pbtters VC 1520 erhalten Sie ebenfalls ein Grafikpaket, mit dem Sie echte **Business-Grafik** erstellen können.

### Wer den Pfennig nicht ehrt...

Sollten Sie Probleme haben mit dem leidigen Thema **Buchführung**, werden Sie nicht alleine gelassen. Und als jemand, der seine Finanzen im Griff hat oder bekommen will, kommt Ihnen die **Haushaltskasse** vielleicht gerade recht. Wollen Sie ein Auto kaufen und eine fundierte Entscheidung treffen, sind Sie mit **Autokosten** bestens informiert.

Ist Ihnen etwa als stolzer Kleinunternehmer die jährliche Inventur ein Dorn im Auge? Ärgern Sie sich nicht mehr, wir helfen Ihnen mit **Ordnung im Lager**. Und damit Sie Ihre Kunden, Bekannten oder wen auch immer ohne große Mühe mit Rechnungen oder vorerst einmal mit Kostenvoranschlägen bombardieren können, kommt der **Rechnungshelfer** gerade recht. Was Sie dann sonst noch an Daten haben, wird mit der sehr leistungsfähigen Dateiverwaltung Datei total kinderleicht aber vor allen Dingen sehr effektiv verwaltet.

### Aus Naturwissenschaft und Technik

Zwei **Mathematikprogramme** werden Ihnen viel Arbeit ersparen. Hauptsächlich auf dem Gebiet der numerischen Mathematik und der Vektorrechnung, also schon hochkalibrige Sachen. Mit **Meßboy** bauen Sie sich als begeisterter Bastler ein Meßgerät für Kapazitäten und Widerstände für sage und schreibe unter zehn Mark. Sie sparen dabei mehrere Hunderter.

Sollte Ihnen aber klare Technik zu trocken sein und Sie mehr ins Reich der Biologie hineinschnuppern möchten, machen Sie sich doch einmal Ihren eigenen **Fruchtwein**! Absolut glykolfrei und schmecken tut er auch. Der C 64 hilft Ihnen dabei.

### Spezialitäten für Drucker

**Textmaster** ist ein Textverarbeitungsprogramm speziell für den Commodore-Drucker MPS 801/803. Deutsche Umlaute, eigene Zeichensätze, Hoch- und Tiefschrift sowie Randausgleich sind nur einige der tollen Möglichkeiten von Textmaster. Und damit Sie auch gleich die richtige Übung beim Schreiben bekommen, macht das **Trainingsprogramm fürs Maschinenschreiben** in kurzer Zeit einen Fachmann aus Ihnen, mit besten Noten.

### Hinein in die Mailboxen!

Als Spezialist für Datenfernübertragung (DFÜ) kommt Ihnen vielleicht das Terminalprogramm **Proterm** bekannt vor. In diesem Sonderheft finden Sie eine nochmals verbesserte Version des Super-Terminal-Programms. Da bleiben keine Wünsche mehr offen. Das gleiche gilt für die **Mailbox für jedermann**. Endlich können Sie auch angerufen werden. Das spart nicht nur Telefonkosten, sondern bringt auch eine ganze Menge frischer Informationen und neue Freunde. Individualisten können sich mit **Mailbox-Basic** eine eigene Mailbox konstruieren.

(gk)

TODO ASIDE

### Disketten und Kassettenservice

Wer keine Zeit oder keine Lust hat, alle Programme selbst in mühevoller Kleinarbeit abzuschreiben, kann wieder auf den bewährten Diskettenservice zurückgreifen. Und auch der Datasetten-Besitzer wird bedient. Alle Programme befinden sich auf zwei vollgepackten Disketten beziehungsweise vier Kassetten und sind nur zusammen erhältlich. Die Disketten kosten ebenso wie die Kassetten zusammen nur 34,90 Mark.

Bitte verwenden Sie für Ihre Bestellung die beigefügte Postscheckzahlkarte zur Überweisung des Rechnungsbetrages.

**Disketten: Bestellnummer L6 85 S7D / 34,90 Mark**
**Kassetten: Bestellnummer L6 85 S7K / 34,90 Mark**

# Checksummer 64 V3 - Neu \[6-7\]

TODO

# MSE - Abtippen sicher und leicht gemacht \[8-9\]

TODO

# Minitutor 64 \[10-13\]

> Was sich des öfteren hochtrabend als »Sprachtrainer« bezeichnet, setzt den Computer lediglich als didaktischen Datenverwalter ein, ohne daß die Maschine eine Ahnung von Sprache hat. Mit dem folgenden Programm verhält es sich etwas anders: es ist in der Lage, Sprache zu simulieren!

Mal ehrlich: Wenn Ihnen ein Englischlehrer die Pistole auf die Brust setzen und Sie fragen würde »Wie lautet das present perfect continuous von live in der 3. Person Plural?« - Könnten Sie Ihren Gegner dann mit einem spontanen >They have been living« entwaffnen? - Wirklich?

Aber das heißt noch lange nicht, daß Sie sich jetzt einiges an Tipparbeit sparen können. Denn wenn Sie so fit im englischen Zeitensystem sind, daß Sie kein Trainingsprogramm mehr brauchen, dann können Sie das folgende Programm vielleicht als Beschäftigungstherapie für Nachhilfeschüler einsetzen...

Das Programm Minitutor ist in der Lage, aus der Vorgabe von Person, Zeit und Verb alle möglichen Zeitstufen im Englischen zu erzeugen. Dieser erzeugte Satz wird aber nicht verraten, sondern soll vom Anwender anhand der Vorgaben rekonstruiert werden. Sind Computer und Anwender einer Meinung, so gibt’s Zuckerbrot, ansonsten winkt die Peitsche in Form von Fehlerpunkten und es ist eine Intensivkur mit Grammatikbüchern zu empfehlen. Doch kommen wir zu den Feinheiten:

## Automatische Vergangenheit

Nach dem Start meldet sich das Programm (Listing 1) mit einem Menü. Zur Auswahl stehen A;L;E (hat nichts mit Bier zu tun!).

»E« wie Ende braucht wohl nicht näher erläutert werden.

»A« wie Anleitung ruft eine Bildschirmseite auf, die die wichtigsten Regeln für den Umgang mit dem Programm erklärt.

»L« steht, wie soll es anders sein, für LERNEN.

Zunächst muß die zu lernende Lektion erstellt werden. Es wird also gefragt, welche Zeiten und Personen geprüft werden sollen. Der Anwender braucht hier nur 21mal J(a) oder N(ein) drücken.

Danach kann man eingeben, wie viele Fragen gestellt werden sollen. Eine 0 als Eingabe führt zu einer endlosen Fragerei, die nur durch ein eindeutiges »ENDE« statt einer Lösung abgebrochen werden kann (oder durch entnervtes Durchbeißen der Versorgungsleitungen).

Weiterhin kann man wählen, ob man zur Beantwortung beliebig viel Zeit haben will (Eingabe = 0), ansonsten wird nach Ablauf der angegebenen Zeit ein Fehlversuch angerechnet! Und jetzt geht der Streß erst richtig los:

Nun werden freundlicherweise Zeit, Person und Verb, per Zufall bestimmt, angezeigt, nachdem die Lösung intern schon feststeht (Merke: der Computer hat immer Recht!!!).

Der Schüler möge nun bitte die richtige Form angeben, er hat drei Versuche:
»Wie lautet das present von try in der 3. Person Singular?« Eingabe: »it trys« - Der Lehrer wendet sich angesichts dieses Fehlers mit Grausen ab, aber der Computer, freundlich wie er ist, gibt einen kleinen Lösungshinweis und deutet mit einem Pfeil den Beginn des Fehlers an:

TODO

it trys
Hier beginnt der Fehler.

Der Schüler versucht’s nochmal: »it tris«. Das ist auch nicht ganz das Wahre. Die nächste Hilfestellung zeigt die Struktur des ganzen Satzes als Punktmuster an, wobei fürjeden Buchstaben ein Punkt steht: »...«.

Und wenn das nicht geholfen hat, wird dem Schüler ein Minuspunkt gutgeschrieben und die nächste Frage folgt.

Hat er aber richtigerweise »it tries« eingegeben, gibt’s zwar keinen Fehlerpunkt, aberdie nächste Frage kommttrotzdem. Blickt der Schüler gar nicht mehr durch, kann er auch, statt eine Lösung einzugeben, um »HILFE« rufen. Dies zeigt ihm die Anleitungsseite und kehrt dann zur Frage zurück. Dabei werden aber eventuell vorhandene Hilfestellungen überschrieben.

## Freundliche Fehleranzeige

DiesesSpielchen wiederholt sich so lange, bis entweder die gewünschte Anzahl von Übungen überlebt wurde oder dem Spuk mit »ENDE« ein solches gemacht wird.
Dann kommt die Abrechnung:

Auf zwei Nachkommastellen genau erhält der Schüler seine Fehlerquote und dazu noch eine Tabelle, die zeigt, wo die Fehler auftraten. Die horizontalen Zahlen bedeuten die Zeitstufe, die vertikalen die Person.

Ein »X«an den Schnittpunkten bedeutet, daß in dieser Kombination ein oder mehrere Fehler gemacht wurden.

Wer seinen (Miß-)Erfolg gerne schwarz auf weiß hat, kann sich die Tabelle samt Kommentar auch auf den Drucker ausgeben lassen (Dev.=4).

Und schon landet man wieder im Menü. Wer noch nicht genug hat, kann die gleiche Lektion nochmal bearbeiten, er spart sich 21 Tastendrücke und braucht nur noch Anzahl der Übungen und Zeitbegrenzung neu wählen, oder aber eine neue Lektion zusammenstellen.

Das war die Datenverwaltung, nun zur sprachlichen Seite des Programmes:

Das Unterprogramm ab Zeile 410 kann 15 verschiedene Zeitstufen des Englischen erzeugen. Dabei kommt es weniger auf den tatsächlichen Gebrauch in der Alltagssprache an, sondern darauf, daß die Hilfsverben an den richtigen Stellen sitzen und daß, wenn nötig, Buchstaben wegfallen, ersetzt oder verdoppelt werden.

Die grammatischen Regeln, die hierbei beachtet werden, möchte ich an dieser Stelle nicht erläutern, denn darüber kann man eine ganze wissenschaftliche Arbeit schreiben. Verarbeiten kann die Routine zwar jedes englische Verb, für den Minitutor wurden jedoch nur schwache und regelmäßige Verben vorgesehen. (Deswegen auch das »Mini-«.) Um auch unregelmäßige Verben zu verarbeiten, müßte zunächst noch eine Liste mit den Ausnahmen erstellt werden. Der C 64 verkraftet zwar deren Umfang, dieser umfaßt aber eine Liste mit mehr als 200\*4 Elementen, und sowas läßt sich nur schwer veröffentlichen.

### Noch einige Spielregeln:

Das Programm verwendet als Pronomen für die 3. Person Singular »it«, obwohl auch »he,she« möglich wären. Die in der Anleitung angegebenen Personalpronomen »I,you,it,we,you, they« für die 1. Person Singular bis 3. Person Plural sind unbedingt zu verwenden, da etwas anderes nicht akzeptiert wird. Das gilt auch für Abkürzungen: »I’m, I’ve« müssen als »I am, I have « ausgeschrieben werden. Auch werden Tippfehler vom Programm als Fehler gewertet!

Das /EF hinter der Zeitbezeichnung steht übrigens für expanded form, das heißt die »-ing«-form (progressive, continuous form), zum Beispiel »I am living« = present/ef von live in der 1. Person Singular.

Technisches:

1.	Die Eingabe dürfte kein Problem sein. Lediglich in den Zeilen 420 und 450 muß mitallen Kürzungstricks gearbeitet werden, es sei denn, man macht aus ihnen je zwei Zeilen.
2.	Aufgrund der vielen Strings ist ein Compilerdurchlauf recht nützlich. Über den Listingservice wird auch eine compilierte Version erhältlich sein.
3.	Wem 5940 mögliche Sätze nicht ausreichen, der kann auch den Wortschatz ab Zeile 558 erweitern. Er muß allerdings darauf achten, daß die Verben keine Ausnahmen von den Regeln sind, und daß in Zeile 20 immer der richtige Wert zugewiesen wird.

(Michael Anton/og)

TODO ASIDE

### Zur Entstehung des Programms:

Das Programm Minitutor entstand aus einer Zwischenprüfungsarbeit in Linguistik an der Universität Stuttgart, wo ich mich anglistischer und germanistischer Studien befleißige. Inhalt dieser Arbeit war ein Vergleich der deutschen und englischen Zeitenbildung anhand von Computermodellen. Aus dieser Arbeit wurden die Zeilen 410 - 490 fast unverändert übernommen und in den »didaktischen« Rahmen eingefügt, wobei allerdings die Berücksichtigung der unregelmäßigen Verben herausfallen mußte. Die hierzu notwendige Vergleichsliste umfaßt ein sequentielles File mit einer Größe von 20 Diskettenblöcken. (M. Anton)

# Textmaster - Textverarbeitung speziell für MPS 801/803 \[14-22\]

> Mit Textmaster stellen wir Ihnen eine Textverarbeitung vor, die den MPS 801 und den MPS 803 voll ausnutzt. Randausgleich sowie beliebige Zeichensätze sind nur einige der hervorstechenden Eigenschaften von Textmaster.

Textverarbeitungsprogramme gibt es viele, aber diese sind meist für den professionellen Gebrauch gedacht. Die Folge: Vernünftige Druckergebnisse kann man nur mit teuren Druckern wie einem Epson FX-80 erhalten. Die weitverbreiteten Commodore-Drucker werden meist stark vernachlässigt und dürfen nur in ihrer Mini-Matrix drucken. Man traut sich gar nicht recht, damit Briefe zu schreiben und abzuschicken. Textmaster räumt jedoch damit gründlich auf. Es wurde speziell für die Drucker MPS 801 und MPS 803 entwickelt. Ein Umschreiben auf andere Drucker ist leider nur unter sehr großem Aufwand möglich. Dafür werden diese beiden Drucker aber optimal genutzt. Buchstaben kommen in einer augenfreundlichen 8 mal 8-Matrix aufs Papier, mit echten Unterlängen und auch Umlauten. AberTextmaster kann noch mehr: Eine kleine Auswahl der Möglichkeiten zeigt Bild 1. Diese Funktionen werden im einzelnen nachher erklärt. InsgesamtvierListingsbilden das Textmaster-System. Davon ist Listing 4, der Zeichensatzgenerator, entbehrlich, wenn Sie

nicht mit eigenen Zeichensätzen arbeiten wollen. Bevor Sie mit Textmaster arbeiten, müssen Sie ihn abtippen und zwar die Listings 1 und 2 mit dem Checksummer, das Listing 3 mit dem MSE. Listing 1 können Sie unter einem beliebigen Namen auf Diskette speichern. Listing 2 muß unbedingt unter dem Namen »TM«, Listing 3 unter dem Namen »TM.CODE« gespeichert werden.

### Starten des Programms

Textmaster besteht aus drei einzelnen Teilprogrammen. Zuerst muß das Programm aus Listing 1 geladen werden. Anschließend wird RUN eingegeben. Das Hauptprogramm »TM« und die Maschinenroutinen »TM.CODE« werden nun selbständig geladen. Ein umständliches Wechseln der Diskette während des Arbeitens entfällt bei Textmaster, da sich nach dem Laden das gesamte Programm im Speicher des C64 befindet. Man kann also die Programmdiskette beiseite legen und die Datendiskette in das Laufwerk schieben.

### Bildschirmaufbau

Nach dem Laden erscheint in der Mitte des Bildschirms der Autorenvermerk. Durch Drücken einer beliebigen Taste gelangt man in das Hauptmenü. Der nun vorliegende Bildschirmaufbau verändert sich von da an nicht mehr. Ein verwirrendes Umblättern auf andere Bildschirmseiten entfällt. Man erkennt zunächst, daß der Bildschirm in drei Teile eingeteilt ist. Im oberen Teil werden immer die aktuellen Koordinaten des Cursors angezeigt. Die Zeilenposition des Cursors kann zwischen 0 und 49 (= 50 Zeilen), die der Spalte zwischen 0 und 59 (= 60 Spalten) liegen. Zwischen den beiden roten Balken befindet sich dann immer ein Ausschnitt der gerade im Textspeicher befindlichen Seite. Hier werden dann auch immer die verschiedenen Menüs eingeblendet. So ist momentan das Hauptmenü (Dokumente erstellen) zu erkennen. Auf dem unteren roten Balken wirdjeweils der Name des aktuellen Dokumentes und die Nummer der Seite desselben angezeigt.

Schließlich bleibt noch die unterste Zeile. Diese ist für Fehlermeldungen, Sicherheitsrückfragen etc. reserviert.

##  Einfache Menüstruktur

### Hauptmenü:<br>Dokumente erstellen beziehungsweise verändern

Dies stellt eigentlich kein Menü dar, da es praktisch »mitdenkt«, das heißt, man muß nicht angeben, ob man ein neues Dokument erstellen oder ein bereits vorhandenes verändern möchte.

In dieses Menü gelangt man automatisch nach dem Starten des Programmes. Das Programm erwartetvom Benutzer nun den Namen des Dokumentes (unterste Zeile). Korrigieren ist mit DEL möglich. Die Eingabe wird mit RETURN abgeschlossen. Hat man nur »$« eingegeben, so wird die Directory der Diskette angezeigt. Durch Drücken einer beliebigen Taste gelangt man wieder ins Hauptmenü.

Nach der Eingabe prüft das Programm, ob ein Dokument mit diesem Namen auf der Datendiskette existiert. Ist dies der Fall, so wird noch, falls das Dokument durch einen Code geschützt wurde, derselbe abgefragt. Stimmt dieser nicht mit dem gespeicherten Code überein, passiert nichts, das heißt, man gelangt wieder zu der Abfrage des Dokumentennamens. Auf diese Weise kann man wichtige Dokumente vor dem Einblick Unbefugter schützen. Wurde jedoch der richtige Code eingegeben, so wird die Seite des Dokuments mit der höchsten Nummer geladen. Man kann dann also direkt dort weiterarbeiten, wo man zuletzt aufgehört hat.

Stellt das Programm jedoch fest, daß ein Dokument mit dem eingegebenen Namen auf der Diskette nicht existiert, so wird angenommen, daß der Benutzer ein neues Dokument erstellen möchte. Sollte dies nicht der Fall sein oder sollte man sich bei der Eingabe nur vertippt haben, dann ist die Sicherheitsrückfrage mit »n« (nein) zu beantworten. Andernfalls verlangt das Programm noch den Schutzcode des Dokumentes. Drückt man nur die RETURN-Taste, so wird das Programm nicht geschützt, das heißt bei erneutem Laden erfolgt keine Schutzcodeabfrage.

Sind alle Eingaben beendet, so werden auf der Diskette die dokumentenspezifischen Parameter gespeichert und es kann auf der 1. Seite mit der Arbeit begonnen werden.

### Die Tastatur und der Texteditor

Wie die meisten Textverarbeitungsprogramme besitztauch Textmaster einen bildschirmorientierten Texteditor, dessen Bedienung größtenteils identisch ist mit der des normalen Basic-Editors. Dies macht die Bedienung besonders einfach. So kann man mit den Cursortasten jede Stelle der 60 x 50 gleich 3000 Zeichen großen Seite erreichen.

An Zeichen stehen zur Verfügung alle Klein-/Großbuchstaben, Sonderzeichen und sogar alle Grafikzeichen des Commodore-Zeichensatzes. Lediglich der Pfeil nach links (linke obere Taste auf der Tastatur) darf nicht verwendet werden, da dieser als Absatzzeichen fungiert. Auch darf man aus programmtechnischen Gründen das Zeichen mit dem Bildschirmcode 255 unter gar keinen Umständen benutzen.

Ansonsten jedoch stehen alle Zeichen zur Verfügung. So hat man in Verbindung mit den Grafikzeichen des Commodore-Zeichensatzes oder mit Zeichen aus einem eigenen Zeichensatz die Möglichkeit, Tabellen oder Spezialzeichen (zum Beispiel mathematische Zeichen) in einen Text einzubinden.

### Die RETURN-Taste

Wurde die RETURN-Taste gedrückt, so wird ein »Wagenrücklauf« veranlaßt. Befindet sich der Cursor jedoch in der 0. Spalte, so wird statt eines Wagenrücklaufs das Setzen des Cursors in die 39. Spalte ausgelöst. Dies ist eine nützliche Funktion, da man auf diese Weise den Text einfach durch wiederholtes Drücken der RETURN-Taste kontinuierlich lesen kann.

Wird die RETURN-Taste in Verbindung mit der SHIFT-Taste gedrückt, so wird an die augenblickliche Position des Cursors ein Absatzzeichen gesetzt und dann ein Wagenrücklauf ausgelöst. Beim Ausdruck wird das Absatzzeichen dann natürlich ignoriert.

### Die CLR-Taste

Mit der Funktion CLR (SHIFT-HOME) wird der gesamte Textspeicher gelöscht. Man sollte sich vorher vergewissert haben, daß die aktuelle Seite bereits auf Diskette gespeichert wurde, bevor man die Sicherheitsrückfrage mit »ja« beantwortet.

### Die DEL- beziehungsweise INST-Taste

Diese beiden Tasten werden genauso wie im normalen Basic-Editor verwendet. Mit einer kleinen Einschränkung. Sie wirken jeweils nur auf die Zeile, in der sich der Cursor gerade befindet. Deshalb sind diese beiden Tasten nur für kleinere Ausbesserungen geeignet. Es ist zu beachten, daß bei der INST-Funktion die Buchstaben auf der rechten Seite hinausgeschoben werden und damit verlorengehen. Müssen größere Textstellen eingefügt werden, so muß die Funktion ZEILE-EINFÜGEN verwendet werden (siehe unten).

### Extended Modus

Durch Drücken von RVS ON (CTRL + 9) gelangt man in den EXTENDed MODUS. Alle eingegebenen Zeichen erscheinen nun auf dem Bildschirm invertiert. Durch Drücken von RVS OFF (CTRL + 0) oder bei jedem Wagenrücklauf gelangt man wieder in den NORMal Modus. Im Druckermenü wird dann festgelegt, wie die auf dem Bildschirm invertierten Zeichen auf dem Papier erscheinen sollen, etwa auch invertiert oder zum Beispiel unterstrichen.

### F5-Taste - Text neu ordnen

Voran noch eine Einleitung, wie man Texte am zügigsten eingibt. Man gibt den Text ohne Rücksicht auf das am Ende erwünschte Format ein. Die einzelnen Wörter gibt man auch über eine Zeile hinaus ein. Absätze werden durch Drücken von SHIFT-RETURN markiert. Durch Drücken der F5-Taste wird der Text linksbündig geordnet, das heißt in eine Zeile werden so viele vollständige Wörter wie möglich gesetzt. Würde also ein Wort beim Setzen in die betreffende Zeile über den rechten Rand der Seite hinausreichen, so wird das ganze Wort einfach in die nächste Zeile gesetzt. Wurde so der ganze Text linksbündig formatiert, erhält man gewöhnlich rechts einen ziemlich unregelmäßigen »Flatterrand«, aber der Text wäre somit schon fertig für den Ausdruck.

Nebenbei sei bemerkt, daß nach Aufrufen dieser Funktion der Text gewöhnlich 2 bis 3 Zeilen länger geworden ist, da er nun nicht mehr so dicht »gepackt« ist. Daher sollte man sich vorher überzeugen, daß die letzten Zeilen frei sind, da ansonsten die letzten Wörter verloren wären.

### RUN/STOP-Taste - Wörter trennen

Oben wurde bereits erwähnt, daß der Text, nachdem er neu geordnet wurde, gewöhnlich einen Flatterrand besitzt. Mit der Funktion »Wörter trennen« kann dieser erheblich begradigt werden. Man geht mit dem Cursor auf das erste Wort einer Zeile und setzt ihn auf den Anfangsbuchstaben der letzten Silbe des Wortes. Wäre das Wort zum Beispiel »glücklicherweise«, dann kann man davon ausgehen, daß, da das Wort relativ lang ist, in der vorhergehenden Zeile noch Platz für ein paar Silben des Wortes ist. Man möchte natürlich möglichst viele Silben in die vorhergehende Zeile übernehmen. In dem Fall ist die letzte Silbe »-se«. Man setzt den Cursor also auf »s« und drückt die RUN/STOP-Taste. Das Programm nimmt nun den Wortteil »glücklicherwei«, setzt ihn in die vorhergehende Zeile und fügt automatisch das Trennzeichen »-« an. Anschließend wird ebenfalls automatisch die Funktion »Wörter neu ordnen« aufgerufen, so daß der Text wieder lückenlos geschlossen ist.

Stellt das Programm jedoch fest, daß in der vorhergehenden Zeile nicht mehr genug Platz für »glücklicherwei« ist, so passiert überhaupt nichts. In diesem Fall setzt man den Cursor auf den Anfangspunkt der nächsten Silbe, also auf das »w« in »-wei-«. Dies setzt man so lange fort, bis das Wort erfolgreich getrennt wurde.

### Zeile löschen (F3) - Zeile einfügen (F4)

Ein Druck auf die Taste F3 bewirkt ab Cursorposition das Löschen der nächsten 60 Stellen. Der nachfolgende Text wird außerdem um eine Zeile nach oben verschoben. Diese Funktion dient hauptsächlich dem Löschen größerer Textbereiche.

Die Funktion »Zeile einfügen« (F4) bewirkt gewissermaßen das Gegenteil. Ab Cursorposition werden 60 Leerstellen eingefügt. Es ist somit möglich, größere Textbereiche einzufügen. Reichen 60 Leerstellen nicht aus, so ist die Funktion erneut aufzurufen, allerdings ist dabei zu beachten, daß jeweils die unterste Zeile einer Seite verlorengeht. Man sollte sich vorher vergewissern, daß diese unbeschrieben ist.

### Seite auf Diskette sichern (F2) - blättern (F7 und F8)

Zuvor muß noch erklärt werden, wie ein Text auf der Diskette festgehalten wird. Wie schon erwähnt, werden Texte in Form von Dokumenten gespeichert. Jedes dieser Dokumente besteht aus einzelnen Seiten. Im Speicher des C 64 befindet sich jeweils eine Seite eines Dokumentes, nämlich die, an der man gerade mit Hilfe eines Texteditors arbeitet. Hat man eine Seite vollgeschrieben oder möchte man mit der betreffenden Seite zum Beispiel ein Kapitel abschließen und auf einer neuen Seite beginnen, so muß diese erst auf Diskette gespeichert werden. Dies geschieht durch Drücken der Taste F2 und anschließendem Bejahen der Sicherheitsrückfrage. Möchte man nun mit der nächsten Seite beginnen, so drückt man F7 (vorblättern). In der unteren Zeile des Bildschirms erscheint dann »Blättere zu Seite n«, wobei n der aktuellen Seite plus eins entspricht. Dann drücke man auf die RETURN-Taste. Das Programm prüft nun, ob Seite n auf der Diskette vorliegt. Liegt sie vor, so wird sie geladen und erscheint auf dem Bildschirm. Man kann sie nun lesen oder verändern und erneut speichern. Lag die Seite allerdings nicht vor, so erscheint nur ein leerer Bildschirm, das heißt, eine unbeschriebene Seite. Durch mehrmaliges Drücken der F7-Taste kann man beliebig weit vorblättern oder zurückblättern (F8), ähnlich wie in einem Buch.

Durch das Drücken der RUN/STOP-Taste verläßt man den Modus ohne Laden einer Seite. Jede Seite beansprucht einen Platz von 12 Blöcken auf der Diskette. Eine Diskette kannsomitimmerhin biszu 664/12 = 55Seitenaufnehmen.

### Zeichensatz laden (F6)

Eine besondere Möglichkeit von Textmaster besteht darin, daß man jeden beliebigen Zeichensatz laden und auch ausdrucken kann.

Nach dem Laden des Programms liegt automatisch ein deutscher Zeichensatz vor, der für die meisten Anwendungen genügen dürfte. So entspricht der Klammeraffe dem »ä«, der Multiplikationsstern dem »ö« und das Potenzzeichen (Pfeil nach oben) dem »ü«. In Verbindung mit der SHIFT-Taste stehen natürlich auch die großen Umlaute »Ä«, »Ö« und »Ü« zur Verfügung. Ferner entspricht das Pfundzeichen dem »ß« und das Nummernzeichen (SHIFT 3) dem Anführungszeichen unten. Diese Belegung entspricht zwar nicht einer deutschen Schreibmaschinentastatur, erscheint mir aber am zweckmäßigsten, da man ansonsten gleich zum Beispiel die Zeichen »:« und »;« ebenfalls umbelegen müßte, was zur Folge hätte, daß die Symbole auf der Tastatur überhaupt nicht mehr den dazugehörigen Zeichen entsprechen würden. Das »Z« und das »Y« wurden nicht vertauscht.

Benötigt man jedoch für spezielle Anwendungen, beispielsweise für mathematische oder chemische Formeln oder auch für französische Texte einen neuen Zeichensatz, so ist das mit Textmaster keine Schwierigkeit Durch Drücken von F6 und anschließendem Bejahen der Sicherheitsrückfrage gelangt man ins Zeichensatzmenü. Hier muß man zuerst beantworten, als was man den Zeichensatz benutzen möchte. Entweder als Arbeitszeichensatz (das ist der, den man auch auf dem Bildschirm sieht) oder als Alternativzeichensatz (davon später).

Hat man sich entschieden, so stehen nun vier Zeichensätze zurVerfügung. Nummer1 undNummer2sindeinfachKopien der Original Commodore-Zeichensätze (Klein/Groß und Groß/Grafik). Nummer 4 ist der deutsche Zeichensatz, der auch nach dem Laden von Textmaster vorliegt und Nummer 3 ist ein beliebiger Zeichensatz, der von der Diskette geladen wird. Davor wird noch der Name des Zeichensatzes abgefragt.

### Das Druckermenü (F1)

Bevor man sich entschließt, eine Seite zu drucken, sollte man sich vergewissern, ob der Text bereits das richtige Format besitzt. Sämtliche Formatierungen des Textes müssen vorher abgeschlossen werden, da, mit Ausnahme des rechten Randausgleichs, der Text so auf dem Papier erscheint, wie er auch auf dem Bildschirm zu sehen ist.

Nach dem Drücken von F1 und anschließendem Bejahen der Sicherheitsrückfrage, werden die verschiedenen Druckparameter abgefragt. Zunächst, von welcher bis welcher Zeile gedruckt werden soll. Man kann sich also einen Textausschnitt heraussuchen, zum Beispiel Zeile 10 - 25. Gibt man statt einer Zahl jeweils nur RETURN ein, so wird vom Programm angenommen, daß die ganze Seite (Zeile 0 - 49) ausgedruckt werden soll.

Anschließend verlangt das Programm, wie die Zeichen im Extended Modus (erscheinen auf dem Bildschirm invers) auf dem Papier erscheinen sollen, entweder unterstrichen, invertiert oder als Alternativzeichen. Dazu ist zu sagen, daß sich im Speicher des C 64 zwei Zeichensätze befinden können. Bei normalen Zeichen wird die Bitmatrix des Zeichens, die an den Drucker geschickt wird, aus dem Arbeitszeichensatz (das ist der, der auf dem Bildschirm zu sehen ist) genommen. Bei einem extended Zeichen wird dann die Bitmatrix aus dem Alternativzeichensatz genommen. Normalerweise befindet sich nach dem Starten des Programms der Original Commodore-Groß/Klein-Zeichensatz im Speicher, damit auch die geSHIFTeten Grafikzeichen zur Verfügung stehen.

Man könnte nun aber den auf Programmdiskette befindlichen Zeichensatz »dünn« als Arbeitszeichensatz laden und den deutschen als Alternativzeichensatz. Auf diese Weise erscheinen dann die Alternativzeichen als Fettschrift. Auf die gleiche Weise läßt sich auch zum Beispiel Kursivschrift simulieren.

Hat man sich nun zum Beispiel für Unterstreichen entschieden, so bezieht sich dies auf die ganze Seite. Normalerweise genügt das auch. Möchte man nun aber aus irgendwelchen Gründen eine Seite ausdrucken, in der zum Beispiel in Zeile 5 etwas unterstrichen, in Zeile 6 hingegen etwas invertiert werden soll, so muß man den Text in entsprechend mehrere Teile zerlegen. Im obigen Beispiel müßte man das Druckermenü also zweimal aufrufen. Das erste Mal von Zeile 0 - 5, unterstrichen, und das zweite Mal von Zeile 6 - 49, invertiert.

Als nächstes möchte das Programm erfahren, ob man die Zeichen in normaler Breite (8x8 Bitmatrix) oder in komprimierter Form (7x8 Bitmatrix) drucken möchte. Die Bildschirmzeichen bestehen zwar aus einer 8x8 Bitmatrix, jedoch hat sich gezeigt, daß zumindest Buchstaben, Zahlen und Sonderzeichen, kurz: jene Zeichen, die man für einen ganz normalen Text verwendet, daß diese eigentlich nur aus einer 6x8 Bitmatrix bestehen, da sich links und rechts von jedem Buchstaben eine leere Bitspalte befindet, obgleich eine bereits genügen würde. Bei der komprimierten Schriftbreite wird also jedes Zeichen auf eine 7x8 Bitmatrix reduziert. Dies hat den Vorteil, daß die Zeichen enger aneinanderstehen und somit besser gelesen werden können. Die Anzahl der Zeichen pro Zeile bleibt jedoch unverändert, nämlich 60.

Die normale Schriftbreite wird benötigt, wenn man Zeichen unbedingt in der 8x8 Bitmatrix drucken möchte, etwa irgendwelche Grafik- oder Spezialzeichen. Selbstverständlich kann man die Seite auch wieder aufteilen und einen Teil normal, den anderen Teil komprimiert drucken. Es gibt insgesamt zahlreiche Variationsmöglichkeiten.

## Komfortabler Randausgleich

Hat man sich auch hier entschieden, so wird gefragt, ob rechter Randausgleich erwünscht ist, das heißt, bei Bejahen erscheint der Text auch rechtsbündig. Schaut man sich das Druckbild etwas genauer an, so fällt einem sofort ein entscheidender Vorteil von Textmaster gegenüber anderen Textverarbeitungssystemen auf. Bei anderen Systemen nämlich wird die Rechtsbündigkeit durch mehrfaches Einfügen von Leerstellen erreicht. Dies hat den Nachteil, daß stellenweise weiße Flächen im Druckbild erscheinen, die den Text trotz der Rechtsbündigkeit etwas unregelmäßig erscheinen lassen. Bei Textmaster hingegen werden die fehlenden Leerstellen gleichmäßig auf die Leerstellen zwischen den einzelnen Wörtern einer Zeile verteilt, und zwar jeweils punktweise, das heißt innerhalb einer Zeile sind die Abstände zwischen den Wörtern gleich groß. Weiße Flächen entstehen nicht.

Um die nächsten Abfragen des Programmes zu verstehen, muß noch erklärt werden, wie die Zeichen an den Drucker gelangen.

Gedruckt wird im Grafikmodus. EineZeile, die gedruckt werden soll, besteht eigentlich aus zwei Zeilen für den Drucker, so daß für jede Bildschirmzeile insgesamt 2x7 = 14 Druckerdots zur Verfügung stehen.

Für ein Zeichen benötigt man jedoch nur 8 Dots, so daß insgesamt 6 Dots als Zeilenzwischenraum verbleiben. Werden Zeichen unterstrichen, wird das 10. Dot gedruckt. Dies hat den Vorteil, daß selbst bei Zeichen mit Unterlängen, zum Beispiel dem »g«, der Unterstrich sich deutlich von der Unterlänge abhebt.

## Hoch- und Tiefschrift

Textmaster bietet jedoch auch die Möglichkeit der Hoch- und Tiefschrift. Wo benötigt man sie? Eigentlich nur ganz selten. In mathematischen Formeln, zum Beispiel für Exponenten (Hochschrift), oder als Indizes (Tiefschrift), aber zum Beispiel auch in chemischen Formeln. Normalerweise werden diese jedoch nicht verwendet, daher ist die Abfrage der Dots für Hoch-, Normal- und Tiefschrift einfach mit RETURN zu beantworten. Die Dotzahl gibt an, ab welchem Dot das Zeichen gedruckt wird. Da insgesamt 14 Dots zur Verfügung stehen, kann sich die Dotzahl zwischen 0 und 6 befinden. Möchte man beispielsweise Tiefschrift verwenden, so ist die Dotzahl 3 bei der Tiefschrift einzugeben, wenn man die Tiefschrift um 3 Dots nach unten von der Normalschrift absetzen möchte. Will man jedoch Hochschrift benutzen, so wird die Sache komplizierter. Für die Hochschriftdotzahl gibt man am besten 0 an. Für Normalschrift kann man nun aber nicht auch die Dotzahl 0 eingeben, da sich sonst die Hochschrift gar nicht von der Normalschrift absetzen würde. Vielmehr sollte man als Normalschriftdotzahl nunmehr 3 eingeben und für die Tiefschrift die Dotzahl 6. Es kommt also lediglich auf die relativen Dotzahldifferenzen an. Möchte man in einer Zeile Hochschrift benutzen, so muß also der ganze Text die gleiche Normalschriftdotzahl besitzen, da sonst die Normalschrift der betroffenen Zeile als Tiefschrift erscheinen würde.

Wie kennzeichnet man nun, was in welcher Schrifthöhe erscheinen soll? Dazu stehen drei Steuerzeichen zur Verfügung: CTRL 1 (Hochschrift), CTRL 2 (Normalschrift) und CTRL 3 (Tiefschrift). Die Steuerzeichen werden durch Grafikzeichen symbolisiert (Bildschirmcode 252 - 254). Es ist zu beachten, daß im Extended Modus die Zeichen »C = X«, »C = C« und »C = V« nicht benutzt werden dürfen, da diese als nicht druckbare Steuersymbole interpretiert würden.

### Zusätzliche Funktionen

Die nachfolgenden Funktionen werden mit der CONTROL-Taste in Verbindung mit einer Buchstabentaste aufgerufen. Dies sind vorwiegend selten benötigte Funktionen. Die wichtigsten und am meisten benötigten sind ja über die Funktionstasten zu erreichen.

CTRL D bewirkt einen Sprung ins Hauptmenü. Man hat so die Möglichkeit, an einem anderen Dokument weiterzuarbeiten.'

CTRL H bewirkt eine Auflistung aller Befehle. Durch nochmaliges Drücken von CTRL H werden weitere Befehle aufgelistet.

CTRL W: Es stehen zwei vorgewählte Farbeinstellungen zur Verfügung, die über CTRL W wechselseitig aufgerufen werden können.

Mit CTRL F gelangt man ins Floppymenü. Hier steht zur Verfügung: 1. Zurück zum Texteditor, 2. Floppybefehl senden, 3. Dokument löschen, 4. Directory-Anzeige.

Hat man »Dokument löschen« versehentlich aufgerufen, so drückt man einfach RETURN.

Schließlich steht noch die Funktion »Zeile(n) zentrieren« (CTRL Z) zur Verfügung. Es wird gefragt, von welcher bis zu welcher Zeile zentriert werden soll. Gibt man hierbei einfach zweimal RETURN ein, so wird nur die Zeile zentriert, in der sich der Cursor gerade befindet. Diese Funktion ist recht nützlich, zum Beispiel für Überschriften, die genau in der Mitte einer Zeile stehen sollen.

### HINWEIS!

In Zeile 4900 kann es eventuell zu Komplikationen kommen. In dieser Zeile wird nämlich die Schriftfarbe des Textes in das Farb-RAM gesetzt. Dazu wird der Farbcode (F1) in 53281 (Hintergrundfarbe) gePOKEt. Durch das anschließende Löschen des Bildschirms wird erreicht, daß das gesamte Farb-RAM die Hintergrundfarbe übernimmt. Es existieren nun aber zumindest zwei verschiedeneC64-Versionen. Auf der einen Version wird beim Bildschirmlöschen die Cursorfarbe (646) in das Farb-RAM übernommen. Man gebe daher im Direktmodus ein:
poke53281,0:print"{CLR/HOME}":poke53281,6:printpeek (55296)and15

Ist die Zahl nun ungleich 0 (=schwarz), dann ersetze man in Zeile 4900 die erste 53281 durch 646. Dadurch ändert sich natürlich die Prüfsumme für diese Zeile.

## Beliebige Zeichensätze

Ein Vorteil von Textmaster ist, daß der Benutzerjeden beliebigen Zeichensatz und damit quasi jede beliebige Schrift ausdrucken kann. Dies ist eigentlich keine Neuheit, jedoch ist bei Textmaster neu, daß die Daten für den Zeichengenerator des VICs ebenso als Daten für die auszudruckenden Zeichen fungieren. Es ist somit nicht erforderlich, für die Bildschirmzeichen und die Druckerzeichen zwei getrennte Zeichensätze zu kreieren.

Wenn der Benutzer also eine Schriftart kreieren möchte, muß man zunächst einmal wissen, welches Format der Zeichensatz besitzen muß, damit er von Textmaster verarbeitet werden kann. Dazu ist zu sagen, daß der Zeichensatz das gleiche Format haben muß wie auch die Originalzeichensätze im Speicher des C 64. Ein Zeichen besteht also aus 8 Byte, die eine 8x8-Bitmatrix bilden. Entsprechende Erläuterungen sind auch in unserem ausführlichen Grafikkursus (insbesondere Ausgabe 5/84 des 64’er-Magazins) zu finden. Der interessierte Leser kann sich diesja dann noch einmal zu Gemüte führen. InsgesamtsolltederZeichensatzsämtliche 255 Bildschirmzeichen enthalten. Es sollte ebenfalls beachtet werden, daß die Zeichen 128 - 255 die inversen Kopien der Zeichen 0 - 127 darstellen müssen. Ein vollständiger Zeichensatz belegt somit 9 Blöcke auf der Diskette. Die Fileart muß PRG sein, das heißt, der Zeichensatz muß auf der Diskette PROGRAMM vorliegen. Dies ist wichtig, da der Zeichensatz ansonsten vom Textmaster auf der Diskette nicht gefunden würde. Die Startadresse des Files kann beliebig sein, da der Zeichensatz vom Textmaster ohnehin nicht absolut geladen wird.

Es ist verständlich, daß wir diese Zeichensätze nicht veröffentlichen können, zumal es eine Zumutung für jeden Leser wäre, eine Wüste von Zahlen abzutippen (ein Zeichensatz besteht aus 2048 Byte!). Auf der Leserservice-Diskette befinden sich aber einige Beispiel-Zeichensätze. Bleibt also nur, daß der Benutzer selbst seinen »individuellen« Zeichensatz erstellen muß. Es stehen in der Formgebung von Buchstaben nahezu unbegrenzt viele Möglichkeiten zur Verfügung.

Allerdings ist es ebenso unzumutbar, sich eine gesamte Schrift »per Hand« über eine Bitmatrix auf dem Papier »zusammenzuPOKEn«, daher benötigt man einen Zeichengenerator.

Wer aber schon einen Zeichengenerator hat, kann diesen jederzeit verwenden, wenn die auf Diskette gespeicherten Zeichensätze das oben beschriebene Format erfüllen.

## Eigener Zeichengenerator

Diejenigen Leser, die über keinen Zeichengenerator verfügen, finden im Listing 4 den kleinen, aber leistungsfähigen »CHAR-GENERATOR«. Dieses Programm ersetzt zwar keinen ernstzunehmenden Zeichengenerator, jedoch können die damit erstellten Zeichensätze direkt vom Textmaster übernommen werden. »CHAR-GENERATOR« ist quasi ein Ergänzungsprogramm zu Textmaster. Auf eine nähere Dokumentation möchte ich wegen der Kürze des Programms verzichten, es ist höchstens zu sagen, daß das kleine Maschinenprogramm die Originalzeichensätze nach 8192 kopiert. Die zur Verfügung stehenden Befehle werden auf den Bildschirm geschrieben.

Auf diese Weise ist es möglich, ganze Schriftbibliotheken anzulegen. Es empfiehltsich, das Erstellen der Texte mit dem normalen Zeichensatz vorzunehmen, um einen ungewohnten Zeichensatz auf dem Bildschirm zu vermeiden, und erst kurz vor dem Ausdruck die erwünschte Schrift zu laden. Auf der Leserservice-Diskette befinden sich schon drei fertige Zeichensätze:

- dünn
- quadrato
- Iuxus

(Mario Weck/bs)

# Trainingsprogramm fürs Maschinenschreiben \[23-25\]

> Um gleichzeitig schnell und fehlerfrei auf der Schreibmaschine zu schreiben, benötigt man viel Übung. Mit diesem Trainingsprogramm können Sie Ihre Fingerfertigkeit nach den Richtlinien der IHK testen und bewerten.

Immer mehr Schüler und Auszubildende haben Maschinenschreiben als Unterrichtsfach. Diesen hilft das Programm TPFM (Trainingsprogramm für Maschinenschreiben) bei der Leistungskontrolle. Ferner ermöglicht TPFM dem Lernenden ohne Papier- und Farbbandverbrauch mit Hilfe des Commodore 64 zu üben. Auch den technischen Lehrern der Berufs- und Fachschulen leistetTPFM gute Dienste. Das bisher erforderliche arbeitsintensive und fehleranfällige Blättern und Suchen in Umrechnungstabellen entfällt. Der C 64 gibt nach Eingabe von Anschlägen und Fehlerzahl sofort die entsprechende Note auf dem Bildschirm aus.

Nachdem das Programm (Listing 1) geladen und mit »Run« gestartet wurde, wird die Tastatur des C 64 auf die gültige DIN für Schreibmaschinentastaturen umgestellt. Hierauf erscheint das Hauptmenü mit folgenden Auswahlpunkten auf dem Bildschirm:
1 — Schreiben
2 — Korrigieren
3 — Benoten
4 — Ende

**Schreiben**: Nach der Auswahl dieses Menüpunktes kann ein beliebiger Text eingegeben werden. Die Uhr zum Messen der benötigten Zeit startet erst nach dem Drücken des ersten Buchstabens. Nach zehn Minuten bricht der Computer automatisch die Texteingabe ab. Mit »SHIFT RETURN« kann man sie vorzeitig beenden.

Bei der Notenberechnung wird dann die Anschlags- und Fehlerzahl auf eine Zehnminutenleistung hochgerechnet. In beiden Fällen verzweigt das Programm zu einer Informationsseite. Hier, gleichgültig ob man sie durch Abbruch mit der SHIFT-RETURN-Taste oder nach zehn Minuten auf regulärem Weg erreicht hat, gibt der Computer die Textlänge, die benötigte Zeit und die Anschlagszahl pro Minute an.

Nachdem der Anwender mit »RETURN« die Informationsseite verlassen hat, gelangt er in das Abspeichermenü. Dieses bietet folgende Auswahlpunkte an:
a) Auf Kassette speichern
b) Auf Diskette speichern
c) Korrigieren (ohne speichern)

In den ersten beiden Fällen a und b verzweigt der Computer nach dem Speichern in das Hauptmenü. Im Fall c wird der Programmteil »Text kontrollieren« aufgerufen. Hier wird der Text nicht von einem externen Speicher geladen, da er sich noch im Hauptspeicher befindet.

**Hinweis**: Der Text wird immer automatisch unter dem Namen »text« abgespeichert.

**Korrigieren**: Von hier aus verzweigt das Programm in das Lademenü. Dort kann man auswählen, ob die Textdatei von Kassette oder Diskette geladen werden soll. Anschließend wird der Text buchstabenweise auf dem Bildschirm wiedergegeben. Der Anwender drückt nun jedesmal, wenn er einen Fehler entdeckt hat, kurz die Leertaste.

In der obersten Zeile des Bildschirms steht eine Fehleranzeige. Diese erhöht sich nach jedem Druck auf die Leertaste. Man kann den Ablauf durch das Drücken der SHIFT-Taste anhalten. Das Programm setzt das Listen des Textes erst fort, wenn der Anwender diese wieder losläßt. Wenn der Programmteil »Text kontrollieren« beendet ist, gelangt der Anwender durch Drücken der RETURN-Taste in das Unterprogramm »Berechnen der Note«. Hier fragt das Programm, ob man ein Anfänger oder Examenskandidat ist. Wenn man den zweiten Fall wählt, wird die Note ausgegeben, mit der die Schreibleistung in der Schulprüfung honoriert worden wäre. Zusätzlich erfährt der Anwender, ob er die IHK-Prüfung bestanden hätte. Entscheidet man sich für den Auswahlpunkt »Anfänger«, erteilt der Computer eine entsprechend bessere Note. Durch Drücken der RETURN-Taste kann der Anwender TPFM neu starten.

**Benoten**: Der Menüpunkt »Benoten« ist für Lehrkräfte gedacht. Nach der Eingabe von Anschlags- und Fehlerzahl wird die entsprechende Note ausgegeben. Gibt man bei Fehlerzahl ein »x« ein, kehrt man in das Hauptmenü zurück.

**Abändern der Notentabelle**: Die in dem Programm verwendete Notentabelle ist unter Umständen nicht für alle Bundesländer gültig. Darum wird hier zusätzlich beschrieben, wie man die Skala — falls erforderlich — anpassen kann:

Ausschnitt der verwendeten Notentabelle (konventionelle Form):

TODO TABLE

5.5 5 4.5 4 3.5 3 2.5 2 1.5 1
0 Fehler 1200 1400 1600 1700 1800 1 Fehler 1200 1400 1600 1700 1800 2 Fehler 1200 1400 1500 1600 1700 1800 etc.

Ausschnitt der verwendeten Notentabelle (kodierte Form):
DATA 1200,5,12,14,16,17,18,-1,5,12,14,16,17,18,-1,4,12, 14,15,16,17,18

Die kodierten Werte werden von dem Programm TPFM in ein zweidimensionales Feld eingelesen.

In dieser Tabelle sind 1200 Anschläge Grundvoraussetzung für das Bestehen der Prüfung. Wenn man weniger Anschläge hat, ist man automatisch durchgefallen. Diese Zahl ist der erste DATA-Wert. Der zweite gibt an, wieviele Noten in der Tabelle unbesetzt sind. Bei Fehlerzahl 0 sind dies zum Beispiel 5 Noten (5.5, 5, 4.5, 4, 3.5). Die Note 6 bleibt unberücksichtigt. Die hierauf folgenden DATA-Werte sind die Anschlagsgrenzen zwischen den verschiedenen Noten. Zur Erleichterung der Arbeit des Anwenders wird die Eingabe automatisch rechtsbündig mit Nullen auf vier Stellen ergänzt. Es ist auch vorgesehen, Werte von unter 100 Anschlägen einzuspeichern. Die gewünschte Anschlagszahl wird dann einfach mit einem Minuszeichen versehen. Dieses wird vom Programm beim Einlesen in das zweidimensionale Feld entfernt. Die Anschlagszahl wird in diesem Falle nicht ergänzt. Nachdem alle Werte einer Tabellenzeile eingegeben sind, ist die Kennziffer (DATA-Wert) —1 anzugeben. Wenn man bei dem unteren Ende der Notentabelle, in diesem Fall »20 Fehler«, angelangt ist, gibt man die Kennziffer —2 an. Hierdurch erfährt der Computer, wann die Tabelle vollständig eingelesen ist. Daraufhin verzweigtTPFM zu dem Programmteil »Noten ermitteln«.

(Dirk Marzluf/og)

# Taktvoller Musiker \[27-31\]

> Dieses Schlagzeugprogramm für den C64 imitiert bis zu acht verschiedene Schlaginstrumente. Durch die Möglichkeit, Taktsequenzen zu programmieren, wird der Computer zum taktgenauen Rhythmusgerät.

Das Programm (siehe Listing) bietet vier Hauptmenüpunkte:

1.	Laden und Speichern von Schlagzeugsequenzen
2.	Sequenzen erstellen
3.	Sequenzen abspielen
4.	Sequenzen auf der »Schautafel« betrachten.

Von jedem Menüpunkt kommt man durch die Eingabe eines Sterns (\*) wieder in das Hauptmenü zurück.

**Zu 1**: Es können insgesamt 100 Sequenzen zu je 32 Takteinheiten eingegeben werden. (8 Presets sind von vornherein vorhanden, sie haben die Sequenznummer 1 bis 8). Die Speicherung dieser Sequenzen übernimmt der erste Programmpunkt. Es muß nur der Programmname angegeben werden und das Programm lädt (oder speichert) alle existierenden Sequenzen auf Kassette. Danach springt es wieder zum Hauptmenü zurück.

**Zu 2**: Zuerst müssen Sie eingeben, welche Sequenz editiert werden soll. (Der Computer zeigtjeweils die letzte eingegebene Sequenznummer an, damit man weiß, wie viele Files schon belegt sind.) Danach wird gefragt, welcher Teil des Schlagzeugs eingestellt werden soll. Es stehen zur Verfügung:

Snare Drum, Akzente, Baß-Drum, Hi-Hat(zu), Hi-Hat(offen), Becken, kleine Trommel und große Trommel.

Da der C 64 nicht acht verschiedene Klänge auf einmal spielen kann, mußten folgende Vereinbarungen getroffen werden: Es darf aus den drei Hauptgruppen (siehe unten) jeweils nur ein Instrument pro Takt genommen werden.

1.	Gruppe: Snare Drum; Akzente
2.	Gruppe: Baß-Drum; kleine Trommel; große Trommel
3.	Gruppe: Hi-Hat (zu und offen); Becken

Wenn alle Schlagzeugteile in einem Takt gesetzt sind, gilt das als Taktende. Das ist nützlich, um zum Beispiel Dreivierteltakte zu programmieren.

Wenn man aus den acht Instrumenten gewählt hat, wird ein neues Bild aufgebaut und man kann mit dem Joystick oder den Cursor-Tasten auf den 32 Takteinheiten Punkte setzen oder löschen. Falls schon einige Takte gesetzt waren, wird das natürlich auch angezeigt. Das macht man nun mit jedem Schlagzeugteil bis die ganze Sequenz eingestellt ist.

**Zu 3**: Wählt man diese Funktion, wird man gefragt, ob man eine einzelne oder mehrere Sequenzen hintereinander gespielt haben will. Das ist nützlich um zum Beispiel verschiedene Rhythmen mit kleinen Soli (»Breaks«) zu kombinieren. Probieren Sie zum Beispiel einmal die Sequenzenkombination 1,2,4,3,0 aus (die Null zeigt das Ende der Eingabe an). Bei der einzelnen Sequenz kann man zwischen der gerade editierten und einer anderen wählen. Im Spielmodus, der rechts oben im Bild angezeigt wird, kann man mit den Cursor-Tasten die Geschwindigkeit einstellen (insgesamt 256 Geschwindigkeiten). Weitere Funktionen: F1 - Ende; F3 - zurück zum Menü; F5 - Sequenz von Anfang an spielen; F7 - Sequenz von der abgebrochenen Stelle an weiterspielen.

**Zu 4**: Um zu sehen, wie alle Takte einer Sequenz (Snare Drum, Hi-Hat, etc.) aussehen, wählt man den vierten Programmpunkt. Zuerst wird man wieder gefragt, welche Sequenz man sich ansehen will. Danach zeigt der Computer alle Taktsequenzen auf dem Bildschirm. (Wichtig: Einen schönen Effekt erzielt man, wenn Snare Drum und Baß-Drum zusammen gespielt werden; das ergibt ein Metall-Geräusch.) Man kann von hier aus wieder zum Menü oder zum zweiten Programmteil verzweigen. Wie schon erwähnt, sind im Programm bereits acht Presets (fest programmierte Sequenzen) enthalten, die auf Wunsch verändert werden können. Nach »RUN« sind Sie wieder im Ausgangszustand.

### Programmtechnik:

Ich habe mir überlegt, wie man eine 32 Takte lange Sequenz mit je acht verschiedenen Rhythmusgeräten auf minimalen Speicherplatzbedarf ablegen könnte. Am besten erschien mir dann, je einem Takt ein Byte zuzuordnen und jedes Schlaginstrument als 1 Bit (8 Schlaginstrumente = 28 = 2 56 = 1 Byte) zu kennzeichnen. Das erklärt auch, warum eine Belegung aller acht Instrumente auf einem Takt das Taktende kennzeichnen: Bei dem Modus »mehrere Sequenzen hintereinander« ist das Ende-Flag auch die Zahl 255.

Jede Taktsequenz ist in dem Variablenfeld T(Z,NR) abgespeichert (Z=1 -32 =Taktfeld, NR=Nummer der Sequenz).

### Wichtige Variablen

ZA: Nummer der höchsten Sequenz
Z: Nummer der gerade editierten Sequenz
N$: Name der Datei A$: Tastaturvariable H;J: Laufvariablen

### Maschinenprogramme:

TODO TABLE

$ 9003 - $ 900E: Löschen aller SID-Register
$ 9010 - $ 9085: Schlagzeugsounds
$ 90A0 - $ 9180: Hauptabspielroutine:
1.	Entsprechend den Bits auf die Sounds verzweigen
2.	Geschwindigkeitskontrolle
3.	Geschwindigkeitsdarstellung
4.	»LED«-Kontrolle
$ 9200 - $ 9250: »LEDs« für die Schautafel $9251 -$9273: »LEDs«fürSequenzeinstellen

## Hinweis

Das Programm ist auf Datasettenbetrieb ausgelegt. Für den Betrieb mit einer Floppy sind die Zeilen 2120 und 2270 zu ändern:
2120 OPEN 1,8,1,N$+",S,W"
2270 OPEN 1,8,0,N$+",S,R"

(Thomas Langens/tr)

# Kassetten-Layout \[32-39\]

> Überlassen Sie die komplette Musik-Kassetten-Beschriftuhg von der Hülle bis zum Kassetten-Aufkleber dem Computer. Alle Daten kommen fertig zum Ausschneiden aus dem Drucker.

»Kassetten-Layout« besteht aus zehn Programmpunkten, die im folgenden erläutert werden.

### 1.	Arbeitshinweise

Innerhalb dieses Programmpunktes findet der Anwender eine ausführliche Beschreibung der Arbeitsmöglichkeiten dieses Programmes.

### 2.	Betriebsvariablen setzen

Wie Sie wissen, gibt es bei Leerkassetten unterschiedliche Bandsorten, nicht jede Kassette hat eine Sicherheitsbandmechanik, manche Leute nehmen ihre Kassetten nur in Mono und andere nur in Stereo auf.

Unterschiede gibt es auch in der Rauschunterdrückung. Manche schwören auf DOLBY, andere wiederum auf HIGH-COM. Hier kann sich jeder Benutzer seine eigenen Angaben nach Bedarf auswählen.

### 3.	Standardvariablen

Hier findet der Benutzer bereits vorgegebene Aufnahmedaten vor. Diese Festwerte können allerdings vom jeweiligen Benutzer in der Zeile 5010 für eigene Bedürfnisse abgeändert werden.

### 4.	Dateneingabe

Zuerst einmal wird der Kassettentitel für die Kassettenhülle abgefragt. Dann werden die ausgewählten Aufnahmedaten einschließlich des Kassettentitels angezeigt.
Tastenfunktionen:
w steht für Weiterblättern
z steht für Zurückblättern
m steht für Rückkehr ins Menü

Ist alles richtig, drückt man die Taste »j«. Danach befindet man sich im Eingabemodus für die Hüllenseite 1. Für Seite 1 sind 14Zeilenverfügbar. Ein Zähler zeigt an, auf welche Zeile sich die nächste Eingabe bezieht. Leereingaben (Return) sind zulässig. Hat man alle 14 Zeilen hinter sich, erscheint die Kontrollseite.

Hier hat man nun die Möglichkeit, Tippfehler unter Angabe der änderungsbedürftigen Zeilen zu korrigieren. Nummernlose Zeilenangaben oder höhere Zeilenangabe als vorgegeben, werden mit einer Fehlermeldung quittiert. Sind keine Korrekturen notwendig, drückt man die Taste »j« und es erscheint die Eingabeseite 2.

Es wird analog zur Eingabenseite 1 verfahren. Einziger Unterschied: Nur 13Zeilen sind verfügbar. Hat man auch hier alle Tipphürden überwunden, »landet« man in der Eingabe der Kassettenseite 1. Auch hier erscheint nach vollständiger Eingabe die entsprechende Kontrollseite zwecks eventueller Änderungen. Nun bleibt nur noch die Kassettenseite übrig. Hierbei entfällt allerdings die Eingabe der Titelzeile. Diese wird aus Kassettenseite 1 übernommen. Das Programm fragt nun, ob noch Aufnahmedaten (Herkunft von Kassette, LP,

Band oder sonstige Tonträger) eingegeben werden sollen.

Die nun folgende Funktion »Einspieldaten ausdrucken« ist natürlich nur interessant, wenn auch Einspieldaten eingegeben wurden.

### 5.	Daten sichern

Nachdem wir nun unsere Daten eingegeben haben, wollen wir sie auch sichern. Natürlich können wir die so erstellte Datei später wieder überschreiben, aber im Diskettenbetrieb fragt der Computer vorsichtshalber noch einmal nach, ob Sie es auch ernst meinen. Die eventuell unter dem gleichen Namen schon vorhandene Datei wird dann überschrieben. Falls Sie das aber nicht wollen, können Sie der zu speichernden Datei einen Ersatznamen geben:

Wählen Sie Menüpunkt 5. Dort kann man »D« für Diskette oder »T« für Turbotape wählen.

Drücken Sie »D« und geben Sie den Dateinamen ein. Sie bekommen nach dem Speichern die Meldung: »Die Daten sind gesichert«, und das Programm springt ins Menü zurück.

### 6.	Daten laden

Programmpunkt 6 arbeitet analog zu Programmpunkt 5. Nur werden hier bereits vorhandene Dateien geladen.

### 7.	Daten kontrollieren

Innerhalb dieses Programmpunktes können Sie die einzelnen Kontrollseiten auf etwaige Tippfehler untersuchen und notfalls korrigieren. Sie können durch Eingabe einer Zahl zwischen 1 und 7 gezielt eine bestimmte Kontrollseite aufrufen. Innerhalb der Kontrollseiten gelangen Sie mit »w« eine Seite weiter, mit »z« eine Seite zurück und mit »m« zurück ins Menü.

### 8.	Layout ausdrucken

Die Druckerroutine wurde für einen MPS-802 geschrieben. Das Layout (siehe Bild) brauchen Sie nur noch auszuschneiden und zu falten. Die beiden unteren Teile kleben Sie auf die Kassette.

### 9.	Archivdaten eingeben/ausdrucken

Jetzt müssen Sie die Aufnahmedaten eingeben und für wen die Kassette aufgenommen wurde. Wenn alles richtig ist, drücken Sie »j«.

Sie werden dann aufgefordert, die Archivdaten für Seite 1 einzugeben. Leereingaben (Return) sind zulässig. Die eingegebenen Daten werden noch einmal in einer Kontrollseite angezeigt.

Es folgt dann die Aufforderung, die Archivdaten für Seite 2 einzugeben.

### 0. Programmende

Ihr Computer wird auf die normalen Schrift- und Farbwerte zurückgesetzt. Auf einen Reset (SYS 64738) wurde verzichtet. Bei versehentlichem Drücken der Run/Stop-Taste kommt man mit einem »GOTO 10010« zurück ins Menü.

### Eingabehinweise:

Zuerst müssen Sie die geänderte INPUT-Routine aus Listing 1 eingeben. Dann folgt Listing 2. Beim Laden gehen Sie nach folgendem Schema vor:

TODO PRE

LOAD "INPUT",8,1
SYS 49152
NEW
LOAD "LAY0UT",8
RUN

(Karl-Heinz Wöllecke/tr)

# Mailbox-Basic - der einfache Weg zu der eigenen Mailbox \[41-44\]

> Selbst gemacht ist immer noch am besten. Mit dieser speziellen Mailbox-Sprache brauchen Sie sich um die Bedienung der RS232^chnittstelle keine Gedanken mehr zu machen.

Die Mailboxen schießen wie Pilze aus dem Bo'den. Darunter gibt es gute, aber auch schlechte, vor allem aber teure. Viele Mailboxen sind deshalb teuer, weil sie die zur Verfügung stehenden Möglichkeiten nicht richtig ausnutzen. So kommt es vor, daß immer wieder Wartezeiten entstehen, weil das Programm des Mailbox-Computers die geforderten 300 Baud nicht schafft. Mit Mailbox-Basic sind Sie in der Lage, eine schnelle eigene Mailbox zu schreiben. Eine einfache Mailbox ist meistens rasch geschrieben, so daß sie wenigstens im »trockenen«, also ohne Telefonanschluß, funktioniert. Um aber tatsächlich einen solchen »Briefkasten« am Telefonnetz zu betreiben, wird das Ganze schon schwieriger, denn die Hauptsache, die sehr zeitkritische RS232-Ein/Ausgabe fehlt noch. Dort treten dann die ersten Probleme auf. Wie wandelt man die Commodore- in ASCII-Zeichen um? Wie simuliert man einen Textspeicher? Wie umgeht man die Garbage Collection? Abhilfe bringt »Mailbox-Basic«, das diese und noch mehr Funktionen erfüllt.

Mailbox-Basic (siehe Listing 1) ist eine kleine Basic-Erweiterung, die 12 neue Befehle zur Verfügung stellt, welche dann die gesamte RS232-Steuerung übernehmen. Die Befehle kann man einfach und ohne Probleme in ein bereits bestehendes Programm implementieren.

## Viele Möglichkeiten

Und hier die neuen Befehle:

### !PRINTA${,X,C,S\]

Dies ist ein umgewandelter PRINT-Befehl, der den Inhalt des Strings (hier A$) auf dem Bildschirm und auf die RS232-Schnittstelle (natürlich in ASCII-Fbrm) ausgibt. Außerdem gibt es verschiedene Parametereinstellungen, die bestimmte Abbruch- und Stoppfunktionen nicht zulassen. Hierbei gilt:
1 = Abbruch zugelassen
0 = Abbruch nicht zugelassen

Die Parameterreihenfolge
!PRINT A$,CTRL/X,CTRL/C,CTRL/S
wird beispielsweise so geschrieben:
!PRINT A$,0,1,1.
Bei diesem Beispiel wird der CTRL/X-Abbruch verhindert, der CTRL/C-Abbruch und der CTRL/S-Stopp ermöglicht. Bei einem CTRL/S-Signal stoppt die Ausgabe für 120 Sekunden (bei Normalparametern). Dieser Stopp wird auch auf dem Bildschirm angezeigt (siehe Bildschirmanzeige).
!PRINT A$ (ohne Parameter)
Hier werden folgende Standardparameter gesetzt: CTRL/X-Abbruch und CTRL/S-Stopp möglich, das entspricht !PRINT A$,1,0,1. Die gesamten Abbruchroutinen bleiben nur so lange erhalten, wie sich der Computer in dieser Maschinen-Routine befindet (siehe !WAIT). Erfolgt ein Abbruch, so wird das entsprechende Bit in der Statusvariable gesetzt.

### !WAIT A$ \[X,C,S\]

Im Prinzip entspricht dieser Befehl dem !PRINT-Befehl. Im Gegensatz zu !PRINT springt !WAIT wieder ins Basic, wenn der RS232-Ausgabepuffer geleert ist, das heißt, wenn alle Daten über das Telefon geschickt worden sind. Daher bleiben die Abbruchmöglichkeiten bis zuletzt erhalten. Das Warten in der !WAIT-Routine wird auf dem Bildschirm angezeigt (siehe Bildschirmanzeigen). Die Parametermöglichkeiten entsprechen denen des !PRINT-Befehls.

### !INPUT A$ \[,A \[,Z1 \[,Z2 \]\]\]

Hiermit wird eine Zeichenkette bis zu einem Return mit maximal »A« Zeichen Länge eingelesen, wobei (im Normalzustand) das Eingabegerät sowohl die Tastatur als auch die RS232-Schnittstelle sein kann. Ein Abbruch aus dieser Routine ist auch durch Drücken der CTRL/X-Taste möglich. Es gibt hier ein Eingabe-Timeout, das heißt wenn 60 Sekunden lang kein Zeichen eingegeben wird, springt die Routine zurück ins Basic und es wird ein Bit in der Statusvariable gesetzt. Der bis dahin eingegebene Text wird in einem String abgelegt. Übernommen werden nur die Standard-ASCII-Zeichen, alle anderen werden ignoriert. Hier gibt es ebenfalls Möglichkeiten zur Parametereingabe:
Zum Beispiel: !INPUT A$
Hier wird eine Eingabe von maximal 253 Zeichen gefordert. Sind diese erreicht, bricht die Routine beim nächsten eingegebenen Zeichen mit einem Return ab.
!INPUT A$,100
Hier wird die höchste zu übernehmende Zeichenzahl von 253 auf 100 Zeichen gesenkt.
!INPUT A$,20,ASC(.)
Hier werden höchstens 20 Zeichen übernommen, allerdings wird statt den eingegebenen Zeichen ein ».« (Punkt) auf die RS232-Schnittstelle gesendet. Die eingegebenen Zeichen bleiben im String erhalten (Anwendung: Paßwortabfrage).
!INPUT A$,20,ASC(.),ASC(?)
Hier wird zusätzlich statt dem eingegebenen Zeichen ein »?« auf dem Bildschirm ausgegeben.

### Programmbeispiel (Namenseingabe):

10 A$=CHR$(38)+CHR$(224)
20 OPEN,2,2,A$
30 !WAIT "Dein Name = >"
40 !INPUT A$,20
50 !PRINT "Dein Name ist"
60 !WAIT A$
70 CLOSE2

Durch Verwendung von !WAIT vor !INPUT bleiben die Abbruchfunktionen bis zuletzt erhalten. Auch tritt dann die Eingabe-Timeout-Abfrage erst in Kraft, wenn der RS232-Teilnehmer den gesamten Text erhalten hat.

## 8188 Byte Pufferspeicher

### !PUFFER L

Mit diesem Befehl werden bis zu 8188 Zeichen (ohne daß eines davon verloren geht) in einen internen Puffer eingelesen. Eingabegerät ist hier die Tastatur und/oder die RS232-Schnittstelle. Diese Routine übernimmt so lange Zeichen bis sie »...« + Return als Enderkennung erhält und übergibt dann die Länge des eingegebenen Textes in die Variable »TL«. Durch Drücken der CTRL/X-Taste oder durch ein Eingabe-Timeout wird diese Routine verlassen; die Enderkennung »...« + Return wird dabei selbständig vom Programm in den Puffer abgelegt, damit der bis dahin eingegebene Text noch weiter verwendet werden kann. Die Länge des einzulesenden Textes kann durch eine nachfolgende Variable festgelegt werden (hier »L«), Der interne Puffer beginnt bei $A000 (40960) und geht bis $BFFF (49151) und kann mit dem nächsten Befehl leicht ausgelesen werden.

### !GET AD,A$

Durch diese Sequenz wird der interne Puffer ab der angegebenen Adresse (hier: AD) nach einem Return durchsucht, und dann in einen String übergeben.

### Programmbeispiel:

110 A$=CHR$(38)+CHR$(224)
120 OPEN2,2,2,A$
130 !PUFFER 8188
140 A$="DerText:"
150 !WAIT A$+CHR$(13)
160 AD=40960
170 !GET AD,A$
180 IF A$="...'THEN 220
190 AD=AD+LEN(A$)
200 !PRINT A$+CHR$(13)
210GOTO 170
220 !WAIT"Das war’s."
230 CLOSE2

### !GET# F,A$ \[L \[, A \]\]

Hier wird eine Zeichenkette der bestimmten Länge »L«, oder bis zu einem bestimmten Abbruchzeichen »A« von dem durch die Dateinummer »F« angesprochenen Gerät eingelesen und in einen String übergeben. Zur Erkennung, wie der String zustande kam, das heißt, ob es ein Abbruch wegen erreichter Länge oder wegen erreichtem Abbruchzeichen war, werden entsprechende Bits in die Statusvariablen gesetzt.

Zum Beispiel: !GET# Dateinummer,A$. Es werden 255 Zeichen von dem Eingabegerät eingelesen. Das Abbruchzeichen wird automatisch auf 255 festgelegt.
!GET # Dateinummer,A$,10
Genau 10 Zeichen werden eingelesen.
!GET # Dateinummer,A$,255,13
Hier werden 255 Zeichen eingelesen, sofern sich kein Endkennzeichen mit dem CHR$-Wert 13 findet.

### Programmbeispiel:

10 A$=CHR$(38)+CHR$(224)
20 OPEN2,2,2,A$
30 A$='Text,S,R"
40 OPEN 1,8,2,A$
50 !GET#1,A$,255,13
60 !WAIT A$
70 IF ST AND 64 THEN 50
80 CLOSE2

### !CLR

Die Statusvariable »RS« wird bei gesetztem »kein Carrier«-Bit zurückgesetzt (siehe Carrier).

### !RON/!ROFF

Schaltet die Ausgabe auf die RS232-Schnittstelle ein/aus. Bei !ROFF fallen sämtliche Timeouts sowie die Carrierabfrage weg (siehe Carrier).

### !CON/!COFF

Schaltet die Carrierabfrage ein/aus (siehe Carrier).

## Timeouts

### !SET S,E,C1,C2

Hiermit können alle Timeouts verändert werden.
S = CTRL/S-Timeout: Timeout bei Betätigen der CTRL/S-Taste (1 bis 255 Sekunden). Bei 0 gibt es kein Timeout. E = Eingabetimeout: Timeout bei jeglicher Eingabeforderung (1 bis 255 Sekunden). Bei 0 gibt es kein Timeout.
C1 = Maximale Durchlaufzeit der Carrierabfrageroutine (2 bis 255 Sekunden)
C2 = Wie lange muß ein bestehendes Carrier gefunden werden, damit das Programm fortfährt (1 bis 30 Sekunden). C1 muß größer als C2 sein.

Kaltstart: Bei der Eingabe von SYS 49152 werden folgende Einschaltzustände gesetzt:
!SET 120,60,30,2
!RON /!CON /!CLR

Carrier: Fehlt das Carriersignal bei einer RS232-Ein/Ausgabe (User-Port:PB4 Pin H = 1 oder Bit4 in 56577 = 1), so springt das Programm in eine Carrier-Suchroutine, in der es (bei Normalparametern) 30 Sekunden lang ein zwei Sekunden langes Carrier-Signal sucht. Wird dies nach 30 Sekunden nicht gefunden, wird das »kein Carrier«-Bit in der Statusvariablen »RS« gesetzt. Spätere RS232-Ein/Ausgabeversuche sind zwecklos, da das entsprechende Programm sofort wieder ins Basic zurückspringt. Man kann allerdings mit !CLR das »kein Carrier«-Bit wieder löschen.

Statusvariable »RS«: Sie ist dafür zuständig, alle Rückmeldungen der angesprungenen Routinen in das Basic zu übergeben.

### Bit:

TODO

76543210 (wennBitX=1)
10000000 = kein Carrier
1000000 = RS232 an
100000 = Eingabetimeout erreicht (bei !INPUT/!PUFFER)
10000 = interner Puffer voll (bei !PUFFER)
1000 = bei !GET#Dateinr.,A$ max. Zeichenzahl erreicht
100 = bei !GET#Dateinr.,A$ Abbruchzeichen gefunden
10 = CTRL/C-Abbruch
1 = CTRL/X-Abbruch

Beispiel einer Abfrage:
IF RS AND 2t1 THEN GOTO
(wenn CTRL/C-Abbruch erfolgt, verzweige)

Bildschirmanzeige: Zur Kontrolle, in welcher Routine sich der Computer zur Zeit befindet, werden folgende Zustände rechts oben auf dem Bildschirm ausgegeben: »&lt;-WCSIT->«

TODO TABLE

W = Programm befindet sich in der !WAIT-Routine
C = Carrier fehlte momentan und der Computer befindet sich in der Carrier-Suchroutine
S = Die CTRL/S-Taste wurde betätigt
I = Der Computer befindet sich in einer Eingabeanforderung
T = Ein Timeout ist bei dem laufenden Befehl festgesetzt

Wenn keine der Funktionen angesprochen ist, zeigt der Computer »&lt;----->« auf dem Bildschirm an. Nach dem Verlassen der Routine wird der frühere Bildschirminhalt wieder hergestellt.

Funktionstastenbelegung: Zur besseren Übersicht wurden folgende Funktionstasten mit CHR$-Codes für eine einfachere Mailbox-Steuerung belegt.

F1 = CTRL/X
F3 = CTRL/C
F5 = CTRL/S
F7 = CTRL/Q
F8 = simuliert ein fehlendes Carrier (Anwendung: gewollter Rauswurf aus der Mailbox)

Cursor: Das Programm besitzt einen eigenen stehenden Cursor (kleiner Strich), der dem Benutzer immer die aktuelle Position bei einer Ein/Ausgabe anzeigt (bei !PRINT /!WAIT /!INPUT/!PUFFER).

Zum Schluß noch ein paar technische Daten. Das Programm belegt nach dem Starten zirka 2,5 KByte im $C000 (49152)-Bereich, also keinen Basic-Speicherplatz. Der interne Puffer (für !PUFFER) hat eine Länge von genau 8 KByte und liegt ab $A000 (40690) bis $BFFF (49151). Die gesamten Routinen sind für eine 7 Daten-Bit Host-Ein/Ausgabe mit beliebiger Baudrate (50 bis 2400 Baud) ausgelegt; das achte Bit bei einer 8 Daten-Bit-Ausgabe wird einfach ignoriert. Die Ausgabe wird wie gewöhnlich durch den Open-Befehl eingestellt (wieviel Daten-Bits, welche Baudrate). Die zur RS232-Übertragung möglichen Zeichen sind auf die normalen ASCII-Zeichen und alle Zeichen unter dem CHR$-Code 32 festgelegt. Allerdings werden ein Teil dieser Codes, wegen ihrer Steuerzeichenfunktion (CRSR-HOME, CRSR-UP/DOWN) nicht auf dem Bildschirm ausgegeben.

## Garant

Diese Routinen halten, wenn richtig eingesetzt, das, was sie versprechen. Der beste Beweis hierfür ist wohl der praktische Einsatz einer Mailbox. In diesem Falle ist das die ACM-Club e.V.-Mailbox in München (089/8120338), die nun schon seit etwa sechs Monaten mit diesen Routinen einwandfrei arbeitet. Rufen Sie doch einmal an und verschaffen sich einen Eindruck von der Leistungsfähigkeit des Mailbox-Basic.

(R. Horstmann/aw)

# Proterm-64/XT - Terminalprogramm der Spitzenklasse \[44-50\]

> Proterm-64/XT braucht den Vergleich mit kommerziellen Terminalprogrammen nicht zu scheuen. Viele DFÜ-Freaks sind der Meinung, daß Proterm sogar das beste Terminalprogramm für den C 64 ist.

Proterm-64/XT ist die neueste Version von Proterm, das als »Public Domain«-Programm einen großen Bekanntheitsgrad erreichte. Norbert Demgensky hat uns seine neueste Version zum Abdruck zur Verfügung gestellt.

Proterm-64/XT ist vollständig in Maschinensprache geschrieben und bietet somit ein Optimum an Schnelligkeit und Speicherausnutzung. Das Programm belegt während des Laufs lediglich 6,5 Kilobyte, der restliche Speicher steht für einen Textspeicher mit 99 Zeilen zu 80 Zeichen und den Protokollspeicher von etwa 31 Kilobyte zur Verfügung.

Nach dem Laden des Programms erscheint links der Programmname und auf der rechten Seite läuft eine Stoppuhr. Unter der Kopfzeile erscheint der Cursor und zeigt damit an, daß das Programm zum Terminalbetrieb bereit ist.

Sondertasten sind CLR und CTRL-U. Mit CLR wird zum Hostrechner ein ESC gesendet, um zum Beispiel Menütexte oder Funktionen abzubrechen. MitCTRL-U (Control und »U«) wird die Stoppuhr auf Null gesetzt. Es empfiehlt sich gerade bei Fernverbindungen bei Verbindungsaufbau die Uhr zurückzusetzen, damit man einen Überblick über die vergangene Zeit und damit über die anfallenden Kosten hat.

Alle Steuerfunktionen können über die Funktionstasten F1 bis F8 aufgerufen werden. Im einzelnen stehen hier folgende Funktionen zur Verfügung:

TODO TABLE

F1 = Ändern der Übertragungsparameter (Baudrate, Datenbits, etc.)
F2 = Farbauswahl für Hintergrund, Rahmen und Zeichen
F3 = Speicherfunktionen für den Textspeicher
F4 = Aufrufen des Mailbox-Verzeichnisses
F5 = Protokoll-Funktionen (ansehen, sichern etc.)
F6 = An- oder Abschalten des Protokollspeichers
F7 = Dateifunktionen (ansehen, senden etc.)
F8 = Programmende

Beim Aufruf einer der Funktionen wird in der linken oberen Ecke des Bildschirms jeweils ein Fenster eingeblendet, in dem, je nach Funktion, mehrere Unterfunktionen aufgerufen werden können. Dieses geschieht durch Drücken der vor jedem Punkt stehenden Ziffer. Jede andere Taste beendet die Funktion und stellt den alten Bildschirminhalt wieder her, das heißtTexte, die sich unter dem Fenster befinden, werden nicht zerstört.

Im folgenden werden die einzelnen Funktionen in obiger Reihenfolge besprochen:

### F1 = Ändern der Übertragungsparameter

Hier können folgende Parameter eingestellt werden:
1.	Baudrate
Möglich sind die Baudraten 50, 75, 110,150, 300, 600 und 1200 Baud (Standardwert = 300).
2.	Datenbits
Hier können Sie zwischen 7 und 8 Datenbits wählen, wobei 7 Datenbits der Standard sind.
3.	Stoppbits
Wahlmöglichkeit zwischen 1 und 2 Stoppbits, Standardwert ist 1 Stoppbit.
4.	Parity
Zugelassen sind no, mark, space, even und odd-parity, wobei »no parity« der Standardwert ist.
5.	Duplex
Möglich sind Vollduplex, Halbduplex und Host.
»Vollduplex« bedeutet, daß jedes Zeichen erst als Echo vom Hostrechner auf dem Schirm erscheint.
Bei »Halbduplex« wird das Zeichen gesendet und gleichzeitig auf dem Schirm ausgegeben.
Bei »Host« wird der Gegenstelle jedes von ihr gesendete Zeichen zurückgeschickt, so wie es bei Mailboxen üblich ist. Standard ist Vollduplex zum Anrufen von anderen Mailboxen.
6.	Pause
Hiermit kann eingestellt werden, wie Proterm automatisch Texte senden soll. Wahlweise können die Texte im Quittungsbetrieb, ohne jegliche Pause oder mit einstellbarer Verzögerung nach jedem Zeichen übertragen werden.
7.	Linefeed
Je nach den Erfordernissen der Gegenstation kann bestimmt werden, welche Zeichenfolge anstelle des »Return« gesendet werden soll. Möglich sind hier nur Return, Return und Linefeed, Linefeed und Return und nur Linefeed.

Alle Parameter können durch Drücken einer der Tasten 1 bis 7 geändert werden, wobei bei mehr als zwei Wahlmöglichkeiten bei jedem Tastendruck der Wert eine Position weitergeschoben wird.

### F2 = Farbauswahl

Im Grundzustand ist schwarze Schrift auf weißem Grund und weiße Rahmenfarbe eingestellt. Mit den Tasten 1 bis 3 lassen sich die Bildschirmfarben individuell einstellen.

Gleiche Farben für Hintergrund und Schrift werden von Proterm-64/XT übersprungen, ansonsten sind aber alle möglichen Farbkombinationen zugelassen.

### F3 = Textspeicher

Die folgenden Funktionen beziehen sich auf den eingebauten Textspeicher von maximal 99 Zeilen zu 80 Zeichen.
Hier stehen folgende Funktionen zur Verfügung:
1.	Text eingeben
In der Kopfzeile erscheint ein »Lineal«, das anzeigt, wo innerhalb der Zeile man sich gerade befindet. Die mögliche Zeilenbreite ist 80 Zeichen, wobei der Text horizontal und vertikal gescrollt wird, wenn die Grenzen des Bildschirms berührt werden. In der Kopfzeile wird angegeben, in welcher Zeile man sich gerade befindet.

An Steuerfunktionen sind die Cursor-Tasten, INSERT und DELETE zugelassen, wobei INSERT und DELETE nur innerhalb der aktuellen Zeile arbeiten. HOME setzt den Cursor auf Zeile 1, Stelle 1 und CLR auf Zeile 99, Stelle 1. SHIFT-RETURN löscht die aktuelle Zeile ab Cursorposition.
F7 fügt ab der aktuellen Cursorposition eine Leerzeile ein. Der Rest des Textes verschiebt sich entsprechend.
F8 löscht die aktuelle Zeile.
F3 beendet die Eingabe. Es erscheint dann wieder das Menüfenster.Der Text bleibt gespeichert und kann jederzeit durch Drücken von »1« neu editiert werden.
2.	Text laden
Geladen werden kann jede beliebige sequentielle Datei mit maximal 99 Datensätzen. Ist die Datei länger, bleibt der Rest unberücksichtigt.
3.	Text sichern
Der Inhalt des aktuellen Textspeichers wird auf der Diskette gesichert.
4.	Text senden
Der Inhalt des aktuellen Textes wird an die Gegenstation gesendet. Die Ausgabe kann mit STOP angehalten und anschließend mit »c« abgebrochen oder mit jeder anderen Taste fortgesetzt werden.
5.	Text löschen
Der aktuelle Textspeicher kann gelöscht werden.

### F4 = Mailbox-Verzeichnis ansehen

Aus der optionalen Steuerdatei (siehe Anhang) kann eine Tabelle von Mailboxen mit Rufnummern und Parametern geladen werden. Mit dieser Funktion wird die Tabelle, soweit vorhanden, auf dem Schirm angezeigt. Mit den Cursortasten kann jetzt der reverse Balken auf die gewünschte Zeile gesetzt werden. Nach Drücken von RETURN werden die gespeicherten Parameter übernommen und in der Kopfzeile die Telefon-Nummer eingeblendet.

### F5 = Protokoll-Funktionen

Alle eingegebenen oder angekommenen Zeichen können protokolliert werden, wenn im Menü 1 das entsprechende Kennzeichen gesetzt wurde.

Der Inhalt des Protokollspeichers kann bearbeitet werden.
Es stehen folgende Funktionen zur Verfügung:
1.	Protokoll ansehen
Der Inhalt des Protokolls wird auf dem Bildschirm noch einmal angezeigt. Nach jeweils einer vollen Seite wird die Ausgabe angehalten und kann mit SPACE fortgesetzt werden. Nach Ende des Protokolls ist man dann wieder im Menü. Der aktuelle Bildschirminhalt wird durch die Funktion nicht zerstört.
2.	Protokoll drucken
Das Protokoll wird auf einen angeschlossenen Drucker über den seriellen Bus ausgegeben, wobei das Programm die Primäradresse 4 verwendet, sofern in der optionalen Steuerdatei nichts anderes angegeben ist (siehe Anhang).
3.	Protokoll löschen
Der Protokollspeicher wird gelöscht.
4.	Protokoll sichern
Der Inhalt des Protokollspeichers kann unter einem beliebigen Namen auf der Diskette gesichert werden.

Es wird immer die aktuelle Anzahl der freien Bytes im Protokollspeicher angegeben, hier stehen etwa 31 Kilobyte zur Verfügung.

### F6 = An- oder Abschalten des Protokolls

Es kann der interne Protokollspeicher ein- oder ausgeschaltet werden. Bei eingeschaltetem »Protokoll« wird jedes gesendete oder empfangene Zeichen in den Speicher geschrieben und kann dann später noch mal angesehen, gedruckt oder auf Diskette gesichert werden.

Bei eingeschaltetem »Protokoll« wird der Schriftzug »PROTERM-64/XT« in der Kopfzeile zur Kontrolle revers angezeigt.

Der Protokollspeicher reicht bei kontinuierlichem Empfang für etwa 15 Minuten.

### F7 = Dateifunktionen

Mit dieser Funktion kann man auf der Diskette gespeicherte sequentielle Dateien bearbeiten. Es stehen hier folgende Funktionen zur Auswahl:
1.	Datei ansehen
Nach der Eingabe des Namens wird der Inhalt der Datei auf dem Bildschirm angezeigt. Nach jeder vollen Seite kann die Ausgabe mit SPACE fortgesetzt oder mit STOP abgebrochen werden. Anschließend ist man wieder im Menü. Der aktuelle Bildschirminhalt wird durch die Funktion nicht zerstört.
2.	Datei löschen
Nach der Eingabe des Namens wird die Datei von der Diskette gelöscht.
3.	Datei senden
Eine beliebige sequentielle Datei kann hiermit direkt von der Diskette zur Gegenstation gesendet werden. Im Gegensatz zum Textspeicher ist die Länge des Textes hierbei nicht begrenzt. Die Ausgabe kann jederzeit mit STOP angehalten und danach mit »C« abgebrochen oder mit jeder anderen Taste fortgesetzt werden.
4.	Inhaltsverzeichnis
Alle sequentiellen Dateien auf der Diskette werden mit ihrem Namen zweispaltig angezeigt. Nach dem Drücken von RETURN ist man wieder im Menü. Der aktuelle Bildschirminhalt wird durch die Funktion nicht zerstört.

### F8 = Programmende

Nach Drücken von F8 kann man durch nochmalige Bestätigung mit »F1« das Programm beenden. Jede andere Taste löscht das Programm wieder.

Bei allen Funktionen, die mit Diskette arbeiten, wird in der Kopfzeile eine eventuelle Fehlermeldung angezeigt, wenn der Zugriff auf die Diskette nicht erfolgreich war. Die Meldung muß dann jeweils mit RETURN bestätigt werden. Beim Löschen einer Datei wird die Meldung in jedem Fall ausgegeben und muß dort auch bestätigt werden.

### Phrasenspeicher anzeigen/aufrufen

Mit der Taste »←« können die zehn möglichen Festtexte (Phrasen) angezeigt und durch eine der Zifferntasten 0 - 9 an die Gegenstation abgeschickt werden. Jede andere Taste springt wieder ins normale Programm zurück.

Die Texte werden in der optionalen Steuerdatei (siehe Anhang) definiert und beim Programmstart eingelesen.

Die optionale Steuerdatei dient zur Definition von Standarddateien, der Anpassung des verwendeten Druckers ans Programm, zur Steuerung der Farbkombination und zur Definition eines Mailbox-Verzeichnisses.

Die Datei wird als normales Basic-Programm eingegeben und muß unter dem Namen »..param« (Beispiel: Listing 2) auf der Proterm-Diskette gespeichert werden.

**Alle Einträge beginnen mit einem Anführungszeichen an der ersten Stelle; andere Zeilen werden von Proterm ignoriert.**

Standardtexte (Phrasen)
Standardtexte werden in der Form
$n,text
eingegeben, wobei für n eine der Ziffern 0 bis 9 anzugeben
ist. Der Text kann bis zu 63 Zeichen umfassen, ein Klammeraffe innerhalb des Textes wird als Return zur Gegenstation gesendet.
Farbkombination
Die gewünschte Farbkombination kann in der Fbrm %Hintergrundfarbe,Rahmenfarbe,Zeichenfarbe eingegeben werden. Die möglichen Werte gehen von 0 - F, wobei die Buchstaben A - F die Werte 10 - 15 in hexadezimaler Schreibweise darstellen.
Druckeranpassung
Für den verwendeten Drucker können folgende Parameter angegeben werden:
/Primäradresse.Sekundäradresse (,c)
Durch das »c« wird ein Commodore-Drucker gekennzeichnet, der dann zur korrekten Darstellung von Klein- und Großschreibung vor jeder Zeile ein Cursor-abwärts gesendet bekommt.
Mailbox-Verzeichnis
Die Liste der Mailboxen kann bis zu 600 Nummern umfassen, wobei jeder Eintrag 48 Byte des Protokoll-Speichers beansprucht.
Die Definition einer Mailbox erfolgt in der Form +Name,Telefonnummer, Parameter
Für den Namen sind maximal 25 Stellen vorgesehen; für die Telefonnummer maximal 15 Stellen.
Die Parameter geben alle Übertragungsparameter der ersten Bildschirm-Maske an, wobei hier jeweils einstellige Ziffern von 0 - Maximum angegeben werden können. Es folgt eine Liste der einzelnen Parameter und die einzugebenden Werte. Erscheint bei der Anzeige der Mailboxliste hinter einer Definition ein Sternchen, ist in der Definition ein Fehler vorhanden.

(Norbert Demgenski/hm)

# Mailbox für jedermann \[52-67\]

> Mit diesem Programm machen Sie Ihren C 64 zu einem elektronischen Briefkasten. Sie brauchen nur noch ein Gerät, das automatisch den Hörer abhebt.

Der Betreiber der M.C.S.-Mailbox, Kürzel \[THW\], hat uns sein Programm zur Verfügung gestellt. Es hat sich in der Praxis bereits bestens bewährt. Mitdiesem Programm kannjeder seine eigene Mailbox aufmachen.

Ein Mailboxprogramm ist eigentlich nichts anderes als ein kombiniertes Verwaltungs- und Textverarbeitungsprogramm. Der Unterschied zu den genannten Programmen liegt nur in der Art der Datenverwaltung. Es verwaltet alle ankommenden Daten in seinem System und bietet viele Möglichkeiten es weiter auszubauen.

Das Programm kann bis zu 400 Benutzer mit einer 1541 verwalten. Zuzüglich der Text- und Info-Files.

Neue Texte, die für alle bestimmt sind, werden vom Programm automatisch in das vorhandene Nachrichten-File (Datei für hinterlassene Nachrichten) eingebunden, so daß der nächste Anrufer diese Nachrichten sofort lesen kann. Damit ist gewährleistet, daß der Informationsfluß nicht unterbrochen wird und neue Daten sofort verfügbar sind.

Die Verwaltung der Anrufer wurde mit einer relativen Datei verwirklicht, da diese sich am besten dazu bewährt hat. Pluspunkte einer solchen Datei sind zum einen der schnelle Zugriff auf die einzelnen Records und das unproblematische Ändern von Daten.

Die Schnelligkeit wird auch dadurch erreicht, daß parallel zur Recordnummer auch ein Indexfeld mit den Anfangsbuchstaben der eingetragenen Anrufer im Computer mitläuft.

Damit wird die Suche nach einem Namen zum Kinderspiel und macht sich bei der Identifizierung (UID) sehr schnell positiv bemerkbar.

Als Indexfeld wurde ein Integerfeld (U%(X)) verwendet, das einige Besonderheiten aufweist. Integervariablen verbrauchen bekanntlich wenig Platz im Speicher. Man muß dann allerdings alle ASCII-Zeichen in eine Zahl konvertieren und diese im Feld ablegen. Beim Suchen wird dann die Zahl wieder in ein Zeichen umgewandelt. Die Zeit, die dafür verloren geht, ist aber so gering, daß sie nicht ins Gewicht fällt.

Eine entsprechende Lösung über ein Stringfeld ist nicht anzuraten. Dieses verbraucht nur unnötig Speicherplatz und zum anderen kann die Garbage Collection erbarmungslos zuschlagen.

Noch ein Wort zur Koppler- oder Modemsteuerung.

Das Programm verwendet die folgenden Signale und Anschlüsse am User-Port:

TODO TABLE

PB1 Koppler/Modem
Pegel	high aus
low aktiv
PB3 Klingelerkennung
Pegel	high kein Anruf
low Anruf erkannt
PB4 Detect-Anzeige
Pegel	high keine Gegenstelle
low Gegenstelle vorhanden

Es ist wichtig, daß ein Relais zur Aktivierung des Kopplers und zum »Abheben« des Telefonhörers über einen Transistor als Treiber gesteuert wird, da nur so die User-Port-Ausgänge nicht zu stark belastet werden. Außerdem erzielt man damit auch die nötige Invertierung der Signale. Man kann dazu die Auto-Modem-Schaltung aus der 64’er, Ausgabe 9/84, Seite 114verwenden. Allerdings muß die Leitung PB5 (Anschluß H im Schaltplan) mit PB1 verbunden werden.

Die Befehle für die Koppler/Modemsteuerung sind in diesem Programm durch REM-Zeilen ausgewiesen.

Das Programmpaket besteht aus drei einzelnen Programmteilen, die zur Inbetriebnahme der Mailbox notwendig sind.

### 1.	DATEI/SORT/COPY

Mit diesem Programm wird eine Datendiskette, mit allen Files, die das Hauptprogramm erwartet, kreiert.

Nach der Frage »Datei anlegen« kann unterschieden werden, ob nur eine relative Datei, oder ob eine »komplette Datei« angelegt werden soll. Der Unterschied ist, daß bei der ersten Wahl nur die Diskette formatiert wird, eine relative Datei und ein sequentielles Indexfeld angelegt wird.

Bei der zweiten Wahl wird eine komplette Datei angelegt mit den folgenden Files, die alle das Programm »MAILBOX« erwarten:

TODO TABLE

Filename Filetyp Blöcke Verwendungszweck
USER	rel	128	Anrufer verwalten
M-INDEX	seq	X	Persönliches Indexfeld
A-INDEX	seq	X	Zwischenspeicher aktueller Daten
BILD	seq	X	Titelbild
MESSAGE	seq	X	Öffentliche Nachrichten (Texte)
AL	seq	X	Allgemeines File (frei verfügbar)
RI	seq	X	Rechner Info (frei verfügbar)
TEL	seq	X	Telefonverzeichnis (frei verf.)
CL	seq	X	Clubfile	(frei verfügbar)
AK	seq	X	Aktuelles	(frei verfügbar)
P1-P50	seq	X	50 einzelne persönliche Nachrichten

Die Files BILD,AL,RI,TEL,CL und AK müssen vom Mailbox-Betreiber selbst editiert werden. Denn diese werden vom Benutzer nur angesehen aber nicht beschrieben.

Man nimmt dazu einen Editor (Terminal 64 ist dazu sehr gut), gibt dort seine Texte ein und speichert diese auf der Datendiskette ab, indem man das vorhandene File überschreibt. Die anderen Files werden vom System selbst verwaltet.

Im File »USER« werden die Benutzer, soweit sie sich eingetragen haben, gespeichert.

Es können bei dieser Version maximal 400 Benutzer verwaltet werden.

Pro eingetragenen Anrufer beziehungsweise pro Record der Datei werden folgende Daten abgelegt:

TODO TABLE

Anrufername
19 Zeichen
Wohnort/Stadt
19 Zeichen
Rechnersystem	10	Zeichen
Passwort	10	Zeichen
Datum des letzten Login	8	Zeichen
Uhrzeit des letzten Login	8	Zeichen
Bell on/off	1	Zeichen
Linefeed on/off	1 Zeichen
Profi/Anfänger	1	Zeichen
Reserve	2	Zeichen
Gesamte Recordlänge	79	Zeichen
Plus ein Return (CR)	80	Zeichen

Der File M-INDEX speichert die Namen und Paßwörter der eingetragenen Benutzer, für die eine persönliche Nachricht vorhanden ist.

Wenn sich ein Anrufer zu erkennen gibt (UID), sucht das System, ob der Name und das Paßwort im Indexfeld vorhanden ist. Wenn ja, ergibt die Laufvariable I (FORI=1TO50) das persönliche Textfile (P 1 bis P 50) und wird dem Benutzer gezeigt.

Im File A-INDEX werden alle aktuellen Daten gesichert, damit diese nicht verloren gehen, wenn das System sich einmal aufhängen sollte. Gesichert wird das Datum, Anzahl der Anrufe, und wann die letzte Nachricht abgespeichert wurde.

Nach jedem Durchgang (Login-Logoff) werden die Daten dort gesichert.

Persönliche Nachrichten werden in den Files P 1 bis P 50 abgelegt. Die Belegung dieser Files läuft parallel mit dem M-Indexfeld. Mit dem M-Indexfeld wird auch überprüft, ob noch Platz für eine weitere persönliche Nachricht vorhanden ist.

Wird eine Nachricht für jemanden abgelegt, für den schon eine vorhanden ist, so wird der neue Text an das vorhandene File mit dem Append-Befehl (,s,a) angehängt.

Die öffentlichen Texte, die von jedem Benutzer eingegeben werden können, werden automatisch an den Anfang des MESSAGE-Files gestellt.

Besondere Bedeutung erhält das File »BILD«. Mit diesem File hat der Betreiber (Sysop) die Möglichkeit, die Anfangsmeldung seiner Box zu kreieren.

### 2.	\[ML\] INR

Das Listing muß mit dem MSE eingegeben und auf Diskette gespeichert werden. Startadresse dieses Maschinenprogramms ist $C000. Die Maschinenroutine wird automatisch, wenn man das Mailboxprogramm gestartet hat, nachgeladen und aktiviert.

Das Maschinenprogramm beinhaltet folgende Funktionen :
a) Mit SYS49152 wird die RS232-Schnittstelle eröffnet und die Pufferzeiger in den $C000-Bereich verbogen.

Würde man den Kanal in Basic eröffnen, würde der C 64 die beiden Ein-/Ausgabe-Puffer am Ende des Basic-Speichers anlegen und dadurch den Hauptspeicher um 512 Byte kürzen. Aber warum soll man den Basic-Speicher verschwenden, wenn man den $C000-Bereich dafür nutzen kann.
b)	DieZeiger$F157 (Input), $F1CA(Output) und $F13E (Get) werden »verbogen« und zeigen auf die eigene Routine. Dort erfolgen die Umrechnungen des ASCII-CBM-Codes. Damit spart man sich das lästige Konvertieren in Basic, was sich sicherlich auch in einer langsameren Geschwindigkeit auswirkt.

So genügt es einfach zu sagen: PRINT#2,"HALLO" um am User-Port reinen ASCII-Code zu senden.

Zum anderen ist dieser PRINT-Befehl auch für die Bildschirmausgabe zuständig. Mit einem einzigen PRINT erfolgt die Ausgabe auf dem Bildschirm und am User-Port. Dadurch erspart man sich die doppelten Ausgaben mit PRINT und PRINT #, was sich sicherlich auch vom Speicherplatz her bemerkbar macht.

Der GET #-Befehl ist im Gegensatz zum PRINT # nur für ein Eingabegerät zuständig.
c)	Die letzte Routine hat schließlich die Aufgabe, Texte von der Floppy auf dem Bildschirm und gleichzeitig auf dem User-Port auszugeben.

Unter anderem wird die Tastatur und der User-Port auf Eingaben abgefragt, und die Eingaben auf Steuerzeichen hin geprüft.
Mit den Codes
Ctrl/S Halt
Ctrl/Q Weiter
Ctrl/X Abbruch
Ctrl/N Nächster
kann die Textausgabe vom Benutzer gesteuert werden.

Nebenbei wird auch die Detect-Anzeige (CD-Leitung aktiv, Carrier erhalten) vom Koppler abgefragt und nach Ausbleiben die Textausgabe unterbrochen.

### 3.	MAILBOX

Um eine gewisse Übersicht und Struktur im Programm zu erreichen, wurden die einzelnen Funktionen in Programm-Blöcke aufgeteilt.

Diese sind nach ihrem Zweck entsprechend mit REM-Zeilen gekennzeichnet.

Die einzelnen Blöcke sind in Tabelle 1 dargestellt.

Die einzelnen Befehle für die Box kann man den Help-Listen entnehmen, so daß hier nur ein paar Befehle beschrieben werden sollen.

Da die Box sehr offen gehalten ist, kann sich jeder Anrufer selbst im System eintragen. Man gibt einfach »NU« ein, und danach seinen Namen, Stadt, Computer und das persönliche Paßwort. Nach einem »LOGOFF« wird man in die Benutzerliste aufgenommen und man kann sich dann mit dem Befehl UID &lt;name> zu erkennen geben. Um einem anderen eingetragenen Benutzer eine persönliche Nachricht zu schicken, wird der Befehl PME angewendet. Das System fragt dann nach dem Namen und wenn vorhanden, kann man danach seine Nachricht im Texteditor eingeben und abspeichern.

Es besteht auch die Möglichkeit, sich die Anruferliste anzuschauen. Es gibt mehrere Arten der Ausgabe und Suche: UL Hiermit wird die gesamte Liste angezeigt.

TODO TABLE

ULA Es wird die Anzahl der eingetragenen Benutzer angezeigt.
ULN Es werden nur die Namen der Benutzer gezeigt
ULN.... Hiermit kann man direkt einen Benutzer suchen. Es wird der gesamte Name überprüft.
ULN ....\* dito., allerdings wird nur die Anzahl der eingegebenen Zeichen überprüft.
ULS.... Es wird nach der Stadt gesucht (Funktion wie oben).
DULR.....Nach Computer suchen (Funktion wie oben).
ULD.... Nach Datum suchen (Funktion wie oben).
UIDA Mit diesem Befehl kann der Benutzer seine persönlichen Daten in der Datei ändern (beispielsweise neuer Computer, neue Stadt, etc.).
SOR Damit kann der Benutzer den Betreiber (Sysop) rufen, und wenn dieser anwesend ist, kann ein Gespräch (Chat) geführt werden.
PRO Es werden die Systemmeldungen unterdrückt.
Wenn man die Befehle kennt, ist es sehr nützlich die Help-Listen und Systemmeldungen blockieren zu können, da diese Ausgaben Zeit kosten, was sich in der Telefonrechnung niederschlägt.
Tl Man erhält das aktuelle Datum und Uhrzeit. Unter anderem wird die im System verbrachte Zeit angegeben.
PML Hat ein eingetragener Benutzer eine persönliche Nachricht erhalten, so kann er sie sich mit diesem Befehl noch einmal anschauen, da diese nach einem »LOGOFF« automatisch vom System gelöscht wird.
BE Einige Terminals verwenden ein akustisches Signal, um den Benutzer auf bestimmte Meldungen aufmerksam zu machen. Dieses kann mit diesem Befehl unterbunden oder freigegeben werden.
LF Bestimmte DFÜ-Programme brauchen ein Linefeed, um den Cursor eine Zeile nach unten zu bewegen, da bei ihnen ein RETURN den Cursor nur am Zeilenanfang plaziert (on/off- Modus)

Obwohl dieses Programm für den Mailbox-Betrieb geschrieben wurde, so besteht doch für den einen oder anderen die Möglichkeit, diese oder jene Funktion für andere Programme zu verwenden. Ein Beispiel wäre die Benutzerverwaltung. Damit kann man sich ein sehr komfortables Adressenprogramm mit Direktzugriff aufbauen.

Oder das Datum, das um 00.00 Uhr vom System automatisch erhöht wird. Schaltjahre werden selbstverständlich berücksichtigt.

### Compiler

Es ist sicherlich ratsam, das Programm zu compilieren. Es erhöht auf alle Fälle die Geschwindigkeit. Aber die Frage ist, welcher Compiler sich dafür eignet.

Der Petspeed eignet sich leider nicht dafür, da er Register in der Zeropage benutzt, die normalerweise der RS232 zugeordnet sind.

Der Bass-Compiler ist sehr mühsam, langsam und umständlich.

Bewährt haben sich der Austro- und der Austrospeed Compiler von Commodore.

Empfehlenswert ist der Basic 64 von Data Becker. Dieser bietet so viele Möglichkeiten wie kein anderer. Allerdings sind einige Bedingungen oder Einstellungen nötig:

Da Basic 64 den gesamten RAM-Bereich benutzt, somit auch den $C000-Bereich, wo die Maschinenroutine liegt, muß man dem Compiler klar machen, daß dieser Bereich für ihn tabu ist.

Das macht man, indem man in der Parameterliste des Compilers Basic 64 den Punkt »E« aufruft und dort die Adresse 49150 eingibt. Dadurch erkennt der Compiler, wo seine Grenze ist, und die Routine im $C000 Bereich bleibt erhalten.
Noch einmal die Abtippvorschriften:
Zuerst sollten Sie die beiden Basic-Programme (Listing 1 und 2) eintippen und auf Diskette speichern. Dann das Maschinenprogramm (Listing 3). Mit dem Programm »DATEI/SORT/-COPY« generieren Sie dann eine extra Datendiskette.

Die M.C.S.-Box, das heißt, das hier abgedruckte Programm im praktischen Einsatz, erreichen Sie über die Telefonnummer 040-2512371.

(Thomas Wieske/hm)

# DFÜ - Was ist das? \[67-68\]

### Modem

Datenübertragungseinrichtung, die direkt an das Telefonnetz angeschlossen wird, also nicht über den Telefonapparat.

### Akustikkoppler

Datenübertragungseinrichtung, die über das Telefon an das Postnetz angeschlossen wird. Erkennbar sind Akustikkoppler an den Gummimuffen für die Aufnahme des Telefonhörers.

### Handshaking

»Handshaking« bezeichnet den Vorgang des Aussendens von Daten und des Wartens auf die Empfangsbestätigung des Computers, mit dem man den Datenaustausch vornimmt.

### Simplex

Wenn auf einer Datenübertragungsleitung Daten nur in einer Richtung übertragen werden können, bezeichnet man dies als Simplexbetrieb. Dieses Verfahren wird wegen der fehlenden Rückmeldemöglichkeiten jedoch selten angewandt.

### Halbduplex

Im Halbduplexbetrieb bestätigt der empfangende Computer den Empfang der Daten.

### Vollduplex

Im Vollduplexbetrieb können beide Computer gleichzeitig senden. Weiterhin wiederholt der empfangende Computer die Daten und sendet sie an den ersten Computer zurück. Stimmen diese Daten überein, wird das nächste Byte gesendet. Sind sie nicht korrekt, werden sie wiederholt.

### Baud-Rate

Die Baud-Rate bezeichnet die Geschwindigkeit mit der Daten übermittelt und empfangen werden. 300 Baud bedeutet, daß 300 Bits pro Sekunde übertragen werden.

### Paritätsbit

Um die Übertragungssicherheit zu erhöhen, wird jedes Byte durch ein zusätzliches Bit ergänzt. Die Ergänzung erfolgtso, daß die Summe der gleichartigen Binärzustände (0 oder 1) eine ungerade oder gerade Zahl ergibt. Wird kein Bit ergänzt, so hat die Übertragung keine Parität.

### Start/Stopp-Bits

Einige Computer verlangen die Übertragung einer bestimmten Anzahl von Null-Bits nachjedem Byte. Die Benutzung von je einem Stopp-Bit und einem Start-Bit ist am häufigsten.

### Treibersoftware, Terminalprogramm

Mit Treibersoftware oder Terminalprogramm bezeichnet man die Programme, die die Datenübertragung steuern. Mit ihnen wird zum Beispiel die Übertragung von Stopp-, Start- und Paritäts-Bits eingestellt und gesteuert.

### Mailbox

Eine Mailbox ist eine Art elektronischer Briefkasten. Es wird zwischen drei Kategorien unterschieden:

1.	Öffentliche Mailboxen (Zutrittfürjedermann)
2.	Private Mailboxen (Zutritt nur für eingetragene Benutzer)
3. Gemischte Mailboxen (öffentlicher und privater Bereich).

Alle drei Kategorien können gewerblichen Charakter haben. Im gewerblichen Bereich dienen Mailboxen oft zur Aufnahme von Bestellungen.

### Sysop

Der System-Operator ist der Betreiber einer Mailbox oder die Aufsicht am Mailbox-Computer.

### Übertragungs-/Eingangsprotokoll

Mit diesem Protokoll werden die Regeln festgelegt, die dem Übertragungsverfahren zugrunde liegen. Erst wenn beide Computer manuell oder automatisch auf das gleiche Übertragungsprotokoll eingestellt sind, kann eine sinnvolle Datenübertragung beginnen.

### Timeout

Der Timeout ist die Zeitspanne, die eine Mailbox auf die Eingabe des Benutzers wartet, bevor sie annimmt, daß der Benutzer die Verbindung beendet hat. Die Telefonverbindung wird dann auch von der Mailbox beendet, damit die Leitung für den nächsten Anrufer zur Verfügung steht.

### Gesamtzeitlimit

Das Gesamtzeitlimit ist das Zeitkonto des Benutzers innerhalb des Computersystems, mit dem er Kontakt aufgenommen hat. Erreicht der Anrufer sein Zeitlimit, wird die Verbindung automatisch beendet. Es soll verhindert werden, daß einzelne Benutzer einen Computer stundenlang blockieren. Das Zeitlimit von »eingetragenen Benutzern« ist meist größer bemessen als das von »Besuchern«.

### Answer/Originate

Wenn Sie mit einem Computer Verbindung aufnehmen, muß Ihr Modem oder Akustikkoppler auf »Originate« gesetzt sein. Dadurch wird das »Einführungsprotokoll« begonnen. Kommunizieren Sie direkt mit einem Computer, muß der eine im »Originate-«, der andere im »Answer-Modus« sein. Ist die Verbindung aufgebaut, spielt der Modus keine Rolle mehr.

### Datex-P

Datex-P ist ein Verbindungsnetz der Bundespost. Über zentrale Vermittlungsstellen kann meist über große Entfernung zum Orts-Tarif kommuniziert werden. Siehe auch »Die Netze der Post«, 64’er, Ausgabe 6/85, Seite 46.

### Btx

Service-Netz der Bundespost. Ausführlicher siehe auch »Die Netze der Post«, 64’er, Ausgabe 6/85, Seite 46.

### Telebox

Die Telebox ist eine von der Bundespost betriebene Mailbox. Sie ist nur für eingetragene Benutzer konzipiert.

### ISDN

Mit ISDN (Integrated Services Digital Network) wird der bis 1988 geplante Netzausbau der Bundespost bezeichnet.

### 7-Bit-, 8-Bit-Übertragung

Um den ASCII-Code darzustellen, benötigt der Computer nur sieben Bits. Mit dem Ausdruck 7-Bit-, 8-Bit-Übertragung wird angegeben, ob in einem übertragenen Byte sieben Datenbits (also der ASCII-Wert) und ein »Füllbit« (7-Bit-Übertragung) oder sieben Datenbits und ein Paritätsbit (8-Bit-Übertragung) enthalten sind.

### Wortlänge

Die Wortlänge bezeichnet die Anzahl der Bits in einem »Übertragungsbyte« beziehungsweise einer Übertragungseinheit. Sie besteht aus den Datenbits, dem Paritätsbit, dem Startbit und den Stopp-Bit(s). Bei acht Datenbits, einem Paritätsbit, einem Startbit und zwei Stopp-Bits ist die Wortlänge = 12. Aus »Schlampigkeit« wird in der Datenfernübertragung in diesem Fall oft von einem »Byte« gesprochen, obwohl es 12 Bits beinhaltet.

### Datenendeinrichtung

Mit »Datenendeinrichtung« wird das Gerät »am Ende« einer Übertragungsleitung bezeichnet. Wird die Datenübertragung mit einem C 64 vorgenommen, so ist dieser die Datenendeinrichtung. Ein Modem oder Akustikkoppler ist dagegen ein Datenübertragungsgerät.

(hm)

TODO ASIDE

Sollten Ihnen Begriffe nicht klar geworden sein, oder sollten Sie Begriffe vermissen, die wir in dieser Übersicht nicht berücksichtigt haben, so schreiben Sie uns bitte.

# Ordnung im Lager \[69-72\]

> Verschaffen Sie sich einen ständigen Durch- und Überblick über Ihren Lagerbestand und erleichtern Sie sich gleichzeitig die Jahresinventur.

Tippen Sie zuerst das Hauptprogramm »Artikel« (Listing 1) mit dem Checksummer ein, und speichern Sie es auf Diskette. Dann erstellen Sie sich eine Datendiskette. Die INPUT-Routine (Listing 2) geben Sie mit dem MSE ein, und speichern es auf der Datendiskette. Dann richten Sie sich die Datenfiles wie unten angegeben ein.

Das Programm ist durch eine Menüsteuerung leicht zu bedienen. In den jeweiligen Masken sind alle Angaben zur Programm-Steuerung enthalten. Nach Neueingaben, Änderungen, Streichungen, Stückzahleingaben etc. kommtimmer eine Abfrage »Daten abspeichern j/n?«. Durch die Verwendung einer sequentiellen Datei wurden schnelle Zugriffszeiten erreicht und die durch die unterschiedlichen Betriebssysteme der Drucker (zum Beispiel MPS 802) verschiedentlich auftretenden Probleme mit Relativdateien vermieden.

### Die Arbeitsweise des Programms

Das Programm wird mit »load "Artikel",8« geladen. Nach dem Start werden die bereits abgespeicherten Artikelstammsätze geladen und das Programm springt in das Hauptmenü. Das Programm gliedert sich wie folgt:

TODO NESTED ORDERED LIST

1.	Neueingabe von Artikelstammsätzen. In der Eingabemaske erscheint der jeweils letzte Datensatz.
Ein Artikelstammsatz besteht aus den folgenden Eingaben:
1.	Artikelbezeichnung bestehend aus maximal 22Zeichen.
Das erste Zeichen muß ein geSHIFTet eingegebener Buchstabe sein.
2.	Artikel-Nummer bestehend aus genau 10 Zeichen. Zwei Buchstaben, der erste geSHIFTet eingegeben = Firmenkurzzeichen, Dezimalpunkt gefolgt von einer sechsstelligen Dezimalzahl = Verkaufspreis.
3.	Einkaufspreis bestehend aus genau sieben Zeichen.
Sechsstellige Dezimalzahl
4.	Stückzahl maximal vierstellig
Die Eingaben werden nach den obigen Angaben abgefragt und bei Nichterfüllung zurückgewiesen.
2.	Änderungen
Durch Eingabe der Satznummer, angegeben jeweils in der ersten Spalte einer Liste beziehungsweise in der Bildschirmausgabe, erscheint der gewünschte Datensatz in der Eingabemaske. Die Werte können überschrieben beziehungsweise mit RETURN übernommen werden.
3.	Bildschirmausgabe
Die Bildschirmausgabe kann je nach Wunsch für alle Artikel oder alle Artikel einer Firma erfolgen. Auf dem Bildschirm erscheinen jeweils 17 Artikelstammsätze mit Satz-Nummer, Artikelbezeichnung (nur mit den ersten 10 Zeichen), Artikel-Nummer, Einkaufspreis und Stückzahl.
4.	Druckerausgabe
Eine Listenausgabe kann erfolgen über
1.	Alle Artikel ausdrucken
2.	Alle Artikel einer Firma ausdrucken
3.	Inventurliste drucken
Auf der Inventurliste erscheinen nur Artikel mit Stückzahl größer Null.
5.	Sortieren
Die Sortierroutine sortiert alle Artikelstammsätze nach Firmen und innerhalb der Firmen nach aufsteigender Artikel-Nummer. Somitsind alle Artikel nach derjeweiligen Artikel-Nummer = Verkaufspreis, in den Listen schnell zu finden.
6.	Streichen
Mit der Routine Sätze streichen, können nacheinander bis zu 100 Satznummern von zu streichenden Sätzen eingegeben werden.
Bei Fehleingabe kann mit der Pfeil-Links-Taste und RETURN die jeweils letzte Eingabe wiederholt werden. Nach jedem Streichungsvorgang sollte ein Sortiervorgang folgen.
69
Dateiverwaltung
C64
7.	Stückzahleingabe
Nach Eingabe der gewünschten Satz-Nummer erscheint der entsprechende Artikelstammsatz in der Eingabemaske. Der Cursor springt in das Eingabefeld Stück und die alte Stückzahl kann überschrieben werden. Hierdurch ist eine schnelle Stückzahländerung gegeben.
8.	Stückzahl auf Null setzen
Diese Routine setzt alle Stückzahlen auf Null (zum Beispiel vor der Inventur, wenn gewünscht).

Nach jeder Dateiänderung erfolgt die Abfrage »Datei abspeichern j/n«.

### Bitte beachten:

Um mit dem Artikel-Programm zu arbeiten, fertigen Sie sich am besten eine Datendiskette an. Da das Programm direkt nach dem Start nachlädt, müssen die INPUT-Routine sowie beide Datenfiles bereits auf Diskette verfügbar sein. Erstellen Sie die Datenfiles bitte wie folgt:

open 8,8,8, "Artikel-Nr.,s,w" :close8 (RETURN)
open 8,8,8,"Anzahl-Saetze,s,w": print#8,0;chr$(13):close 8 (RETURN)
Achten Sie unbedingt auf GroB-/Kleinschreibung

(Werner Demuth/og)

# Disketten-Verwaltung \[73-77\]

> Viele kennen dieses Problem: Man hat 50 Disketten mit 400 Programmen. Jetzt noch ein bestimmtes Programm zu finden, kann ohne Computerunterstützung zurabendfüllenden Beschäftigung werden. Der Disk-Manager übernimmt diese Aufgabe für Sia

Der Disk-Manager (siehe Listing) wurde als Programm-Katalog konzipiert, der es erlauben soll, ein gesuchtes Programm durch Eingabe des Namens binnen kürzester Zeit zu finden.

Der Disk-Manager ist in der Lage, bis zu 300 Directories mit insgesamt bis zu 6500 File-Einträgen auf einer einzigen Diskettenseite zu speichern und zu verwalten. Trotz dieser hohen Speicherkapazitätwirdjedes Programm in wenigerals 30 Sekunden gefunden und durch Ausgabe des Diskettennamens spezifiziert.

Um diese hohe Geschwindigkeit zu erreichen, wurden relative Files in Kombination mit »Hash-Codes« verwendet.

Wie funktioniert das Programm? Zunächst einmal besitzt der Disk-Manager einen Menüpunkt »Directory einlesen & speichern«. Dieser Programmteil dientdazu, alle Disketteninhaltsverzeichnisse, die verwaltet werden sollen, einzulesen und in relativen Dateien auf der Disk-Manager-Datendiskette zu speichern. Sind erst einmal alle Disketten gespeichert, ist das Programm voll einsatzbereit: Mit dem Menüpunkt 1 wählen Sie die Programmsuche an und geben auf die Frage nach dem Programmnamen den Titel des gesuchten Files ein. Spätestens nach 30 Sekunden (meistens schon nach fünf bis zehn Sekunden) nennt Ihnen der Disk-Manager den Namen der Diskette(n) auf der beziehungsweise auf denen das gesuchte Programm gespeichert ist.

Aber wie schafft es der Disk-Manager nun, aus dieser Menge von Programmen (immerhin sind bis zu 6500 möglich) in so kurzer Zeit das Gesuchte herauszufinden? Nun, durch Verwendung einer Programmiertechnik, die speziell für solche Fälle konzipiert wurde. Kern dieser Technik ist eine sogenannte Hash-Funktion, die aus dem Suchbegriff (hier: der gesuchte Programmname) den Schlüsselcode berechnet.

## Tempo durch Hash-Codes

Der Disk-Manager verwendet zwei solcher Hash-Funktionen (siehe Programmlisting Zeilen 100 bis 250, Hash-Funktion 1 und 2).

Findet das Programm beim Einlesen eines Directories zum Beispiel den Programmnamen »HUGO«, so springt es mit GOSUB 100 die Hash-Funktion 1 an. Hier wird nun in einer FOR-NEXT-Schleifejedem Buchstaben des Strings »HUGO« der entsprechende ASCII-Wert zugeordnet, mit 26 multipliziert und zu den Zahlenwerten der übrigen Buchstaben addiert; Das Ergebnis ist dann eine Zahl zwischen 0 und 6500 (=maximale Fileanzahl).

Der errechnete Hash-Code wird dann in der Variablen id an das Hauptprogramm übergeben. Für »HUGO« ergibt sich id=3930. Der Disk-Manager speichert daher den Namen »HUGO« im Datensatz Nummer 3930. Wird später das Programm »HUGO« gesucht, so führt der Disk-Manager einfach die Hash-Code-Berechnung für »HUGO« durch, erhält wiederum id=3930, sieht im Datensatz Nummer 3930 auf der Datendiskette nach und findet dort die Informationen über das gesuchte File. Ist jedoch der entsprechende Datensatz leer, so ist das der Hinweis darauf, daß noch kein entsprechendes Programm gespeichert wurde.

Die Directory-Namen sind nach demselben Prinzip wie die Programmnamen in einem zweiten relativen File eingeordnet. Hier wird jedoch eine andere Hash-Funktion verwendet, um als Hash-Code eine Zahl zwischen 0 und 300 zu erhalten.

Die Datensätze sind untereinander durch Zeiger verknüpft. Jeder Directory-Datensatz enthält neben dem Diskettennamen, der Disk-ID und der Anzahl der freien Blöcke die Nummer des ersten Programmdatensatzes im Directory.

Entsprechend enthält jeder Programm-Datensatz außer dem Programmnamen noch die Datensatznummer des im Directory nachfolgenden Programms sowie die Nummer des dazugehörigen Directories.

## 6500 Programme gleichzeitig

Nun aber zur Bedienung des Programms: Beim ersten Programmstart wird man zweckmäßigerweise den Menüpunkt 7 zum Anlegen einer neuen Datendiskette anwählen. Legen Sie eine **leere** Diskette ins Floppy-Laufwerk und beantworten Sie die Sicherheitsabfrage, ob eine neue Datendiskette angelegt werden soll, mit »j«. Die Diskette wird dann für die Benutzung durch den Disk-Manager vorbereitet: sie wird formatiert(!), das Programm wird gespeichert und die Datenfiles werden angelegt. Dieser Vorgang dauert zirka acht Minuten, danach meldet sich das Programm mit dem Hauptmenü zurück. Mit Hilfe des Menüpunktes 6 (Speicherinfo) können Sie sich von nun ab stets über die aktuelle Speichersituation auf Ihrer Datendiskette informieren. Nach der Neuanlage erhalten Sie eine Meldung über 6501 freie Programm- und 301 freie Diskettendatensätze. Zur Speicherung dieser Information benutzt das Programm übrigens die Speicherstellen 200 bis 209 in Track 18 Sektor 0. Diese Speicherstellen sind normalerweise unbenutzt und mit chr$(0) gefüllt.

Mit Hilfe von Menüpunkt 2 lassen sich nun die Disketteninhaltsverzeichnisse einlesen und speichern. Voraussetzung für die korrekte Speicherung ist, daß alle Disketten verschiedene Namen tragen, andernfalls erhalten Sie die Meldung »Diskette XYZ wurde bereits gespeichert«, und die Speicherung wird abgebrochen. Zur Identifikation der Diskette wird nur der Teil des Diskettenkopfes verwendet, der in Hochkommata steht.

Das Einlesen und Speichern eines Directories dauert, je nach Anzahl der Directory-Einträge und Auslastungsgrad der Datenfiles, zirka eine halbe bis fünf Minuten. Wenn Sie also beabsichtigen, Ihre gesamte Diskettensammlung zu speichern, so ergibt das durchaus schon eine abendfüllende Beschäftigung. Besitzern von Compilern sei gesagt, daß eine Compilierung nicht möglich ist. Es ergeben sich Probleme bei der Arbeit mit den relativen Dateien. Sollten Siejemals bei der Speicherung die Meldung »Speicherung nicht möglich. Speicherplatz erschöpft.« erhalten, so haben Sie entweder versehentlich eine falsche Diskette ins Laufwerk gelegt, oder Sie haben 300 Disketten oder 6500 Files gespeichert. Hier noch ein Rat: Die Speicherkapazität der Datenfiles sollte nach Möglichkeit nur zu maximal 80% ausgelastet werden, da es sonst, bedingt durch die Hash-Code-Technik, zu wesentlich längeren Wartezeiten, insbesondere bei der Speicherung kommt.

Durch Anwahl von Menüpunkt 1 lassen sich, wie oben beschrieben, Programme durch Angabe des Namens suchen. Die Verwendung von »Jokern« wie » \* « oder »?« ist jedoch unzulässig. Falls sich das gesuchte Programm auf mehreren Disketten befindet, werden alle Diskettentitel ausgegeben, die Ausgabe kann jedoch durch Drücken einer beliebigen Taste unterbrochen werden.

Mit Menüpunkt 3 kann man sich ein gespeichertes Directory ansehen. Geben Sie dazu den Namen der Diskette ein. Die Bildschirmausgabe kann auch hier durch Druck auf eine beliebige Taste abgebrochen werden.

Menüpunkt 4 löscht ein gespeichertes Directory. Auch hier muß nur der Diskettenname eingegeben werden.

Menüpunkt 5 dagegen löscht ein einzelnes Programm aus der Datei.

(Thomas Omerzu/tr)

# Rechnungshelfer \[78-81\]

> Dieses Programm wurde speziell für die Verwendung in kleinen und mittleren Handwerksbetrieben geschrieben. Es übernimmt die Erstellung von Kostenvoranschlägen und Rechnungen, fertig zum Verschicken.

Das erste was Sie tun müssen, wenn Sie das Listing abgetippt haben, ist eine »Textdatei« zu erstellen. In dieser Textdatei sind alle möglichen Arbeiten Ihres Betriebes mit Einzelpreis verzeichnet. Jede Arbeit hat eine Schlüsselnummer. Später bei der Rechnungserstellung, brauchen Sie dann nur noch die entsprechende Nummer eingeben.

Löschen Sie bitte die Zeilen 90 und 100 aus dem Programm. Starten Sie es und wählen Sie Menüpunkt»6«. Jetzt müssen Sie sich überlegen, wie viele verschiedene Arbeitsgänge Sie ungefähr benötigen. Diese Zahl können Sie aber später wieder erweitern. Das Programm richtet jetzt auf der Diskette die relative Datei ein.

Tippen Sie die beiden gelöschten Zeilen wieder ein, und starten Sie das Programm neu.
Sie haben nun folgende Menüpunkte zur Auswahl:

1.	Textdaten eintragen
2.	Textdatei auf Bildschirm
3.	Textdatei drucken
4.	Textdatei korrigieren
5.	Angebot/Rechnung drucken
6.	Textdatei anlegen/erweitern

### 1.	Textdateneintragen

Jetzt können Sie jeder Schlüsselnummer einen bestimmten Text zuordnen. Dieser Text besteht aus zwei Zeilen zu je 40 Zeichen. Weiterhin können Sie jedem Einzelposten einen bestimmten Preis geben. Dieser Preis muß gegebenenfalls mit einer oder zwei Nullen aufgefüllt werden (zum Beispiel 4.00).

### 2.	Textdatei auf Bildschirm ausgeben

Hier können Sie sich eine Übersicht über Ihre Daten verschaffen. Mit einem beliebigen Tastendruck kommen Sie wieder ins Hauptmenü zurück.

### 3.	Textdatei drucken

Ihre Daten werden auf dem Drucker ausgegeben. Die Druck-Routine wurde für einen Epson-Drucker mit Wiesemann-Interface geschrieben, dürfte jedoch auch auf den Commodore-MPS-Druckern problemlos laufen. Einen Beispielausdruckzeigt Bild 1.

### 4.	Textdatei korrigieren

Wenn Sie einen Tippfehler gemacht haben, oder bestimmte Posten ändern wollen, wählen Sie diesen Menüpunkt an.

### 5.	Angebot/Rechnung drucken

Zuerst fragt der Computer, ob Ihre Firmendaten (Name, Berufszweig, Adresse, Kontonummer, etc.) gespeichertsind. Wenn Sie das erste Mal mit dem Programm arbeiten, müssen Sie diese erst eingeben. Danach drücken Sie bei dieser Frage einfach »RETURN«.

Als nächstes müssen Sie das Datum eingeben. Dabei sind Sie an keine Formatvorschrift gebunden, »18. September 1985« ist zum Beispiel auch erlaubt.

Die nächste Frage bezieht sich auf die Art des Ausdrucks: Kostenvoranschlag oder Rechnung. Dementsprechend können Sie entweder »mein Angebot«, oder »meine Rechnung« eingeben.

Danach folgen die Angaben zum Empfänger des Briefes: Anrede, Name, Adresse und der Verwendungszweck (»Betrifft..«).

Als letzten Punkt können Sie die eigentliche Rechnung zusammenstellen: Sie geben nur die entsprechende Schlüsselnummer, eventuell einen kurzen Kommentar und die Anzahl der Arbeiten ein (jeweils durch die »RETURN«-Taste abgeschlossen).

Einen Beispielausdruck zeigt Bild 2. DieAddition der einzelnen Posten geschieht dabei automatisch.

### 6.	Datei anlegen/vergrößern

Sollte die am Anfang eingegebene Anzahl an Datensätzen nicht ausreichen, so können Sie über diesen Menüpunkt die Datei vergrößern. Geben Sie dazu einfach die neue Anzahl an Datensätzen ein, alles weitere übernimmt das Programm. Selbstverständlich werden die alten Datensätze dabei nicht gelöscht.

(Herbert Krügler/tr)

# Datei total \[86-95\]

> Database ist eine komfortable Dateiverwaltung für den C 64 mit einigen außergewöhnlichen Leistungsmerkmalen. Nahezu beliebige Datenfeld- und Datensatzlängen, Formatier- und Rechenfunktionen sind nur einige Stichworta Ein Programm, das zu besitzen sich lohnt.

Ein Wort zu Anfang: Sie werden zu Database kein Listing in diesem Heft finden. Dies hat folgenden Grund: Das Programm besteht aus insgesamt elf Einzelprogrammen, die zusammen 25 (in Worten: fünfundzwanzig!) Seiten Listing ergeben würden. Wir waren der Meinung, daß dies zum Abtippen nicht zumutbar ist. Darum ist Database nur auf der Leserservice-Diskette zu diesem Heft erhältlich.

Das Programm besteht aus insgesamt drei Hauptteilen: Den beiden Ladeprogrammen, dem Teil »Neue Datei entwickeln« und dem Teil »Datenpflege«, die aus speicherplatztechnischen Gründen als Einzelprogramme vorliegen (ein vierter Teil, die sogenannten »Sonderfunktionen«, kann von Ihnen gegebenenfalls ergänzt werden. Dieses Zusatzprogramm muß nur zwei Bedingungen erfüllen: Es muß sich um ein Basic-Programm handeln und unter dem Namen »Soft« auf Diskette gespeichert sein.).

Wenn Sie LOAD "DBL",8,1 eingeben, wird das Lade-Programm eingeladen und automatisch gestartet. Innerhalb dieses Lade-Programms können Sie durch Drücken der entsprechenden Taste den von Ihnen gewünschten Programmteil laden und ebenfalls automatisch starten.

### Entwicklung einer neuen Datei

Zunächst ein paar allgemeine Anmerkungen:
Die Hauptmenüs der beiden Programmteile »Neue Datei entwickeln« und »Datenpflege« bestehen aus jeweils zwei Seiten. Durch Drücken der »RETURN«-Taste kann auf diejeweils andere Seite umgeschalten werden. Zum Aufruf der einzelnen Untermenüs dienen die Funktionstasten »F1«- »F8«. Aus allen Untermenüs kommen Sie mit »SHIFT« + »RETURN« wieder ins Hauptmenü zurück. (Wenn Sie also einmal eine Programmfunktion aus Versehen aufgerufen haben, einfach »SHIFT« + »RETURN« drücken und Sie befinden sich wieder an der Aufrufstelle.) Mit Ausnahme der Definition der Eingabemaske einer Datei müssen alle Eingaben (zum Beispiel Dateinamen) mit »RETURN« abgeschlossen werden!

Sie sehen, die Bedienung von Database ist wirklich sehr einfach. Eine Übersicht über alle Programmfunktionen und deren Aufrufmöglichkeiten finden Sie übrigens in Bild 1.

Database ist eine Dateiverwaltung. Was das genau heißt, soll im folgenden kurz erläutert werden. Zunächst zum Begriff Datei. Eine Datei können Sie sich vorstellen als »elektronischen Karteikasten« mit vielen gleichartigen »Karteikarten«. Einer »Karteikarte« entspricht dabei ein sogenannter »Datensatz« der Datei. Jeder Datensatz unterteilt sich wiederum in verschiedene »Datenfelder«; den einzelnen Eintragungen auf der »Karteikarte«.

Eine Dateiverwaltung wie Database ist ein Programm, mit dem Sie beliebige Arten von Dateien verwalten können. Im Gegensatz zu zum Beispiel einer Adressenverwaltung, bei der über ein vorgegebenes Eingabeschema (zum Beispiel »Name«, »Vorname«, »Strasse«, »Wohnort«, etc.) eben nur Adressen eingegeben werden können, sind Sie bei Database in der Wahl des Eingabeschemas (der sogenannten »Eingabe-« oder »Dateimaske«) völlig frei, das heißt, Sie können die Bereiche (die sogenannten »Datenfelder«), in die später Daten eingegeben werden sollen, an beliebigen Positionen auf dem Bildschirm verteilen. Darüber hinaus kann sich die Eingabemaske überinsgesamtfünf (!) Bildschirmseiten erstrecken. Und natürlich können Sie das Ganze mit beliebigen Kommentaren und »Verzierungen« versehen. Dafür steht Ihnen der gesamte Zeichensatz des Computers zur Verfügung.

Nachdem die Grundbegriffe geklärt sind, kommen wir zur Praxis: Um eine neue Datei zu entwickeln, müssen Sie Teil 1 von Database einladen (im Lademenü »F1« drücken). Über den Menüpunkt »Bildschirmmaske entwerfen« (siehe Bild 1) kommen Sie in die Eingabemaskendefinition. Der Cursor blinkt jetzt am Anfang der 2. Bildschirmzeile. Für die Entwicklung der Eingabemaske stehen Ihnen die 2. - 22. Bildschirmzeile (künftig »Dateiseite« genannt) zurVerfügung. In diesem Bereich kann der Cursor mit den üblichen Tasten frei bewegt werden. Wie schon gesagt, kann die Eingabemaske auf bis zu fünf Seiten verteilt werden. Dazu können Sie mit »F5« auf die jeweils nächste, mit »F7« auf die jeweils vorherige Seite »umschalten«. Mit »F8« kann durch Angabe der Nummer der gewünschten Seite und anschließendem »RETURN« eine Seite direkt aufgerufen werden (also zum Beispiel von Seite 1 auf Seite 5 umgeschalten werden). Zusätzlich zu diesen Befehlen gibt es noch eine Reihe weiterer Kommandos, die die Entwicklung der Eingabemaske komfortabler und leichter machen. Eine Zusammenfassung dieser Editorbefehle finden Sie in Bild 3.

Im folgenden wird auf den wohl wichtigsten Befehl - nämlich den zur Definition eines Datenfeldes - ausführlich eingegangen.

### a)	Datenfeld einrichten

Wie schon erwähnt, kann ein Datenfeld an beliebiger Stelle innerhalb einer Dateiseite auf dem Bildschirm positioniert werden. Dazu müssen Sie als erstes den Cursor auf den gewünschten Feldanfang positionieren und danach die »F6«-Taste drücken. An der Position des Cursors erscheint jetzt das »kleiner«-Zeichen (&lt;) zur Kennzeichnung des Feldanfangs.

Eine Stelle weiter wird der Feldtyp festgehalten. Insgesamt stehen fünf Typen zur Auswahl (nähere Informationen dazu etwas weiter unten):
T : Textfeld
S : Schlüsselfeld
D : Datumsfeld
N : numerisches Feld
E : Rechenfeld

Festlegen können Sie den Feldtyp ganz einfach dadurch, daß Sie die entsprechende Taste (also T, S, D, N oder E) drücken. Rechts neben dem Feldtyp befindet sich das »grö-ßer«-Zeichen (>) zur Kennzeichnung des Feldendes. Dieses Feldende können Sie mit »CRSR RIGHT« nach rechts und mit »CRSR LEFT« nach links verschieben. Die aktuelle Feldlänge wird dabei in der oberen Bildschirmzeile rechts angezeigt. Hat das Feld seine gewünschte Länge erreicht, drücken Sie »RETURN«. Das Feld ist nun eingerichtet.

### b)	Die Feldtypen:

1.	Der in der Regel wohl am meisten verwendete Feldtyp ist das **Textfeld (T)**. Eingaben in ein solches Feld werden genau so übernommen, wie Sie sie eingeben, das heißt, am Feldinhaltwerden keinerlei Veränderungen vorgenommen. Natürlich können in ein Textfeld Zahlen oder Texte und Zahlen gemischt eingegeben werden. Zur Feldlänge: Ein Textfeld kann sich maximal über eine gesamte Dateiseite erstrecken und hat dann eine Länge von immerhin 838 Byte!
2.	Zu jeder Datei gehört genau ein **Schlüsselfeld (S)** . Das Schlüsselfeld entspricht, was die Behandlung der eingegebenen Daten und die Feldlänge betrifft, dem Textfeld. In Bezug auf die Organisation des Datenbestandes einer Datei kommt ihm aber eine spezielle Bedeutung zu: Zu jeder von Ihnen definierten Datei wird eine Schlüssel- oder Indexdatei angelegt, die die Schlüssel, das heißt, die Inhalte des Schlüsselfeldes, und die Position aller Datensätze innerhalb der relativen Hauptdatei enthält. Über diese Schlüsseldatei, die später bei der Datenpflege immer vollständig in den Computer geladen wird, ist ein sehr schneller Zugriff auf jeden beliebigen Datensatz der Datei möglich.<br>Um nun einerseits die Maximalanzahl der Datensätze möglichst groß und andererseits die Länge des Indexfeldes nach Möglichkeit beliebig zu halten, wird nicht der gesamte Inhalt des Schlüsselfeldes, sondern nur ein von Ihnen anzugebender Teil des Feldes als Datensatzschlüssel übernommen. Diese »Anzahl der relevanten Stellen des Schlüsselfeldes« wird bei der Übernahme der Eingabemaske (durch den Menüpunkt »Datei einrichten«) abgefragt. Ein Beispiel: Angenommen, Sie haben ein 50 Byte langes Schlüsselfeld definiert und geben als relevante Stellen »3« an, dann werden bei der Dateneingabe nur die ersten drei Zeichen des Schlüsselfeldes als Schlüssel übernommen.
3.	Das **Datumsfeld (D)** nimmt eine Sonderstellung ein. Es hat eine feste Länge von 13 Byte und dient - wie der Name schon sagt - zur komfortablen Eingabe eines Datums. Dieses muß in folgender Form eingegeben werden: »TT.MM.JJJJ« (zum Beispiel »01.11.1983«), Wird ein falsches Datum angegeben (zum Beispiel. »35.13.1980«), dann wird im hinteren Teil des Feldes die Meldung »/F!«ausgegeben. Ist das Datum korrekt, wird der zugehörige Wochentag berechnet und durch »/« getrennt hinter dem Datum ausgegeben.
4.	Das **numerische Feld oder Zahlenfeld (N)**: Ein kleines Beispiel soll Sinn und Zweck dieses Feldtyps erläutern. Angenommen, Sie haben ein Feld, in das bis zu vierstellige Geldbeträge in der üblichen Form (also mit zwei Nachkommastellen) eingegeben werden sollen. Natürlich können Sie dieses Feld auch als Textfeld definieren. Wollen Sie aber sicherstellen, daß die eingegebenen (beziehungsweise gespeicherten) Zahlen auch tatsächlich das gewünschte Format (in diesem Fall also vier Vorkomma- und zwei Nachkommastellen) aufweisen, dann definieren Sie das Feld als Zahlenfeld und geben eine entsprechende Formatiervorschrift ein. Diese Vorschrift kann allerdings nicht direkt bei der Definition der Eingabemaske angegeben werden, sondern die Eingabe muß über den Menüpunkt »Datei einrichten« erfolgen (nähere Informationen dazu daher etwas weiter unten). Zunächst kommen wir zum letzten und wohl interessantesten Feldtyp, dem Rechenfeld.
5.	Das **Rechenfeld (E)**: Dieser Feldtyp bietet Ihnen die Möglichkeit, Berechnungen innerhalb eines Datensatzes durchführen zu lassen, das heißt, es können beliebige Feldereines Datensatzes - egal ob Text-/Schlüssel-/Zahlen- oder selbst Rechenfeld - rechnerisch miteinander verknüpft werden. Das Ergebnis der Berechnung wird dann in dem entsprechenden Rechenfeld abgelegt. Auch hier muß die Eingabe der notwendigen Rechenvorschrift über den Menüpunkt »Datei einrichten« erfolgen. An dieser Stelle daher nur noch ein paar Worte zur Länge der Rechenfelder (und auch der Zahlenfelder): Weder bei den Rechen- noch bei den Zahlenfeldern wird die Länge der Felder kontrolliert. Natürlich sind aber nur Feldlängen (beziehungsweise Formatiervorschriften) sinnvoll, die innerhalb des Rechenbereichs beziehungsweise der Rechengenauigkeit des Computers liegen.

### c)	Datei (auf Diskette) einrichten:

Wenn Sie mit der Definition der Eingabemaske fertig sind, drücken Sie »SHIFT« + »RETURN« und - im Hauptmenü angekommen - die »F7«-Taste. Dadurch beginnt die »Übernahme» der Eingabemaske durch das Programm (die Datenfeldanfänge und -enden werden ermittelt, die Feldtypen festgestellt und so weiter) und die Einrichtung der Datei auf Diskette.

Haben Sie Rechen- oder Zahlenfelder definiert, dann werden Sie hier automatisch aufgefordert, die zugehörigen Vorschriften einzugeben. Das gerade bearbeitete Feld wird dabei durch revers dargestellte Feldbegrenzungen gekennzeichnet:

Zuerst müssen Sie die Formatiervorschriften für die Zahlenfelder und die Rechenfelder(!), diejaauch Zahlen als Ergebnis der durchgeführten Berechnungen enthalten, eingeben. Dazu setzen Sie einfach in den beiden im unteren Bildschirmbereich befindlichen, revers dargestellten Bildschirmzeilen den Punkt (».«) an die Stelle, an der er später im Zahlenfeld (beziehungsweise Rechenfeld) stehen soll. Die anderen Stellen können Sie - nur als Hilfe - mit irgendeinem anderen Zeichen auffüllen. Registriert wird auf jeden Fall nur der Punkt. Damit die so definierte Vorschrift übernommen wird, müssen Sie »RETURN« drücken. (Im weiter oben erwähnten Beispiel mit dem vierstelligen Geldbetrag sähe die Vorschrift also zum Beispiel so aus: »1111.11«.) Kommen auch negative Zahlen vor, muß für das Vorzeichen eine zusätzliche Vorkommastelle reserviert werden. (Im Beispiel: »11111.11«)

Nachdem Sie alle Formatiervorschriften auf diese Weise eingegeben haben, müssen Sie die Rechenvorschriften eingeben. Zur Erleichterung der Eingabe sind alle Datenfelder - am Bildschirm sichtbar - fortlaufend durchnumeriert. Außerdem kann mit »F5« (vorblättern) und »F7« (zurückblättern) die Dateimaske »durchgeblättert« werden. Das ist sehr nützlich, wenn Sie zum Beispiel eine dreiseitige »Karteikarte« entwickelt haben und in die Berechnung für ein Rechenfeld auf Seite 3 verschiedene Datenfelder der Seiten 1 und 2 einbeziehen wollen. Mit »F5« können Sie dann auf die Seite 1 beziehungsweise 2 umschalten, um so die laufende Nummer der betreffenden Felder zu ermitteln. In die Berechnung einbezogen wird ein Feld jetzt einfach durch Angabe von »F (Feldnummer)« (zum Beispiel F(1) für Feld 1, F(2) für Feld 2 und so weiter). Die Berechnungsformel wird - wie die Formatierungsvorschrift - in die beiden revers dargestellten Bildschirmzeilen im unteren Bildschirmbereich eingegeben und darf maximal 72 Byte lang sein. An Formelelementen sind alle

von Basic gewohnten Rechenoperatoren und -funktionen zugelassen (also auch SQR, LOG, SIN und so weiter).
Zwei Beispiele:

TODO TABLE

F(1) + F(9)	weist dem betreffenden Rechenfeld die
Summe aus dem Inhalt von Feld 1 und Feld 9 zu.
F(2) + F(3)\*F(17) weist dem betreffenden Rechenfeld den Inhalt des Feldes 2 + das Produkt aus Feld 3 und Feld 17 zu.

Natürlich kann es bei der Eingabe der Rechenvorschriften sehr leicht zu einer Fehleingabe kommen. Da diese in den allermeisten Fällen (bei der Datenpflege) zu einem Programmabbruch führt, werden Sie vom Programm vor der ersten Vorschriftseingabe gefragt, ob eine Syntaxkontrolle durchgeführt werden soll. Beantworten Sie die Frage mit »ja«, wird jede Eingabe auf korrekte Syntax untersucht und gegebenenfalls auf einen Fehler aufmerksam gemacht. Natürlich können aber von dieser Kontrollroutine nicht alle Fehler erkannt werden. Daher sollten Sie von vorneherein bei der Eingabe sehr sorgfältig sein und insbesondere auch auf mögliche Bereichsüberschreitungen (negative Zahlen bei Wurzeln, 0 bei der Division) achten, da es dadurch ebenfalls zu einem Programmabbruch kommt.

Nach Eingabe aller Formatier- und Rechenvorschriften sind noch einige Angaben erforderlich, bevor die Datei auf Diskette eingerichtet werden kann:

Zuerst werden Sie nach dem gewünschten Namen der Datei gefragt, der maximal 14 Zeichen lang sein darf. Beantworten Sie die nachfolgende Frage nach dem Zeichensatz mit »ja«, wird der im Computer befindliche (eventuell geänderte) Zeichensatz (nähere Informationen dazu weiter unten) unter dem Namen der Datei gespeichert und später (bei der »Datenpflege«) automatisch mit der Datei eingeladen. Beantworten Sie die Frage mit »nein«, werden Sie gefragt, ob Sie einen anderen Zeichensatz verwenden wollen, dessen Namen Sie gegebenenfalls eingeben müssen. Angenommen, Sie haben einen deutschen Zeichensatz entwickelt, den Sie in verschiedenen Dateien verwenden wollen. Dann wäre es natürlich wenig sinnvoll und würde unnötig Diskettenkapazität kosten, wenn der Zeichensatz zu jeder Datei extra gespeichert würde. Daher haben Sie die Möglichkeit, den Namen eines beliebigen, auf der Diskette gespeicherten Zeichensatzes anzugeben, der dann bei der »Datenpflege« ebenfalls automatisch mit der Datei geladen wird.

Zuletzt werden Sie nach der (bei der Besprechung des Schlüsselfeldes schon erwähnten) »Anzahl der relevanten Stellen des Schlüsselfeldes« gefragt. Nochmal zur Erinnerung: Später bei der Dateneingabe werden nur soviel Stellen des Schlüsselfeldes als Schlüssel übernommen, wie Sie hier angeben. Die kleinste Anzahl ist dabei 1, die größte 30, wobei zu beachten ist: Je kleiner Sie die Schlüssel wählen, desto mehr Datensätze können Sie in einer Datei unterbringen! Die Maximalanzahl MD der Datensätze errechnet sich nach folgender Formel: MD=INT(2250/(AS+3)); wobei AS die Länge der Schlüssel ist. Bei einer Schlüssellänge von drei Byte, was bei einer Adreßdatei mit dem Nachnamen als Schlüsselfeld vollauf genügt, können Sie also immerhin 375 Datensätze in der betreffenden Datei unterbringen. Im übrigen ist es unerheblich, wenn ein Schlüssel in einer Datei mehrfach vorkommt. Bei der Datenausgabe wird darauf durch eine entsprechende Meldung hingewiesen.

Nach dieser letzten Information dauert es geraume Zeit, bis die Datei auf Diskette eingerichtet ist. Am Ende kehrt das Programm wieder ins Hauptmenü zurück. Zuvor wird allerdings gefragt, ob Sie mit der Dateimaske weiterarbeiten wollen. Antworten Sie mit »ja«, bleibt die Eingabemaske im Computer erhalten und kann für die Entwicklung weiterer Daten benutzt werden. Bei einem »nein« wird der Eingabemaskenspeicher im Rechner gelöscht.

Um das bisher Gesagte zu verdeutlichen, soll an einem praktischen Beispiel - einer kleinen Rechnungsverwaltung - die Entwicklung einer Datei demonstriert werden. Sehen Sie sich dazu bitte Bild 4 an: Links oben sehen Sie die Eingabemaske so, wie Sie sie bei der Definition eingeben müssen. Dabei dürfte es wohl keine Schwierigkeiten geben. Als Schlüsselfeld wurde das Feld »Lieferant« gewählt. Die Felder »Artikelnummer« (Art.Nr.), »Einzelpreis« (EP) und »Anzahl« (ANZ) sind numerische Felder. Bei den Feldern »Gesamtpreis« (GP), »Gesamtsumme«, »Mehrwertsteuer« und »Rechnungsbetrag« handelt es sich um Rechenfelder. Das »Telefon«-Feld wurde, da es auch nichtnumerische Zeichen enthält (»/« beziehungsweise»—« zur Abtrennung der Vorwahl), nicht als numerisches, sondern als Textfeld definiert.

Haben Sie die Dateimaske komplett eingegeben, dann drücken Sie bitte »SHIFT« + »RETURN« und anschließend »F7«. Nach kurzer Zeit erscheint die Eingabemaske in der Form, wie Sie sie in Bild 4 rechts oben sehen. Alle Datenfelder sind fortlaufend durchnummeriert. (Bei Feldern mit einer Länge kleiner als fünf Zeichen - in diesem Fall die »Anzahl«-Felder - ist die Numerierung aus Platzgründen nicht auf dem Bildschirm sichtbar.)

Als erstes müssen Sie jetzt die folgenden Formatvorschriften eingeben. (Die Feldgrenzen des gerade bearbeiteten Feldes werden revers dargestellt. Nach jeder Formateingabe müssen Sie RETURN drücken!):

TODO TABLE

Feld 3: 1111 (die »1« dient wie gesagt nur als »Füllzeichen. Dazu können Sie auch jedes andere Zeichen verwenden. Entscheidend ist, an welcher Stelle der Punkt (».«) steht)
Feld 6: 111111
Feld 7: 111.11
Feld 8: 11
Feld 9: 111.11
Feld 10: 111111
Feld 11: 111.11
Feld 12: 11
Feld 13: 111.11
Feld 14: 111111
Feld 15: 111.11
Feld 16: 11
Feld 17: 111.11
Feld 18: 1111.11
Feld 19: 111.11
Feld 20: 1111.11

Die anschließende Frage betreffend der Syntaxkontrolle beantworten Sie sicherheitshalber mit »ja«. Danach geben Sie die folgenden Rechenvorschriften ein:
- Feld 9: F(7)\*F(8)
- Feld13: F(11)\*F(12)
- Feld17: F(15)\*F(16)
- Feld18: F(9) + F(13) + F(17)
- Feld19: 0.14\*F(18)
- Feld20: F(18) + F(19)

Als Namen der Datei geben Sie schließlich «rechnungen« ein. Die beiden Fragen nach dem Zeichensatz beantworten Sie mit »nein«. Bei der »Anzahl der relevanten Stellen des Schlüsselfeldes« dürften »5« genügen. Damit sind alle notwendigen Informationen eingegeben; die Datei wird auf Dis- f kette eingerichtet.

### d)	Änderungsmöglichkeiten:

Zunächst zu den Änderungsmöglichkeiten während der Dateimaskendefinition beziehungsweise bei einer Datei, in die noch keine Daten eingegeben wurden. (Eine auf Diskette eingerichtete Datei können Sie übrigens über den Menüpunkt »Datei einladen« (siehe Bild 1) in den Computer laden, um Änderungen an der Eingabemaske vorzunehmen):

An den Datenfeldern können grundsätzlich beliebige Änderungen vorgenommen werden (an den Kommentaren und Bemerkungen natürlich auch). Es können also ohne weiteres Datenfelder gelöscht, verkleinert (mit »DELETE«) oder vergrößert werden (mit »INSERT«), Auch der Feldtyp kann einfach durch Überschreiben des ursprünglichen Codes mit der neuen Kennzeichnung geändert werden. (Wenn Sie zum Beispiel aus einem Textfeld ein Zahlenfeld machen wollen, müssen Sie nur das »T« durch ein »N« ersetzen.) Wichtig ist nur, daß die einzelnen Datenfelder (bis auf die erste Stelle, die ja den Feldtyp-Code enthält) vollständig mit dem bei der Einrichtung der Felder erzeugten Füllzeichen (CHR$(166)); entspricht »COMMODORE« + »+«) aufgefüllt sind! Ist das nämlich nicht der Fall, dann wird das betreffende Feld bei der Übernahme der Eingabemaske vom Programm nicht erkannt.

Wenn Sie zum Beispiel bei der Übernahme der Eingabemaske durch die Routine »Datei einrichten« (während der Eingabe der Formatier- und Rechenvorschriften) einen Fehler in der Eingabemaske entdecken, können Sie die Übernahme mit »SHIFT« + »RETURN« abbrechen und anschließend mit »F1« wieder in die Eingabemaskendefinition gelangen.

Eine gerade in Arbeit befindliche Eingabemaske kann über den Menüpunkt »Dateimaske abspeichern« (siehe Bild 1) auf Diskette unter einem frei wählbaren Namen zwischengespeichert werden, um dann zu einem späteren Zeitpunkt über den Menüpunkt »Dateimaske einladen« (siehe Bild 1) wieder in den C 64 geladen zu werden. Dadurch ist es möglich, die Entwicklung einer Datei abzubrechen, ohne später bei der Weiterarbeit die Eingabemaske (beziehungsweise den Teil der bereits definiert wurde) noch einmal neu eingeben zu müssen.

Bei einer Datei, in die bereits Daten eingegeben wurden, sind die Änderungsmöglichkeiten schon geringer.

Bei den Kommentaren und Bemerkungen gibt es keine Probleme. Hier können beliebige Änderungen vorgenommen werden. Auch die Positionen der Datenfelder können verändert werden. Dabei ist allerdings darauf zu achten, daß erstens die Reihenfolge der Datenfelder nicht verändert wird und zweitens die Länge der einzelnen Datenfelder nicht geändert wird, das heißt, die Felder weder verkleinert noch vergrößert werden.

### e)	Änderung des Zeichensatzes:

Über den Menüpunkt »Zeichensatz ändern« gelangen Sie in die Zeichensatzänderungsroutine.
Dabei gehen Sie folgendermaßen vor:

-	Zuerst stellen Sie den gewünschten Schriftmodus ein.<br>Dazu befindet sich in der unteren Bildschirmhälfte ein kleines Auswahlmenü:
-	Mit »F4« schalten Sie den Grafik-Modus, mit »F2« den Groß-/Kleinschrift-Modus ein.
-	Mit »F8« können Sie auf »RVS on«, mit »F6« auf »RVS off« umschalten.
-	Danach drücken Sie die gewünschte Taste. Dadurch wird die Matrix des betreffenden Zeichens auf der rechten Bildschirmhälfte ausgegeben.
-	Nun können Sie Änderungen an der Matrix vornehmen. Dafür stehen Ihnen neben der üblichen Cursorsteuerung folgende Kommandos zur Verfügung:
-	»F1«: Matrixpunkt setzen
-	»F3«: Matrixpunkt löschen
-	»F5«: gesamte Matrix löschen
-	»F7«: geänderte Matrix übernehmen

(Hinweis: Um zu verhindern, daß der Aufbau der Menüs zerstört wird, ist die Zeichensatzänderung nur im Bereich der Dateimaske und des Helpscreens 2 wirksam.)

Mit »SHIFT« + »RETURN« können Sie jederzeit in das Hauptmenü zurückkehren.

Noch ein Tip: Wollen Sie größere Änderungen am Zeichensatz vornehmen, ist es wohl am sinnvollsten, wenn Sie die gewünschten Matrizen zuerst auf einem entsprechend gerasterten Blatt Papier entwerfen und sie danach auf den Bildschirm übertragen. Die Zahlen um das Matrixfeld auf dem Bildschirm sind Ihnen dabei behilflich.

### f)	Änderung der Tastaturbelegung:

Über den Menüpunkt »Tastaturbelegung ändern« gelangen Sie in die Tastaturänderungsroutine. Dieses Programmodul stellt an sich nur eine Erweiterung der Zeichensatzänderung dar, das heißt, tatsächlich wird nicht die Belegung der Tastatur geändert, sondern nur die Zeichenmatrizen entsprechend ausgetauscht.

Haben Sie »F5« gedrückt, gelangen Sie in ein weiteres Auswahlmenü:

-	Mit »F1« läßt sich die Belegung einer Taste ändern.
-	Mit »F3« können Sie zwei Tasten vertauschen.

Bevor Sie die entsprechenden Tasten drücken, müssen Sie, wie bei der Zeichensatzänderung, den gewünschten Schriftmodus einstellen.

Wichtig: Die Belegung einer Taste wird immer nur in dem eingestellten Schriftmodus geändert, das heißt, wenn Sie zum Beispiel den Groß-/Kleinschriftmodus und »RVS off« einstellen und danach die Tasten »Y« und »Z« vertauschen, ist diese Änderung im Graphikmodus und bei »RVS on« nicht wirksam! Genauso müssen auch die »geSHIFTeten« Tasten extra geändert werden!

Auf den ersten Blick wirkt dies vielleicht etwas umständlich. Andererseits eröffnen sich dadurch aber wesentlich mehr Möglichkeiten der Veränderung. So können Sie zum Beispiel - auch in Verbindung mit der »Zeichensatzänderung« - aus einem Zeichensatz praktisch zwei machen, indem Sie zum Beispiel im Groß-/Kleinschriftmodus den normalen Zeichensatz beibehalten und im Graphikmodus einen entsprechenden griechischen Zeichensatz entwickeln. Zwischen diesen beiden Zeichensätzen können Sie dann einfach mit »COMMODORE« 4- »SHIFT« umschalten! Mit »SHIFT« + »RETURN« können Sie jederzeit in das Hauptmenü zurückkehren.

### Dateneingabe

Um Daten in eine Datei eingeben zu können, müssen Sie Teil 2 von Database einladen. (Im Lademenü »F3« drücken.)

Für jede Diskette, auf der sich Daten befinden, führt Database ein Inhaltsverzeichnis, das »Datei-Directory«. Dieses wird auf der Diskette als sequentielles File gespeichert. Neben den Namen der einzelnen Dateien enthält es auch Angaben über die Anzahl der Dateiseiten und die aktuelle Anzahl der Datensätze einer Datei. Bei der Definition einer neuen Datei wird das Datei-Directory automatisch aktualisiert beziehungsweise - wenn noch nicht vorhanden - automatisch angelegt. Auch bei der Datenpflege wird es ständig auf dem neuesten Stand gehalten. Über den Menüpunkt »Datei-Directory« (siehe Bild 1) und durch anschließendes Drücken der »F2«-Taste kann das Datei-Directory angezeigt werden.

Darüber hinaus können Sie mit »F3« eine Datei löschen, mit »F5« eine Datei umbenennen und mit »SHIFT« + »RETURN« ins Hauptmenü zurückkehren.

Doch zurück zur Dateneingabe: Um eine Datei zur Datenpflege in den Computer zu laden, gibt es zwei Möglichkeiten: Entweder, Sie drücken im Dateidirectorymodul »F1« oder im Hauptmenü »F3«. In beiden Fällen müssen Sie den vollständigen Namen der gewünschten Datei eingeben und anschließend »RETURN« drücken. (Übrigens: Der Name der gerade im Rechner befindlichen Datei wird bei der Ausgabe des Dateidirectorys revers dargestellt!)

Nach Beendigung des Ladevorgangs ist die Datei zur Datenpflege bereit. Über das Hauptmenü kann jetzt beliebig zwischen den einzelnen Programmfunktionen umgeschaltet werden. Sie können also zum Beispiel zuerst neue Daten eingeben, danach in die Datenausgaberoutine verzweigen, und so weiter.

Über den Menüpunkt »Daten eingeben« (siehe Bild 1) können Sie jetzt mit der Dateneingabe beginnen. In diesem Zusammenhang gleich noch ein wichtiger Hinweis: Wenn Sie am Datenbestand einer Datei Änderungen vornehmen (also insbesondere neue Daten eingeben, aber auch Datensätze löschen oder ändern), ist davon natürlich auch die Schlüsseldatei, die sich ja im Speicher befindet, betroffen. Am Ende der Dateiarbeit muß diese daher über den Menüpunkt »Datei speichern« (siehe Bild 1) auf die Diskette zurückgeschrieben werden - mit einer Einschränkung: Wenn Sie eine neue Datei einladen, die sich auf derselben Diskette wie die vorherige befindet, wird die alte Datei (vor dem Laden der neuen) automatisch auf die Diskette zurückgeschrieben.

Auch beim Dateidirectory ist Vorsicht geboten:

Durch das Einladen des Dateidirectorys wird eine eventuell im Computer befindliche Datei gelöscht!

Nach diesen Vorbemerkungen einige konkrete Hinweise zur Dateneingabe: Nachdem Sie im Hauptmenü »F5« gedrückt haben, wird die erste Dateiseite auf dem Bildschirm ausgegeben und der Cursor blinkt am Anfang des ersten Datenfeldes. Nun können Sie mit der Dateneingabe beginnen. Alle Datenfelder sind zur besseren Kennzeichnung mit dem schon von der Datenfelddefinition bekannten Füllzeichen (CHR$(166)) aufgefüllt. Der Cursor kann jetzt nur noch innerhalb der Datenfelder bewegt werden.

Ähnlich wie bei der Dateimaskendefinition steht Ihnen bei der Dateneingabe ein komfortabler Editor zur Verfügung. Um aber einen der im nachfolgenden beschriebenen Befehle aufrufen zu können, müssen Sie zuerst die »F1«-Taste drücken! Daraufhin beginnt der Schriftzug »F1« in der drittuntersten Bildschirmzeile ganz rechts zu blinken. Jetzt können Sie die gewünschte Funktion aufrufen. Nach deren Ausführung können Sie mit der Dateneingabe fortfahren. Haben Sie die »F1«-Taste unbeabsichtigt gedrückt, kommen Sie mit »SHIFT« + »RETURN« in die Eingaberoutine zurück.

Die Befehle im einzelnen (Eine Zusammenfassung finden Sie in Tabelle 3):

- »RETURN«: Wenn Sie die »RETURN«-Taste drücken und das aktuelle Datenfeld ein Datums-, Rechen- oder Zahlenfeld ist, dann wird die zugehörige Vorschrift ausgeführt. Auf jeden Fad aber wird der Cursor auf den Anfang des nächsten Datenfeldes positioniert. Mit einer Einschränkung: Sollte es sich bei dem aktuellen Feld um das letzte Datenfeld handeln, dann erfolgt eine Abfrage, ob Sie den Datensatz speichern wollen. Beantworten Sie die Frage mit »nein«, so wird der Cursor wieder auf den Anfang des letzten Datenfeldes positioniert.
-	»SHIFT« + »RETURN«: Bewirkt Rückkehr ins Hauptmenü. Die Datenfelder werden dabei gelöscht.
-	»F5«: Dateiseite vorblättern.
-	»F7«: Dateiseite zurückblättern.
-	»F8«: Seitendirektaufruf.
-	»HOME«: Positioniert Cursor auf den Anfang des ersten Datenfeldes.
-	»SHIFT« + »HOME«: Löscht sämtliche Datenfelder.
-	»L«: Löscht das aktuelle Datenfeld.
-	»CTRL« + »1«: Ändert Hintergrundfarbe. Der Farbcode wird jeweils um eins erhöht.
-	»CTRL« + »2«: Ändert Vordergrundfarbe.
-	»CTRL« + »3«: Cursorfarbe ändern.
-	»CTRL« + »C«: Cursorblinkfrequenz ändern. Siehe auch Bild 3.
- »V«: Durch dieses Kommando werden sämtliche Rechen- und Formatiervorschriften für alle betreffenden Felder ausgeführt. (Zuvor werden die Zahlenwerte aller Felder ermittelt.) Wenn Sie also direkt bei der Dateneingabe auf das »RETURN«-Kommando verzichten, können Sie mit »V« die Berechnungen und Formatierungen nachholen lassen.
-	»S«: Mit diesem Kommando wird der eingegebene Datensatz gespeichert und der Schlüssel des Datensatzes in die Indexdatei einsortiert, ohne daß Sie extra im letzten Datenfeld »RETURN« drücken müssen.

### Datenausgabe

Über den Menüpunkt »Daten ausgeben« (siehe Bild 1) gelangen Sie in einen der wichtigsten Programmpunkte eines jeden Datenverarbeitungsprogramms: der Datenausgabe. Die Datenausgabemöglichkeiten von Database sind sehr vielfältig. Im wesentlichen lassen sich drei Bereiche unterscheiden:

-	die Ausgabe über Schlüssel
-	das »Durchblättern« der Datei
-	die Selektion über eine frei wählbare Auswahlmaske

Wenn Sie im Hauptmenü »F7« drücken, wird zunächst wieder die erste Dateiseite auf dem Bildschirm ausgegeben. Jetzt können Sie durch Drücken der entsprechenden Taste die gewünschte Funktion aufrufen:

### a)	Die Ausgabe über Schlüssel:

Dazu drücken Sie die »l«-Taste. Jetzt werden die Datenfelder gelöscht, die Dateiseite, auf der sich das Schlüsselfeld befindet, ausgegeben und der Cursor auf das Schlüsselfeld positioniert Nachdem Sie den Schlüssel mit abschließendem »RETURN« eingegeben haben, wird er in der Indexdatei gesucht und - sofern vorhanden - der zugehörige Datensatz in den Rechner geladen und auf dem Bildschirm ausgegeben. Gehören zu einem Schlüssel mehrere Datensätze, dann werden Sie darauf durch die Meldung »Weitere Datensätze vorhanden!« hingewiesen. Wenn Sie daraufhin nochmals »I« drücken und die nachfolgende Frage mit »ja« beantworten, wird der nächste Datensatz (mit demselben Schlüssel) ausgegeben.

Haben Sie die »l«-Taste nur versehentlich gedrückt, können Sie die Routine mit »SHIFT« + »RETURN« verlassen.

### b)	»Durchblättern« der Datei:

Hier bietet sich wieder der Vergleich einer Datei mit einem Karteikasten an. Mit den folgenden Kommandos ist es nämlich möglich, eine Datei wie einen Karteikasten »durchzublättern«. Die Kommandos beziehen sich dabei auf die Indexdatei beziehungsweise auf die in ihr gespeicherten Schlüssel der einzelnen Datensätze. Wenn also zum Beispiel von einem »ersten Datensatz« die Rede ist, dann handelt es sich dabei um den Datensatz, dessen Schlüssel als erster in der Indexdatei gespeichert ist. Verbunden mit der Tatsache, daß die Schlüssel in der Indexdatei alphabetisch einsortiert sind, ergibt sich daraus die Möglichkeit, eine Datei in alphabetischer Reihenfolge durchzublättern.
Die Befehle im einzelnen:

-	»E«: Gibt den ersten Datensatz der Datei aus.
-	»L«: Gibt den letzten Datensatz der Datei aus.
-	»N«: Mit diesem Kommando kann der nächste Datensatz in Bezug auf den gerade im Speicher befindlichen ausgegeben werden.
-	»V«: Dadurch wird der vorherige Datensatz ausgegeben.

### c)	Die Selektion über eine frei wählbare Ausgabemaske:

Mit dieser Routine, die mit »F« aufgerufen wird, steht Ihnen ein vielseitiges Instrument zur Auswahl (Selektion) von Datensätzen zur Verfügung. Die Grundidee ist dabei folgende: Sie geben in die Datenfelder eine sogenannte Selektionsmaske (das heißt Vergleichsdaten) ein, die dann mit jedem Datensatz der Datei verglichen wird. Entspricht ein Datensatz der Maske, wird er in den Speicher geladen. Ansonsten wird der nächste Datensatz verglichen.

Bevor mit der Selektion begonnen werden kann, müssen Sie also zuerst eine Auswahlmaske eingeben. Die grundlegende Vorgehensweise ist dabei dieselbe wie bei der Dateneingabe! Mit Ausnahme der Routinen zur Datensatzspeicherung und zur Änderung der Bildschirmfarben stehen deshalb dieselben Routinen wie bei der Dateneingabe zur Verfügung. (Eine Aufstellung finden Sie in Tabelle 4 unten.)

- »K«: Durch»K«wirddieSelektionsmaskeübernommen, die Selektion gestartet und im Falle eines positiven Vergleichs der betreffende Datensatz ausgegeben.
- »M«: Dieses Kommando bietet Ihnen die Möglichkeit, einige spezielle Selektionskriterien anzugeben. Der Cursor blinkt dabei auf dem Feldbegrenzungszeichen. Wenn Sie jetzt eine der nachfolgenden Tasten drücken, wird das entsprechende Symbol unter dem Cursor revers ausgegeben.
-	»F1«: »kleiner«-Funktion: Dadurch werden alle Datensätze selektiert, deren entsprechender Datenfeldinhalt kleiner ist als die eingegebenen Vergleichsdaten.
-	»F2«: »kleiner gleich«-Funktion: Bewirkt Selektion aller Datensätze, deren entsprechender Datenfeldinhalt kleiner gleich den Vergleichsdaten ist.
-	»F3«: »größer«-Funktion: Bewirkt Selektion aller Datensätze, deren entsprechender Datenfeldinhalt größer als die Vergleichsdaten ist.
-	»F4«: »größer gleich«-Funktion: Bewirkt Selektion aller Datensätze, deren entsprechender Datenfeldinhalt größer gleich den Vergleichsdaten ist.
-	»F5«: »Hochkomma«-Funktion: Diese Funktion spart Ihnen Tipparbeit. Bei einem auf diese Weise verknüpften Feld wird nämlich die Eingabe des vorherigen Feldes übernommen.
- »F6«: »ODER«-Funktion: Diese logische »ODER«-Verknüpfung kann zusätzlich zu den anderen Funktionen verwendet werden. Es können beliebig viele (aber mindestens zwei) Felder verknüpft werden. Diese Funktion läßt sich auch sinnvoll mit der vorangegangenen kombinieren: Haben Sie zum Beispiel eine Literaturverwaltung mit mehreren gleichwertigen Feldern zur Stichworteingabe und sind sich bei einer Abfrage nicht sicher, in welches Feld Sie ein bestimmtes Stichwort eingegeben haben, können Sie folgendermaßen verfahren: Sie geben das Stichwort in das erste betreffende Feld ein und verknüpfen das Feld mit »ODER«. Die anderen betreffenden Felder verknüpfen Sie mit »Hochkomma« und »ODER«. Das ist schon alles!<br>So sparen Sie nicht nur Tipparbeit, sondern auch eventuell notwendige zusätzliche Abfragen.
-	»F7«: »NICHT«-Funktion: Bewirkt Selektion aller Datensätze, deren entsprechender Datenfeldinhalt ungleich den Vergleichsdaten ist.<br>Wichtig: Um wieder in die »normale« Eingaberoutine zu kommen, müssen Sie »RETURN« drücken!<br>Zusätzlich stehen Ihnen drei Zeichen mit spezieller Bedeutung zur Verfügung, die Sie direkt bei der Eingabe der Vergleichsdaten verwenden können:
- das »Fragezeichen» (CHR$(63)) und das Sonderzeichen (CHR$(166)), mit dem die Felder beim Aufruf der Aus- und der Eingaberoutine aufgefüllt sind: Diese beiden Zeichen haben dieselbe Funktion. Sie dienen als »Joker«, das heißt, sie können fürjedes beliebige andere Zeichen stehen! Sind also eine (oder mehrere) Stellen in einem Datenfeld für die Selektion nicht relevant, dann geben Sie dort eines der beiden Zeichen ein.
-	das »Multiplikationszeichen« (CHR$(42)); Dieses Zeichen kennzeichnet die Stelle, an der es steht, sowie alle nachfolgenden Stellen des Datenfeldes als nicht relevant!<br>Abschließend drei zusätzliche Funktionen zur Bearbeitung des Datenbestandes einer Datei, die Sie ebenfalls durch Drücken der entsprechenden Taste aufrufen können:
-	»D«: Dadurch wird der gerade im Speicher befindliche Datensatz aus der Datei entfernt, das heißt im Computer und auf Diskette gelöscht.
- »R«: Mit diesem Kommando können Sie den im Speicher befindlichen Datensatz ersetzen (beziehungsweise ändern). Dabei wird in die Dateneingaberoutine verzweigt. Es können beliebige Änderungen (auch am Datensatzschlüssel) vorgenommen werden. Durch Drücken der »S«-Taste wird der alte Datensatz dann durch den neu eingegebenen ersetzt.
- »A«: Dieses Kommando ermöglicht die Eingabe eines neuen Datensatzes, ohne daß extra über das Hauptmenü die Dateneingaberoutine aufgerufen werden muß.

Eine Aufstellung aller bei der Datenausgabe zur Verfügung stehenden Kommandos finden Sie in Tabelle 4.

### Helpscreens

Diese sogenannten »Hilfsbildschirme« stellen eine wertvolle Hilfe sowohl für die Arbeit mit dem Programm selbst als auch für die Arbeit mit den einzelnen Dateien dar. Hier können Sie zum Beispiel wichtige Hinweise zu einzelnen Kommandos des Programms ablegen, auf Diskette speichern und dann bei Bedarf wieder in den C 64 laden. Wie Sie in Bild 1 sehen können, ist es möglich, die Helpscreens auch bei der Datenein- und Datenausgabe aufzurufen, das heißt Sie können bei der Datenpflege jederzeit auf die Helpscreens zurückgreifen!

Insgesamt stehen zwei Helpscreens zur Verfügung, die einfach durch Drücken der »CTRL« + »H«-Taste aufgerufen werden. Zur Erläuterung: Database verwendet zwei Bildschirme. Auf dem einen, der vor allem zur Ausgabe der Hauptmenüs und für die Sonderfunktionen benützt wird, wird der normale Zeichensatz des C 64 verwendet. (Wenn Sie also zum Beispiel vom Hauptmenü die Helpscreens aufrufen, wird Helpscreen 1 ausgegeben.) Auf dem anderen, der zur Ausgabe der Dateimaske dient, wird der eventuell vom Benutzer geänderte Zeichensatz verwendet (und bei einem Helpscreenaufruf entsprechend Helpscreen 2 ausgegeben). Bis auf die verschiedenen Zeichensätze sind die beiden Helpscreens aber völlig gleichwertig.

Für die Eingabe stehen Ihnen die 2.-22. Bildschirmzeile zur Verfügung. Die möglichen Kommandos sind dabei im wesentlichen dieselben - bis auf die dateispezifischen - wie bei der Dateimaskendefinition. (Siehe Bild 3.) Dazu kommen die vier folgenden Kommandos:

-	»F5«: Helpscreen speichern: Mit diesem Kommando können Sie den gerade auf dem Bildschirm ausgegebenen Helpscreen durch Angabe eines maximal 14stelligen Namens auf Diskette abspeichern.
-	»F6«: Helpscreen laden. Mit diesem Kommando können Sie einen auf Diskette gespeicherten Helpscreen durch Angabe des Namens in den Computer laden. Dabei ist es egal, von welchem Helpscreen (1 oder 2) aus Sie den einzuladenden Helpscreen gespeichert haben! (Ein Helpscreen, den Sie zum Beispiel von Helpscreen 1 aus gespeichert haben, kann also ohne weiteres in den Helpscreen 2 eingeladen werden.)
-	»F7«: Helpscreens umschalten/vertauschen. Nachdem Sie »F7« gedrückt haben, erscheint die Frage »Helpscreens vertauschen?« Beantworten Sie sie mit »nein«, wird nur auf den jeweils anderen Helpscreen umgeschaltet. Beantworten Sie die Frage mit »ja«, werden die Inhalte der beiden Helpscreens vertauscht und danach der jeweils andere Helpscreen ausgegeben. Diese Funktion bekommt dann einen Sinn, wenn Sie zum Beispiel einen geänderten Zeichensatz verwenden und die Änderungen auf einem Helpscreen vermerken. Auf Helpscreen 2 sehen Sie dann die geänderten Zeichen; auf Helpscreen 1 ist die »normale« Zeichenmatrix des betreffenden Zeichens sichtbar.
-	»SHIFT« + »RETURN«: MitdieserTastenkombination können Sie jederzeit - egal auf welchem Helpscreen Sie sich gerade befinden - zur Aufrufstelle zurückkehren.

Abschließend noch einige Hinweise für diejenigen, die sich mit dem Programm(aufbau) näher befassen wollen:

-	In den Bildern 2 und 5 finden Sie Informationen über die von Database 64 erzeugten Dateien.
-	Die Tabellen 1 und 2 zeigen die Speicherbelegung von Database.
-	Die Tabellen 5 und 6 enthalten eine vollständige Liste der in den beiden Programmteilen verwendeten Variablen.
-	Tabelle 7 gibt Auskunft über die in den vier Maschinenprogrammpaketen enthaltenen Routinen.

Hinweis:
Damit das Programm compilierfähig wurde, waren umfangreiche Änderungen notwendig. Dadurch wurde das (uncompilierte) Programm an manchen Stellen etwas langsamer, vor allem aber um einiges länger! Daher müssen Sie im zweiten Programmteil (DBII BASIC) in der uncompilierten Version auf eine Programmfunktion, nämlich die Helpscreens, verzichten. Die Leserservice-Diskette enthält auch das compilierte Programm (DBII). In diesem ist die Helpscreen-Funktion verfügbar!

(Martin Hecht/tr)

TODO ASIDE

Anmerkung der Redaktion:
Dem Programmautor stand leider kein Drucker zur Verfügung. Deshalb fehlen Database die Druckerroutinen zur Ausgabe von Datensätzen. Ein entsprechendes Programm ließe sich aber über den Menüpunkt »Sonderfunktionen« relativ leicht einbinden. Geübten Programmierern dürfte das keine Probleme bereiten. Entsprechende Vorschläge nehmen wir gerne entgegen. Dieses Druckprogramm muß auf der Diskette unter dem Namen »Soft« vorliegen und zumindest einen Basic-Start haben.
Die Leserservice-Diskette enthält folgende Programme:

TODO TABLE

Blocks:	Name:	Funktion:
2	DBL	Autostart; mit »,8,1« laden.
6	DBL/T	Ladeprogramm
93	DBI	Teil 1 (neue Datei entwickeln) in compilierter Version
96	DBII	Teil 2 (Datenpflege) in compilierter Version.
4	MP-P-2	Maschinenprogramme: werden
6	MP-P-3	automatisch nachgeladen.
9	MP-P-4	Siehe auch Tabelle 7.
3 MP-P-5
129 DBI BASIC Teil 1 als Basicversion
126 DBII BASIC Teil 2 als lauffähige Basicversion ohne Helpscreenfunktion.

# Buchführung - leicht verständlich mit »Bufueg« \[97-104\]

> Grundkenntnisse der Buchführung sind nicht nurfür zukünftige Manager-Generationen wichtig. Wer weiß, wie gebucht wird, hat in jedem Beruf Vorteile, denn wirtschaften heißt buchen.

Das Programm »Bufueg« ist auf der Grundlage der Kenntnisse über Buchführung der Klasse 11 und 12 entstanden, genügt aber auch den Anforderungen der Klasse 13. Es ist deshalb nicht für die professionelle Arbeit in einem Betrieb geeignet, sondern vielmehr ist es als Hilfe für den Anfänger auf dem Gebiet der Buchführung gedacht. »Bufueg« kann zum Beispiel als Kontrolle für die Berechnung von Zahlenwerten dienen, hilft, den Abschluß von Konten zu überprüfen, und ist auch unter dem Aspekt sehr nützlich, daß jegliche Schreibarbeit auf vielen Seiten T-Kontenpapier entfällt.

## Beschreibung der Programmfunktion

Nach dem Laden des Programms von Datasette oder Floppy-Disk erscheint nach der Eingabe von RUN zunächst die Programmüberschrift, dann das Hauptmenü. Aus buchungstechnischen Gründen ist die Auswahl im ersten Schrittaufdas Erstellen der Eröffnungsbilanz beschränkt. Auf Druck der Taste »1« folgt die Möglichkeit, zuerst alle Aktiv-, dann alle Passivkonten einzugeben. Diejeweiligen Anfangsbestände werden dabei unter »Betrag« eingegeben. Neben den schon im Programm enthaltenen Maßregeln istzusätzlich zu beachten:

1.	Es können maximal nur 17 Aktiv- und 16 Passivkonten eingegeben werden, was aber für die Buchführungsaufgaben, die der Anfänger zu lösen hat, durchaus ausreicht.
2.	Je höher die Zahl der in der Eröffnungsbilanz enthaltenen Konten, desto geringer ist die Möglichkeit, später eine bestimmte Anzahl neuer Konten zu eröffnen, da das Programm nur 19 Aktiv-, 19 Passiv- und 12 neueröffnete Unterkonten von Eigenkapital verwalten kann. Dies bedeutet zum Beispiel: Eingabevon 17 Aktivkonten für die Eröffnungsbilanz hat zur Folge, daß später nur noch 2 Aktivkonten (Bild 1) neu eröffnet werden können.
3.	Die Eingabe des Kontos »Waren« als erstes Aktivkonto bewirkt die in der Buchführung übliche Aufteilung dieses Kontos in die Konten »Wareneinkauf« und »Warenverkauf« im Programm.
4.	Die Konten »Mehrwertsteuer« und »Vorsteuer« haben eine besondere Stellung im Programm. Anfangsbestände dieser beiden Konten auf der Aktiv- oder Passivseite der Eröffnungsbilanz können eingegeben werden, ohne daß das Programm diese später als Aktiv- oder Passivkonten behandelt.
5.	Das Konto »Eigenkapital« und sein Anfangsbestand werden vom Programm eigenständig in die Eröffnungsbilanz eingetragen. Es braucht also niemals eingegeben zu werden.

Hat man alle Konten und Anfangsbestände der Eröffnungsbilanz eingegeben, so erscheint diese auf dem Bildschirm. Folgt man dann der wenig später erscheinenden Aufforderung »Space drücken«, so springt das Programm zum Anfangsmenü zurück. Sollte das Konto »Waren« als erstes Aktivkonto eingegeben worden sein, wird vorher noch der Warenschlußbestand abgefragt, der ja in der Regel bekannt und für den Abschluß der Warenkonten von entscheidender Bedeutung ist. Befindet man sich jetzt wieder im Hauptmenü, so fällt sein erster Auswahlpunkt für den weiteren Verlauf weg, da die Eröffnungsbilanz nicht nochmals erstellt werden muß.

Im zweiten Menüpunkt, dem »Buchen« gibt es vier Möglichkeiten, einen Buchungssatz einzugeben:

TODO TABLE

1.Buchungssatz: KASSE an BANK 12000 DM
Eingabe:	Konto?	KASSE	Konto?	BANK
Betrag?	12000	Betrag?	12000
an
Konto?	Q	Konto?	Q
2. Buchungssatz: KASSE	1000 an BANK	1100
MWST	100	
Eingabe:	Konto?	KASSE	Konto?	BANK
Betrag?	1000	Betrag?	1100
an
Konto?	MWST	Konto?	Q
Betrag? 100
3.Buchungssatz: KASSE 1100 an BANK 1000 MWST 100
Eingabe:	Konto?	KASSE	Konto?	BANK
Betrag?	1100	Betrag?	1000
an
Konto?	Q	Konto?	MWST
Betrag? 100
4.	Buchungssatz: KASSE 1000 an LOEHNE 1500 BANK 2000 MWST 1500
Eingabe:	Konto? Betrag?	KASSE 1000	Konto? Betrag?	LOEHNE 1500
	Konto? Betrag?	BANK 2000	Konto? Betrag?	MWST 1500

Der dritte Auswahlpunkt des Menüs ist auch einfach zu handhaben. Es wird gefragt, welches Konto man ansehen möchte, und nach Eingabe des gewünschten Kontos folgt seine Aufzeichnung auf dem Bildschirm.

Im vierten Punkt, dem »Konten neu eröffnen«, kann ein Privatkonto (Eingabe: »Privat«) als Unterkonto von Eigenkapital eröffnet werden. Dieses wird beim Abschluß der Konten gesondert behandelt, das heißt nicht über »Gewinn-und-Verlust« abgeschlossen, wie die anderen Konten dieser Gruppe, sondern über das Eigenkapitalkonto, wie es in der Buchführung allgemein üblich ist.

Hat man schließlich alle Buchungssätze ausführen lassen und möchte die Konten abschließen, so wählt man den Punkt 5 des Menüs. Dort werden alle Konten nach folgenden Regeln abgeschlossen:
a)	Alle Aktiv- und Passivkonten über das Schlußbilanzkonto
b)	Alle Unterkonten von Eigenkapital über das »Gewinn-und-Verlust«-Konto
c)	Ein eventuell eröffnetes »Privat«-Konto über das Eigenkapitalkonto
d)	Falls Warenkonten eröffnet worden sind, werden diese je nach Wahl mit dem Bruttoabschluß (das heißt, »Wareneinkauf«- und »Warenverkauf«-Konto werden mit dem »Gewinn-und-Verlust«-Konto abgeschlossen) oder mit dem Nettoabschluß (das heißt, das »Wareneinkauf«-Konto wird über das »Warenverkauf«-Konto abgeschlossen und dieses wiederum über das »Gewinn-und-Verlust«-Konto) abgeschlossen.
e)	Das »Gewinn-und-Verlust«-Konto über das Eigenkapitalkonto
f)	Das Eigenkapitalkonto über das Schlußbilanzkonto g) Das »Vorsteuer«-Konto über das »Mehrwertsteuer«-Konto h) Das »Mehrwertsteuer«-Konto über das Schlußbilanzkonto

Hat das Programm alle Konten abgeschlossen, kehrt es wieder zum Anfangsmenü zurück. Als Auswahl bleibtjetzt nur noch Punkt 6, nach dessen Ausführung man das Programm neu starten und eine neue Buchführungsaufgabe beginnen kann, und Punkt 3, das »Konten einsehen«. Hier werden alle abgeschlossenen Konten nochmals nacheinander aufgezeichnet. Dieser Menüpunkt kann dann noch beliebig oft wiederholt werden. Selbstverständlich kann das Programm noch erweitert werden. Die Erläuterung der verwendeten Variablen (Bild 2) und die Programmbeschreibung (Bild 3) sind zu diesem Zweck ebenfalls abgebildet. Mit etwas Übung wird es Ihnen sicherlich gelingen, so manche betriebswirtschaftliche Aufgabe zu lösen. Möglicherweise fertigen Sie sogar einen Jahresabschluß für ein kleines Probe-Unternehmen an. Eines wird Ihnen dabei auf jeden Fall bewußt werden - auch kaufmännische Betriebe können über Ihre Waren-, Kapital- und Finanzkontos nicht nach freiem Belieben verfügen. Die buchhalterischen und rechtlichen Bestimmungen stecken einen relativ engen Rahmen ab, den es geschickt auszulegen heißt. Diese Arbeit kann Ihnen aber kein Programm abnehmen, denn dazu gehört Kreativität und Einfallsreichtum. Das sind aber Bereiche, in denen sich Computer heute noch nicht mit dem Menschen messen können.

(V. Gill/aw)

# Autokauf gut kalkuliert \[106-112\]

> Dieses Programm erleichtert Ihnen die Entscheidung beim Autokauf. Preise und Unterhaltskosten werden in Tabellen und Grafiken ausgegeben.

Vielleicht überlegen Sie, ob Sie Ihren nächsten Wagen mit oder ohne Katalysator kaufen sollten. Oder Sie beschäftigen sich mit dem Problem, ob es ein »Gebrauchter« oder ein »Neuer« sein könnte. In jedem Fall spielen neben vielen anderen auch die finanziellen Erwägungen eine wichtige Rolle.

Eine gute Hilfe sind dabei Übersichten in Autozeitschriften, die zeigen, wie teuer die einzelnen Modelle im Unterhalt sind. Dabei ist es ein unvermeidlicher Nachteil, daß solche Übersichten sich auf den »Durchschnittsfahrer« und das »Durchschnittsauto« beziehen müssen. So ist es unwahrscheinlich, daß die Berechnungen für Sie exakt zutreffen. Im Einzelfall ist es wichtig, welchen Schadenfreiheitsrabatt Sie erreicht haben, ob Sie Wert auf eine Vollkasko-Versicherung oder eine Insassenunfallversicherung legen, etc. Der eine will auf ein Autoradio verzichten oder kann das Radio aus seinem jetzigen Wagen einbauen — der nächste stellt sich ein Autoradio der Mittelklasse vor, und der dritte glaubt, daß trotz des störenden Motorgeräusches ein Anschaffungspreis von über 1000 DM für eine Auto-Hifi-Anlage sich lohne. Entsprechendes gilt auch für anderes Zubehör.

Ein Faktor, der stark zu Buche schlägt, ist die Fahrleistung pro Jahr, die den monatlichen Unterhalt gewaltig in die Höhe treiben kann, wenn der Wagen einen kräftigen Durst entwickelt. Andererseits können selbst bei einem kleinen Auto bei sehr geringer Kilometerleistung die Kosten pro gefahrenen Kilometer so hoch werden, daß von Wirtschaftlichkeit kaum noch die Rede sein kann.

Was aber eine allgemeine Übersicht nicht leisten kann, ist heute im Zeitalter der Heimcomputer individuell zu lösen. Der Computer kann sich hier als das bewähren, was er eigentlich ist: Ein Rechner! Mit seiner Hilfe lassen sich Anschaffungskosten, Kosten pro Monat sowie pro Kilometer übersichtlicher in Tabellen darstellen und — was oft noch informativer ist — in Form von Balkendiagrammen grafisch darstellen.

Die Vorarbeit allerdings kann Ihnen auch der beste Computer nicht abnehmen: Informieren Sie sich über die aktuellen Preise, über eventuelle Preisnachlässe, über die Möglichkeit der Inzahlungnahme Ihres jetzigen Wagens, über die Preise des Zubehörs und über den Verbrauch, aber auch über die Tarife der Versicherungen und über die Kraftfahrzeugsteuer (ab 1. Jan. 86 18,80 DM pro 100 ccm für »konventionelle« Ottomotoren). Die Mühe lohnt sich: Je gründlicher Ihre Recherchen sind, desto zuverlässiger kann die Prognose des Rechners sein!

Das Programm (Listing 1) wurde für den C 64 geschrieben. Außerdem sollten Sie über eine Floppy verfügen, denn die gesammelten Daten sind nur dann wertvoll, wenn sie leicht verfügbar sind. Deshalb enthält das Menü die Möglichkeit, die Daten auf Diskette zu speichern. Dabei wird eine gegebenen-|^, falls schon vorhandene Datei mit Auto-Daten gelöscht, bevor ^ der aktuelle Stand auf die Diskette geschrieben wird. Wenn Sie auch die bisherigen Daten erhalten wollen, um beispielsweise die Preisentwicklung mehrerer Jahre zu dokumentieren, dann müßten Sie jede Datei auf einer anderen Diskette einrichten.

Nach dem Start des Programms fragt der Computer, ob Neueingabe oder Laden der Daten von Diskette gewünscht wird. Wenn schon gesammelte Daten auf Diskette vorhanden sind, muß selbstverständlich zuerst geladen werden (2), bevor vom Menü aus weitere Eingaben und/oder Korrekturen erfolgen.

Im übrigen brauchen auch Computerneulinge keine Sorge zu haben: Bei diesem Programm hilft der Computer durch Fragen und Aufforderungen, so daß Fehlbedienungen praktisch ausgeschlossen sind.

Die Daten, die bei der Berechnung berücksichtigt werden:

### Anschaffungspreis

— Grundpreis
— Überführung und Zulassung

Aufpreise für

— Autoradio
— vier Türen
— Unterboden- und Hohlraumschutz
— Servolenkung
— Schiebedach
— Sonderlackierung
— Weitere Extras (Eingabe nach freier Wahl nach dem ersten Fragezeichen, Preis nach dem zweiten!<br>Beispiele: Anhängerkupplung, Sperrdifferential etc. Bis zu fünf Bezeichnungen, nach denen im weiteren Programmablauf auch bei den anderen Wagen gefragt wird.)
— Für wieviel Mark wird Ihr alter Wagen in Zahlung genommen?
— Händlerrabatt

### Steuer und Versicherung

— Kraftfahrzeugsteuer
— Haftpflichtversicherung
— Teilkaskoversicherung
— Vollkaskoversicherung
— Insassenunfallversicherung

### Werkstattkosten

Hier wird mit einer Pauschale gerechnet, weil sich ein genauer monatlicher Betrag natürlich nur mit prophetischen Gaben vorhersagen ließe. Nach statistischen Erhebungen betrugen die durchschnittlichen Werkstattkosten für einen Pkw 1984 etwa 100 DM. Wenn Sie einen Wagen ins Auge gefaßt haben, bei dem die Werkstattkosten bekanntermaßen überdurchschnittlich hoch sind, müssen Sie eine höhere Pauschale ansetzen, während Sie sie verkleinern können, wenn Sie viele Wartungsarbeiten selbst erledigen.

### Betriebskosten

— Art des Kraftstoffs (Normal- oder Superbenzin, Diesel, bleifreier Kraftstoff)
— Kraftstoffpreis pro Liter
— Durchschnittlicher Verbrauch auf 100 km
— Nachgefülltes Öl
— Sonstiges (Garagenmiete, Pflegekosten ...)

Für die Berechnungen ist es weiterhin wichtig, ob der Wagen bar bezahlt oder finanziert werden soll, wofür das entsprechende Unterprogramm vorhanden ist, das nicht nur angibt, wieviel Geld Sie insgesamt zurückzahlen müssen, sondern auch die Höhe der monatlichen Rate.

Aus den eingegebenen Daten kann der Computer folgende Übersichten erstellen:

1.	Anschaffungspreise
2.	Kosten pro Monat
3.	Kosten pro Kilometer<br>(1 bis 3 jeweils als Tabelle oder als Balkendiagramm) (Bild 2 bis 4)
4.	Grafik: Vergleich der Leistung und des Hubraums
5.	Übersicht »Extras« (Einstufung: serienmäßig — gegen Aufpreis — nicht vorhanden)

Um die erhaltenen Werte mit anderen Übersichten vergleichen zu können, sollten Sie wissen, daß bei den monatlichen Kosten und den Kosten pro Kilometer keine Sparbeträge berücksichtigt wurden. Wer während der Laufzeit des Autos den nächsten Wagen komplett ansparen möchte, um Zinsen zu sparen, muß den Sparbetrag zu den angegebenen Summen hinzuzählen. Weil das von Fall zu Fall anders gehandhabt wird, können die angegebenen Kosten pro Monat beziehungsweise pro Kilometer zum Teil erheblich differieren.

Alle Grafiken und Tabellen bleiben so lange auf dem Bildschirm, bis Sie durch Drücken einer beliebigen Taste zur Übersicht zurückgehen. Wenn Ihnen das flüchtige Monitorbild nicht ausreicht, können Sie, wenn Sie einen Drucker besitzen, eine Hardcopy ausdrucken lassen. Zu diesem Zweck drücken Sie die Funktionstaste F1. Nach dem Ausdrucken der Hardcopy (MPS 801) kehrt der Computer zum Hauptmenü zurück.

Noch ein paar Hinweise für Leser, die noch nicht lange programmieren: Beim Abspeichern auf Diskette werden alle Daten, nicht nur die zuletzt eingegebenen, gespeichert, genauso wie alle Daten auf einmal geladen werden. Es wird also nicht für jedes Fahrzeug eine eigene Datei benötigt.

Vielleicht wundern Sie sich über Zeilen, die mehr als 80 Zeichen enthalten: Ihre Eingabe bereitet keine Schwierigkeiten, wenn Sie beim Eintippen die nur der besseren Übersicht dienenden Leerzeichen weglassen.

Außerdem sollten Sie nicht »PRINT«, sondern »?« eingeben und nicht »PRINT#4«, sondern »p« — geSHIFTetes »R« und die »4«. Aber das machen Sie aus Gründen der Zeitersparnis wohl ohnehin so.

Selbstverständlich hat jede Prognose dort ihre Grenzen, wo sich grundlegende Daten in unvorhergesehener Weise ändern können: Niemand kann heute zuverlässig angeben, wie hoch der Benzinpreis in acht Jahren sein wird, oder wie sich dann die Versicherungstarife geändert haben werden. Wenn Sie noch nicht in der höchsten Schadenfreiheitsklasse angekommen sein sollten, dann ist es sinnvoll, als Versicherungsbeitrag den mittleren Wert einzusetzen, den Sie in der Laufzeit des Wagens wahrscheinlich erreichen werden.

Wenn Sie schließlich an die Kaufentscheidung für Ihren zukünftigen Wagen herangehen, dann wird Ihnen der Computer mit diesem Programm eine wertvolle Hilfe sein. Die Entscheidung für einen der Kandidaten kann er Ihnen aber nicht abnehmen, denn ob Ihnen der günstigere Preis pro Kilometer wichtiger ist als die besseren Beschleunigungswerte des Konkurrenten, das kann der Computer nicht wissen. Er kann nur übersichtlich die Entscheidungskriterien zusammenstellen. Wenn am Ende doch die Freude an der gelungeneren Form, dem sportlichen Design, über die finanzielle Erwägung siegt, dann können Sieja immer noch den Computer abschalten.

(Dieter Berner/hm)

# Kassenwart im Wohnzimmer \[114-121\]

> Mit unserem Programm »Haushaltskasse« haben Sie jederzeit den Überblick über Ihre Konten, Ihre Verschwendungssucht oder Ihre Sparsamkeit.

Das Programm »Haushaltskasse« (siehe Listing) verwaltet das verfügbare Einkommen und zeigt die Trendentwicklung auf.

Es handelt sich um eine Jahresbuchführung mit monatlichen Zwischenergebnissen. Insgesamt stehen 16 Konten zurVerfügung (Konto-Nummern 0 bis 15). Diese Konten können mit beliebigem Text (Kontoname) versehen werden. Die Kontonamen sind auf 15 alphanumerische Zeichen begrenzt; auf den Übersichten können aus Platzgründen jedoch nur 9 Zeichen ausgegeben werden. Sie brauchen nicht alle Konten sofort anzulegen. Die Kontonummern werden vom Programm vergeben, und zwar in aufsteigender Folge von 0 bis 15. Die zunächst nicht benötigten Konten können im Laufe des Jahres jederzeit nachträglich angelegt werden. Andererseits bleiben die Konten, die im Laufe des Jahres auslaufen, bis zum Jahresende erhalten. Eine Löschung ist nicht möglich, weil die Konten auf der Jahresübersicht gebraucht werden.

Integriert ist eine Budgetrechnung. Das Programm fragt bei Buchungsbeginn und dann bei jedem Monatswechsel für jedes Konto nach der Sollvorgabe (Budget). Die Summe für alle Konten darf das verfügbare Einkommen nicht überschreiten. Auf der Übersicht stellt das Programm die Sollvorgabe und die tatsächlichen Ausgaben gegenüber und wirft die Differenz aus. Minusbeträge, das heißt die Sollvorgabe wurde überschritten, werden rot dargestellt.

Das Programm ist vollständig menügesteuert. Sie erhalten jederzeit auf dem Bildschirm Hinweise, welche Eingaben erwartet werden. Ungültige Eingaben werden ignoriert.

Das Programm ist auf eine Floppy mit der Geräteadresse 8 eingestellt. Für den Drucker ist die Geräteadresse 4 vorgesehen. Erzeugt wird eine Hardcopy des jeweiligen Bildschirminhalts. Vor dem Ausdruck wird noch nach dem aktuellen Datum gefragt und dann ausgedruckt. Die Hardcopy-Routine wurde für einen Commodore-Drucker (GP-100 A) geschrieben. Es hat sich gezeigt, daß das Interface »Printstar - C 64« auf dem Epson RX-80 FT+ mit der unveränderten Routine ebenfalls eine Hardcopy erzeugt. Die Zeilen 38700 bis 38900 sind erst später hinzugekommen und nur für den Epson RX-80 F/T+ bestimmt. Diese Routine setzt den linken Rand und schaltet den Papierende-Detektor aus. Für einen anderen Drucker müßten hier entsprechende Werte eingesetzt werden oder gegebenenfalls die gesamte Hardcopy-Routine von 37500 bis 40100 neu geschrieben werden.

Das Programm ist absturzsicher. Sowohl ein nicht vorhandener Drucker wie auch Fehler in der Floppy (zum Beispiel Ausschalten oder Herausnehmen der Diskette) beeindrucken das Programm nicht. Auf der untersten Bildschirmzeile wird dann ein entsprechender Hinweis ausgegeben.

Es werden pro Monat und Konto 200 Buchungen verwaltet. Fallen mehr Buchungen an, muß die Variable x in Zeile 1650 entsprechend erhöht werden. In der vorliegenden Version sind noch etwa 4000 Byte frei. Jede Vergrößerung um eine Buchung benötigt 32 Byte.

### Buchungsanfang

Beim Buchungsanfang verwenden Sie am besten eine neue Diskette, da im Laufe des Jahres eine ganze Reihe von Dateien anfallen werden. Das Programm steigt allerdings auch nicht aus, wenn die Buchungen über mehrere Disketten verteilt sind. Erforderlich ist lediglich, daß ein Monat vollständig auf einer Diskette vorhanden ist.

Das Programm fragt zunächst nach dem Startmonat. Die Eingabe muß numerisch sein und im Bereich von 1 bis 12 liegen. Zur Korrektur — wenn Sie diese Routine irrtümlich aufgerufen haben — drücken Sie einfach nur die »RETURN«-Taste. Es wird dann zum Hauptmenü zurückgesprungen. Anschließend fragt das Programm nach der Jahresangabe. Sie kann zwei- oder vierstellig sein.

Danach werden die Konten angelegt. Die Kontonummer wird vom Programm vergeben, und zwar in aufsteigender Reihenfolge von 0 bis 15. Wenn Sie nur die »RETURN«-Taste drücken, verzweigt das Programm zu einer Übersicht (siehe hierzu den übernächsten Absatz).

Der Kontoname ist auf 15 Zeichen begrenzt. Danach müssen Sie die DM-Vorgabe eingeben. Die DM-Vorgabe kann nur volle Markbeträge enthalten und ist auf den theoretischen Wert von 32785 DM begrenzt.

Wenn Sie keine weiteren Konten anlegen wollen, wird eine Übersicht ausgegeben. Die Übersicht enthält fünf Spalten:
1.	Spalte : Kontonummer
2.	Spalte : Kontoname
3.	Spalte : Vorgabe
4.	Spalte : Ausgaben
5.	Spalte : Differenz aus Vorgabe und Ausgabe

Darüber hinaus wird ein Kurzmenü in der untersten Bildschirmzeile eingeblendet. Esstehenlhnen die Tasten »F1«für »richtige Eingabe« und »F3« für »Korrektur« zur Verfügung. Bei »F3« werden alle Eingaben gelöscht und der Startmonat noch einmal abgefragt.

Nach Drücken der F1-Taste müssen Sie eingeben, wieviele Buchungen im Monat erwartet werden. Diese Frage bezieht sich nur auf den laufenden Monat. Wenn Sie eine zu große Zahl angeben, wird auf der Diskette unnötig Platz verschwendet. Eine zu kleine Zahl führt später beim Buchen zu Unterbrechungen, die allerdings nur Sekunden in Anspruch nehmen.

Das Programm richtet jetzt auf der Diskette die erforderlichen Dateien ein. Da das einige Zeit in Anspruch nimmt, können Sie inzwischen eine Tasse Kaffee trinken gehen. Anschließend meldet es sich mit dem Hauptmenü zurück.

### Buchen

Das Buchen stellt Ihre wichtigste Eingabe dar. Wenn Sie mehrere Disketten verwenden, vergewissern Sie sich, daß Sie die zuletzt gültige Diskette im Laufwerk haben. Das Programm überprüft zunächst, ob alle notwendigen Dateien im Computer vorhanden sind. Fällt diese Prüfung negativ aus, werden zuerst die fehlenden Dateien eingelesen. Eben dafür ist es wichtig, daß die letzte gültige Diskette im Laufwerk ist.

Danach müssen Sie das Buchungsdatum eingeben. Dieses muß im Bereich von 1 bis 31 liegen. Prüfungen auf den 31. April und ähnliches werden allerdings nicht vorgenommen. Es braucht nur der Tag und nicht auch noch der Monat eingegeben zu werden. Der laufende Monat ist dem Programm bereits bekannt. Danach geben Sie den Buchungstext ein. Diese Eingabe ist auf 15 Zeichen begrenzt.

Anschließend wird eine Übersicht aller vorhandenen Konten ausgegeben. Die Übersicht enthält je Konto die Kontonummer, den Kontennamen, die Vorgabe, die bisherigen Ausgaben und die Differenz zwischen Vorgabe und Ausgabe. Sie haben somit jederzeit Ihre Verschwendungssucht oder Sparsamkeit bei der neuen Buchung vor Augen. Dann können Sie die Nummer des Kontos eingeben, auf das Sie buchen möchten. Die Kontonummer muß im Bereich der bereits angelegten Konten liegen. Mit »RETURN« verlassen Sie die Eingabe.

Der danach einzugebende DM-Betrag wird nicht weiter überprüft und auf dem jeweiligen Konto verbucht. Der Betrag kann auch negativ sein. Der Minusbetrag ist einerseits als Storno, andererseits auch als Einnahme zu gebrauchen.

Dann erfolgt die Abfrage nach der nächsten Buchung. Den Buchungsmodus verlassen Sie, indem Sie für Datum nichts oder Null eingeben. Es dauert etwas, bis das Menü erscheint, weil das Programm den aktuellen Stand der Dateien auf Diskette zurückschreibt. Sie brauchen sich daher um die Datensicherung keine Gedanken zu machen. Wenn Sie bei der ersten Buchung gleich die »RETURN«-Taste drücken, also nichts gebucht haben, wird auch nichts auf die Diskette übertragen.

### Monats-ZJahresübersicht

Wenn Sie die Taste F3 für »Monatsübersicht« gedrückt haben, fragt das Programm, welchen Monat Sie sehen wollen. Sie können die Hochpfeiltaste für den laufenden Monat, die Sterntaste für alle Monate oder eine Zahl für einen bestimmten Monat eingeben. Der Monat darf nicht vor Buchungsbeginn und nicht nach dem laufenden Monat liegen. Wenn Sie alle Monate sehen wollen, werden die Monate vom Buchungsbeginn bis zum laufenden Monat der Reihe nach angezeigt. Im Anschluß daran erfolgt die Jahresübersicht. In der untersten Bildschirmzeile wird ein Kurzmenü angezeigt. Sie können wählen, ob Sie weiterblättern (F1), zum Hauptmenü (F3) oder eine Druckerausgabe (F5) wünschen. Bei der Druckerausgabe wird zunächst geprüft, ob der Drucker eingeschaltet ist. Wenn nicht, gibt das Programm einen entsprechenden Hinweis.

Die Monats- und die Jahresübersicht unterscheiden sich im Aufbau nicht. Sie haben folgendes Format:

TODO

Monat XX/ ZZZZ
A BBBBBBBBB CCCCC DDDDDD.DD EEEEEE.EE A BBBBBBBBB CCCCC DDDDDD.DD EEEEEE.EE

X = Monat
Z = Jahr
A = Kontonummer
B = Kontoname
C = Vorgabe
D = Ausgabe
E = Differenz zwischen Vorgabe und Ausgabe

### Einzelnes Konto

Zuerst müssen Sie den Monat eingeben, den Sie sehen wollen. Drücken Sie die Hochpfeiltaste für den laufenden Monat. Wollen Sie einen der Vormonate sehen, geben Sie den Monat als Zahl ein.

Danach fragt das Programm nach der Kontonummer. Wollen Sie alle Konten sehen, geben Sie den Stern ein, sonst die Kontonummer. Hier gilt auch, daß nicht angelegte Konten ignoriert werden. Die Ausgabe hat folgendes Format:

TODO

A BBBBBBBBBBBBBB CCCCC DD/EEEE
FF. GGGGGGGGGGGGGGG	HHHHHHH.HH
FF. GGGGGGGGGGGGGGG	HHHHHHH.HH
Summe IIIII JJJJJJ.JJ KKKKKKK.KK
A =Kontonummer
B =Kontoname
C = Monatsvorgabe
D =Monat
E =Jahr
F =Buchungsdatum
G = Buchungstext
H = Betrag
I = Vorgabe
J =SummederMonatsausgaben
K = Differenz zwischen Vorgabe und Ausgabe

Es werden maximal 15 Zeilen ausgegeben. Die Summenzeile (»J«) wird erst nach der letzten Buchung ausgegeben. In der untersten Bildschirmzeile wird ein Kurzmenü eingeblendet. Sie haben die Wahl zwischen Weiterblättern (F1) zum Hauptmenü (F3) oder einer Druckerausgabe (F5).

### Journal

Das Journal listet alle Buchungstexte in der Reihenfolge auf, wie sie erfaßt wurden. Das Programm fragt zunächst nach dem Monat, den Sie sehen wollen. Danach wird das Journal ausgegeben. Das Journal hat folgendes Format:

TODO

Journal AA/BBBB
CC DD. EEEEEEEEEEEEEEE FFFFFF.FF
CC DD. EEEEEEEEEEEEEEE FFFFFF.FF
A = Monat
B = Jahr
C = Kontonummer
D = Datum
E = Buchungstext
F = Betrag

Es werden maximal 15 Buchungen auf einer Bildschirmseite ausgegeben. In der untersten Bildschirmzeile sehen Sie ein Kurzmenü. Sie können wählen, ob Sie weiterblättern (F1), zum Hauptmenü (F3) oder eine Druckerausgabe (F5) haben wollen.

### Zusatzkonto

Das Programm prüft zunächst, ob das letzte Konto (Kontonummer 15) bereits angelegt ist. Wenn das der Fall ist, wird ein entsprechender Hinweis ausgegeben. Nach Drücken einer beliebigen Taste kommen Sie ins Hauptmenü zurück. Im anderen Fall gibt das Programm einen Text aus, wie unter Buchungsanfang beschrieben. Achten Sie jedoch darauf, daß das Monatsbudget möglicherweise überschritten werden könnte. Sie können hier einfach als Monatsvorgabe Null DM eingeben. Im Folgemonat steht das Konto dann uneingeschränkt zur Verfügung.

### Monatswechsel

Aus Sicherheitsgründen fragt das Programm zunächst, ob Sie den Monatswechsel wirklich wollen. Falls Sie diese Funktion irrtümlich aufgerufen haben, geben Sie »n« ein. Das Programm springt dann zum Hauptmenü zurück. Das ist deshalb wichtig, weil eine Rückkehr in den Vormonat nicht mehr möglich ist.

Soll der Monatswechsel durchgeführt werden, prüft das Programm, ob der Dezember bereits erreicht ist. Dann startet es mit »RUN« neu. Sie müssen dann zwar alle Konten wie bei Neubeginn neu eingeben, können dafür aber auch die nicht mehr benötigten Konten weglassen.

Ist der Dezember nicht erreicht, werden die Konten der Reihe nach aufgerufen, um die Sollvorgaben für den neuen Monat einzugeben.

TODO

Monat AA BBBBB CCCCCCC DDDDDDD
Vorgabe?

Die Anzeige zeigt die Monate vom Buchungsbeginn bis zum Vormonat an.
A = Monat
B = Vorgabe für den jeweiligen Monat
C = Ausgabe für den jeweiligen Monat
D = Differenz zwischen Vorgabe und Ausgabe

Sind die tatsächlichen Ausgaben insgesamt höher als die Vorgaben, kann die Vorgabe entsprechend erhöht werden, um die Jahresausgaben angleichen zu können.

Nach dem letzten Konto erscheint eine Übersicht, auf der Sie Ihre Vorgaben überprüfen können. Insbesondere ist es wichtig, daß die Summe der Vorgaben nicht die Einnahmen überschreitet. In der untersten Bildschirmzeile wird noch ein Kurzmenü eingeblendet. Sie haben die Wahl zwischen F1 für ok und F3 für Korrektur. F1 springt zum Hauptmenü. Der Monatswechsel ist damit vollzogen. F3 löscht die Vorgaben und setzt auch den Monatszähler wieder zurück. Das Programm springt wieder zur Abfrage, ob der Monatswechsel wirklich ausgeführt werden soll.

### Dateien auf Diskette

Im Laufe des Jahres fallen eine Vielzahl von Dateien an. Sie gliedern sich in drei Gruppen.
1.	KONTEN
2.	JOURNAL
3.	JOURNALINDEX

Die Datei »KONTEN« ist eine sequentielle Datei und enthält die Konten selbst sowie die erforderlichen Verwaltungsdateien. Die Konten werden nur in dem notwendigen Umfang gespeichert, das heißt von Buchungsanfang bis zum laufenden Monat und jeweils nur die angelegten Konten. Aus diesem Grunde wird diese Datei im Laufe des Jahres immer länger.

Die Datei »JOURNAL« ist eine relative Datei. Sie wird jeden Monat neu angelegt und enthält im Dateinamen noch den jeweiligen Monat. Der Datensatz ist 28 Byte lang und hat folgendes Format:

TODO TABLE

Byte 1 und 2= Kontonummer
Byte 3 und 4= Datum
Byte 5bis 19=Buchungstext
Byte 20 bis 27= DM-Betrag in Pfennigen
Byte 28	= Carriage Return

Die Länge der Datei »JOURNAL« wird bei Buchungsanfang einmal abgefragt. Für die Folgemonate wird der Durchschnitt der Buchungen der Vormonate herangezogen und aufgerundet. Bei Bedarf wird um jeweils zehn Datensätze verlängert.

Die Datei »JOURNALINDEX« ist sequentiell und wird ebenfalls monatlich neu angelegt. Sie enthältZeiger, die angeben, welcher Datensatz zu welchem Konto gehört. Ihre Aufgabe besteht darin, bei der Ausgabe der einzelnen Konten einen unmittelbaren Zugriff auf die entsprechende Buchung zu gewährleisten, damit die Datei »JOURNAL«, die ja diegesamten Buchungstexte enthält, nicht von Anfang an durchsucht werden muß.

Um das Programm weitgehend absturzsicher zu machen, wurde auf »INPUT« verzichtet und die Eingabe über »GET« abgewickelt. Zugelassen sind grundsätzlich nur die Buchstabentasten (Groß- und Kleinschrift), die Ziffern, die Space-Taste, die allgemein üblichen Sonderzeichen (nicht jedoch der Doppelpunkt und das Komma) und die DEL-Taste zum Löschen des letzten Zeichens.

(Wolfgang Klimecki/tr)

# Fruchtwein - garantiert ohne Frostschutz \[122-125\]

> Wenn Sie heute garantiert glykolfreien Wein trinken wollen, bleibt Ihnen fast nichts weiter übrig als ihn selbst herzustellen. Dieses Programm nimmt Ihnen die Berechnungen ab.

Die Selbstbereitung von Weinen, besonders die von Obst- und Fruchtweinen, findet immer mehr Anhänger. Ich selbst stelle seit drei Jahren Fruchtweine zum Hausgebrauch her. Das vorliegende Programm hilft dem Hobbykellermeister, die Zutaten für sechs verschiedene Fruchtweine zu errechnen.

Mit dem Programm können Zutaten für Fruchtweine berechnet, diese Daten auf Diskette gespeichert, Daten von Diskette eingelesen oder gelöscht werden. Auch ein Ausdruck der berechneten alten oder neuen Werte ist möglich. Gesteuert wird das Programm über die Funktionstasten F1 - F8 und die Taste »P« (Ausdruck). Wird eine andere Taste als RETURN nach Anwahl des Druckmenüs gedrückt, kann im Programm weiter gearbeitet werden.

Die Formeln zur Errechnung der Zutaten sind aus den Beispielen entstanden, die im Kitzinger Weinbuch, Ausgabe 1982, nachzulesen sind.

Zu Beginn muß mit F1 das Untermenü »Weinsorten« angewählt werden (das Programm läßt auch nur diese Wahl zu, Bild 1). Sollen mit F3 die Zutaten berechnet werden, wird der Anwender aufgefordert, falls er es noch nicht getan haben sollte, sich mit F5 oder F7 für einen herben (Tisch-) oder einen süßen (Dessert-) Wein zu entscheiden. Danach erfragt das Programm alle notwendigen Angaben, die zur Berechnung derjeweiligen Zutaten nötig sind, durch INPUT-Befehle. Deshalb kein Komma als Dezimalzeichen eingeben, sondern immer nur einen Punkt. Die Zutaten werden auf dem Bildschirm ausgegeben und können dann auf Diskette gespeichert und/oder mit »P« ausgedruckt werden (Bildschirm-Hardcopy, Bild 2).

Beim Speichern wird zur Unterscheidung der einzelnen Files nach Jahrgang und Zusatz gefragt. Bei der Eingabe von Jahrgang und Zusatz werden immer nur die letzten beiden Zeichen berücksichtigt. Um die Files später wieder einlesen zu können, sollte man sich Jahrgang und Zusatz entweder notieren oder sich immer einen Ausdruck anfertigen lassen, oder man druckt vor oder nach Anwendung des Programms das Directory aus.

Die Hardcopy-Routine für den MPS 801 stammt aus dem 64’er, Ausgabe 4/85, das Maschinenprogramm zur Cursorpositionierung aus dem 64’er, Ausgabe 1/85.

Die REM-Zeilen brauchen nicht mit eingegeben werden. Zur Eingabe des Programms (Listing 1) beachten Sie bitte die Eingabehinweise auf Seite 6. Wollen Sie eigene Verbesserungen am Programm anbringen, hilft Ihnen Tabelle 1 und 2.

(Siegfried Dahlmann/hm)

# Der C 64 als Meßboy \[128-130\]

> Ein kleiner Hardware-Zusatz, der für unter 10 Mark zu haben ist, macht aus Ihrem C64 ein Kapazitäts- und Widerstandsmeßgerät, das einen Vergleich mit professionellen Geräten nicht zu scheuen braucht. Der Meßbereich reicht von einigen pF bis hin zu einigen mF.

Jeder Elektronikbastler kennt das Problem: in der Bauteilekiste liegen etliche undefinierbare Kondensatoren mit exotischen Aufschriften, wie zum Beispiel 22000 F oder 20j. Woher soll man mit Sicherheit sagen können, ob das herausgefischte Exemplar auch die richtige Zehnerpotenz besitzt? Zwar gibt schon die Bauteilgröße einen Anhaltspunkt, ob Pikofarad, Nanofarad oder gar Mikrofarad gemeint sind, doch man verschätzt sich leicht, weil oft auch die zulässige Spannung nicht klar angegeben ist. So entsteht der Wunsch, die Bauteile nachmessen zu können, doch Kapazitätsmeßgeräte sind nicht billig, und so lohnt sich eine Anschaffung in den meisten Fällen nicht.

Der hier vorgestellte Meßzusatz ermöglicht aber, den C 64 zu einem Kapazitäts- und Widerstandsmeßgerät aufzuwerten. Mit wenig Aufwand erhält man ein System mit automatischer Meßbereichsumschaltung über mehr als neun Zehnerpotenzen und zehn ständig anzeigenden Meßwertspeichern, einer Ausstattung also, die auch bei den teuren Profigeräten ihresgleichen sucht.

## Funktion durch Händeschütteln

Das Funktionsprinzip ist genial einfach. Ein ganz normales TTL-Monoflop aus der 74XX-Reihe dient als Zeitgeber. Es antwortet auf einen Low-High-Sprung am Eingang mit einem Ausgangsimpuls, dessen Länge weitgehend unabhängig von Betriebsspannung und Temperatur ist, also nur noch von den Werten des Widerstands und des Kondensators bestimmt wird. Mit einem Umschalter kann man wahlweise den Widerstand oder den Kondensator fest einstellen und das jeweils andere Bauelement über die Abgreifklemmen messen.

Die gesamte übrige Hardware ist bereits im C64 eingebaut. Dank der Schnittstellenbausteine VIA 6526 hat man nämlich die Möglichkeit, über den User-Port die Impulsdauer zu messen, um sie dann auf den gesuchten Wert umzurechnen. Die Aktionen werden dabei über die sogenannten Handshake-Leitungen am User-Port koordiniert, wie im Zeitablaufdiagramm (Bild 1) deutlich zu sehen ist.

Durch einen Schreib- oder Lesebefehl auf die Port-Adresse 56577 wird der Meßimpuls ausgelöst. Das geschieht in dem abgedruckten Programm (Listing 1) in Zeile 3300. DerC64 signalisiert das am User-Port selbständig dadurch, daßPC2 für die Dauer eines Taktes Low wird. Wenn diese Leitung wieder auf High geht, löst das den Impuls am Monoflop-Ausgang Qaus, dergleichzeitig mitden Anschlüssen CNT2 und Flag2 verbunden ist. Wie die Tabelle »Kontrollregister« (Bild 2) zeigt, wurde der VIA-Baustein so programmiert, daß er mit dem Systemtakt abwärts zählt, solange der Eingang CNT2 High-Pegel führt. Dabei zählt Timer B Unterläufe von Timer A. Das bedeutet, Timer A wird mit einem bestimmten Wert geladen (Zeilen 3200 und 3210) und zählt von dort aus abwärts. Erreicht er die Stellung 0, dann wird der Inhalt des Timers B um eins erniedrigt, Timer A wird wieder mit dem vorgegebenen Startwert geladen, und der Vorgang wiederholt sich.

## Errechnung des Meßwertes und Bereichsumschaltung

Die fallende Flanke am User-Port-Eingang setzt das Bit 4 im Register 56589 (Flag-Interrupt-Bit), das vom Programm abgefragt werden kann (Zeile4040). Essignalisiertsomitdas Ende des Monoflop-Taktes und die Gültigkeit des Timerinhalts. Beim Auslesen wird dieses Bit selbständig wieder gelöscht.

Das Programm liest nun den Timer aus (2 Byte!), multipliziert ihn mit der Taktzeit und berechnet mit der Formel aus Bild 3 den gesuchten Wert. Für den Meßbereich Pikofarad und Nanofarad (B=0) erfolgt diese Rechnung in Zeile 5020. Sollte die zu messende Zeit die Timerkapazität überschreiten, so steht nach der Messung eine 0 in der Variablen und es wird in Zeile 5030 automatisch auf den Meßbereich Mikrofarad (B=1) umgeschaltet.

Hierbei wird das Highbyte des Timers A in Zeile 3210 nun mit 5 geladen, so daß längere Zeiten gemessen werden können. Die Umrechnung erfolgt jetzt in Zeile 6000. Falls die gemessene Zeit einen bestimmten Grenzwert unterschreitet, schaltet das Programm in Zeile 5035 wieder zurück in den Bereich 0.

Um genaue Ergebnisse zu gewährleisten, muß sichergestellt werden, daß nach einer Messung immer eine Erholzeit verstreicht, die mindestens 75% der Impulsdauer betragen soll. Diese Forderung ist normalerweise bereits durch die Programmlaufzeit erfüllt. Lediglich im Bereich Mikrofarad können längere Meßzeiten auftreten, die bei großen Kapazitäten nicht zu unterschätzen sind. Bei 1000 Mikrofarad beträgt die Impulsdauer bereits 27,3 Sekunden. Daher wird in Zeile 6020 eine angepaßte Warteschleife durchlaufen, die auch die Menüfunktionen zugänglich macht.

## Aufbau und Inbetriebnahme

Die kleine Zusatzschaltung (Bild 4) kann auch von weniger Geübten leicht auf einer Lochrasterplatte aufgebaut werden. Alle Teile (Bild 5) sind handelsüblich und der gesamte Kostenaufwand liegtweit unter 10 Mark.

Um den Anzeigefehler möglichst klein zu halten, sollte für den 39 Kiloohm-Meßwiderstand eine Ausführung mit kleiner Toleranz gewählt werden (±1% oder kleiner).

Den Festkondensator für die Widerstandsmessung kann man messen, indem man in Stellung »C« und »Kondensatormeßgerät« die mit»-« bezeichnete Klemme mit dem Anschluß des Kondensators verbindet, der am Umschalter liegt. Der angezeigte Wert wird in Zeile 7050 eingetragen. War die Anzeige beispielsweise 211 Nanofarad, dann muß die Zeile lauten:

TODO PRE

7050 W=(65535-(PEEK(56582)+PEEK(56583)\*256))\*1.02e-6/(.7\*211e-9)

Das Meßgerät ist nun geeicht und betriebsfertig.

Es sollte selbstverständlich sein, daß der Zusatz bei eingeschaltetem Computer weder aufgesteckt noch abgezogen wird.

Beim Starten des Programms wird zuerst das Kapazitätsmeßgerät aktiviert. Dazu muß man den Schalter auf der Zusatzplatine in Stellung »C« bringen. Auf der linken Bildschirmhälfte erscheinen die numerierten Speicherplätze, rechts leuchtet der Meßwert. Um die Benutzung zu erleichtern, erscheinen am unteren Bildrand alle verfügbaren Funktionen. Man kann sie durch Drücken des Anfangsbuchstabens anwählen.

Mit »S« gefolgt von einer Ziffer, wird der angezeigte Wert in den entsprechenden Speicher übernommen.

»L« löscht alle gespeicherten Einträge,
»W« oder »R« schalten um auf Widerstandsmessung, »K« oder »C« wieder zurück zur Kapazitätsmessung. Gelegentlich kann es beim Wechsel von Meßobjekten vorkommen, daß das Gerät nicht mehr reagiert. Hier hilft es, mit »I« einen Impuls von Hand auszulösen. Mit »Q« kann man das Programm verlassen.

Der Meßbereich des Systems reicht bei der angegebenen Dimensionierung von derGrößenordnung der Kabelkapazität bis zu einigen tausend Mikrofarad.

Im Ohm-Meßbereich überdeckt esjedoch nur die Werte von etwa 100 Ohm bis ungefähr 150 kQ .

Die Belegung des User-Ports und eine Variablenliste finden Sie in Bild 6 und 7.

(Uwe Gerlach/ah)

# Numerische Lösungen mathematischer Probleme \[132-134\]

Wir stellen Ihnen eine kleine Sammlung von mathematischen Unterprogrammen vor, die in eigenen Programmen benötigt werden, aber schwer zu programmieren sind.
In dem ersten Programm (Listing 1) wird näherungsweise die erste Ableitung einer Funktion an einer bestimmten Stelle mit Hilfe des Differenzenquotienten bestimmt. Der Differenzenquotient ist wie folgt definiert:

TODO

Dieser Differenzenquotient (im Programm Zeile 200) wird etwas abgewandelt, so daß man den Abstand zwischen x und x0 immer kleiner werden läßt Dies geschieht, indem man statt x den Wert xo+h nimmt. Der Wert h wird dann immer weiter halbiert (Zeile 230), bis eine vorgegebene Genauigkeit erreicht ist (Zeile 220). Als erste Ableitung der bestimmten Stelle ist dann der letzte ausgedruckte Wert zu nehmen. Die erste Ableitung gibt übrigens die Steigung der Tangenten an, die an der bestimmten Stelle an den Graphen der Funktion angelegt wird.

Diese Tangente, beziehungsweise auch weitere Tangenten werden bei dem zweiten und dritten Programm (Listing 2 und 3) benötigt. Bei dem zweiten Programm wird mit Hilfe von Tangenten die Nullstelle(n) (die Stelle, wo der Graph der Funktion die x-Achse schneidet) einer Funktion bestimmt.

Die Iterationsvorschrift (Zeile 160) lautet:

TODO

Dieses Verfahren stammt von Newton. Im dritten Programm (Listing 3) ist die Vorschrift ähnlich, nur braucht man die erste Ableitung nicht wissen, was oft von Vorteil ist. Die erste Ableitung wird hier in etwa so bestimmt, wie es in Programm 1 beschrieben ist. Da nicht nur Ableitungen und Nullstellen von Interesse sind, sondern auch die oben erwähnten Integrale, behandeln Programm 4 und 5 (Listing 4 und 5) diese Probleme.

Im vierten Programm (Listing 4) ist die Kepler’sche Faßregel umgesetzt. Möchte man das Integral einer Funktion (Zeile 240) wissen, so kann man es mit der Kepler’schen Faßregel annähern. Die Faßregel lautet:

TODO

Mit dieser noch recht einfachen Formel läßt sich das Integral schnell näherungsweise bestimmen.

Die Formel im Programm 5 (Listing 5) stammtvon Simpson, sie ist ein wenig komplizierter:

TODO

mit h=(b-a)/(2n)

Die beiden Summen sind in den Zeilen210bis 240 und 250 bis 280 umgesetzt.

Ein Problem aus einem etwas anderen Bereich bezieht sich auf gewöhnliche Differentialgleichungen. Bei dem Eulerschen Polygonzugverfahren in Programm 6 (Listing 6) wird der Graph, der die Lösung der gewöhnlichen Differentialgleichung beschreibt, in Form von kleinen Geradenstückchen genähert. Diese kleinen Geradenstückchen bilden dann den Polygonzug. Die einzelnen Punkte zu dieser Näherung werden auf einem vorgegebenen Bereich bezüglich eines bestimmten Anfangswertes vorgegeben.

Das Verfahren von Runge-Kutta in Programm 7 (Listing 7) ist weitaus genauer, aber dafür ist die Formel auch komplizierter (Zeile 200, Zeilen 250 bis 280):

Anfangswert y0=y(x0)
Schrittfunktion (Schrittweite h):

TODO

(Dietmar Rabich/ah)

# Vektorrechnung aus dem Effeff \[134-142\]

> Mit Mathefix können fast alle Aufgaben aus dem Bereich der Vektorrechnung im dreidimensionalen Raum gelöst werden.

Alle erdenklichen Schnittprobleme von einer Geraden mit einer Ebene, zwei Geraden oder zwei Ebenen sind ganz einfach zu lösen und benötigen nicht mehr seitenlange Berechnungen. Auch Schnittwinkel, Projektion von Punkten und Umrechnungen von der Parameterform in die Normalenform der Ebene stellen kein Problem mehr dar. Jede Ausgabe erfolgt, sinnvoll auf zwei Stellen gerundet, auf dem Bildschirm, und kann mit der F1-Taste als Hardcopy auf jedem Drucker ausgegeben werden, der sich von Simons Basic ansprechen läßt. Das Programm arbeitet durchgehend mit HiRes-Grafik.

### Wichtige Eingabehinweise:

Das Programm (Listing) benötigt Simons Basic. Um den C 64 ebenfalls auf Kleinschrift umzustellen, geben Sie im Direktmodus den Befehl »CSET 1«. Beachten Sie bitte den REM-Kommentar in Zeile 15. Ab Zeile 1020 steht am Anfang der Strings öfter ein kleines reverses »b«. Es entsteht durch die Tastenkombination »CTRL« + »B«. Das reverse »H« (zum Beispiel in Zeile 1441) ist die F7-Taste.

### Allgemeine Hinweise:

In allen Menüs genügt das Drücken der gewünschten Taste um in das nachfolgende Menü zu kommen oder die Berechnung zu beginnen. Auf die Aufforderung »WEITER MIT RETURN« und »ZURÜCK MIT RETURN« drücken Sie bitte die RETURN-Taste. Bei der Eingabe Ihrer Zahlenwerte schließen Sie bitte jede Zahleneingabe mit einem RETURN ab.

Durch das Betätigen der Funktionstaste F7 innerhalb der Werteeingabe gelangen Sie jeweils in das vorherige Menü zurück.

Bei »ZURÜCK MIT RETURN« können Sie durch drücken der SPACE-Taste dieselbe Rechnung mit anderen Zahlenwerten wiederholen. Jedesmal, wenn von Ihnen eine Eingabe verlangt wird, können Sie mit der Funktionstaste F1 eine Hardcopy des aktuellen Bildschirminhaltes auf dem Drucker erzeugen.

Im Programm wird unter »n« der Punkt mit den Koordinaten (X/Y/Z) verstanden.

Das Programm enthält eine Anleitung in Kurzform.

## Menüpunkt 1

Nun erscheint ein Untermenü (Bedienung siehe Hauptmenü).

### Untermenü 1

Von Ihnen wird die Eingabe der Koordinaten von zwei Punkten erwartet.
Der Computer berechnet:
- den Vektor zwischen den beiden Punkten.

TODO IMAGE

**Berechnung: 2 Punkte**

### Untermenü 2

Von Ihnen wird die Eingabe eines Vektors erwartet.
Der Computer berechnet:
- den Winkel des Vektors gegenüber einer waagerechten Ebene
- den Betrag des Vektors
- den Einheitsvektor

TODO IMAGE

**Berechnung: 1 Vektor**

### Untermenü 3

Von Ihnen wird die Eingabe zweier Vektoren erwartet.
Der Computer berechnet:
- die Lage der Vektoren zueinander (Schnittwinkel?/parallel?/senkrecht?)
- die Fläche des Parallelogramms
- das Skalarprodukt - das Vektorprodukt

TODO IMAGE

**Berechnung: 2 Vektoren**

### Untermenü 4

Von Ihnen wird die Eingabe von 3 Vektoren erwartet.
Der Computer berechnet:
- den Wert der Determinante
- das Volumen des Parallelflachs

TODO IMAGE

**Berechnung: 3 Vektoren**

### Untermenü 5

Zurück zum Hauptmenü

## Menüpunkt 2

Es erscheint ein Untermenü (Bedienung siehe Hauptmenü)

TODO IMAGE

### Untermenü 1

Von Ihnen wird die Eingabe der Koordinaten von einem Aufhängepunkt und dem Richtungsvektor einer Geraden erwartet.
Der Computer berechnet:
- den Winkel zur XY-Ebene
- die Spurpunkte der Geraden

TODO IMAGE

**Berechnung: Punkt/Gerade Eingabeseite**

Durch RETURN kommen Sie zu der Ausgabeseite.

TODO IMAGE

**Berechnung: 1 Gerade Ausgabeseite 1**

Durch drücken von RETURN kommen Sie zu der zweiten Ausgabeseite.

TODO IMAGE

**Berechnung: 1 Gerade Ausgabeseite 2**

### Untermenü 2

Von Ihnen wird die Eingabe von zwei Geraden erwartet:
Der Computer berechnet:
- die Lage der Geraden zueinander (Schnittwinkel?/parallel?/senkrecht?/windschief?)
- den Schnittpunkt (wenn möglich)

TODO IMAGE

**Berechnung: 2 Geraden Eingabeseite**

Durch RETURN kommen Sie zu der Ausgabeseite.

TODO IMAGE

**Berechnung: Punkt/Gerade Ausgabeseite**

## Menüpunkt 4

Nun erscheint ein Untermenü (Bedienung siehe Hauptmenü)

### Untermenü 1

Von Ihnen wird die Eingabe einer Ebene in Normalenform und eines Punktes erwartet.
Der Computer berechnet:
- die senkrechte Projektion des Punktes auf die eingegebene Ebene
- den Abstand des Punktes von der Ebene

TODO IMAGE

**Berechnung: Punkt/Ebene Eingabeseite**

### Untermenü 2

Es erscheint ein weiteres Untermenü.
Hier können Sie auswählen in welcher Form Sie die Ebene eingeben wollen.
Der Computer berechnet:
- die jeweils andere Ebenenform
- die Spurpunkte
- die Spurgeraden mit Winkelangaben

TODO IMAGE

**Berechnung: 2 Geraden Ausgabeseite**

### Untermenü 3

Von Ihnen wird die Eingabe einer Geraden und eines Punktes erwartet.
Der Computer berechnet:
- die senkrechte Projektion des Punktes auf die eingegebene Ebene
- Ebene durch die Gerade und den Punkt
- Abstand des Punktes von der Geraden

TODO IMAGE

**Berechnung: 1 Ebene Eingabe 2**

### Menüpunkt 5

Von Ihnen wird die Eingabe von zwei Ebenen in Normalenform erwartet.
Der Computer berechnet:
- die Schnittgerade
- den Schnittwinkel

TODO IMAGE

**Berechnung: 2 Ebenen Ausgabeseite**

(J. Riehn/T. Langer/og)

# Grafik-Erweiterung und DCopy für Aktien-Manager/Wahlhochrechnung \[143-144\]

> Diese beiden kurzen Erweiterungen können Sie universell einsetzen. Zusammen mit Aktien-Manager und Wahlhochrechnung sind sie ein gutes Beispiel für eine sinnvolle Computeranwendung.

### Grafik-Erweiterung

Diese Erweiterung wurde so kurz und einfach wie möglich gehalten und auf die notwendigsten Befehle beschränkt Durch die Lage in Page 1 wird kein Basic-Speicherplatz verbraucht. Das Besondere an dieser Erweiterung ist, daß zwar nur die hohe Auflösung von 320x200 Punkten möglich ist, aber trotzdem alle 16 Farben auf einmal dargestellt werden können (allerdings nur jeweils eine Farbe pro 8x8-Punkte-Feld).

Folgende Befehle sind mit dieser Erweiterung möglich (Ausdrücke in Klammern können weggelassen werden):

TODO TABLE

← Gx	: Grafik einschalten / x=Hintergrundfarbe
← C	: Grafik löschen
← T	: Grafik ausschalten
← Dx,y(;z)	: Punkt zeichnen / x=X-Koordinate (0 - 319) / y=Y-Koordinate (0 - 200) / z=Farbe
← Lx,yTOx,y(;z) : Linie zeichnen / Anfangs- und Endpunkt eingeben / z=Farbe
← Px,y(,ax,ay)(;z)"Text":<br>Text drucken / x,y=Koordinaten der linken oberen Ecke / ax,ay=Ausdehnung in x,y-Richtung / z=Farbe
← F1000	: Bei auftretendem Fehler springt Programm in Zeile 1000 (dort kann mit PEEK(52000) die Fehlernummer und mit PEEK(52001)4-256\*Peek(52002) die Fehlerzeile ausgelesen werden)
← E	: Abschalten der Erweiterung

Die Grafik liegt im Bereich $E000 bis $FFFF

### DCopy

Die Druckerroutine für den MPS-802-Drucker liegt im Bereich $C700 bis $C850 und kann zusammen mit der Grafik-Erweiterung verwendet werden. Im Grundaufbau entspricht sie der Routine aus 64’er Ausgabe 10/84 Seite 83.

Wenn Sie einen anderen Drucker als den MPS-802 besitzen, besteht die Möglichkeit, an Stelle des Programms »DCopy« eine Hardcopy-Routine für Ihren Drucker zu verwenden. Dabei ist darauf zu achten, daß der Grafikbildschirm im Speicherbereich $E000 bis $FFFF liegt. Die Routine selbst kann in jedem nicht vom Hauptprogramm beziehungsweise der Grafik-Routine verwendeten Bereich stehen. Gut geeignet ist beispielsweise der Bereich $C700 bis $CFFFF. Je nachdem wo Ihre Druck-Routine liegt, müssen Sie den SYS-Befehl im Hauptprogramm anpassen.

(Björn Fiethe/aw)

# Aktien-Manager, die grafische Datenverwaltung \[144-153\]

> Verfolgen Sie auf verschiedenen Grafik-Bildschirmen, wie sich Ihre finanzielle Lage entwickelt. Am Beispiel einer Aktienkursverwaltung wird gezeigt, wie aus trockenen Zahlen interessante Übersichten entstehen.

Dieses Programm ist als kommerzielles Programm zur Beobachtung, Darstellung und Auswertung von Aktienkursen mehrerer Unternehmen an vier verschiedenen Börsen konzipiert worden. Es läßt sich aber auch für andere Zwecke im Privatbereich einsetzen (zum Beispiel tägliche Ausgaben oder Einnahmen in vier verschiedenen Bereichen).

Die eingegebenen Daten können mit diesem Programm (Listing) sowohl zur Einzelbetrachtung als Zahlenwerte, aber auch zur anschaulichen Darstellung mit verschieden langen Zeiträumen als Grafik, auf Bildschirm und Drucker, ausgegeben werden. Bei vollständiger Menüsteuerung durch die Funktionstasten bestehen insgesamt 231 verschiedene Kombinationsmöglichkeiten zur Datenausgabe!

Das Programm zeichnet sich durch einige Besonderheiten aus. So erfolgt die Ausgabe der Zahlenwerte formatiert (bei der Eingabe braucht also kein Format beachtet zu werden), derComputerwähltimmerden größtmöglichen Darstellungsraum bei einer Grafikaus und das Programm bietet vier besondere Grafik-Ergänzungen zur Vereinfachung der Auswertung (Berechnen der Monatsdurchschnitte und Hoch-Tief-Werte sowie Einzeichnen der Wendepunkte und des 1OO-Tage-Durchschnitts).

Für die grafische Ausgabe der Werte wird am Programmanfang eine Grafik-Erweiterung in den Bereich $C000 bis $C568 geladen. Auch die mögliche Druckerroutine für den Grafikausdruck muß in den Bereich $C700 bis $C800 geladen werden (beide Erweiterungen finden Sie in dieser Ausgabe direkt hinter dem Programm »Wahlanalyse«). Einen anderen Bereich in Page 12 läßt die Grafik-Erweiterung nicht zu und im normalen RAM ($0800 bis $9FFF) sollte die Routine möglichst nicht gespeichert werden, weil es dann zu Speicherplatzproblemen mit dem Hauptprogramm kommen kann. Aus diesem Grund sollten auch die REM-Zeilen im Programm nicht mit abgetippt werden.

Als Beispiel wird in dem aufgelisteten Programm die Routine »DCOPY« für den MPS-802 geladen und aufgerufen!

Mit diesem Programm lassen sich die Aktienkurse und -Umsätze verschiedener Unternehmen an den Börsen Frankfurt, Hamburg, Hannover und Düsseldorf (als Beispiel) genau beobachten und vergleichen.

Natürlich kann das Programm nach kleinen Änderungen an den Ein- und Ausgabe-Routinen (Bild 1) auch zum Darstellen von Werten aus ganz anderen Bereichen benutzt werden (zum Beispiel Benzinkosten, Temperatur, ...).

Zum Ausdruck des Grafik-Bildschirms muß die zum jeweiligen Druckerpassende Routineim Bereich $C700-$C800 gespeichert sein (Grafik liegt im Bereich $E000 bis $FFFF).

Die eingegebenen Werte werden nach Unternehmen und Monat getrennt als sequentielle Dateien auf Disketten abgespeichert.

Das Programm ist vollständig menügesteuert, aber trotzdem noch einige Hinweise zur richtigen Bedienung:

Bei Fragen, die mit Ja oder Nein beantwortet werden, darf nur J oder N eingegeben werden.

Die Fragen »Weiter?« und »Drucker an?« sind Wartefragen, bei denen das Drücken der RETURN-Taste bedeutet, daß der Computer mit dem Programm fortfährt.

Auch nach dem Erstellen einer Grafik wird durch Drücken der RETURN-Taste mit dem Programm fortgefahren.

Wird ein Ausdruck des angezeigten Grafikbildschirms gewünscht, muß vorher bei der Frage »Tabulator:?« ein Wert zwischen 0 und 40 eingegeben werden (0=linke / 40=rechte Hälfte einer Seite. Wenn mit der verwendeten Drucker-Routine keine Tab-Funktion möglich ist, Abfrage überspringen!)

Bei Eingabe der Kurse ist zu beachten, daß die Datumsangaben immer zweistellig erfolgen müssen, der Dezimalpunkt (kein Komma eingeben!), vorangestellte und nachfolgende Nullen nicht mit eingegeben zu werden brauchen.

Wenn der Computer rechnet oder Kurse von Diskette eingelesen werden, wird in der rechten oberen Ecke »Warten« angezeigt.

Jetzt folgt noch die Erklärung der einzelnen Auswahlmöglichkeiten in der Programm-Reihenfolge.

Nach der Eingabe des Firmenkürzels der Firma, deren Aktienkurse bearbeitet werden sollen, folgt das Hauptmenü.

Im Hauptmenü bestehen folgende Auswahlmöglichkeiten, die danach mit ihren Untermenüs erklärt werden:

### 1.	Kurse eingeben/ändern

Hier bestehen verschiedene Möglichkeiten zur Kurseingabe:

- Kurse neu eingeben: Wird normalerweise zur Kurseingabe benutzt. Dazu muß das Kursdatum später als das letzte vorhandene Datum sein. Deshalb Kurse möglichst immer in aufsteigender Reihenfolge des Datums mit diesem Menüpunkt eingeben (letztes Datum läßt sich durch Aufrufen der aktuellen Kurse (siehe Punkt 2) feststellen).
- Kurse nachträglich ändern: Bei nachträglich notwendigen Änderungen, können nach Eingabe des Datums alle Werte geändert werden.
- Kurse einfügen: Liegt das Kursdatum zwischen schon vorhandenen Kursen, muß zur Kurseingabe diese Funktion aufgerufen werden.
- Datei überspielen: Die Kurse von jeweils einem Monat können auf eine andere Diskette überspielt werden (Diskette muß vorher formatiert werden).

### 2.	Tägliche Übersicht

Bei dieser Funktion werden immer nur Kurse und Umsätze von Tagen gezeigt.

- Aktuelle Kurse: Die letzten fünf Tage werden ausgewählt.
- Kurse eines Tages: Tageskurse und Kurse der zwei vorhergehenden und nachfolgenden Tage werden gezeigt.
- Kurse einer Woche: Anfangstag deranzuzeigenden Woche muß eingegeben werden.

Nach diesen Eingaben muß man wählen, ob alle Kurse und Umsätze als Zahlenwerte oder Kurse und Umsätze einer Börse als Grafik (Bild 3) ausgegeben werden sollen (bei Grafik-Auswahl zwischen den vier Börsen und Commerzbank-Index/Gesamtumsatz). Bei Ausgabe als Zahlenwerte muß noch eingegeben werden, ob der Höchst- und Tiefstkurs und die Gesamtumsätze des ganzen zuletzt aufgeführten Jahres oder nur die des aufgelisteten Zeitraums ausgegeben werden sollen. Nach der jeweiligen Ausgabeform kommt man nicht wieder zum Hauptmenü, sondern kann unter Beibehaltung des vorher eingegebenen Zeitraums eine andere Darstellungsform wählen (oder zum Hauptmenü zurück).

### 3.	Übersicht

Hier können verschiedene Zeiträume und Darstellungsvarianten ausgewählt werden:

- Freier Zeitraum: Variable Auswahl des Zeitraums, siehe 3.1
- Monat: Kurse eines Monats können ausgewählt werden (auch unvollständiger letzter Monat möglich).
- Jahr: Kurse eines Jahres (auch unvollständig), siehe 3.2
- Jahre: Gesamter Zeitraum der Diskette wird benutzt, siehe 3.2

### 3.1	Zeitraum festlegen

Bei freiem Zeitraum gibt es weitere Auswahlmöglichkeiten:

- Alle gespeicherten Tage: Alle Kurse werden ausgewählt (wie bei Jahre)
- Zeitraumanfang eingeben: Anfangstag und Zeitraumlänge in Tagen (Anfangstag mitgerechnet) müssen eingegeben werden.
- Zeitraumende eingeben: Zeitraumlänge in Tagen (Endtag mitgerechnet) und Endtag eingeben.

### 3.2	Jährlichen Zeitraum festlegen

Bei Jahr/Jahre gibt es folgende weitere Auswahlmöglichkeiten:

-	Monats-Durchschnitt: Hier wird fürjeden Monat des eingegebenen Zeitraums ein Durchschnittswert für jede Börse errechnet und statt der normalen Werte angezeigt (Bild 3).
-	Kontinuierlich: Alle Werte des eingegebenen Zeitraums werden normal ausgegeben.
-	Monats-Hoch-Tief: Wie bei Durchschnitt wird für jeden Monat der höchste und tiefste Wert ausgerechnet und als Balkengrafik oder Zahlenwerte (Reihenfolge: Tief, Hoch) ausgegeben (Bild 4).

Nach all diesen verschiedenen Auswahlmöglichkeiten kommt man immer zur Auswahl der Darstellungsmöglichkeiten:

-	Zahlenwerte: Alle Kurse und Umsätze werden aufgelistet (siehe auch Punkt 2)
-	Kursgrafik: Darstellung der Kurse oder des Commerzbank-Index (auch zum Darstellen der Durchschnitts- und Hoch-Tief-Werte).
-	Umsatzgrafik: Darstellung der Umsätze der einzelnen Börsen oder der Gesamtumsätze.
-	Hauptmenü: Zurückzum Hauptmenü, wenn neuer Zeitraum ausgewählt werden soll.

Zu diesem Menü kommt man nach erfolgter jeweiliger Darstellung immer zurück, um die Werte des vorher eingegebenen Zeitraums anders darzustellen.

Wenn Kursgrafik als Ausgabeform gewählt wurde, können nach der normalen Darstellung noch weitere Erweiterungen eingegeben werden (Bild 5).

-	Durchschnitt: Einzeichnen des 100-Tage-Durchschnitts in die Grafik (gestrichelte Linie in Bild 5). Dieser Durchschnitt berechnet sich aus den 20 letzten Kursen des Wochentages, bei dem dann der errechnete Wert eingezeichnet wird (20\*5=100; Börsen haben nur Montag bis Freitag geöffnet).
-	Wendepunkte: Wendepunkte der angezeigten Grafik werden verbunden.

Sollen beide Erweiterungen eingezeichnet werden, muß zuerst Wendepunkte und dann Durchschnitt aufgerufen werden.

### 4.	Programmende

Die Grafik-Erweiterung wird ausgeschaltet.

Noch ein Tip: Wenn die alte Diskette voll ist (weniger als 10 freie Blöcke), sollten die letzten 3 bis 4 Monate auf die neue (vorher formatierte) Diskette überspielt werden, bevor man weitere Kurse eingibt. Dadurch bekommt man einen fließenden Übergang beim Diskettenwechsel (Daten können immer nur von einer Diskette eingelesen werden).

Das Programm fängt die meisten Bedienungsfehler auf. Nach dem Beseitigen des Fehlers (zum Beispiel falsche Diskette eingelegt) und Drücken von RETURN wird mit dem Programm fortgefahren. Auch Programmfehler werden angezeigt.

Da der C 64 keine eigenen Grafikbefehle hat, muß in dem Programm auf eine Maschinensprache-Erweiterung (siehe eigener Artikel in dieser Ausgabe) zurückgegriffen werden. Diese wird mit einem Monitor oder dem MSE ab $0000 eingegeben und danach als »GRAFIK-E/MS« abgespeichert.

Nun kann das eigentliche Programm abgetippt, gespeichert und gestartet werden. Es lädt dann zuerst die Erweiterung und die mögliche Drucker-Routine.

Noch ein Hinweis: Nach dem Programmabbruch mit der STOP-Taste darf das Programm nicht wieder ganz von vorne gestartet werden, ohne vorher die Grafik-Erweiterung mit - E auszuschalten!

(Björn Fiethe/aw)

# Wahlhochrechnung \[154-158\]

> Da wird selbst die trockenste Bundestagswahl zum interessanten Erlebnis. Aber auch bei Schulwahlen und Clubsitzungen leistet dieses Programm wertvolle Dienste.

Wenn die Fernsehanstalten ARD und ZDF am Wahlsonntagabend ab 18 Uhr ihre Hochrechnungsschlacht austragen, kann man mit diesem Programmlisting endlich mitmischen. Durch die Mittelwertbildung aus den letzten beiden Hochrechnungen werden wahrscheinlich genauere Ergebnisse erzielt, als wenn die Hochrechnungen der beiden Sender nur getrennt betrachtet werden. Außerdem können mit diesem Programm das alte Ergebnis, die eingegebenen Hochrechnungen und das Endergebnis abgespeichert und als Grafik auf Bildschirm oder Drucker ausgegeben werden.

Die aus dem Fernsehen bekannten drei zur Verfügung stehenden Balkengrafiken sind zwar nicht dreidimensional, zeichnen sich aber dafür (oder gerade deshalb) durch gute Ables- und Vergleichbarkeit aus.

Die Eingabe der Hochrechnungen von ARD und ZDF erfolgt in Echtzeit, also genau zu dem Zeitpunkt, zu dem sie auch im Fernsehen gezeigt werden. Dazu läuft die Uhr des Computers sichtbar mit.

Die Grafik-Erweiterung (Beachten sie den Artikel Grafik-DCopy in dieser Ausgabe) zu diesem Programm erlaubt es, daß trotz der hohen Auflösung von 320x200 Punkten die einzelnen Parteien in verschiedenen Farben dargestellt werden können. Auch die Hintergrundfarbe der Grafiken kann im Programm durch Ändern des Wertes hinter dem Befehl —G (siehe Anleitung zur Grafik-DCopy in dieser Ausgabe) geändert werden.

Diese Grafik-Erweiterung wird am Programmanfang in den Bereich $C000 bis $C568 geladen. Auch die Druckerroutine für den Grafikausdruck sollte in den Bereich $C700 bis $C800 geladen werden (beide Erweiterungen finden Sie in einem eigenen Artikel in dieser Ausgabe). Einen anderen Bereich in Page 12 läßt die Grafik-Erweiterung nicht zu. Allerdings kann die Routine auch im oberen Bereich des Basic-RAMs gespeichert werden, nur muß sie dann vor Überschreiben geschützt sein (als Beispiel wird in dem aufgelisteten Programm die Routine »DCOPY« für einen MPS-802 Drucker geladen und gestartet!).

Das Wahlhochrechnungsprogramm berechnet nach jeder Eingabe der Hochrechnungs-Prozentzahlen den Mittelwert zwischen den letzten zwei Hochrechnungen und auf Wunsch auch die zu den Prozentzahlen proportionale Sitzverteilung. Damit wird die Wahrscheinlichkeit erhöht, daß schon eine frühe Hochrechnung mit dem Endergebnis übereinstimmt.

Zur Darstellung der Werte stehen drei Balken-Grafiken zur Verfügung: Prozente alt und neu (Bild 1), Gewinn und Verlust (Bild 2), neue Sitzverteilung mit Vergleich zur alten (Bild 3). Durch einen Trick können trotz der hohen Auflösung mehrere Farben in der Grafik dargestellt werden. Zum Ausdrucken des Grafik-Bildschirms wird eine druckerspezifische Routine im Bereich $C700 bis $0800 oder im oberen Bereich des Basic-RAMs benötigt (der Grafikspeicher liegt im Bereich $E000 bis $FFFF). Die im Programm geladene und gestartete Routine ist als Beispiel zu verstehen.

Nun noch einige Bedienungshinweise zum Programm.
Nachdem noch einmal eine kurze Bedienungsanleitung gezeigt wird, wird gefragt, ob alte schon abgespeicherte Wahldateien betrachtet und ausgewertet werden sollen, oder eine neue Wahlhochrechnung angefangen wird.

Soll eine alte Datei geladen werden, muß zuerst der Wahlname eingegeben werden (kann auch mit »\*« abgekürzt werden). Dann erscheint eine Auflistung der verschiedenen Hochrechnungen mit Nummern. Paßt die ganze Liste nicht auf den Bildschirm, wird die Auflistung erst einmal angehalten und kann durch Drücken der Space-Taste wieder gestartet werden. Soll eine Hochrechnung zur grafischen Darstellung ausgewählt werden, muß die davorstehende Zahl mit beiden Stellen eingegeben werden (ohne RETURN). Zu dieser Auflistung kommt man auch, wenn man bei der Real-Time-Hochrechnungseingabe »G« für Grafik drückt.

Allgemein muß bei der Eingabe von Prozentzahlen beachtet werden, daß die vorgegebene Stelle des Punktes und des Prozent-Zeichens nicht verändert wird. Auch die Nullen darf man nicht löschen, wenn sie nicht gebraucht werden.

Bei der Eingabe der alten Sitzverteilung dürfen Überhangmandate nicht mit eingegeben werden. Natürlich müssen die Verhältnisse der Sitze mit denen der Prozentzahlen übereinstimmen, da der Computer sonst nicht richtig rechnet. Er berechnet die Sitze nämlich nur nach dem Verhältniswahlrecht aus den Zweitstimmen (wie die anderen Hochrechnungscomputer auch). Deshalb können sich kleinere Abweichungen zum Endergebnis ergeben, auch wenn die Prozentzahlen übereinstimmen.

Da der C 64 keine Grafikbefehle hat, muß auf eine Maschinensprache-Erweiterung zurückgegriffen werden. Diese wird mit einem Monitor oder mit dem MSE ab $C000 eingegeben und danach als »GRAFIK-E/MS« abgespeichert.

Nun kann das Basic-Programm abgetippt, gespeichert und gestartet werden. Es lädt dann zuerst die Erweiterung und die mögliche Drucker-Routine.

Nach dem Programmabbruch mit der STOP-Taste darf das Programm nicht wieder ganz von vorne gestartet werden, ohne vorher die Erweiterung mit ←E auszuschalten!

(Björn Fiethe/aw)

# Business-Grafik für jedermann \[159-163\]

> Mit den beiden hier vorgestellten Programmen können Sie sehr einfach statistische Kurven in Form eines Kreis- oder Liniendiagramms auf dem Printer/Plotter 1520 zeichnen.

Beide Programme »Kreisdiagramm« (Listing 1) und »Manager-Kurve« (Listing 2) sind in Basic geschrieben und werden folglich mit LOAD"Name", 8 geladen und mit RUN gestartet. Zu beiden Programmen finden Sie in Tabelle 1 und 2 eine Aufschlüsselung nach Zeilennummern. Dadurch lassen sich die Programme leicht den eigenen Erfordernissen anpassen.

## Kreisdiagramm

Das Programm »Kreisdiagramm« (Listing 1) ermöglicht das Zeichnen und farbliche Gestalten von Kreisdiagrammen verschiedener Größen mit dem Plotter VC 1520.

Um ein Kreisdiagramm zu zeichnen, ist wie folgt vorzugehen.

1.	Laden und Starten des Programms mit LOAD-"Name",8:RUN
2.	Eingabe der Diagrammgröße (maximal 2)<br>Der Radius des geplotteten Kreisdiagramms in »cm« beträgt das zweifache des eingegebenen Wertes.
3.	Eingabe der Diagrammfarbe (0 = schwarz etc.)<br>Die Konturen des Diagramms und die eventuellen Texte werden in dieser Farbe geplottet.
4.	Eingabe der Überschrift
5.	Eingabe der Anzahl der Sektoren
6.	Eingabe, ob Prozent- oder Absolutwerte (»P« beziehungsweise »A«.)<br>Bei Absolutwerten werden die Sektorengrößen anteilig berechnet. Bei Prozentwerten überprüft das Programm, ob die Summe der eingegebenen Werte ungleich 100% ist. Sollte das der Fall sein, wird eine Korrektur oder Neueingabe angeboten, bei Unterschreitung der Gesamtsumme der Restwert berechnet und als gleichwertiger Sektor bearbeitet.
7.	Eingabe, mit oder ohne Text<br>Wenn die Eingabe mit Text erfolgen soll, werden die Sektoren am Rand mit einer laufenden Nummer versehen und die Texte mit »Nr.« unter dem Diagramm aufgelistet.
8.	Eingabe, ob Korrektur der Initialisierungsdaten<br>Wenn ja, Neustart des Programms
9.	Eingabe der Daten zu den Sektoren

-	Prozent- beziehungsweise Absolut-Wert
-	Text, falls erwünscht
-	Farbeingabe (RETURN = keine farbliche Ausfüllung, sonst in der eingegebenen Farbe)
-	Linienabstandseingabe für Schraffierung, wenn Farbeingabe (1 = lückenloses Ausmalen des Sektors mit der angegebenen Farbe).

Aus Zeitgründen und wegen der Lebensdauer der Plotterstifte empfiehlt es sich nicht, große Diagramme farblich ganz auszufüllen.

10. Eingabe, ob Korrektur einzelner Werte.
Wenn ja, Eingabe der laufenden Nummer des zu korrigierenden Wertes; wenn nein, setzt sich der Plotter-Zeichenstift in Bewegung.

Zwei Beispiele für das Zeichnen von Kreisdiagrammen zeigen Bild 1 und 2.

## Manager-Kurve

Mit dem Plotter-Programm »Manager-Kurve« (Listing 2) lassen sich beliebige Linien in ein 8 x 16 cm großes Koordinatensystem mit frei wählbarer Skala zeichnen. Das Diagramm wird anschließend beschriftet.

Um eine »Manager-Kurve« zu zeichnen, ist wie folgt vorzugehen.

1.	Laden und Starten des Programms mit LOAD-"Name",8:RUN
2.	Im Menü wählt man die Farbe für Skala und Beschriftung, stellt das Menü auf »Neues Diagramm« und drückt RETURN zur Ausführung.
3.	Eingabe der Ober- und Untergrenze der Y-Skala. Eingabe der Ober- und Untergrenze der X-Skala. Da die X-Achse doppelt so lang ist wie die Y-Achse, ergeben gleiche Ober- und UntergrenzenfürX- undY-Skalaeine 1/2-fache Überhöhung. Eingabe der Überschrift: Zum Zeichnen des Diagramms ist RETURN zu drücken. Auch eine Korrektur der Daten (N) oder ein direkter Rücksprung ins Menü (M) ist möglich.
4.	Bei der Menü-Anzeige nach dem Zeichnen des Diagramms wähle man »Neue Linie« und stelle Farbe, Linienart (unterbro-\chene/durchgezogene Linie) und Verfahrensweise zum Zeichnen eines Punktes (mit/ohne Markierungskreuz) ein. RETURN führt zur
5.	Koordinaten- und Texteingabe der Punkte. Aus Gründen der Übersichtlichkeit empfiehlt es sich nicht, zu vielen Punkten lange Texte einzugeben. In diesem Fall ist die Anbringung von Fußnoten günstiger, die dann manuell oder mit einem entsprechenden Programm neben das Diagramm gesetzt, erklärt werden.

Liegt ein Punkt außerhalb des Diagramms, kann bis zur Zeichengrenze des Plotters die Linie gezogen werden. Jedoch läßt sich kein Text eingeben.

Wahlweise ist

-	Ausführung der Anweisung (= Plotten der Linie), danach Eingabe eines neuen Punktes (RETURN),
-	Ausführung der Anweisung, danach Rücksprung ins Menü (SHIFT-RETURN),
-	direkter Sprung ins Menü (M) oder
-	Korrektur der Daten (N) möglich.

6. Im Menü lassen sich Farbe, Linienart und Markierungskreuz einstellen. Auch kann die Linie am letzten Punkt weitergezeichnet, oder eine neue Linie begonnen werden. Entscheidet man sich für ein neues Diagramm oder für Programmende, wird das alte Diagramm beschriftet und zur neuen Diagramm-Dateneingabe gesprungen beziehungsweise das Programm beendet.

Zwei Beispiele für eine Managerkurve zeigen Bild 3 und 4.

(Franz Strobel/ah)

# Impressum \[164\]

---

**Herausgeber**: Carl-Franz von Quadt, Otmar Weber
**Chefredakteur**: Michael Scharfenberger
**Leitender Redakteur**: Albert Absmeier
**Redaktion**: Volker Everts, Achim Hübner, Georg Klinge (Koordination), Harald Meyer, Markus Ohnesorg, Thomas Röder, Boris Schneider, Arnd Wängler
Fremdautoren:
Lonczewski, Mann, Weineck, Anton, Weck, Marzluf, Langens, Woellecke, Horstmann, Wieske, Demuth, Omerzu, Krügler, Gill, Berner, Klimecki, Dahlmann, Gerlach, Rabich, Riehm, Langer, Fiethe, Strobel

---

**Layout**: Leo Eder (Ltg.)

---

**Herstellung**: Klaus Buck

---

**Auslandsrepräsentation**:
Schweiz: Markt & Technik Vertriebs AG, Kollerstr. 3, CH-6300 Zug, Tel. 042-41 56 56, Telex: 862 329
USA:	M&T Publishing lnc.; 2464 Embarcadero Way, Palo Alto, CA 94303

--- 

**Manuskripteinsendungen**: Manuskripte und Programmlistings werden gerne von der Redaktion angenommen. Sie müssen frei sein von Rechten Dritter. Sollten sie auch an anderer Stelle zur Veröffentlichung oder gewerblichen Nutzung angeboten werden, so muß dies angegeben werden. Mit der Einsendung von Manuskripten und Listings gibt der Verfasser die Zustimmung zum Abdruck in von der Markt & Technik Verlag AG herausgegebenen Publikationen und zur Vervielfältigung der Programmlistings auf Datenträger. Mit der Einsendung von Bauanleitungen gibt der Einsender die Zustimmung zum Abdruck in von Markt & Technik Verlag AG verlegten Publikationen und dazu, daß Markt & Technik Verlag AG Geräte und Bauteile nach der Bauanleitung herstellen läßt und vertreibt oder durch Dritte vertreiben läßt. Honorare nach Vereinbarung. Für unverlangt eingesandte Manuskripte und Listings wird keine Haftung übernommen.

---

**Vertriebsleitung**: Hans Hörl

---

**Anzeigenverwaltung und Disposition**: Michaela Hörl

---

**Verlagsleiter M&T-Buchverlag**: Günther Frank

---

**Druck**: St. Otto Verlag GmbH, Laubanger 23, 8600 Bamberg

---

**Preis**: Das Einzelheft kostet DM 14,—

---

**Vertrieb Handelsauflage**: Inland (Groß-, Einzel- und Bahnhofsbuchhandel) sowie Österreich und Schweiz: Pegasus Buch- und Zeitschriften-Vertriebs GmbH, Hauptstätter Straße 96, 7000 Stuttgart 1, Telefon (0711)6 48 30

---

**Urheberrecht**: Alle in diesem Heft erschienenen Beiträge sind urheberrechtlich geschützt. Alle Rechte, auch Übersetzungen, vorbehalten. Reproduktionen gleich welcher Art, ob Fotokopie, Mikrofilm oder Erfassung in Datenverarbeitungsanlagen, nur mit schriftlicher Genehmigung des Verlages. Anfragen sind an Michael Scharfenberger zu richten. Für Schaltungen, Bauanleitungen und Programme, die als Beispiele veröffentlicht werden, können wir weder Gewähr noch irgendwelche Haftung übernehmen. Aus der Veröffentlichung kann nicht geschlossen werden, daß die beschriebenen Lösungen oder verwendeten Bezeichnungen frei von gewerblichen Schutzrechten sind. Anfragen für Sonderdrucke sind an Peter Wagstyl (185) zu richten.

---

**© 1985 Markt & Technik Verlag Aktiengesellschaft**

---

**Verantwortlich**:
Für redaktionellen Teil: Michael Scharfenberger
Für Anzeigen: Brigitte Fiebig
**Redaktions-Direktor**: Michael M. Pauly

---

**Vorstand**: Carl-Franz von Quadt, Otmar Weber

---

**Anschrift für Verlag, Redaktion, Vertrieb, Anzeigenverwaltung und alle Verantwortlichen**:
Markt & Technik Verlag Aktiengesellschaft, Hans-Pinsel-Straße 2, 8013 Haar bei München, Telefon (0 89) 4613-0, Telex 5-22 052
