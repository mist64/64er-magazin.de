<!DOCTYPE html>
<html lang="de">

<head>
    <title>»Schreiberling«: Märchenstunde für MPS-Drucker</title>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="../style.css">
    <meta name="author" content="Frank Behrens, O. Brudel, G. Knöpfel, D. Surrey, og">
    <meta name="64er.issue" content="2/86">
    <meta name="64er.pages" content="100,102-106">
    <meta name="64er.head1" content="Tips und Tricks">
    <meta name="64er.head2" content="C 64">
    <meta name="64er.toc_title" content="<b>Schreiberling: Märchenstunde für MPS 801-Drucker</b>">
    <meta name="64er.toc_category" content="Listings zum Abtippen|Tips und Tricks">
    <meta name="64er.index_title" content="»Schreiberling«: Märchenstunde für MPS-Drucker">
    <meta name="64er.index_category" content="Tips & Tricks C 64|Druckerhilfe MPS 801">
    <meta name="64er.id" content="schreiberling">
</head>

<body>
    <article>
        <h1>»Schreiberling«: Märchenstunde für MPS-Drucker</h1>
        <p class="intro">Die Möglichkeiten, fantasievolle Schriften aufs Papier zu bringen, haben sich nun für die Besitzer von MPS-Druckern eröffnet. Für Epson-kompatible gibt es eine Erweiterung, die Umlaute möglich macht.</p>

        <figure>
            <img src="100-1.png" alt="">
        </figure>

        <p>Kommt Ihnen die Schrift in Bild 1 bekannt vor? Sie befinden sich trotz der Ähnlichkeit mit einem Märchenbuch nicht in einem solchen. Diese schöne Schrift entstammt einem MPS 802-Drucker. Mit einigen kleinen Veränderungen des Programms »Schreiberling« aus der 64’er, Ausgabe 10/85, Seite 54, kann man es den Commodore-Druckern MPS 801, MPS 803 und MPS 802 ermöglichen, mit fantasievollen Lettern Grußkarten, Einladungen etc. zu drucken. Für Epson-Drucker und Kompatible ist »Schreiberling« an den deutschen Zeichensatz angepaßt worden. Mit entsprechenden Basic-Kenntnissen kann man natürlich diese Routinen für MPS-Drucker in das erweiterte Programm einbauen.</p>

        <h2>Die Anpassung für MPS 801 und MPS 803</h2>

        <p>Da die Epson-Drucker der RX- und FX-Serie die Drucknadeln genau in umgekehrter Reihenfolge anspricht wie der MPS 801, mußte eine Routine entwickelt werden, die die DATAs im »Schreiberling« umrechnet. Dieses Unterprogramm befindet sich ab der Zeile 3000. Um »Schreiberling« nutzen zu können, müssen Sie wie folgt vorgehen:</p>

        <ol>
            <li>Tippen Sie Listing 1 mit Hilfe des Checksummers ab.</li>
            <li>Speichern Sie das Programm aus Listing 1.</li>
            <li>Übernehmen Sie aus dem Programm in Ausgabe 10/85; Seite 54, die Zeilen 1000 bis 2460 (nicht aus der Version mit Umlauten in dieser Ausgabe!).</li>
            <li>Speichern Sie das Programm, es ist jetzt fertig.</li>
        </ol>


        <p>Lediglich drei Einschränkungen sind für den MPS 801 und MPS 803 zu beachten. Erstens, der Ausdruck in doppelter Dichte ist nicht möglich, da dies ein Zusatz der Epson-Drucker ist. Zweitens, durch die Umrechnung der DATAs wird das Programm langsamer. Auf der Leserservice-Diskette befindet sich deshalb zusätzlich auch eine compilierte Version. Und drittens stehen bei den MPS-Druckern nur sieben Nadeln zur Verfügung. Dadurch sieht das Schriftbild etwas verändert aus. Natürlich kann man hier mit veränderten Werten in den DATAs herumprobieren. Es lohnt sich bestimmt, einen eigenen Satz Buchstaben zu entwerfen.</p>

        <h2>Schreiberling auf dem MPS 802</h2>

        <p>Daß das Ganze auch für den MPS 802 möglich ist, beweist das Programm in Listing 2. Die wesentliche Änderung besteht darin, daß die zu druckenden Texte zuerst als Stringvariable angelegt werden, um dann wieder »zerhackt« als definiertes Zeichen zum Drucker gesendet zu werden. Es besteht ebenfalls die Möglichkeit, die Zeichen innerhalb der DATA-Zeilen zu verändern, um den Zeichensatz abzurunden. Um »Schreiberling« auf dem MPS 802 nutzen zu können, verfahren Sie bitte wie folgt:</p>

        <ol>
            <li>Tippen Sie Listing 2 mit Hilfe des Checksummers ab.</li>
            <li>bis 4. siehe oben.</li>
        </ol>


        <p>Weiterhin gelten die oben genannten Einschränkungen auch für den MPS 802. Doch dies soll uns nicht weiter stören. Nach dem ersten Probeausdruck werden Sie wissen, warum. Auf der Leserservice-Diskette finden Sie die Basic- und die compilierte Version des vollständigen Programms.</p>

        <h2>Deutsche Zeichen: »Schreiberling V2«</h2>

        <p>Ein Programm, das die Schrift der Märchenbücher zu ermöglichen versucht, sollte auch deren Umlaute beherrschen. Diese Änderung gegenüber der ersten Version klingt nach wenig Aufwand, erfordert jedoch eine Umstrukturierung des gesamten Programms. Natürlich soll man die Umlaute auch auf dem Bildschirm sehen können; also mußte der Zeichensatz des C 64 geändert werden (das Assemblerlisting entnehmen Sie bitte Bild 2). Die neuen Zeichen auf der Tastatur werden in Bild 3 dargestellt. In die DATA-Zeilen der ersten Version mußten dann die Umlaute eingebunden werden. Die durch REMs gekennzeichneten DATA-Zeilen weichen vom ursprünglichen »Schreiberling« ab, das Programm ist ja flexibel. Weiterhin sind einige Verbesserungen im Programmablauf entstanden. Zum Beispiel der Druckertest (Zeile 800 bis 840), der einen eventuellen »DEVICE NOT PRESENT ERROR« abfängt. Die Variablenfelder sind im »Schreiberling V2« vollständig umgruppiert (Bild 4), wodurch die Einleseschleife vereinfacht werden konnte. Ein neuer Druckmodus wurde eingeführt, der durch » « an erster Stelle angewählt wird. Eine Liste aller Veränderungen könnte man nicht mehr überblicken, langwierige Fehlersuche wäre vorprogrammiert. Deshalb enthält Listing 3 das komplette Programm »Schreiberling V2«. In dieser Form ist das Programm auf einem Epson RX 80 mit Print 64-Interface lauffähig. Man müßte jedoch jedes Interface, das sich softwaremäßig »verriegeln« läßt, damit ansprechen können. Es genügt der Direktmodus ohne jegliche Zeichenumwandlung durch das Interface. »Schreiberling V2« wird es als Basic-Programm und als Compilat auf der Leserservice-Diskette geben.</p>

        <figure>
            TODO
            <figcaption>Bild 2. Assemblerlisting für die Umlaute auf dem C 64 bei »Schreiberling V2«</figcaption>
        </figure>

        <figure>
            <table>
                <thead>
                    <tr>
                        <th>BS-Code</th>
                        <th>alt</th>
                        <th>neu</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>0</td>
                        <td>@</td>
                        <td>ü</td>
                    </tr>
                    <tr>
                        <td>27</td>
                        <td>[</td>
                        <td>ö</td>
                    </tr>
                    <tr>
                        <td>29</td>
                        <td>]</td>
                        <td>ä</td>
                    </tr>
                    <tr>
                        <td>43</td>
                        <td>+</td>
                        <td>ß</td>
                    </tr>
                    <tr>
                        <td>60</td>
                        <td>&lt;</td>
                        <td>Ö</td>
                    </tr>
                    <tr>
                        <td>62</td>
                        <td>&gt;</td>
                        <td>Ä</td>
                    </tr>
                    <tr>
                        <td>122</td>
                        <td>&radic;</td>
                        <td>Ü</td>
                    </tr>
                </tbody>
            </table>
            <figcaption>Bild 3. Die neue Tastaturbelegung bei »Schreiberling V2«</figcaption>
        </figure>

        <figure>
            <h3>Neu eingeführte Variable</h3>
            <table class="plain">
                <thead>
                    <tr>
                        <th>Zeile</th>
                        <th>Variable</th>
                        <th>Bemerkung</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>80</td>
                        <td>k</td>
                        <td>Start Maschinenprogramm<br>kann auch verlegt<br>werden (z.B. k=678)</td>
                    </tr>
                    <tr>
                        <td>80</td>
                        <td>b</td>
                        <td>Start Zeichensatz 2</td>
                    </tr>
                    <tr>
                        <td>290</td>
                        <td>a$(92,2)</td>
                        <td>Tabelle der Druck-DATAs</td>
                    </tr>
                    <tr>
                        <td>320</td>
                        <td>sd$</td>
                        <td>Druckbefehlsstring für<br>Normalgrafik (480 P/Z)</td>
                    </tr>
                    <tr>
                        <td>330</td>
                        <td>md$</td>
                        <td>Befehlsstring für<br>CRT-Grafik (640 P/Z)</td>
                    </tr>
                    <tr>
                        <td>340</td>
                        <td>dd$</td>
                        <td>Befehlsstring für<br>doppelte Dichte (960 P/Z)</td>
                    </tr>
                    <tr>
                        <td>350</td>
                        <td>I$</td>
                        <td>Befehlsstring für<br>Druckerinitialisierung</td>
                    </tr>
                    <tr>
                        <td>360</td>
                        <td>bz</td>
                        <td>Bildschirmposition,<br>ab der gelesen wird</td>
                    </tr>
                    <tr>
                        <td>360</td>
                        <td>lf$</td>
                        <td>Befehlsstring Linefeed</td>
                    </tr>
                </tbody>
            </table>
            <figcaption>Bild 4. Die neuen Variablen für »Schreiberling V2«</figcaption>
        </figure>

        <p>Mit diesen Erweiterungen beziehungsweise Veränderungen dürfte nun ein Großteil aller Drucker mit »Schreiberling« zusammenarbeiten. Selbstverständlich sind damit auch MPS-kompatible gemeint, wie zum Beispiel Seikosha 1000 VC oder der Epson GX 80. Sollte der Zeichensatz nicht Ihrem Geschmack entsprechen, können Sie ihn jederzeit verändern oder neu entwerfen (siehe 64’er 10/85, Seite 54). Versuchen Sie sich doch einmal am Zeichensatz der 64’er.</p>

        <address class="author">(D. Surrey/G. Knöpfel/O. Brudel/F. Behrens/og)</address>

        <figure>
            <pre data-filename="schreiberl. 801" data-name="Schreiberling MPS 801" data-range="145,150,160,165,170,220,230,240,245,250,255,260,265,267,270,280,282,285,320,325,330,340,350,410,411,417,418,419,422,425,430,440,450,460,470,475,480,550,560,670,910,920,930,932,933,935,940,3000,3010,3050,3060,3070,3080,3090,3100,3110,3120,3130,3140"></pre>
            <figcaption>Listing 1. Die Veränderungen, die für die Anpassung an den MPS 801, beziehungsweise MPS 803 notwendig sind</figcaption>
        </figure>

        <figure>
            <pre data-filename="schreiberl. 802" data-name="Schreiberling MPS 802" data-range="100,101,102,103,145,150,160,162,163,164,165,170,171,172,175,180,200,220,230,240,245,250,260,265,267,270,280,282,285,300,320,325,330,340,350,400,410,411,414,415,417,418,420,421,422,425,430,440,450,460,470,475,480,550,560,570,590,591,592,600,605,610,650,660,665,690,691,692,700,705,710,715,725,730,735,740,745,746,747,750,751,755,760,762,765,770,775,800,900"></pre>
            <figcaption>Listing 2. Die Veränderungen, die für die Anpassung an den MPS 802 notwendig sind</figcaption>
        </figure>

        <figure>
            <pre data-filename="schreiberling v2" data-name="Schreiberling V2"></pre>
            <figcaption>Listing 3. »Schreiberling V2« mit Umlauten und verbesserter Programmlogik</figcaption>
        </figure>

    </article>
</body>

</html>
