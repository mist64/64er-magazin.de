<!DOCTYPE html>
<html lang="de">

<head>
    <title>Das 64’er EPROM-Programmiergerät</title>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="../style.css">
    <meta name="author" content="Michael Frank, Christian Quirin Spitzner, og">
    <meta name="64er.issue" content="2/86">
    <meta name="64er.pages" content="64-65">
    <meta name="64er.head1" content="Grafik"> <!-- sic! -->
    <meta name="64er.head2" content="C 64">
    <meta name="64er.toc_title" content="Software zum 64*er EPROM-Programmiergerät">
    <meta name="64er.toc_category" content="Hardware">
    <meta name="64er.index_title" content="Das 64’er EPROM-Programmiergerät - die Treibersoftware">
    <meta name="64er.index_category" content="Listings zum Abtippen|EPROM">
    <meta name="64er.id" content="eprom">
</head>

<body>
    <article>
        <h1>Das 64’er EPROM-Programmiergerät</h1>
        <p class="intro">Nach der Fertigstellung der Hardware in der letzten Ausgabe, bringen wir nun die Software des 64’er EPROM-Programmiergerätes. Damit ist der EPROM-Brenner vollständig und einsatzbereit.</p>

        <p>Auf geht’s zum letzten Teil des 64’er EPROM-Brenners. Der Software. Da die Programmbeschreibung schon in der letzten Ausgabe erschienen ist, bleibt dem Programm nicht mehr allzuviel hinzuzufügen.</p>

        <p>Es wurden lediglich noch einige minimale Änderungen im Programm vorgenommen, so daß ein paar Kleinigkeiten ergänzt werden müssen. Der Menüpunkt »(T)ype wählen« bleibt auch bei Schalterstellung (2532) im Menü. Drückt man dann die »T«-Taste, so passiert nichts. Zeigt der Schalter vom Computer weg (Stellung 27xxx), kann mit Hilfe der »T«-Taste, durch»blättern« das gewünschte EPROM aus der 27er-Familie ausgewählt werden. Der jeweils aktuelle EPROM-Typ erscheint am Bildschirm rechts oben.</p>

        <p>Interessant und wichtig ist noch das Register für den CIA 1, Port B. Dieses Register steuert die Kontroll-Logik zum Programmieren beziehungsweise Lesen der verschiedenen EPROM-Typen. Aus der Tabelle kann man den Zusammenhang zwischen EPROM-Typ, Registerinhalt und Schalterstellung entnehmen.</p>

        <figure>
<table>
    <thead>
        <tr>
            <th rowspan="2">EPROM</th>
            <th colspan="8">Bit</th>
            <th rowspan="2">Schalterstellung</th>
        </tr>
        <tr>
            <th>0</th>
            <th>1</th>
            <th>2</th>
            <th>3</th>
            <th>4</th>
            <th>5</th>
            <th>6</th>
            <th>7</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>2532</td>
            <td>0</td>
            <td>1</td>
            <td>0</td>
            <td>0</td>
            <td>0</td>
            <td>0</td>
            <td>1</td>
            <td></td>
            <td>zum Computer hin &darr;</td>
        </tr>
        <tr>
            <td>2732</td>
            <td>0</td>
            <td>0</td>
            <td>0</td>
            <td>0</td>
            <td>0</td>
            <td>0</td>
            <td>0</td>
            <td></td>
            <td>vom Computer weg &uarr;</td>
        </tr>
        <tr>
            <td>2764</td>
            <td>0</td>
            <td>1</td>
            <td>0</td>
            <td>0</td>
            <td>1</td>
            <td>0</td>
            <td>0</td>
            <td></td>
            <td>vom Computer weg &uarr;</td>
        </tr>
        <tr>
            <td>27128</td>
            <td>0</td>
            <td>1</td>
            <td>0</td>
            <td>0</td>
            <td>1</td>
            <td>0</td>
            <td>0</td>
            <td></td>
            <td>vom Computer weg &uarr;</td>
        </tr>
        <tr>
            <td>27256</td>
            <td>1</td>
            <td>1</td>
            <td>0</td>
            <td>1</td>
            <td>1</td>
            <td>0</td>
            <td>0</td>
            <td></td>
            <td>vom Computer weg &uarr;</td>
        </tr>
        <tr>
            <td>27512</td>
            <td>0</td>
            <td>0</td>
            <td>1</td>
            <td>1</td>
            <td>1</td>
            <td>0</td>
            <td>0</td>
            <td></td>
            <td>vom Computer weg &uarr;</td>
        </tr>
        <tr style="vertical-align: top; font-size: 0.9em;">
            <td></td>
            <td colspan="2">Höhe der Programmierspannung</td>
            <td>Umschalter zwischen Vpp und A15 an Pin 1<br>(Bild 6, 12/85)</td>
            <td>Umschalter zwischen PGM und A14 an Pin 27<br>(Bild 7, 12/85)</td>
            <td>Umschalter zwischen +5V und A13 an Pin 26<br>(Bild 8, 12/85)</td>
            <td>Pin 20</td>
            <td>Schalterstellung</td>
            <td>Programmierspannung</td>
        </tr>
    </tbody>
</table>
            <figcaption>Tabelle. Die Bedeutung der Bits, die das EPROM-Programmiergerät verwendet</figcaption>
        </figure>

        <p>Bit 0 und Bit 1 bestimmen die Programmierspannung:</p>

        <table class="plain center0">
            <tr><td>REGISTERINHALT</td><td></td><td>SPANNUNG</td></tr>
            <tr><td>00</td><td>=</td><td>24,0 V—Masse</td></tr>
            <tr><td>01</td><td>=</td><td>12,5 V—Masse</td></tr>
            <tr><td>10</td><td>=</td><td>24,0 V—5V</td></tr>
            <tr><td>11</td><td>=</td><td>12,5 V—5V</td></tr>
        </table>

        <p>Bit 2 steuert Pin 1 des Textoolsockels. Ist Bit 2 nicht gesetzt, dann liegt an diesem Pin die Programmierspannung an. Für das EPROM 27512 ist dort aber die Leitung A15 angeschlossen. Bit 3 kontrolliert den Umschalter zwischen PGM und A14 an Pin 27 des EPROM-Sockels. Ist das Bit gesetzt, liegt Pin 27 auf A14. Bit 4 programmiert den Umschalter zwischen +5V und A13 am Pin 26. Ist das Bit gesetzt, so liegt Pin 26 an A13. Bit 5 ist in unserem Fall unwichtig. Bit 6 ist gesetzt, wenn der Schalter auf Stellung 2532 steht (zum Computer hin). Bit 7 steuert zu guter Letzt die Programmierspannung.</p>

        <h2>EPROM-bedingte Veränderungen der Software</h2>

        <p>Beim Durchtesten aller handelsüblichen EPROMs stellten wir fest, daß das 16-KByte-EPROM (27128) von Mitsubishi nicht richtig programmiert werden kann! Alle anderen 16-KByte-EPROMs sind aber einwandfrei zu programmieren. Beim Programmieren des 2532 von Texas Instruments mußten wir feststellen, daß beim unmittelbaren Überprüfen des beschriebenen Bytes immer ein VERIFY-Fehler angezeigt wird. Trotzdem wurde das EPROM aber richtig programmiert. Der Fehler läßt sich dadurch erklären, daß dieses EPROM zu lange braucht um von Schreiben auf Lesen umzuschalten. Abhilfe läßt sich durch Abschalten des unmittelbaren Verify erreichen. Dies geht mit einem einfachen POKE-Befehl (nach dem Laden des Maschinenprogramms): POKE 49419,23</p>

        <p>Das EPROM kann aber trotzdem nach Beendigung des Programmiervorgangs mit (V)erify überprüft werden. Eine weitere Möglichkeit bietet die Verlängerung der Pause zwischen Programmier- und Lesezyklus. POKEt man in die Speicherstelle 49551 einen Wert größer 3 (zum Beispiel 5 oder 6), dürfte je nach EPROM kein VERIFY-Fehler mehr auftreten. In unserem Fall reichte der Wert 4 schon aus.</p>

        <p>Das Programm (siehe Listing) tippen Sie bitte mit dem MSE ab. Beim EPROM-Brenner-Bausatz, beziehungsweise Fertiggerät des 64’er Hardware-Service, ist das Programm bereits enthalten.</p>

        <address class="author">(M.Frank/C. Q. Spitzner/og)</address>

        <figure>
            <pre data-filename="64erepr.prg" data-name="EPROM-Programm" data-mse=mse1></pre>
            <figcaption>Listing des EPROM-Programmes. Geben Sie dieses Listing bitte mit dem MSE auf Seite 57 ein. Die Beschreibung finden Sie in Ausgabe 1/86.</figcaption>
        </figure>
        <div class="binary_download" data-filename="64erepr.prg" data-name="EPROM-Programm"></div>
    </article>
</body>

</html>
