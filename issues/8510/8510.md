# Noch'n Service: Platinen \[8\]

Nach dem Listing-Service, den viele Leser gern nutzen, um sich Tipparbeit zu sparen, bieten wir jetzt auch einen Platinenservice — für alle diejenigen, die sich eine Erweiterung oder Zusatzschaltung selbst bauen wollen. Die Auswertung des in Ausgabe 6 ausgeschriebenen Wettbewerbs hatte nämlich gezeigt, daß sich etwa die Hälfte aller Leser für Selbstbau interessieren — und daß ein Drittel sogar meint, das Thema sei im 64’er unterrepräsentiert. Wenn wir Bauanleitungen veröffentlichen, bieten wir künftig — erstmals ab diesem Heft — die Möglichkeit, entweder die fertige leere Platine oder einen kompletten Bausatz und/oder die fertig montierte Einheit zu beziehen. Aufbauten auf Standard-Lochrasterplatinen ergeben ja nicht immer befriedigende und selten elegante Lösungen; das Selbst-Ätzen von Platinen macht selbst routinierten Hobbyelektronikern häufig Ärger (und erfordert außerdem eine spezielle Ausrüstung). Mit der Option, auch eine fertige Einheit beziehen zu können, wollen wir denen helfen, die bisher mangels Lötkolben, Übung oder Zeit über die Selbstbauanleitungen hinwegblättern mußten. Wir wollen es unseren Lesern so leicht als möglich machen, die 64 ’er-Informationen schnell und einfach praktisch zu nutzen.

Michael Pauly, Redaktions-Direktor

# Btx total \[8\]

> Auf der diesjährigen Internationalen Funkausstellung in Berlin wurde Btx präsentiert wie noch nie. Nahezu jeder bedeutende deutsche TV-Hersteller zeigte seine spezielle Anwendung. Am interessantesten dürfte allerdings das neue Btx-Decoder-Modul von Commodore gewesen sein.

Die Teilnehmerzahlen bei Btx liegen weit hinter den Erwartungen zurück. Eine große Marktakzeptanz gerade bei den Privatanwendern ist noch nicht gegeben. Das liegt unter anderem an den relativ hohen Anschaffungskosten für ein komplettes Btx-System (Anschlußbox, Decoder, Fernseher und Eingabetastatur). Bereits vorhandene, ältere TV-Geräte können nicht oder nur unter großem Aufwand für Btx aufbereitet werden. Das soll sich mit dem Btx-Decoder-Modul für den C 64 und C 128 von Commodore ändern.

Bestückt ist dieses Modul mit dem Valvo-Chip »Eurom« und einen PAL-Coder. Damit kann jeder handelsübliche Farbfernseher mit normalen Video-Eingang eingesetzt werden. Bisher brauchten Btx-Teilnehmer einen SCART-Eingang für die Beistelldecoder. Selbst ältere Fernseher, die keine Video-Buchse haben, lassen sich anschließen. Benötigt wird dazu nur ein als Zubehör angebotener UHF-Modulator. Ebenso können die Monitore 1701/1701 und 1901 angeschlossen werden, es ist also nicht unbedingt ein Fernseher notwendig. Das Steckdecoder-Modul (für den Expansion-Port) wird zwischen 600 und 700 Mark kosten und voraussichtlich Ende Dezember erhältlich sein.

Die Vorteile durch den Einsatz des Moduls mit dem C 64/C 128 liegen klar auf der Hand: Btx-Seiten lassen sich abspeichern (spart Telefongebühren); es ist kein spezieller Fernseher notwendig (man muß nicht umsteigen); Telesoftware kann geladen werden; die Tastatur bietet alle für den Dialog erforderlichen Zeichen; der Computer ist weiterhin als solcher einsetzbar.

Die Vorteile des Computereinsatzes hat auch Nordmende erkannt. Durch ein kleines Modul kann ebenfalls der C 64 für Btx tauglich gemacht werden, allerdings ist dazu noch ein Beistelldecoder notwendig.

Eine neuartige Anwendung zeigte auch Grundig auf der IFA. Mit einem kleinen Interface lassen sich alle Grundig-Video-Recorder (sowohl System Video 2000 als auch VHS) mit IIC-Bus durch den C 64 steuern. Denkbare Einsatzgebiete sind Video-Vorführungen mit gezielter Abrufmöglichkeit, Überwachungswesen oder programmierter Unterricht.

Demonstriert wurde auf der Funkausstellung die Meteosat-Bildaufzeichnung. Durch die gute Deckung der Bildausschnitte des Wettersatelliten ist es möglich, gleiche Bilder verschiedener Aufnahmezeiten zu einer Zeitrafferfolge über mehrere Tage hinweg computergesteuert zusammenzusetzen. Die Signale werden in stehendes Fernsehbild umgewandelt und über die Computersteuerung mit einem Video-Recorder aufgezeichnet. Als Resultat erhält man eine fortlaufende Bilderfolge, mit der eine Vorschau auf die Wetterentwicklung möglich ist.

Voraussetzung ist allerdings eine Parabol-Antenne auf dem Dach! Dennoch zeigt diese Anwendung, was noch alles im C 64 steckt, man muß nur darauf kommen. Das Interface soll übrigens um die 100 Mark kosten.

## Telesoftware

Auf dem Poststand wurde die Anwendung der Telesoftware demonstriert. Verwendung fanden dabei die Programme aus unserem Wettbewerb in Ausgabe 6/85. Der Sieger, Hans Liebler, erhielt aus der Hand des Bundespostministers Dr. Christian Schwarz-Schilling den 1. Preis, einen Btx-Fernseher Loewe MCP 114. Telesoftware bedeutet, daß Programme, die im Btx-Rechner gespeichert sind, von jedem Teilnehmer mit dem entsprechenden Computer (in diesem Fall der C 64) abgerufen und verarbeitet werden können. Gesucht wird allerdings noch nach einer einheitlichen Telesoftwarenorm, die es erlaubt, artfremde Daten (wie sie Programme nun einmal für Btx sind) über Bildschirmtext zu übertragen. Sollte dies in einem vertretbaren Zeitraum gelingen, dürfte Telesoftware in Btx ein zukunftsorientiertes Angebot werden.

Dazu müßte allerdings auch auf der Hardware-Seite (sprich Decoder) für den Computer ein gewisser Standard eingeführt werden. So gibt es mittlerweile neben Commodore noch mindestens zwei Anbieter von Steckdecodern für den C 64. Das Modul »Btx 64« von Astech Computer haben wir bereits in der Ausgabe 8/85, Seite 15, vorgestellt. Dieses Modul verwandelt den C 64 in eine Btx-Tastatur mit allen Computerattributen. Es kostet 248 Mark, benötigt allerdings noch einen Decoder. Wie das Decodermodul von Commodore kommt auch das SD-64 (698 Mark) von Technofor ohne Decoder aus, das heißt nahezu jeder »normale« Fernseher oder RGB-Monitor kann angeschlossen werden.

Mit einer speziellen Software (90 Mark) kann der C 64 auch als Mailbox, zum Laden von Telesoftware oder als elektronische Schreibmaschine mit Textverarbeitung eingesetzt werden. Beiden Decodern fehlt allerdings noch die Postgenehmigung.

(aa)

# Aktuell \[9-10\]

## Einen Schritt weiter — Grafiken der dritten Dimension

Extended Graphics Pack heißt die Erweiterung, mit der Vizastar 64, das integrierte Softwarepaket für den C 64, erst richtig zur Geltung kommt. Zusätzlich zu der in Vizastar 64 schon vorhandenen Linien- und Balkengrafik, fügt dieses Grafikpaket die Räumlichkeit hinzu. Statt in flächigen Balkengrafiken werden die Daten des Arbeitsblattes dreidimensional dargestellt. Jedes Säulendiagramm kann aus bis zu vier Reihen voreinander und 33 Säulen nebeneinander bestehen. Die dreidimensionale Darstellung bleibt dabei auch in den vier Reihen erhalten, denn jede Reihe wird versetzt vor der anderen abgebildet (Bild). Damit bei vielen Daten die einzelnen Säulen nicht zu klein werden, ist immer nur ein Quadrant der gesamten Grafik dargestellt. Wie schon vom Vizastar 64-Arbeitsblatt bekannt, kann man mit den Cursortasten auch über die Grafik horizontal und vertikal wandern. Jede Reihe und Spalte, Kopf- und Fußzeile kann beliebig beschriftet werden. Die zweite Darstellungsart dieser Erweiterung ist die Kreisausschnittgrafik oder einfacher Tortengrafik, sie wird allerdings nur zweidimensional abgebildet. Die Bedienung des Grafikpakets ist extrem einfach, denn die Werte für die Säulen oder Kreisausschnitte werden aus den Zellen des Vizastar-Arbeitsblatts entnommen. Auf Tastendruck wird jede Grafik in einfacher oder doppelter Größe ausgedruckt. Ganz besonders erstaunlich ist die Arbeitsgeschwindigkeit dieser Erweiterung. Ein Säulendiagramm mit vier Reihen und 33 Spalten ist bereits nach 3 Sekunden berechnet — das sind Werte, wie man sie normalerweise nicht einmal von einem Personal Computer erwarten würde.

(aw)

Info: Interface Age, Josephsburgstr. 6, 8000 München 80, Preis 75 Mark

## Testen und dann erst kaufen!

Die Firma Wiesemann bietet Ihren Kunden einen neuartigen Service an: Mit dem Kauf der Interface-Typen 92000, 92000G, 92008 und 92008G erwerben Sie ein 14tägiges Rückgaberecht. Sollte Ihnen das Interface nicht gefallen, können Sie es einfach an die Firma Wiesemann zurückschicken. Sie müssen lediglich die Versand- und Nachnahmekosten tragen. Sie bekommen dann, nach Aussagen der Firma, per Überweisung Ihr Geld umgehend zurück. Abzüglich der Versandspesen. Die Rücknahmegarantie gibt nur die Firma Wiesemann selbst. Die Garantie erstreckt sich nicht auf Händler. Es ist also wichtig, daß man das Interface direkt bei Wiesemann bestellt, wenn man diesen Service in Anspruch nehmen will.

Info: Wiesemann Mikrocomputertechnik, Winchenbachstr. 3-5, 5600 Wuppertal, Tel. (02 02)50 50 77

## Neues vom Turbo Access

Die Firma Roßmüller bietet seit kurzem zwei Programme für den 1541-Floppy-Beschleuniger Turbo Access an. Es handelt sich dabei um ein menügesteuertes Kopierprogramm für einzelne Dateien und ein Disketten-Backup. Ein kurzer Test in der Redaktion brachte erstaunliche Werte. Beide Programme nutzen die Vorteile der parallelen Datenübertragung aus und kopieren einzelne Dateien oder ganze Disketten mit erstaunlicher Geschwindigkeit. Das FileCopy ist auf die Verwendung einer 1541 abgestimmt und erleichtert durch einige Sonderfunktionen die gesamte Arbeit mit dem Laufwerk. Es können DOS-Befehle gesendet und das Directory angezeigt werden. In einem »Scratch-Modus« fragt das Programm nach, welche der Dateien auf einer Diskette gelöscht werden sollen. Das

Disketten-Backup-Programm setzt das Vorhandensein von zwei Laufwerken voraus. Mit ihm lassen sich Kopien ganzer Disketten in einer Zeit von 22 Sekunden herstellen. Die Zieldiskette soll dabei gleich mitformatiert werden. Nach Auskunft des Herstellers werden von dem Kopierprogramm alle Daten zwischen der Spur 1 und der Spur 35 kopiert. Die Umgehung verschiedener Arten des Kopierschutzes soll nicht die Absicht des Programmierers gewesen sein. Beide Programme werden, nach Angabe der Firma Roßmüller, im Rahmen des Kundenservice an die Besitzer von Turbo Access auf Anforderung versendet. Gleichzeitig wurde eine Turbo-Access-Version für den C 128 angekündigt. Besitzer des alten Turbo Access benötigen dafür lediglich eine Erweiterungsplatine, deren Preis allerdings noch nicht feststand.

(aw)

Info: Roßmüller GmbH, Finkenweg 1, 5309 Meckenheim 1, Tel. (0 22 25) 144 88

## Kopien aus dem Automaten

Einen neuen Verkaufsweg von Software für den C 64 will die Firma Astech Computer einschlagen: Wenn Sie ein C 64-Programm kaufen wollen, holt Ihnen der Händler keine Diskette mehr aus dem Lager. Sie müssen nur eine unformatierte Diskette in einen Automaten schieben, genügend Geld einwerfen, das Programm auswählen und in kurzer Zeit haben Sie eine Kopie des Programms in Händen. Inklusive Anleitung und Kopierschutz. Das Softwareangebot umfaßt etwa 20 Programme pro Automaten (Bild).

Jeder Kopierautomat ist über Btx mit dem Astech-Zentralcomputer verbunden. Dieser Computer fragt jeden Abend die Verkaufszahlen der einzelnen Automaten ab. Sollte sich herausstellen, daß ein Programm nicht den gewünschten Umsatz bringt, kann es innerhalb eines Tages gegen ein neues ausgetauscht werden. Ebenfalls über Btx.

Der Vorteil gegenüber den bekannten Kopierautomaten, die von einem EPROM Kopien auf Diskette herstellen, liegt in der Art der Händlerabrechnung. Ein Händler braucht nur für schon verkaufte Kopien zu bezahlen. Es besteht also nicht das Risiko, Ladenhüter einzukaufen. Außerdem kommt dem Händler der Zinsgewinn vom Verkaufserlös zugute: Einmal pro Monat bekommt der Händler die Rechnung über die verkauften Kopien.

Der Preis des Astech-Copy-Corners liegt bei 8500 Mark (netto).

Info: Astech Computer, Am Wall 183, 2800 Bremen 1, Tel. (04 21) 32 40 57

## Neue Monitore

Eine neue Serie von Monitoren bietet Microscan an:

Der MS-1265/P42 und MS-1265/PLA haben beide einen Composite-Eingang. Der Unterschied liegt in der Luminanzschicht. Der P42 hat einen grünen Bildschirm und kostet 399 Mark. Der PLA-Typ hat einen Bernstein-Bildschirm. Der Preis: 419 Mark.

Das Modell MS-1265/PPC besitzt einen IBM-kompatiblen TTL-Eingang.

Alle Typen sind mit einem Ton-Verstärker und Lautsprecher, Reflexionsschutz und Schwenkfuß ausgestattet.

Info: Microscan, Überseering 31, Postfach 6017 05, 2000 Hamburg 60, Tel. (0 40) 63 20 03-0

## Bücher für Anwenderprogramme

Zum Preis von 19,80 Mark bietet der Stefan Gundel Verlag seit Anfang dieses Jahres eine Buchreihe an, die die Anleitung des Herstellers ergänzen soll. Erhältlich sind momentan Bücher für die Programme Datamat, Faktumat, Logo, Multiplan, Oxford-Pascal, Pascal 64, Protext, Simons Basic, Superbase 64, Textomat, Vizawrite und Wordpro 3 +. Die Reihe soll laufend erweitert werden.

(og)

Bezugsadresse: Verlag Stefan Gundel, Postfach 28 09, 8500 Nürnberg 1.

## Software-Update für den Epromking

Besitzer des Eprom-Programmiergerätes »Epromking« der Firma Kalawski sollen ab sofort die neueste Version der Steuersoftware erhalten können. Gegen Einsendung von 20 Mark (als Schein, Scheck oder per NN) wird, nach Aussage der Firma, die um einige Funktionen erweiterte Software versendet. Zu den neuen Fähigkeiten soll beispielsweise die Programmierung des 27C256 sowie des neuen 16-KByte-Proms von Commodore (im C 16, C 116, Plus 4, C 128 verwendet) und anderer Typen, gehören. Auch EEPROMs stehen nun im programmierbaren Repertoire. Außerdem wurde das gesamte Programm überarbeitet und in vielen Punkten erweitert (Verschieberoutinen für Maschinenprogramme in EPROMs, Schnell-Programmier-Modus). Die bewährte Menüstruktur wurde beibehalten und verbessert.

Info: Ing. Büro Kalawsky, Fr.-Ebert-Str. 37, 6108 Weiterstadt 1, Tel. 06150/2541

## Computer hilft Behinderten

Die Firma Laroche & Kurrer bietet, nach eigenen Aussagen, ein computergesteuertes Textsystem für Behinderte an. Das Schreibsystem soll es Körperbehinderten ermöglichen, eine moderne Schreibmaschine (Triumph) zu bedienen. Die Eingabe der Buchstaben wird dabei mit Hilfe eines Computerprogramms vorgenommen. Dieses Programm, in einem Steuergerät untergebracht, stellt die zu schreibenden Buchstaben in besonders deutlicher Form dar. Ein heller Rahmen markiert eines der Zeichen. Das so gekennzeichnete Schriftsymbol wird mit Betätigung der Auslösetaste auf der Schreibmaschine ausgegeben. Das Bedienelement soll dabei (nach dem Grad der Behinderung) aus fünf verschiedenen Ausführungen auswählbar sein. Die Arbeitsgeschwindigkeit des gesamten Systems ist vom Benutzer, entsprechend seinen Anforderungen, einzustellen.

Info: Laroche & Kurrer, Mainstr. 49, 8000 München 2, Tel. (0 89) 53 47 08

Der Computer (hier der C 64 als Leibniz I von VAM) macht vor niemanden halt. Seien es nun die Punker, die mit Begeisterung selbst programmieren, oder die Nonne, die für Ihr Kolleg nach Schulcomputern sucht.

## DFÜ-Herbstferien

CompuCamp, eine Gesellschaft für Computerferien und EDV-Ausbildung, bietet ein Ferienlager für Hacker und solche die es werden wollen an. DFÜ-Anfänger sollen im Individualunterricht an das Thema Mailboxen und Modem herangeführt werden. In speziellen Hardware-Bastelkursen wird gezeigt, wie man einen Akustikkoppler selbst baut. CompuCamp wirbt: »Selbst der Newcomer hat am Ende eines ein- oder mehrwöchigen Kurses das nötige Wissen, Gerät und die richtige Software im Abreisegepäck«.

Info: CompuCamp, Goßlerstr. 21, 2000 Hamburg, Tel. 0 40/86 23 44, Mailbox 0 59 31/ 18948

## Versüßter C 64

Eine gelungene Weiterentwicklung, zumindest was die Joule (Kalorien) anbelangt, präsentierte uns der Leser Dietrich Grimm. Ein Mindener Konditor fertigte ein Zuckergußmodell des C 64 an, und eine Abschlußklasse aus dem selben Ort schenkte es ihrem Klassenlehrer, der als Computer- und Kuchenfan bekannt ist. Kommentar der Hausfrau: »Von solchen Computern dürfen mir mehr ins Haus!«

(aa)

# Leserforum \[12-13\]

## Astrologieprogramme gesucht

Ich suche Programme, beziehungsweise Algorithmen zur Astrologie, speziell auch zur Bestimmung der Gestirnstände. Gerne bin ich auch zur Zusammenarbeit mit Gleichgesinnten bereit.

Elisabeth Cryns

## Software für EAN-Code-Leser gesucht

Ich suche Software und Drucker, um mit meinem C 64 den Strichcode EAN 13 auf Etiketten zu drucken.

Wer hat bereits solche Software geschrieben (was ja nicht so schwierig sein kann), und wer hat bereits den C 64 in Verbindung mit EAN 13 benutzt? Bei dem Drucker sollte es sich um einen gängigen Matrix- oder Tintenstrahldrucker handeln, der auch zur Textverarbeitung genutzt werden kann.

Ralf Kammermeier

## Druckbefehle bei Multiplan?

Wie kann man innerhalb des Programms »Multiplan« für den C 64-Druckersteuerzeichen (zum Beispiel für EPSON-Drucker) eingeben, um so ein etwas anderes Druckbild zu erhalten?

Thomas Prym

## Undokumentierter Fehler?

Bei der Programmierung von sequentiellen Dateien gibt mir der Computer manchmal einen »FILE DATA ERROR« aus, den ich aber in keinem Handbuch finde. Welche Ursache hat dieser Fehler? Jens Richter

TODO ASIDE

## Fragen Sie doch

Selbst bei sorgfältiger Lektüre von Handbüchern und Programmbeschreibungen bleiben beim Anwender immer wieder Fragen offen. Viel mehr Fragen ergeben sich bei Computer-Interessenten, die noch keine festen Kontakte zu Händlern, Herstellern oder Computerclubs haben. Sie können der Redaktion Ihre Fragen schreiben oder Probleme schildern (am einfachsten auf der Karte »Lesermeinung«). Wir veranlassen, daß sie von einem Fachmann beantwortet werden. Allgemein interessierende Fragen und Antworten werden veröffentlicht, die übrigen brieflich beantwortet.

## Modul-Probleme?

Ich möchte mit dem Buch »Musik auf dem Commodore 64« die Musikprogrammierung lernen. Um die Programme auf der beiliegenden Diskette laufen zu lassen benötigt man Simons-Basic, wovon ich das Modul besitze. Gleichzeitig möchte ich aber auch den JEN-Music-Computer »Musipack C 64« verwenden. Nun stehe ich vor dem Problem, jedesmal das Simons-Basic-Modul en tfernen zu müssen, damit ich das Interface vom Musipack dafür einstecken kann. Dies führt jedoch auf die Dauer zu einem zu großen Verschleiß der Module.

Nun habe ich zufällig einen Adapter gesehen, mit dem man zwei Module an den C 64 anschließen kann. Nur, zu dessem Preis bekomme ich auch schon einen gebrauchten C 64. Wer weiß Rat?

Hermann Schneider

Es kommt öfter vor, daß die Preise für Zusatzhardware in keinem vernünftigen Verhältnis zu dem des C 64 stehen. Dies liegt jedoch meistens daran, daß diese Produkte (wie in diesem Fall wahrscheinlich auch) nicht sehr gefragt sind. Daran können wir jedoch leider auch nichts ändern. Sie haben daher prinzipiell zwei Möglichkeiten: Entweder Sie bauen sich den erforderlichen Adapter selber oder Sie — und dies ist in diesem Fall wohl die einfachere Lösung — besorgen sich die Diskettenversion von Simons Basic. Die muß man zwar vor jeder Benutzung laden, dafür kann aber das Musikpack-Interface im Modulschacht bleiben.

## Probleme mit Reset-Taster

Ich habe vor einiger Zeit Ihren Vorschlag aus Ausgabe 7/85 »Einfacher Reset-Schalterselbst gebaut« aufgegriffen. Ich mußte jedoch leider feststellen, daß dieser Schalter nicht funktionstüchtig ist. Überarbeiten Sie bitte Ihre Pläne, da ich vermute, daß Commodore die Reset-Leitung ab Baujahr ’85 nicht mehr belegt hat. Dirk Kruschewski

Commodore hat offensichtlich bei der neuesten Serie des C 64 eine kleine Änderung am seriellen Bus vorgenommen. Eine Diode am Ausgang der Reset-Leitung wirkt wie eine elektronische Einbahnstraße. Der Impuls zum Zurücksetzen der Floppy kann zwar hinaus, in umgekehrter Richtung — mittels eines kleinen Tasters an der seriellen Buchse — funktioniert der Reset jedoch nicht mehr.

Leider läßt sich nicht feststellen, bei welchem C 64 der Reset funktioniert — es hilft nur probieren.

## DOS 5.1 mit Hypra-Load?

Besteht die Möglichkeit, DOS 5.1 zusammen mit »Hypra Load Perfekt« in ein EPROM zu brennen? Dieter Bast

## Pearl-Compiler für C 64?

Gibt es für den C 64 einen Pearl-Compiler? Des weiteren suche ich einen Emulator und Cross-Assembler für den 6800-Prozessor.

M. Volkmer

## Comal-Gruppe Deutschland

Die Comal-Gruppe Deutschland hat es sich zur Aufgabe gemacht, die Verbreitung der Programmiersprache Comal nach Kräften zu unterstützen. Es steht eine große Sammlung an Programmen sowohl für die Version 0.14 als auch für das neue Comal 80 zur Verfügung. Eine eigene Clubzeitschrift bringt Kurse, Programme und Tips & Tricks. Eine Comal-Mailbox ist unter der Nummer 04683/554 zu erreichen.

S. Bauer

Comal Gruppe Deutschland, S. Bauer, Kaufgasse 4, 7204 Wurmlingen, Tel. 0 74 61/ 12543. Bei schriftlichen Anfragen bitte Rückumschlag beilegen.

## Textverarbeitung mit Formeln

Ich besitze einen Seikosha GP-550-Drucker und suche ein Textverarbeitungsprogramm, mit dem ich mathematische Sonderzeichen ausdrucken kann. Wer hat ferner eine Hardcopy-Routine, die auch mit Simons Basic zusammenarbeitet?

Ausgabe 8/85

Johann Bierschneider

Grundlage für die Darstellung mathematischer Symbole ist die Möglichkeit, eigene Steuerzeichen definieren zu können. Beim Seikosha GP-550 erreicht man das mit Hilfe des Grafikmodus. Durch geeignete Grafikdaten sollte es gelingen, das gewünschte Sonderzeichen zu drucken. Die genaue Vorgehensweise entnimmt man dem Handbuch des Druckers, insbesondere den im Anhang aufgeführten Beispielen.

Zusammenarbeit mit einem Textverarbeitungsprogramm erfolgt dann in der Regel über die Definition einer geeigneten Zahlensequenz, die angeführt von der Grafik-Einschaltsequenz (siehe Handbuch Kapitel 7) die oben ermittelten Daten enthält.

Beim Aufruf eines solchen Zahlenstrings schickt das Textverarbeitungsprogramm dem Drucker die darin enthaltenen Steuer- und Symboldaten.

Will man lediglich ein normales Zeichen hoch- oder tiefgestellt ausdrucken, schaltet man über eine Datensequenz die im GP-550 eingebaute Sub-/Superscriptschrift ein (siehe Handbuch).

Frank Jörgens

## C 16: Bilder auf Datasette?

Wer kann mir sagen, wie man beim C 16 fertige Bilder außer mit Shapes auf Datasette speichert?

Hardeen Hornburg

Das Abspeichern von Grafiken ist sehr einfach:

Zuerst löscht man den Grafikspeicher mit »GRAPHIC 1,1«. Hat man einen Teil der Grafik fertig und will sie abspeichern, geht man mit »GRAPHIC 0,1« in den Textmodus zurück und gibt den Befehl MONITOR ein. Nun kann man die Grafik mit »S " Grafikname",l,2000,3FFF« abspeichern. Weiter geht es mit »S"Farbname",1,1COO,1FFF« um die Farbe abzuspeichern und zu guter Letzt müssen auch die Luminanzwerte der Farben gesichert werden: »S "Luminanzname" ,1,1800,1BFF«. Damit sind alle Komponenten der Grafik abgespeichert.

Möchte man das Bild wieder laden, dann muß zunächst der Grafikspeicher wieder gelöscht werden mit »GRAPHIC 1,1 : GRAPHIC 0,1« und anschließend geht man wieder in den Monitor. Jetzt lädt man die Files wieder in umgekehrter Reihenfolge mit »L"filename",1« in den Speicher. Hendrik Voss

## Preiswerte Umschaltplatine

Die Umschaltplatine aus Ausgabe 7/85,. Seite 41 (»Aus eins mach vier«) können Sie ab sofort zum Preis von 18 Mark (nur Platine) bei mir beziehen.

Andreas Gerzen

Andreas Gerzen, Marienstr. 14, 4018 Langenfeld

## Programme RENUMBERn?

Können die Listings nicht vor dem Abdruck RENUMBERt werden? Dann könnte man eine automatische Zeilennumerierung benutzen.

Michael Dick

Es ist technisch natürlich kein Problem, jedes BASIC-Programm vor dem Abdruck mit dem »RENUMBER«-Befehl irgendeiner Basic-Erweiterung in eine schönere Form zu bringen. Dann müßten aber auch die Zeilenangaben in den Programmbeschreibungen entsprechend abgeändert werden. Dies wäre jedoch eine neue, unnötige Fehlerquelle. Da die Zeilennummern auch ein Mittel zur übersichtlichen Programmierung sein können, setzen sie manche Programmierer zur Kennzeichnung von Unterprogrammen ein (zum Beispiel Unterprogramm 1 ab Zeile 1000, Unterprogramm 2 ab 2000 und so weiter).

Die Idee ist sehr gut, wir müssen diese Anregung jedoch an unsere Programmeinsender, mit der Bitte sie zu beherzigen, weitergeben.

## Floppy-Laufwerk reinigen?

Welche Möglichkeiten habe ich, meine Floppy 1541 zu reinigen, um Lese- und Schreibfehlern vorzubeugen, und wie bekomme ich das Laufwerk 30 Sekunden lang zum Laufen, wenn ich eine Reinigungsdiskette benutzen will?

Jack Reis

Sie können das Laufwerk für 30 Sekunden in Bewegung halten, wenn Sie es einfach fünfmal hintereinander initialisieren: OPEN 1,8,15 : FOR 1 = 1 TO 5 : PRINT#1,"I" : NEXT : CLOSE 1

Von der übermäßigen Benutzung von Reinigungsdisketten möchten wir aber unbedingt abraten, da diese den Schreib-/ Lesekopf mit der Zeit so verschleißen, daß er unbrauchbar wird. Greifen Sie daher bitte nur dann zur Reinigungsdiskette, wenn sehr häufig Lese- oder Schreibfehler auftreten und Sie sicher sind, daß dies am verschmutzten Schreib-Lesekopf liegt. Benutzen Sie Reinigungsdisketten unter keinen Umständen vorbeugend, wenn Ihnen etwas an Ihrer 1541 liegt.

## Midi-Interface für C 64

Wo bekommt man ein Midi-Interface zum Anschluß des C 64 an den SynthesizerKorg Poly 61M?

Mathias Heck

Ausgabe 8/85

Das derzeit wohl preiswerteste Midi-Interface für den C 64 wird von der Firma Musik-Elektronik Butterweck, Hochstraße 75,4630 Bochum 6, zum Preis von 96 Mark vertrieben. Ich benutze dieses Interface selbst und kann sagen, daß es mit praktisch allen Midi-Programmen einwandfrei zusammenarbeitet. Für den Korg Poly 61 wird keine spezielle Software angeboten, man kann aber alle Sequenzer-Programme einsetzen. Noch ein Tip: Die Zeitschrift »Keyboards« bringt in fast jeder Ausgabe Midi-Software. Reinhard Hellbach

## Veröffentlichung auch ohne Drucker?

Ich würde Ihnen gerne ein Programm zur Veröffentlichung einsenden, habe aber keinen Drucker um es auszudrucken.

Holger Kuhfuß

Wir freuen uns natürlich über jede Programmeinsendung, besonders wenn sie gut und ideenreich ist. Die Entscheidung, ob wir Ihr Programm abdrucken, hängt nicht vom Vorhandensein eines Listingausdrucks ab! Ausschlaggebend ist einzig und allein die Qualität des Programms und der Beschreibung. Natürlich erleichtert uns ein Listing die Arbeit mit und an Ihrem Programm. Wichtig ist jedoch, daß Sie einer solchen Einsendung einen Datenträger mit dem Programm beilegen.

Ein wichtiger Faktor bei der Beurteilung der Zusendungen ist die Güte der Anleitung, denn das beste Programm ist ohne eine gute Anleitung nichts wert. Diese sollte möglichst anschaulich sein und Ihr Programm ausführlich erläutern.

TODO ASIDE

## Leser fragen — Willi Brechtl antwortet Hallo liebe Leser, hier bin ich wieder.

> Hallo liebe Leser, hier bin ich wieder, um Eure Fragen zu beantworten.

Ich werde mich hauptsächlich um Leserbriefe kümmern, die nicht in das sachliche Einerlei des Leserforums passen. Zum Beispiel Fragen, die sich aus dem einen oder anderen Grund nur ganz subjektiv beantworten lassen. Oft genug tauchen auch Probleme auf, die sich nicht mit einem kurzen Antwortsatz abhandeln lassen. Und wenn selbst eine längere Antwort im Rahmen des Leserforums nicht mehr ausreichen würde, dann ist das ganz klar ein Fall für Willi Brechtl.

Also: Wenn Sie als Anfänger Probleme mit Computer, Software oder Handbuch haben, dann wenden Sie sich in Zukunft doch einfach vertrauensvoll direkt an mich.

## Einsteiger-Literatur zum C 64 gesucht

Ich habe seit kurzem einen C 64 und möchte damit möglichst schnell programmieren lernen. Welche Bücher würden Sie mir dazu empfehlen?

Annegret Stör

Das Angebot an Literatur zum C 64 ist sehr groß und speziell für den Computer-Neuling praktisch undurchschaubar. Hier ist eine Auswahl empfehlenswerter Lehrbücher für den Einsteiger:

Einen kompletten, ausführlichen Grundlehrgang in Basic gibt das Buch »Basic-Grundkurs mit dem C 64«, Markt & Technik Verlag, Haar bei München, 376 Seiten, 44 Mark.

Eine für den absoluten Neuling empfehlenswerte Einführung in den Umgang mit dem C 64 ist »64 für Einsteiger«, Verlag Data Becker, Düsseldorf, 214 Seiten, 29 Mark.

Ebenfalls an den Einsteiger wendet sich »Commodore 64 leichtgemacht«, Sybex Verlag Düsseldorf, 176 Seiten, 28 Mark.

Einen nach Basic-Befehlen geordneten, leichtverständlichen Überblick über das Commodore-Basic mit vielen Beispielen bieten gleich zwei Bücher:

Das »Commodore 64 Basic-Handbuch«, Sybex Verlag, Düsseldorf, 204 Seiten, 32 Mark, und »Basiswissen C 64«, Westermann Verlag, Braunschweig, 212 Seiten, 29,80 Mark.

Das Buch »Der Commodore 64 für Hobby, Schule und Beruf«, Carl Hanser Verlag, München, 338 Seiten, 48 Mark, bietet eine praxisorientierte, aber leichtverständliche Einführung in die Programmierung.

Anhand von Beispielen lernt man beim Buch »Programmieren — keine Ahnung?«, Birkhäuser Verlag, CH-Basel, 126Seiten, 29,80 Mark.

## Ghostbusters-Problem gelöst

Die Original-Kassette von »Ghostbusters« läuft auf meinem C 64 nicht. Woran kann das liegen?

Stefan Bardos

Mit ziemlicher Wahrscheinlichkeit ist der Tonkopf Ihrer Datasette verstellt. Dies ist nicht nur allgemein die häufigste Fehlerursache bei der Datasette, sondern es reagieren auch alle Activision-Programme, wohl durch den verwendeten Kopierschutz, sehr empfindlich darauf.

Nehmen Sie also einen kleinen Schraubenzieher mit ungefähr 2 mm Klingenbreite. Entfernen Sie die Kassette aus Ihrer Datasette und drücken Sie die »Play«-Taste. Positionieren Sie den Schraubenzieher in dem kleinem Loch über der »Rewind«-Taste, in dem sich eine Schraube zur Tonkopfjustierung befindet. Drehen Sie den Schraubenzieher um etwa eine Viertelumdrehung in eine beliebige Richtung, die Sie sich aber merken müssen. Probieren Sie jetzt, das Programm zu laden. Wird der Ladevorgang jetzt früher als normalerweise abgebrochen oder erscheint gar ein »Out of Memory Error«, dann haben Sie in die falsche Richtung gedreht. Also nochmals den Schraubenzieher ansetzen, die Vierteldrehung rückgängig machen (die Richtung wissen Sie doch noch?) und jetzt eine viertel Drehung in der anderen Richtung ausprobieren. Eventuell müssen Sie mehrmals eine viertel Drehung dazugeben, bis es funktioniert. Mit dieser einfachen, wenn auch etwas zeitaufwendigen Methode bekommen Sie die richtige Einstellung Ihrer Datasette in fast allen Fällen heraus.

Thomas Staudt

# Quickbyte II - das Kraftpaket \[14\]

> Der Quickbyte II läutet eine neue Epoche der EPROM-Programmierung ein. Selbst Neulinge auf diesem Gebiet können, dank der hervorragenden Bedienungsfreundlichkeit, schon bald ihre eigenen EPROM-Module herstellen.

Vergleicht man die Fähigkeiten heutiger EPROM-Programmiergeräte mit denen der ersten Generation, so mutet das wie ein Vergleich zwischen einem Doppeldecker und einer Concorde an. Bei den ersten Geräten war es noch Usus, alle notwendigen Programmierspannungen und EPROM-Typen (es waren meistens nur zwei oder drei) mit Schaltern und Hebelchen einzustellen. Ein EPROM-Brenner gehört heute aber schon fast zur Grundausstattung vieler Computer-Besitzer.

Das einzige, was beim Quickbyte II (siehe Bild) noch an die Pioniertage der EPROM-Programmierung erinnert, ist der offene Blick auf die sauber aufgebaute Platine (nach Aussage des Herstellers soll ein Gehäuse in Zukunft mitgeliefert werden). Alle anderen Funktionen der Hardware muten sehr professionell an. Der Aufwand, der zur Gewinnung der Programmierspannung getrieben wurde, ist hoch, denn der Quickbyte II wird am Expansion-Port (durchgeschleift) des C 64 angeschlossen. Mit dem Anschluß am Expansion-Port ist natürlich der Vorteil verbunden, die Treibersoftware ebenfalls auf dem EPROM-Brenner, in Form eines Autostart-EPROMs, unterbringen zu können. Gleich nach dem Einstecken des Quickbyte II meldet sich diese Software mit einem Menü, das schon beim ersten Durchlesen der Unterpunkte einen Vorgeschmack auf die Leistungsfähigkeit dieses Gerätes gibt. Kaum hat man die Punkte des Hauptmenüs durchgelesen, schaltet Quickbyte II selbständig in ein zweites Menü um und fordert zur Wahl eines bestimmten EPROM-Typs auf. Zu seinem Repertoire gehören die in der Tabelle dargestellten Typen. Besonders bemerkenswert ist, daß auch elektrisch löschbare EPROMs und die von Commodore verwendeten Firmware-ROMs (im Computer/ Floppy/Drucker eingebaut) zu den lesbaren, Typen gehören. Kaum ein EPROM-Brenner, der ohne eingebauten Monitor ausgeliefert wird. Beim Quickbyte II hat dieser Monitor aber professionelle Qualitäten (Tabelle). Ebenso der Modul-Modus, der es erlaubt, bis zu 128 KByte lange EPROM-Auto-Start-Programme herzustellen. Auch der in mehrfacher Hinsicht intelligente Programmiermodus, der mit den immer noch recht teuren EPROMs sehr schonend umgeht, hebt den Quickbyte II aus dem weiten Feld der Konkurrenten heraus. Der Quickbyte II unterscheidet zwischen drei Programmierzeiten, die er sich, je nach Qualität des eingesetzten EPROMs, selbst sucht. Alle leeren Bytes (FF) werden nicht mitprogrammiert, sondern übersprungen (Urzustand eines EPROMs). Da sofort nach dem Schreiben ein Verivy durchgeführt wird, werden fehlerhafte Bytes unmittelbar erkannt. Der Quickbyte II erhöht dann selbständig die Programmierzeit etwas und brennt das betreffende Byte nochmals. Dadurch wird ein optimaler Kompromiß zwischen Schonung des EPROMs, Geschwindigkeit und Datensicherheit erreicht.

Mit seiner üppigen Funktionsausstattung und dem gelungenen Hardware- und Software-Konzept ist der Quickbyte II sicherlich einer der besten EPROM-Brenner für den C 64. Der Preis von 298 Mark ist für dieses Kraftpaket gerechtfertigt, auch wenn es wünschenswert wäre, ihn preiswerter zu erhalten.

(aw)

Info: Jann Datentechnik, Glimmerweg 22,1000 Berlin 47,298 Mark

# Ein Monitor ist genug \[16-17\]

> Der C 128 benötigt eigentlich zwei Monitore: einen mit RGB- und einen mit Composite-Eingang. Mit dieser Bauanleitung für eine automatische Signalumschaltung reicht allerdings ein Monitor aus, wenn Sie im 80-Zeichen-Modus auf Farbe verzichten können.

Kaum hatten wir die ersten C 128 in der Redaktion stehen, ärgerten wir uns über das lästige Umstecken des SW-Monitors. Composite-Ausgang im 40-Zeichenmodus, RGB im 80-Zeichenmodus. »So nicht!«, dachten wir und überlegten uns eine Schaltung, die Ihnen und uns in Zukunft die ewige Stöpselei erspart.

Schaut man sich die Belegung der beiden Video-Ausgänge des C 128 genauer an, fällt auf, daß beide Buchsen einen Luminanz(Helligkeits)-Ausgang haben. Beim RGB-Ausgang wird das Luminanz(Helligkeits)-Signal im Handbuch nur als Monochromsignal bezeichnet.

Mit einem Luminanzsignal kann jeder gebräuchliche SW-Monitor angesteuert werden. Auch der 1701/1702-Monitor von Commodore hat einen Luminanzeingang. Bei den letzteren kann auch der FBAS-Eingang an der Frontseite mit einem Luminanzsignal beschältet werden. Man muß dann nur den Farbregler auf Schwarz-weiß drehen.

Die einfachste Methode, ein und denselben Monitor sowohl an den RGB- als auch an den Composite-Ausgang anzuschließen, ist die Verwendung eines Adaptersteckers. Dazu wird an den RGB-Ausgang ein kurzes Zwischenkabel mit RGB-Stecker und Composite-Buchse angeschlossen. Bei der 80-Zeichendarstellung muß der Monitor an das

Zwischenkabel angeschlossen werden, bei 40-Zeichendarstellung und C 64-Modus an den Composite-Ausgang des C 128.

Das bringt allerdings einige Probleme mit sich. Erstens wird das Umstecken schnell lästig und zweitens ist der Kontaktverschleiß an den Steckern und Buchsen sehr hoch. Es muß also eine automatische, verschleißfreie Umschaltung her.

Automatische Umschaltung, aber wie? Über dieses Problem haben wir uns Gedanken gemacht. Wir wollten Ihnen eine optimale Lösung anbieten, die einfach nachgebaut werden kann. Nach einigen Ideen wie User-Port-Schaltungen oder Logik-Bausteinen an der MMU und den beiden Videoteilen kamen uns der richtige Einfall: die 40/80-Taste. Diese Taste, die direkt auf den Betriebsmodus Einfluß nimmt, müßte doch für die Umschaltung verwendbar sein. Tatsächlich wirkt diese Taste, ein lxEIN-Schalter (kein Taster), auf den Pin 48 der MMU. Dies ist der Eingang, über den die MMU den 40- oder 80-Zeichen-Modus nach dem Einschalten oder nach einem Reset initialisiert. Im Grundzustand hat dieser Eingang logischen High-Pegel.

Ist der 40/80-Zeichen-Eingang der MMU unbeschaltet, wird beim Initialisieren der 40-Zeichen-Modus aktiviert, andernfalls der 80-Zeichen-Modus. Die 40/80-Taste schaltet den MMU-Eingang auf Masse, wenn der 80-Zeichen-Modus aktiviert werden soll. Man braucht also nur die Leitung vom Schalter zur MMU anzapfen, und schon ist man anhand des Logikpegels über den Darstellungsmodus nach dem Einschalten oder einem Reset informiert. 0V bedeutet 80-Zeichen-Modus, +5V zeigt die 40-Zeichendarstellung an. Da die Anschlüsse des 40/80-Schalters aus der Grundplatte herausragen, ist das »Anzapfen« ein leichtes: Das Schaltkabel für die Umschaltelektronik muß nur an den Pin des 40/80-Zeichenschalters angelötet werden, der der C 128-Rückseite zugewandt ist.

## Automatische Umschaltung

Die Umschaltung der Luminanzsignale vom RGB- und Composite-Ausgang erfolgt einfach über ein kleines Reed-Relais (1xUM) in einem DIL-Gehäuse. Diese Relais brauchen bei 5V Schaltspannung einen Schaltstrom von etwa 10 bis 20 mA. Zuviel für eine direkte Ansteuerung mit dem MMU-Eingang. Der Pegel vom MMU-Eingang muß also verstärkt werden. Ein TTL-LS-Hex-Inverter ist billig und besitzt eine ausreichende »Verstärkung«. Der Low-Power-Schottky-Typ sollte nicht durch einen normalen TTL-Baustein ersetzt werden, da der mehr Versorgungsstrom benötigt und einen kleineren Eingangswiderstand besitzt.

Die Umschaltplatine wird über Pin 2 des Kassetten-Ports mit +5V versorgt (siehe Handbuch). Es sind also nur zwei Drähte anzulöten. Verwenden Sie dazu am besten Schaltlitze, die knickfester als Draht ist. Der Lötkolben sollte eine Leistung von 16 Watt haben und gut vorgeheizt sein. Als Lötzinn eignet sich nur sogenanntes Elektroniklot.

Die Schaltung umfaßt nur wenige Teile (Schaltplan, Bild 1). Der Aufbau sollte deshalb nicht zu schwer sein. Haben Sie die Schaltung fertig aufgebaut (Bild 2), sollten Sie diese vor dem Anschluß an den Computer mit einer 4,5 Volt Batterie überprüfen. Schließen Sie dazu Masse an den Minuspol der Batterie und + 5V an den Pluspol der Batterie an. Wenn Sie nun die Steuerleitung an den Minuspol der Batterie legen, sollten Sie ein leises Klicken des DIL-Relais hören. Haben Sie nur einen Ersatztyp des angegebenen Relais bekommen, lassen Sie sich unbedingt die Anschlußbelegung davon zeigen. Der Diodentyp ist unkritisch. Die Diode dient nur zum Abfangen der Induktionsspannung, die beim Abschalten des Relais auftritt. Die Polung der Induktionsspannung ist der angelegten Spannung entgegengesetzt.

Ist die Schaltung soweit in Ordnung, können Sie die Stecker anschließen. Verwenden Sie dazu einadriges, abgeschirmtes Kabel. Die Abschirmung wird nur mit Pin 2 des Composite-Steckers verbunden und nicht mit dem Steckergehäuse. Entsprechend mit Pin 1 des RGB-Steckers. Die Steckerbelegungen im Schaltplan zeigen die Lötseiten. Hier die genaue Belegung der Videobuchsen des C 128:

TODO TABLE

RGB-Ausgang
Pin	Signal	Pegel Impedanz
1	Masse	0V	—
2	Masse	ov	—
3	Rot	0/5V	75 Ohm
4	Grün	0/5V	75 Ohm
5	Blau	0/5V	75 Ohm
6	Intensität	0/5V	75 Ohm
7	Luminanz	0-3VS£	• 75 Ohm
8	Horiz. Synch.	0/5V	75 Ohm
9	Vert. Synch.	0/5V	75 Ohm
Composite-Ausgang
Pin	Signal	Pegel Impedanz
1	Lumin./Synch. lVss		75 Ohm
2	Masse	0V	—
3	Äudio-Ausg.	lVss	—
4	Composite	lVss	75 Ohm
5	Audio-Eing.		—
6	Chrominanz	lVss	75 Ohm

Für den Monitoranschluß ist eine Cinch-Buchse zum Aufbau vorgesehen. Die Buchse wird einfach auf der Platine angelötet. Der Außenkontakt wird mit Masse verbunden, der Innenleiter mit dem Signal.

Vor der Inbetriebnahme sollten Sie noch einmal alle Anschlüsse genau überprüfen. Ist alles in Ordnung, schließen Sie das Steuerkabel und die Spannungsversorgung an den C 128 an. Verbinden Sie den SW-Monitor mit der Cinchbuchse und die beiden Videostecker mit dem C 128. Dann können Sie den Computer endlich einschalten. Wenn Sie alles richtig angeschlossen haben, erscheint die Einschaltmeldung auf dem Bildschirm. Entweder im 40- oder 80-Zeichen-Modus, je nachdem, wie die 40/80-Taste geschaltet ist. Erscheint im 80-Zeichenmodus kein Bild, drehen Sie das Trimmpoti und den Helligkeitsregler des Monitors voll auf.

Der Trimmer dient zur Abschwächung des Luminanzsignals vom RGB-Ausgang, da dieses Signal stärker als das des Chrominanz-Ausgangs ist. Der Abgleich ist sehr einfach:

1.	C 128 einschalten
2.	Mit ESC X den 40-Zeichenmodus einschalten (40/80-Taste entrasten) 3. Am Monitor Helligkeit und Kontrast für 40-Zeichen-Modus einstellen
4.	Mit ESC X 80-Zeichenmodus einschalten und 40/80-Taste drücken
5. Mit dem Trimmpoti die Helligkeit auf den 40-Zeichenmodus anpassen.

In der gleichen Weise können Sie die Helligkeit des 80-Zeichenmodus an die des C 64-Modus anpassen. Sie müssen nur immer die 40/80-Zeichentaste umschalten, wenn softwaremäßig zwischen 80 und 40 Zeichen pro Zeile umgeschaltet wird.

## Farbe ist auch möglich!

Der Composite-Ausgang bietet neben dem Luminanz- und Chrominanzsignal noch ein komplettes Video-Signal an (FBAS, gemischtes Farb- und Helligkeitssignal). Mit diesem Signal kann jeder Farbmonitor mit Videoeingang angesteuert werden. Beim Commodore-Monitor 1701/1702 ist dieser Eingang an der Frontseite und kann mit einem Schalter an der Rückseite aktiviert werden. An diesen Eingang können Sie beim 1701/1702 übrigens auch das Luminanzsignal des RGB-Ausgang legen. Eventuelle Farbverschiebungen lassen sich beseitigen, indem man den Farbregler einfach auf SW dreht.

Um das FBAS-Signal auszunutzen, schließen Sie den automatischen Umschalter nicht an Pin 1 der Composite-Buchse an, sondern an Pin 4 (unterhalb Pin 1). Wenn Sie dann den Fronteingang (Einschalten!) des 1701/1702-Monitors mit der Cinchbuchse verbinden, erfolgt die 40-Zeichendarstellung (C 128, C 64) in Farbe. Der 80-Zeichen-Modus bleibt Schwarz-weiß. Der Nachteil dieser Lösung liegt in der schlechten Auflösung des 1701/1702. 80 Zeichen pro Zeile sind kaum noch zu entziffern.

Für die meisten SW-Monitore ist das FBAS-Signal nicht geeignet. Häufig stören dann Bildstreifen die Lesbarkeit.

Für welche der beiden Lösungen Sie sich auch entscheiden, bauen Sie auf jeden Fall die Schaltung in ein kleines Gehäuse ein. Nur so ist gesichert, daß kein Kurzschluß durch herumliegende Metallteile entsteht.

(hm)

# Basic 7.0 - Das Super-Basic des C 128 \[18-19\]

> C 64-Besitzer können ein Klagelied davon singen: Nichts geht bei einer anspruchsvolleren Programmierung ohne die Befehle PEEK und POKE, ohne SYS und endlose DATA-Wüsten. Das wird nun mit dem C 128 ganz anders. Wir haben für Sie dieses völlig neue Programmier-Gefühl ausprobiert.

Schwachstellen im System sind die Vorliebe vieler Programmierer. Sie überlegen tagtäglich, wie man die Floppy schneller, das Druckbild schöner und das Basic komfortabler machen kann. Gerade letzteres eröffnet dem C 64-Benutzer ein großes Betätigungsfeld. Mit dem C 128 und dessen Basic 7.0 ändert sich das nun grundlegend. Viele Funktionen, die auf dem C 64 mühselig in Maschinensprache realisiert werden mußten, stehen beim C 128 als komfortable Basic-Befehle zur Verfügung. Harte Zeiten also für Maschinensprache-Freaks? Auf jeden Fall aber rosige Zeiten für Basic-Programmierer. Auf den nächsten Seiten wollen wir Ihnen zeigen, wie einfach nun das Programmieren geworden ist.

## Strukturierte Programmierung

Einige Befehle des 7.0-Basic erlauben strukturierte Programmierung. So mancher Anwender wird sich nun fragen, welchen Nutzen man eigentlich davon hat. Nun, durch die Struktur wird ein Programm wesentlich übersichtlicher, das heißt man kann die Arbeitsweise wesentlich leichter durchschauen und verstehen, als die des normalerweise verwendeten »Spaghetticodes«, bei dem alle Verzweigungen durch GOTO-Befehle realisiert werden.

Nun aber zu den neuen Befehlen im einzelnen. Die DO..LOOP-Schleife, ist in etwa mit den FOR..NEXT-Befehlen vergleichbar. Damit ist es unter anderem möglich, GOTO-freie Schleifen zu erzeugen. Der Programmteil zwischen DO und LOOP wird endlos wiederholt. Damit sich der Computer jedoch nicht in dieser Schleife verfängt, können auch Bedingungen angegeben werden, unter denen die Schleife ausgeführt wird.

WHILE und UNTIL sind in ihrer Arbeitsweise sehr ähnlich. Sie können entweder dem DO-Kommando (also zum Beispiel DO WHILE) folgen, oder hinter dem Schleifenrumpf stehen (LOOP UNTIL). WHILE übersetzt man sinvollerweise mit »arbeite, solange die Bedingung erfüllt ist«. Die Schleife wird also dann, beendet, wenn die Bedingung nicht mehr erfüllt ist:
10 DO WHILE A&lt;=5
20 : INPUT A
30 LOOP
40 PRINT "ENDE"

In diesem kleinen Beispiel wurde eine Schleife programmiert, die so lange durchlaufen wird, bis man eine Zahl eingibt,' die größer als 5 ist. Dann ist die Schleifenbedingung nicht mehr erfüllt und die Programmausführung wird in Zeile 40 fortgesetzt.

UNTIL ist genau das Gegenstück zum WHILE-Kommando. Hier gilt: Die. Abarbeitung wird beendet, sobald die Bedingung erfüllt ist (das Basic bleibt also in der Schleife, solange die Bedingung nicht erfüllt ist). Aber auch hierzu wieder ein kleines Beispiel:
10 DO
20 : INPUT A
30 LOOP UNTIL A&lt;5
40 PRINT "ENDE"

Diesmal arbeitet das Programm genau anders herum, das heißt wenn der eingegebene Wert von A kleiner als 5 ist, dann verzweigt das Programm nach Zeile 40. Welchen der beiden Befehle man einsetzt ist Geschmackssache, denn man kann die Bedingung immer so »verdrehen«, daß beide verwendet werden können.

Die Aufmerksamen unter Ihnen werden bestimmt schon bemerkt haben, daß die Bedingung im ersten Beispiel beim DO, im zweiten aber bei LOOP steht. Steht UNTIL oder WHILE am Schleifenkopf, dann fragt das Basic bereits beim Eintritt in die Schleife, ob die Aussprungbedingung zutrifft. Dies würde wiederum beim eben gezeigten Beispiel dazu führen, daß der Computer den Programmablauf gleich nach der Eingabe von »RUN« wieder beenden würde, da die Variable A dann ja die Null enthält. Damit wäre die Bedingung nicht erfüllt, obwohl man noch gar keine Gelegenheit gehabt hatte, in Zeile 20 einen Wert einzugeben.

Eine weitere Möglichkeit, eine Schleifenkonstruktion zu verlassen, bietet der Befehl EXIT. Wie der Name schon sagt, beendet man damit die laufende Abarbeitung und verzweigt in die nächste Zeile nach LOOP. In der Regel wird man den EXIT-Befehl daher von einer Bedingung abhängig machen.

Eine weitere Quelle von Ärgernissen beim Programmieren waren bisher die IF..THEN-Konstruktionen. Hinter dem THEN fanden oft nur drei bis vier Befehle Platz, so daß man oftmals umständlich im Programm hin- und herspringen mußte, um die Ausführung fortzusetzen. Auch dies wurde jetzt mit den Kommandos BEGIN und BEND anders.

Man setzt in den THEN-Zweig einfach ein BEGIN-Kommando ein. Trifft die Bedingung bei der IF..THEN-Abfrage zu, dann behandelt das Basic alle folgenden Zeilen bis BEND so, als würden sie in der gleichen Zeile hinter dem THEN-Befehl stehen. Erst ein BEND-Befehl beendet die Abarbeitung der THEN-Folge.

Ebenfalls neu ist beim 7.0-Basic das Befehlswort ELSE. Findet der Computer im Basic-Programm eine IF-Abfrage vor, dann hat er prinzipiell zwei Möglichkeiten. Entweder die Bedingung trifft zu, dann wird der Programmteil nach THEN ausgeführt, der sich jetzt dank BEGIN und BEND über beliebig viele Zeilen erstrecken kann. Andernfalls ignoriert das Basic den Rest der Zeile und fährt in der nächsten mit der Programmabarbeitung fort. Genau für diesen Fall wurde der Befehl ELSE vorgesehen. Wie er eingesetzt wird, soll wiederum ein Beispiel verdeutlichen:
10 INPUT A
20 IF A=2 THEN B=9 : ELSE B=2
30 PRINT B

Der ELSE-Zweig wird in der Abfrage genau dann ausgeführt, wenn die Bedingung (hier A = 2) nicht zutrifft. Die Benutzung dieser Konstruktion hat wiederum den Vorteil, daß man nicht mehr um die nächste Zeile »herumspringen« muß, was wiederum der Übersichtlichkeit des Programms zugute kommt.

Auch im ELSE-Zweig können die neuen BEGIN- und BEND-Kommandos eingesetzt werden, wodurch sich dieser wiederum auf mehrere Zeilen ausdehnen läßt.

Auch auf einem ganz anderem Gebiet hat sich beim 7.0 Basic einiges verändert. Gegenüber dem Basic 2.0 des C 64 sind sehr komfortable Kommandos zum Zeichnen von Punkten, Linien, Rechtecken und Kreisen hinzugekommen. Auch das Ausfüllen von geschlossenen Flächen ist mit Basic 7.0 kein Problem mehr. Leider beziehen sich alle Grafik-Befehle nur auf die bereits vom C 64 bekannte Grafikauflösung von 320 x 200 Punkten. Die ebenfalls — wenn auch auf Umwegen — mögliche doppelte Auflösung von 640 x 200 Punkten wird vom Basic leider nicht unterstützt. Die Grafik-Befehle des 7.0-Basic entsprechen den bereits vom 3.5-Basic des C 16 und Plus 4 bekannten Kommandos. Auch die zahlreichen Befehlserweiterungen für den C 64 verwenden ähnliche Grafik-Kommandos. In Listing 1 ist ein kleines Beispielprogramm zu finden, um den Lesern, die keine C 64-Basic-Erweiterung besitzen, zu demonstrieren, wie einfach selbst kompliziertere Figuren (Bild 1) erstellt werden können.

Wirklich neu sind hingegen die Kommandos für die Verwaltung von Sprites. Beginnen wir mit der Definition eines solchen beweglichen Objekts. Sehr hilfreich ist da der eingebaute Sprite-Editor, der entweder vom Programm aus oder direkt mit »SPRDEF« aufgerufen werden kann (Bild 2). Hierin wird man zunächst einmal nach der Nummer des Sprites gefragt. Hat man diese Zahl zwischen 1 und 8 eingegeben, so kann es mit dem eigentlichen Sprite-Entwurf losgehen. Dazu bewegt man den Zeichenzeiger mit den normalen Cursortasten auf dem 24 x 21 großen Feld hin und her. Das Löschen beziehungsweise Setzen von einzelnen Pixels erfolgt dann mittels der Tasten 1 und 2 (bei Multicolor-sprites auch noch die 3 und 4). Ist der künstlerische Entwurf geglückt, dann kann man mit SHIFT-RETURN die Definition beenden.

Mit dem Editieren allein ist es natürlich nicht getan. Darum werden vom 7.0-Basic auch Befehle für das Setzen und Bewegen von Sprites zur Verfügung gestellt. Das Beispiel in Listing 2 soll hier wiederum die neuen Kommandos verstehen helfen. Hier hat der Benutzer zunächst einmal die Möglichkeit, sich zwei Sprites zu erstellen. Dazu wird der eingebaute Editor zweimal aufgerufen.

Der nächste neue Befehl COLLISION legt eine Programmzeile fest, in die das Basic verzweigen soll, wenn sich zwei Objekte treffen. Besonders positiv ist, daß sich der Benutzer nicht mehr explizit um die Ab-

frage zu kümmern braucht. Hat man die Ansprungzeile einmal festgelegt (in unserem Beispiel Zeile 1000), so unterbricht das Basic bei einer Kollision der entsprechenden Sprites automatisch den Programmablauf und verzweigt in die vorgegebene Zeile. Dort kann der Programmierer dann angemessen auf das Ereignis reagieren. Ist diese Abarbeitung beendet, so kehrt man mittels »RETURN« wieder in das zuvor unterbrochene Programm zurück.

Nun aber wieder zurück zu unserem Beispielprogramm in Listing 2. Als nächtes müssen die Attribute für jedes Sprite wie zum Beispiel Sichtbarkeit, Vordergrundfarbe, Priorität und so weiter, angegeben werden. Diese Festlegung erledigt man über den SPRITE-Befehl. Die Positionierung und das Bewegen der Objekte, wird mit einem anderen Kommando bewerkstelligt: mit »MOVSPR 1,200, 300« positioniert man Sprite 1 auf der Bildschirmposition X = 200 und Y= 300. Mit »MOVSPR l,90#5« bringt man es dann auch noch zum Laufen. Die 90 gibt dabei die Himmelsrichtung an (90= Bewegung nach rechts), die 5 ist für die Geschwindigkeit zuständig. Diese Bewegungen werden per Interrupt gesteuert, daß heißt auch darum muß sich der Benutzer nicht kümmern. Ist der Bewegungsablauf einmal programmiert, geht alles Weitere automatisch. Schaltet man die Sprites nicht wieder ab, so bewegen sie sich sogar nach Beendigung des Programms weiter über den Bildschirm!

Speichern und Laden von Sprites ist im neuen Basic natürlich auch möglich. Der Befehl SPRSAV überträgt die Grafikdaten — je nach Stellung der Parameter — in Strings oder zurück. Dies ist sehr einfach: Gibt man »SPRSAV 1, A$« ein, so wird das Sprite in diesem String abgespeichert. Vertauscht man die Parameter, also »SPRSAV A$,1«, so erreicht man den umgekehrten Prozeß: Der Inhalt des Strings A$ wird als Bitmuster dem Sprite Nummer 1 zugewiesen.

Dies war nun eine erste kleine Einführung in die Befehlsfülle des neuen 7.0-Basic. Mit einer näheren Beschreibung aller Basic-Befehle wäre leicht ein ganzes Buch zu füllen. Aber auch die Beschreibung der interessantesten neuen Sprachelemente dürfte schon so manchem C 64-Besitzer einen Vorgeschmack darauf geben, welche neuen Programmier-Dimensionen sich mit dem Basic 7.0 auftun.

(Christoph Sauer/ev)

# Fragen und Antworten zum 128er \[20-21\]

> Der neue Commodore 128 hat ein großes Echo unter unseren Lesern gefunden. Trotz ausführlicher Berichterstattung tauchen immer wieder neue Fragen auf, die zum C 128 gestellt werden. Die am häufigsten gestellten Fragen werden hier beantwortet.

### Welche Bedeutung haben die vielen beim C 128 vorhandenen Sondertasten?

Die vier allgemeinen Funktionstasten (Fl bis F8) oberhalb des Ziffernblocks haben eine ähnliche Aufgabe wie beim C 64. Allerdings sind im C 128-Modus diese Tasten bereits vorbelegt:

TODO TABLE

F1	GRAPHIC	Grafik-Modus ein
F2	DLOAD"	Programm laden
F3	DIRECTORY	Directory anzeigen
F4	SCNCLR	Bildschirm löschen
F5	DSAVE"	Programm speichern
F6	RUN	Programm starten
F7	LIST	Programm listen
F8	MONITOR	Maschinensprache-Monitor aktivieren

Man kann die Belegung dieser Tasten mit dem KEY-Kommando anzeigen oder ändern.

Links neben den Funktionstasten befinden sich vier zusätzliche Cursortasten, die in ihrer Funktion mit den rechts unten vorhandenen Cursortasten übereinstimmen (nicht wirksam im C 64-Modus).

Die restlichen Sondertasten haben spezielle Funktionen:

Mit der ESC-Taste können spezielle ESC-Funktionen ausgelöst werden (Tabelle 1).

TAB ist eine Tabulator-Taste, mit der der Cursor an die nächste Tabulatorposition gesetzt wird.

Mit der ALT-Taste können Sonderfunktionen beliebigen anderen Tasten zugeordnet werden. Das ist allerdings vom verwendeten Programm abhängig. Soll eine Funktion aufgerufen werden, so ist die zugeordnete Taste zusammen mit der ALT-Taste zu drücken.

Die ASCII/DIN-Taste schaltet zwischen ASCII- und DIN-Zeichensatz und der entsprechenden Tastaturbelegung um. Sie funktioniert auch im C 64-Modus (!), allerdings wird hier nur der Zeichensatz geändert, während die Tastaturbelegung gleich bleibt. Das führt zu recht merkwürdigen Ergebnissen. Zum Beispiel erreicht man im C 64-Modus den Umlaut »Ä« durch die Tastenkombination (COMMODORE)-F. Bild 1 zeigt die komplette Tastaturbelegung im C 64-Modus, wenn die DIN-Taste aktiviert ist. Die ASCII/ DIN-Taste ist die einzige Sonderfunktions-Taste, die auch im C 64-Modus eine Wirkung hat.

Die HELP-Taste dient zum leichten Auffinden von Fehlern in Basic-Programmen. Sie sollte immer dann gedrückt werden, wenn das Programm aufgrund einer Fehlermeldung abbricht. Dadurch wird die Zeile, in der der Fehler auftrat, am Bildschirm aufgelistet und die Fehlerstelle revers markiert.

LINE FEED erzeugt auf dem Bildschirm einen Zeilenvorschub ohne Wagenrücklauf (Carriage Return). Wird diese Taste gedrückt, wandert der Cursor um eine Zeile nach unten, ohne seine derzeitige Spaltenposition zu verlassen.

40/80 DISP schaltet vom 40- zum 80-Zeichen-Bildschirm um. Diese Taste rastet beim Drücken ein und muß bereits vor dem Einschalten des Computers in die gewünschte Position gebracht werden. Eine Betätigung bei laufendem Computer bleibt bis zu einem Reset wirkungslos.

NO SCROLL verhindert das Bildschirmscrolling. Wird diese Taste beispielsweise während des Listens eines Programms gedrückt, dann wird die Auflistung nach 25 Zeilen unterbrochen und erst auf Tastendruck fortgesetzt.

### Wie schließt man einen beliebigen RGB-Monitor an den C 128 an?

Falls der Monitor über einen Standard-RGB-Stecker verfügt, gibt es keine Probleme: Einfach den Stecker in die RGB-Buchse des C 128 einstöpseln, und der Anschluß ist getätigt. Andernfalls finden Sie in Bild 2 die Pin-Belegung der RGB-Buchse am C 128. Eine Zeichnung der Buchse finden Sie auch im Commodore-Handbuch, Anhang L, Seite 1 (Steckerbelegungen). Leider wurde im Handbuch aber vergessen, die dazugehörige Pin-Belegung abzudrucken. Mit den Informationen aus Bild 2 sollte sich jeder RGB-Monitor anschließen lassen. Das Monochrom-Signal entspricht dem Luminanz-Signal bei der Composite-Video-Schnittstelle. Über dieses Signal ist auch der Anschluß eines monochromen Monitors möglich.

### Welche Grafik-Modi stehen beim C 128 zur Verfügung?

Der C 128 verfügt über fünf verschiedene Grafik-Modi, die über den GRAPHIC-Befehl ausgewählt werden können:
GRAPHIC 0: Text 40 Zeichen pro Zeile
GRAPHIC 1: Hochauflösende Grafik
GRAPHIC 2: Hochauflösung mit Toxtfenstor
GRAPHIC 3: Multicolor-Grafik
GRAPHIC 4: Multicolor mit Textfenster
GRAPHIC 5: Text 80 Zeichen pro Zeile

Die Grafik-Modi 0 bis 4 arbeiten über den Composite-Video-Ausgang, Modus 5 über den RGB-Monitor-Ausgang. Die Grafikauflösung beträgt wie vom C 64 gewohnt 320 x 200 Punkte bei Hochauflösung und 160 x 200 Punkte bei Multicolor. Zusätzlich steht — allerdings mit einigen Tricks auf Maschinensprache-Ebene — noch eine Grafikauflösung von 640 x 200 Punkten über RGB zur Verfügung.

### Kann man den C 128 auch mit einem Fernsehgerät als Bildschirm betreiben?

Als einfachste Möglichkeit, um sofort mit dem C 128 arbeiten zu können, bietet sich natürlich ein bereits vorhandenes Schwarzweiß- oder Farbfernsehgerät an. Mit dieser minimalen Grundausstattung können Sie Ihren C 128 bereits betreiben. Dazu brauchen Sie nur das mitgelieferte Antennenkabel in die dafür vorgesehene Buchse an der Rückseite des Computers einstecken und das andere Ende mit dem Antenneneingang Ihres Fernsehers verbinden. Der C 128 »sendet« auf Kanal 36 im UHF-Bereich.

Sie sollten allerdings bedenken, daß Sie mit einem normalen Fernsehgerät den 80-Zeichen-Modus des C 128 (wichtig für CP/M) nicht ausnutzen können.

# Bücher zum C 128 \[22\]

## Basic 7.0 auf dem Commodore 128

Auch für Einsteiger ist der C 128 aufgrund seines sehr guten Basic ein idealer Computer. Genau an diese Gruppe von Lesern wendet sich dieses Buch aus dem Markt & Technik-Verlag. In den ersten Kapiteln wird man nach und nach mit den Grundzügen der Basic-Programmierung vertraut gemacht. Großen Raum nehmen dabei natürlich die neuen Kommandos des Basic 7.0 ein, wie sie zum Beispiel für strukturiertes Programmieren oder zum Aufspüren und Behandeln von Fehlern vorhanden sind.

Ein weiteres umfangreiches Kapitel in diesem Buch ist dem Thema Dateiverwaltung gewidmet. Hier kommen besonders die neuen Befehle für die Diskettenstation zum Tragen. Aber auch die Erstellung und Benutzung von sequentiellen und relativen Files sind, dank des neuen Basic 7.0, auch für anfängerorientierte Bücher keine Tabuthemen mehr.

Weitere Schwerpunkte sind die Programmierung von Grafik und Sound. Hier wird speziell auf die hochauflösende Grafik, die neuen Sprite-Befehle und die Sound-Kommandos eingegangen. Wer sich ernsthaft für den C 128 interessiert, der findet in diesen Kapiteln eine gute Grundlage zum Erlernen der vielen, gegenüber dem C 64 neu hinzugekommenen Basic-Befehle.

Viele Beispiellistings sowie Tips und Tricks runden dieses empfehlenswerte Buch ab, das vor allem für den Einsteiger und den Basic-Umsteiger vom C 64 sehr interessant sein dürfte.

(Christoph Sauer/ev)

Info: Jürgen Hückstädt: Basic 7.0 auf dem Commodore 128, Markt und Technik Verlag AG, 250 Seiten, ISBN 3-89090-170-0, 52 Mark

## Das Premierenbuch »Der neue C 128«

Kaum ist der C 128 auf dem Markt, findet man bereits die ersten Bücher über diesen Computer in den Läden. Eines dieser Erstlingswerke ist das Premierenbuch von Data Becker »Der neue Commodore 128«. Wie fast alle Bücher, die zur Zeit für den C 128 erhältlich sind, beschäftigt sich auch dieses im wesentlichen mit dem neuen Basic 7.0. Dazu gehört natürlich eine komplette Befehlsübersicht, in der alle neuen (und natürlich auch die alten, vom C 64 bekannten) Befehle und Kommandos beschrieben sind.

Aber auch die interne Organisation des C 128 kommt bereits in diesem Buch nicht zu kurz. Besonders die Aufteilung des Speichers nimmt (verständlicherweise) einen sehr breiten Raum ein. Gerade das Arbeiten mit den verschiedenen Speicherbänken ist ja eine völlige Neuheit, so daß diese Informationen sehr hilfreich sind. Viele ausführliche Grafiken unterstützen die Bemühungen der Autoren, dem Leser die doch nicht ganz einfach zu verstehende Materie nahezubringen.

Den größten Teil dieses Buches nimmt jedoch die Befehlsübersicht des neuen Basic 7.0 ein. Die Darstellung ist ähnlich wie im Handbuch gelöst worden, das heißt auf jeder Seite wird ein Befehl anhand von ein oder zwei kurzen Beispielen erklärt. Diese Aufstellung ist nach Gebieten wie zum Beispiel Grafik, Sound und so weiter sortiert, so daß man sich schnell im umfangreichen Befehlssatz zurechtfindet.

Ein Anhang mit der Belegung der Zeropage schließt dieses Buch ab, das trotz des frühen Erscheinungstermins erstaunlich viele tiefgehende Informationen enthält.

Allerdings muß man anmerken, daß die Befehlsübersicht natürlich auch im erfreulich umfangreichen offiziellen C 128 Handbuch von Commodore zu finden ist (sogar um einiges ausführlicher), so daß dem stolzen Besitzer eines C 128 dieses Buch vermutlich nur wenig Neues sagen wird.

Daher ist das Premierenbuch zum C 128 besonders jenen zu empfehlen, die sich mit dem Gedanken tragen, dieses Gerät anzuschaffen und verständlicherweise nicht die Katze im Sack kaufen wollen.

(Christoph Sauer/ev)

Info: Gerits, Kampow: Das Premierenbuch »Der neue C 128«, Data Becker, 216 Seiten, ISBN 3-89011-062-2, 39 Mark

## Das Commodore 128 Handbuch

Nicht nur vom Namen her leicht mit dem Original-Handbuch zu verwechseln ist dieses Buch zum C 128. Das knapp 400 Seiten starke Werk besteht zu 275 Seiten aus einem Anhang, der im wesentlichen aus einer Auflistung aller Befehle des 7.0 Basic besteht. Es gilt hier das gleiche wie für Data Beckers Premierenbuch: Wer sich tatsächlich einen C 128 zulegen will, der bekommt von Commodore ein sehr umfangreiches Handbuch mitgeliefert, das zudem kostenlos ist.

Nun aber zum Buch selbst: Nach Begriffserklärungen im ersten Kapitel geht der Autor zunächst auf die drei unterschiedlichen Betriebsmodi des C 128 ein. Für Hardwarefreaks werden gleichzeitig die dazugehörigen Bausteine auf der Computerplatine kenntlich gemacht und deren Bedeutung erklärt.

Grafik und Sound werden ebenso von »innen heraus« beleuchtet, wie das komplizierte Bankswitching. Gut gelungen ist auch das Kapitel über die Arbeitsweise des eingebauten Maschinensprachenmonitors.

Wer die begehrten Tips und Tricks sucht, der findet in »Das

Commodore 128 Handbuch« ein Programm, mit dem man Grafik auch auf dem 80-Zeichen-Bildschirm darstellen kann.

Fazit: das Urteil über dieses Buch fällt gemischt aus. Zum einen enthält es nützliche Informationen für alle diejenigen, die tiefer in ihren C 128 einsteigen möchten. Zum anderen ist da die Befehlsübersicht, die nur für den Nicht-Besitzer interessant ist. Am besten wird man diesem Buch wohl gerecht, wenn man es als allgemeinen Überblick über das C 128-System bezeichnet.

(Christoph Sauer/ev)

Info: Peter Rosenbeck: Das Commodore 128 Handbuch, Markt und Technik Verlag AG, 400 Seiten, ISBN 3-89090-171-9, 52 Mark

## CP/M — Ein Lern- und Nachschlagewerk

Hierbei handelt es sich um einen Band aus der Reihe »Software-Schnellkurs« aus dem Markt & Technik-Verlag. Dieses Buch befaßt sich mit CP/M nicht aus der Sicht von Prozessor und Betriebssystem, sondern aus der Sicht des Anwenders. Ein Nachschlagewerk also für diejenigen, die nicht wissen wollen wie CP/M intern arbeitet, sondern die es einfach nur bedienen wollen. Und für diesen Personenkreis ist dieser CP/M-Schnellkurs genau das Richtige.

Auf 90 Seiten wird der Anwender auf einfache Weise und mit vielen Beispielen mit den wichtigsten CP/M-Kommandos vertraut gemacht. Gleichzeitig dient das Buch als Nachschlagewerk, falls man einmal etwas vergessen haben sollte. Durch den Ringbuch-Einband kann man das Buch einfach aufgeschlagen neben dem Computer liegen haben, ohne befürchten zu müssen, daß es bei allzu häufiger Benutzung in seine Bestandteile zerfällt.

Leider bezieht sich dieser Schnellkurs noch auf die älteren CP/M-Versionen bis 2.2, was allerdings kein allzugroßer Nachteil ist, da die grundlegenden Kommandos bei allen Versionen die gleichen sind.

Nach der Devise »Lernen durch Benutzen« bekommt man durch dieses Buch schnell Routine bei der Verwendung der einzelnen CP/M-Befehle. Dieser Software-Schnellkurs, den es übrigens auch für spezielle CP/M-Software wie zum Beispiel Wordstar, dBase und Multiplan gibt, ist ein sinnvoller Helfer für den Umgang mit CP/M und gehört neben jeden CP/M-Computer.

(Christoph Sauer/ev)

Info: Wolfgang Maaß: Software-Schnellkurs CP/M, Markt und Technik Verlag AG, ISBN 3-922120-55-5, 37 Mark

# Geheimtip: RFI DP 165 \[24-25\]

> Mit dem DP 165 kostet der Einstieg in die Drucker-Spitzenklasse kein Vermögen mehr. Wer keine Angst vor einem unbekannten Namen hat, erhält erstaunlich viel für sein Geld.

Der DP 165 (Bild 1) ist ein Drucker, der ursprünglich für den professionellen Einsatz an Personal Computern wie dem IBM PC entwickelt wurde. Dementsprechend hoch ist sein Leistungsniveau. Mit mehr als 165 Zeichen pro Sekunde gehört der DP 165 zu den ausgesprochen schnellen Druckern. Unseren Probetext schaffte er in sehr guten 1:48 Minuten und steht in der Rangliste direkt hinter dem Star SR 10, der allerdings fast 600 Mark teurer ist. Trotz der hohen Geschwindigkeit überrascht der DP 165 durch einen angenehm niedrigen Geräuschpegel. Das alleine macht natürlich noch keinen Drucker der Spitzenklasse aus. Wie aus der Tabelle zu sehen ist, bietet der DP 165 eine enorme Vielfalt an Funktionen und Schriftarten. Bei der Syntax der Steuerbefehle glänzt der DP 165 durch vollständige Gleichheit mit dem Epson FX-80, dessen Befehle schon fast als Standard gelten können. Der Unterschied zum FX-80 liegt in der NLQ-Schrift (Near Letter Quality = Schöndruck), die sich sogar mit proportionalen Zeichenabständen drucken läßt (Bild 2).

## Epson-Steuerbefehle

Die NLQ-Schrift ist auf drei verschiedene Arten einzustellen. Einmal durch einen Steuerbefehl, durch eine separate Taste auf dem Bedienfeld und durch einen der gut erreichbaren DIL-Schalter auf der Gehäuserückseite. Die Qualität dieser Schrift kann sich sehen lassen (Bild 3), zumal der DP 165 in der NLQ-Schrift immer noch schneller (und leiser) druckt als die meisten Typenraddrucker. Normalerweise ist das Aussehen der NLQ-Schrift durch die im ROM des Druckers abgelegten Werte bestimmt (17 x 17 Matrix). Erweitert man das interne RAM von 2 KByte auf 8 KByte, wird es sogar möglich, eine eigene NLQ-Schrift zu entwerfen. Ohne die RAM-Erweiterung bleibt der selbstdefinierte Zeichensatz auf die, schon vom FX-80 her bekannte, 9 x 9 Zeichenmatrix beschränkt. Eine andere Methode, selbstdefinierte Zeichen und Grafiken auszudrucken, besteht in der Verwendung der umfangreichen Grafik-Fähigkeiten des DP 165. Alle Hardcopy-Routinen, die für die Epson-Drucker programmiert wurden, funktionieren, ohne jede Änderung, auch zusammen mit dem DP 165. Besitzt man das optionale Commodore-Interface (235 Mark), kommen sogar noch die Grafik-Routinen für dem MPS 801-Drucker hinzu (Simons Basic, Supergrafik).

Der praktische Wert eines Druckers hängt allerdings nicht nur von seinen Fähigkeiten, sondern auch vom Bedienungskomfort ab. Dazu gehört ein einfach zu bedienender Papiereinzug, ein Papiertransport, der ein direktes Abreißen des Papiers über dem Druckkopf ermöglicht und eine Druckersteuerung über Funktionstasten. Alle diese Bedingungen erfüllt der DP 165. Das Papier, das entweder Einzel- oder Endlospapier mit Randlochung sein kann, wird ohne großen Aufwand von hinten in den Drucker eingelegt und durch zwei Stachelwalzen transportiert. Die Stachelwalzen sind in ihrem Abstand beliebig verstellbar. Auch das Einlegen des Farbbandes ist nicht schwieriger als bei einem FX-80, zumal dessen Farbbänder problemlos passen. Die vier Bedienungstasten des DP 165 haben neben den Standardfunktionen wie Zeilen- und Seitenvorschub noch eine weitere Bedeutung erhalten. Mit ihnen lassen sich auf einfache Weise die linken und rechten Ränder des Schreibfeldes einstellen.

## Problemloser Anschluß

Um den DP 165 an den C 64 oder C 128 anzuschließen, gibt es mehrere Möglichkeiten. Normalerweise ist der DP 165 mit einer Centronics-Schnittstelle ausgestattet. Wer keinen Wert auf die Commodore-eigenen Steuerzeichen legt, kann sich mit einem einfachen User-Port-Kabel (zirka 50 Mark) behelfen. Daneben wird vom Hersteller ein externes Interface angeboten, das für eine vollständige Anpassung an die Belange der Commodore-Computer sorgt. Der DP 165 wird dann einfach am seriellen Bus des Computers, wie ein Floppy-Laufwerk angeschlossen. Die dritte Möglichkeit besteht darin, ein serielles RS232-Interface einzubauen und den Drucker wie einen Akustikkoppler anzusprechen.

Der DP 165 ist ohne Zweifel ein Drucker der Spitzenklasse. Mit einem Preis von 1498 Mark hält er sich, gemessen an seinen Fähigkeiten (Tabelle), in erfreulich bescheidenen Grenzen. Seine vollständige Übereinstimmung mit den Funktionen der Epson FX-80-Drucker, ergänzt durch die NLQ-Schrift und den niedrigen Geräuschpegel, zeichnen den DP 165 aus. Mit diesen Leistungen gehört der DP 165 in eine Klasse mit dem Star SR-10 und dem Centronics Horizon. Sein um zirka 600 Mark unter dem dieser Konkurrenten liegender Preis, machen ihn zusätzlich interessant. Wer sich etwas abseits von den Pfaden der größeren Druckerhersteller umschaut, kann also durchaus so manche Mark sparen.

(aw)

Info: RFI Elektronik GmbH, Mittelstr. 12a, 4050 Mönchengladbach 2, Telefon 0 2166/4 80 77, Preis: 1498 Mark

# Melchers CP-80X — wie hätten Sie's denn gern? \[25-26\]

Mit seinen drei einaebauten Schnittstellen kennt der CP-80X keine AnscnIußprobleme. Lesen Sie, warum der CP-80X so gut zum C 64 und C 128 paßt.

Den CP-80X (Bild 1) könnte man beinahe als Chamäleon bezeichnen, denn er versteht es, sich ganz an die Schnittstellen der verschiedensten Computer anzupassen. Die Konstrukteure des CP-80X haben ihn gleich mit den drei der gängigsten Normen (außer RS232) ausgerüstet: einer Centronics parallel, einer seriellen IEC-(wie sie der C 64/C 128 hat) und einer parallelen IEC-Schnittstelle. Für uns war natürlich seine serielle IEC-Schnittstelle am wichtigsten. Der Anschluß des CP-80X ist sehr einfach, er wird mit einem Kabel direkt an den Computer, beziehungsweise das Floppy-Laufwerk, angeschlossen. Danach ist der CP-80X sofort einsatzbereit. Trotzdem sollte man nicht sofort mit dem Drucken beginnen. Es lohnt sich, zunächst das ausführliche, in Deutsch geschriebene, Handbuch durchzulesen. Im Unterschied zu den meisten Drucker-Handbüchern sind die dort abgedruckten Beispieleprogramme im Basic des C 64 (das im Basic des C 128 enthalten ist), geschrieben. Die Einarbeitung in die umfangreichen Fähigkeiten des CP-80X sollten darum auch einem Anfänger leichtfallen. Die Steuerbefehle des CP-80X stellen eine gelungene Kombination aus den Befehlen der Commodore MPS-Reihe und denen eines Epson RX-80 dar. Dadurch wird erreicht, daß die meisten Programme, die für die MPS-Reihe geschrieben wurden, mit wenigen Änderungen funktionieren. Es ist erfreulich, daß eine Druckersteuerung mit den bekannten ESC-Befehlen trotzdem erhalten wurde. Unser Probeausdruck (Bild 2)zeigt, daß alle Funktionen des Druckers ohne viel Aufwand programmiert werden können. Die reverse Schrift wurde beispielsweise durch die Verwendung der CTRL- und RVS ON-Taste innerhalb der Anführungsstriche erzeugt. Die Druckersteuerungerfolgt somit bei einigen Befehlen analog zur Cursorsteuerung auf dem Bildschirm. Drucker kann man aber nicht nur sehen, sondern auch hören. Der CP-80X gehört zu den Druckern, die man, ohne Angst vor den Nachbarn, auch in der Etagenwohnung betreiben kann. Überhören kann man ihn — wie jeden Nadel-Matrixdrucker — allerdings nicht. Erfreulich war auch das Ergebnis unseres Geschwindigkeitstests. Im Handbuch wird die Geschwindigkeit des CP-80X mit 80 Zeichen pro Sekunde angegeben, unseren Messungen nach schaffte das Testgerät aber gute drei Zeichen mehr. Dieser Vorteil macht sich natürlich erst bei längeren Texten, wie unserem Probetext, den er in der Zeit von 3:25 ausdruckte, bemerkbar. Zu den Fähigkeiten eines guten Matrixdruckers wie dem CP-80X gehört neben der Darstellung von Texten auch die Grafik. Der CP-80X wird diesem Anspruch in jeder Hinsicht gerecht, denn seine Grafikauflösung reicht von 480 bis zu 960 Punkten pro Zeile. Die Verwendung einiger Hardcopy-Routinen, wie beispielsweise der COPY-Befehl von Simons Basic, funktionieren allerdings nicht auf Anhieb. Der Hersteller legt dem CP-80X für diesen Zweck ein eigenes kleines Zusatz-Handbuch mit Hilfsprogrammen bei. Eine Übersicht aller weiteren technischen Daten finden Sie in der Tabelle.

## Schneller als angegeben

Wenden wir uns nochmals den Schnittstellen des CP-80X zu. Mit den drei eingebauten und einer nachrüstbaren RS232-Schnittstelle ist der CP-80X mehr als üppig ausgestattet. Das Umschalten zwischen den einzelnen Schnittstellen erfolgt über eine Reihe von DIL-Schaltern. Je nachdem, wie diese Schalter eingestellt sind, belegt der CP-80X die ausschließlich vorhandene Centronics-Buchse mit einer anderen Norm. Das bedeutet, daß er ohne zusätzliche Erweiterungen sowohl am C 64/C 128, als auch an verschiedene andere Computer direkt anschließbar ist. Einzig der für die DIL-Schalter gewählte Platz war Anlaß zur Kritik, denn sie befinden sich innerhalb des Gehäuses an unzugänglicher Stelle.

Der CP-80X ist nicht nur wegen seiner Schnittstellen, sondern auch durch seine Funktionsvielfalt ein universeller Drucker. Jeder, der Texte bearbeiten und korrekte Listings mit allen Cursor- und Grafikzeichen ausdrucken möchte, findet einen fast vollständigen CBM-Zeichensatz vor. In einigen wesentlichen Details unterscheidet sich dieser Zeichensatz allerdings von denen der Commodore-Drucker — er wurde um die deutschen Umlaute ergänzt. Leider entsprechen die CHR$-Werte für die Umlaute bei den bisher verkauften Geräten noch nicht der normalen ASCII-Tabelle. Nach Aussagen des Herstellers wird ein neues Zeichensatz-ROM, bei dem eine Standard-ASCII-Tabelle zugrunde gelegt wird, gerade entwickelt. Mit dieser Änderung wäre der CP-80X dann auch für den DIN-Modus des C 128 geeignet.

## Preiswert und flexibel

Der CP-80X ist mit einem Preis von 889 Mark als grafikfähiger Drucker wohl hauptsächlich durch seine Vielseitigkeit interessant. Obwohl sein Schriftbild (Bild 3) durchaus als gut bezeichnet werden kann, fehlt doch die, heute schon fast zum Standard gewordene, NLQ-Schrift. Diesen Nachteil wiegt der CP-80X allerdings durch seine umfangreichen Befehle und die gut gelungene Anpassung an den C 64 wieder auf.

(aw)

Info: Melchers & Co., 2800 Bremen 1, Schlachte 39/40, Tel.: 04 21/17 69 89

# Epson GX-80. Einer für alle \[26-27\]

> Der Epson GX-80 präsentiert sich mit einem völlig neuen Konzept: den Steckmodul-Schnittstellen. Wir haben Vor- und Nachteile verglichen.

Ganz anders, als die bisherigen Druckergenerationen von Epson, besitzt der GX-80 (Bild 1) keine Schnittstelle im herkömmlichen Sinne. An Stelle einer Anschlußbuchse hat der GX-80 einen Modulschacht. Durch dieses Konzept soll eine möglichst perfekte Anpassung an die verschiedensten Computer erreicht werden. Das in jedem Fall notwendige und im Preis enthaltene Interface wird einfach in den Modulschacht eingesteckt und verleiht dem GX-80 alle Fähigkeiten, die er braucht, um an dem betreffenden Computertyp zu arbeiten. Wir haben den GX-80 mit Commodore-Modul getestet. In dieser Version besitzt der GX-80 eine Schnittstelle, die am seriellen Bus des C 64 angeschlossen wird. Die Anpassung an die Besonderheiten des C 64, wie Grafik- und Steuerzeichen, ist damit total. Es ist beinahe unmöglich festzustellen, daß der GX-80 nicht von Commodore selbst stammt. Alle Programme, die für den MPS 802, beziehungsweise MPS 801 geschrieben wurden, sind ohne große Änderungen auf dem GX-80 funktionsfähig. Auch in seinem äußeren Erscheinungsbild paßt der GX-80 sehr gut zu den Commodore-Computern, insbesonders zum C 128. Die Reihe der Neuerungen hört aber nicht beim Interface-Konzept auf. Der GX-80 ist der einzige Epson-Drucker dieser Preisklasse, der über die sogenannte NLQ-Schrift (Near Letter Quality = Schönschrift) verfügt. Die NLQ-Buchstaben des GX-80 sind im Gegensatz zum Star SR-10 etwas runder und nicht ganz so scharf geschnitten (Bild 2). Aus normaler Leseentfernung fallen die Abstände zwischen den einzelnen Matrixpunkten allerdings kaum noch auf. Außerdem besitzt der GX-80 einen einfachen Grafikmodus mit 480 Punkten pro Zeile. Damit erreicht der GX-80 allerdings nicht die Leistungen des seit langem bekannten RX-80. Dafür beherrscht der GX-80 alle Commodore-spezifischen Zeichensätze. Der korrekte Ausdruck von Listings ist somit sichergestellt. Anders sieht es bei der Eignung zur Textverarbeitung aus. Trotz der Druckgeschwindigkeit von 100 Zeichen pro Sekunde und der NLQ-Schrift eignet sich der GX-80 für diese Anwendung weniger. Es war uns nicht möglich, den deutschen Zeichensatz mit und ohne Textverarbeitungsprogramm zu realisieren. Wahrscheinlich wurde zugunsten einer vollkommenen Anpassung an die Commodore-Computer darauf verzichtet. Auch die Druckgeschwindigkeit entspricht nicht den Erwartungen. Mit einer Zeit von 3:30 für unseren Probetext konnte der GX-80 nicht ganz befriedigen.

## Der Heimarbeiter

Der GX-80 ist eindeutig für die Heimanwendung konzipiert worden. Dafür sprechen nicht nur die einfache Handhabung, sondern auch die neue Konstruktion des Papierantriebs. In der Grundausstattung ist der GX-80 mit einem Friktionsantrieb ausgestattet. Damit lassen sich nur Einzelblätter und Rollenpapier verarbeiten. Gegen einen Aufpreis von 82 Mark ist ein Traktorantrieb, dessen Montage problemlos ist (einfach aufstecken), erhältlich. Zu dieser Investition ist in jedem Fall zu raten, denn Endlospapier mit Randlochung ist immer noch die preiswerteste Art, größere Papiermengen zu bedrucken. Ein, gelegentlich recht sinnvoller, Einzelblatteinzug wird für zusätzliche 219 Mark angeboten.

Weit gewichtiger als das Fehlen eines Traktorantriebs (in der Grundausstattung) ist die Begrenzung der programmierbaren Funktionen (Bild 3) auf die der Commodore-Drucker. Alle Variationen der Schrift (Fett, NLQ, komprimiert) sind nur mit einem ebenfalls neuen Verfahren einzustellen. In praxi sieht das folgendermaßen aus: man betätigt die »On Line«- und »Form Feed«-Taste gleichzeitig und befindet sich im »Select«-Modus. Mit der »On Line«-Taste wird die gewünschte Schriftart (Tabelle) ausgewählt und mit der »Form Feed«-Taste eingespeichert. Dieses Verfahren mag für den Anwender, der den Drucker nicht selbst programmieren möchte, sicherlich recht praktisch sein. Jeder, der seinen Drucker mit allen Funktionen, auch programmgesteuert, flexibel einsetzen möchte, wird die »Handprogrammierung« schon bald ablehnen.

## NLQ-Schrift zum Niedrigpreis

Mit dem Preis von 998 Mark (plus 82 Mark für den Traktor) ist der GX-80 einer der preiswertesten Drucker mit NLQ-Fähigkeit auf dem Markt. Sein gutes Aussehen, der niedrige Geräuschpegel und die vollkommene Anpassung an den C 64 sind Argumente, die für diesen Drucker sprechen. Leider wurde bei der Realisierung der Commodore-Anpassung einiges der prinzipiell vorhandenen Fähigkeiten verschenkt. Ein Drucker, ohne die programmgesteuerte Funktionswahl und deutsche Umlaute, kann den heutigen Ansprüchen, auch im Heimbereich, nicht mehr gerecht werden. Es bleibt zu hoffen, daß diese feinen, aber wesentlichen Punkte noch korrigiert werden. Erst dann wird der GX-80 zum universell verwendbaren Drucker, für fast jeden Zweck, zu einem interessanten Preis.

(aw)

Info: Epson Deutschland GmbH, Am Seestern 24, 4000 Düsseldorf 11, Tel. 0211/5 95 20

# Turbo-Floppys – zweite Generation \[28-29\]

> Die Beschleunigungssysteme für die 1541 werden immer besser. Zwei Systeme werdenmer wohl das Rennen um die Gunst der Käufer machen: SpeedDos plus und Prologic Dos. Wir haben sie getestet.

Beschleuniger für die 1541 gibt es inzwischen viele: Von der reinen Software-Lösung (Hypra-Load) bis zur Installation eines parallelen Busses. Am schnellsten und sichersten sind die letztgenannten Systeme, leider aber auch am teuersten.

Die zwei derzeit wohl besten Hardware-Erweiterungen haben wir unter die Lupe genommen. Sie zeichnen sich beide durch Geschwindigkeit, Komfort und Zusatzfunktionen aus.

## SpeedDos plus — klein, aber oho!

Da wäre erst einmal SpeedDos plus, die verbesserte Version von SpeedDos. Geliefert werden zwei neue Betriebssysteme und ein Kabel zum Preis von 269 Mark. Interessant ist SpeedDos hauptsächlich deswegen, weil es inzwischen schon einige Programme gibt, die die SpeedDos-Hardware ausnutzen, so zum Beispiel das Kopierprogramm »FCopy III«, (vorgestellt in 64’er 8/85), das Schnelladesystem »FLoad 3.0« (siehe Kasten) und das Kopierprogramm »Copy +« (siehe unter Aktuell).

Wie gesagt, ist SpeedDos plus eine leicht verbesserte Version des bekannten SpeedDos. Da wir SpeedDos aber schon in der Ausgabe 4/85, Seite 22, ausführlich getestet haben, wollen wir hier nur einmal einen groben Überblick geben und die Unterschiede zu SpeedDos selbst aufzeigen.

Die SpeedDos-Hardware ist relativ einfach aufgebaut. Die parallele Busübertragung läuft über ein zehnpoliges Flachbandkabel. Dieses wird am User-Port des C 64 angeschlossen. Auf der Laufwerksplatine muß zum Anschluß ein Baustein (6522) gesockelt werden.

Ins Betriebssystem des Computers wurden integriert: eine Basic-Erweiterung ähnlich dem DOS-Wedge auf der Commodore-Demo-Diskette, eine Centronics-Schnittstelle (ebenfalls am User-Port), eine Funktionstastenbelegung, ein Mini-Monitor sowie Verbesserungen an der LIST- und der RESET-Routine.

Auf der Laufwerksseite finden sich an Verbesserungen: schnelles Formatieren mit vollem Verify (23 Sekunden), Löschschutz für Files, Zentrieren der Diskette beim Einlegen sowie schnellere Tonkopfbewegungen.

Für SpeedDos plus wurden zusätzliche Veränderungen im Betriebssystem des Computers vorgenommen. Der parallele Bus und das Laufwerks-Betriebssystem ist identisch zu SpeedDos. Folgende Veränderungen hat SpeedDos plus zu bieten: eine OLD-Funktion, Hardcopies vom Textbildschirm, Rechnungen in Binär, Oktal und Hexadezimal von Basic aus, sowie einige kleine Editor-Verbesserungen.

Die Verträglichkeit der Erweiterung zu professioneller Software ist sehr hoch: Sollte ein Programm mit den schnellen Lade-Routinen von SpeedDos nicht laufen, kann man auf langsamere, aber verträglichere Routinen durch Angabe der Sekundäradresse Zwei beim LOAD-Befehl umschalten. Im Notfall zieht man einfach den User-Port-Stecker ab, und schon wird wieder ganz normal (und langsam) geladen. Wir konnten während der Testzeit kein Programm auftreiben, das sich nicht zur Zusammenarbeit mit SpeedDos plus bewegen ließ. Fast hätten wir's vergessen: Natürlich macht SpeedDos plus Ihre Floppy schneller. Wieviel schneller, das können Sie aus der Tabelle ersehen, in der ein paar typische Zeiten festgehalten sind.

## Prologic Dos — Das Geschwindigkeitswunder

Der zweite Beschleuniger heißt Prologic Dos und ist eine kleine Sensation: 25mal schneller laden wurde versprochen und das mit normal gespeicherten Programmen. Um dies zu erreichen, mußte allerdings ein etwas größerer Aufwand bei der Laufwerks-Hardware getrieben werden. Trotz der komplizierten Erweiterungsplatine im Laufwerk soll Prologic Dos nur knapp 300 Mark kosten. Durch die eingesteckte Zusatzplatine wird beispielsweise erreicht, daß ein kompletter Track im Laufwerks-RAM zwischengespeichert werden kann. Die Daten, die sich auf einem Track befinden, können in einer Umdrehung der Diskette gelesen werden. Dann sind vorerst keine Zugriffe auf die Diskette mehr nötig, erst wieder bei einem Trackwechsel. In der Zwischenzeit können die angeforderten Daten sofort aus dem RAM an den Computer weitergegeben werden. Ähnlich funktioniert das Schreiben. Hier wird der Track im RAM zusammengestellt und erst wenn er fertig ist, auf die Diskette geschrieben. Welche fantastischen Lade- und Speichergeschwindigkeiten damit möglich sind, können Sie unserer Tabelle entnehmen.

Wie gesagt, ist die Prologic Dos-Hardware etwas umfangreicher als die von SpeedDos. Eine große Zusatzplatine für das Laufwerk und eine weitere für den Expansionport des Computers werden geliefert. Der Expansionport geht aber nicht verloren, da er durchgeführt ist. Verbunden sind die beiden mit einem Flachbandkabel, welches gleichzeitig den parallelen Bus darstellt. Das Betriebssystem des Computers muß nicht ausgewechselt werden, da sich das neue Betriebssystem ebenfalls auf der Platine im Expansionport befindet.

Aber neben der Beschleunigung bietet Prologic Dos noch einiges an Bedienungskomfort. So hat man jetzt die Möglichkeit, Disketten vierzigspurig zu formatieren, zu beschreiben und zu lesen. Dadurch ergibt sich ein Speicherplatzgewinn von 85 Blöcken oder mehr als 20 KByte pro Diskette. Diese Option ist soft- und hardwaremäßig schaltbar. Außerdem kann man von Basic aus an beliebige Speicheradressen laden. Es läßt sich auch das RAM unter dem Basic-ROM ($A000-$BFFF) auf Diskette speichern.

Auf der Computerseite findet man bei Prologic Dos die fast schon üblichen Optionen: belegte Funktionstasten, eingebautes DOS, modifizierte LIST- und Reset-Routinen, Tastatur-Repeat, Textschirm-Hardcopy, sowie eine Centronics-Schnittstelle, die allerdings nicht den User-Port benutzt, sondern sich auf der Platine im Expansionport befindet. Diese Schnittstelle ist aber vollkommen zu User-Port-Schnittstellen kompatibel, das heißt, daß die üblichen Kabel verwendet werden können. Programme, die eingebaute User-Port-Centronics-Schnittstellen haben, können natürlich weiter genutzt werden, dann muß man sein Druckerkabel auf den User-Port aufstecken. Übrigens sind, und das wird Besitzer von Akustikkopplern freuen, die RS232-Routinen bei Prologic Dos vollständig erhalten geblieben.

Auch bei der 1541 selber hat sich einiges getan. So hat das Laufwerk ein neues Kommando bekommen: »X«. Mit diesem Kommando werden eine Reihe von Unterfunktionen gesteuert: Schreibschutz für Einzelfiles installieren und aufheben, Zusatz-RAM in Floppy ein- und ausschalten, schnelle Übertragung ein- und ausschalten, Verify nach Schreibzugriffen ein- und ausschalten sowie die Umschaltung 40/35 Tracks.

Ein Fehler der 1541 wurde übrigens mit einem Trick übergangen: Die Replace-Option beim SAVE-Befehl (»@«) funktionierte bisher nicht vernünftig. Bei Prologic Dos wird bei einem Replace einfach das alte File per Scratch gelöscht und dann das neue normal gespeichert.

Prologic Dos kann ebenfalls eine sehr hohe Verträglichkeit zu fertiger Software bescheinigt werden. Auch hier gilt: sollte ein Programm mal nicht laufen, genügt meistens ein Abschalten der schnellen Busroutinen, um zum gewünschten Ergebnis zu kommen. Lobenswert gegenüber SpeedDos ist, daß dies auch softwaremäßig geschehen kann. Und für ganz hartnäckige Fälle kann man Prologic Dos per DIP-Schalter komplett abschalten, so daß man wieder einen »jungfräulichen« Commodore 64 vor sich stehen hat.

Was Prologic Dos aber gegenüber SpeedDos weit hinaushebt, ist sein Preis-/Leistungs-Verhältnis. Trotz des Mehraufwands aufgrund der beiden umfangreichen Platinen soll es mit 298 Mark nicht viel mehr kosten als SpeedDos plus (269 Mark).

Spätestens mit Prologic Dos hat die zweite Generation der Floppy-Beschleuniger begonnen. SpeedDos hat zwar die Vorteile eines hohen Verbreitungsgrades und fertiger Software. Trotzdem ist Prologic Dos mit seinen Leistungen und seinem Preis mehr als nur Konkurrent im Rennen um den besten Floppy-Beschleuniger. Man darf gespannt sein, was die nächsten Monate uns noch bringen werden.

(aw/bs)

Info: SpeedDos plus: Elektronik-Service Christoph Dichte, Fährstr. 33, 2212 Brunsbüttel
Prologic Dos: Jann Datentechnik, Glimmerweg 22,1000 Berlin 47.

TODO ASIDE

## 30mal schneller mit SpeedDos

Wer SpeedDos schon besitzt, dem ist mit FLoad 3.0 eine billige Alternative zu Prologic Dos gegeben: FLoad 3.0 ermöglicht bis zu 30mal schnelleres Laden von Programmen von der 1541. Das System hat allerdings einen Nachteil: Damit Programme so schnell geladen werden können, müssen sie auf ein eigenes Format umkopiert werden. Dies bereitet bei kopiergeschützter Software verständlicherweise Probleme. Ein Testfile von 202 Blöcken wird mit FLoad 3.0 in weniger als sechs Sekunden geladen. Davon entfallen 2,5 Sekunden auf die Installation der neuen Busroutinen. Es ist nicht unbedingt notwendig, SpeedDos zu besitzen, um dieses Programm zu nutzen. Ein paralleles Kabel allein reicht. Dieses Kabel wird demnächst ebenfalls beim Vertrieb von FLoad 3.0 erhältlich sein. FLoad 3.0 soll unter fünfzig Mark kosten.

(bs)

Info: Frank Thomas, Neckarstr. 34, 6057 Dietzenbach 2

# Professionelle Floppy-Laufwerke für den C 64 \[30-31\]

> Ein bis zwei Megabyte Speicher, fünfmal schnellere Datenübertragung und höchste Zuverlässigkeit am C 64 — warum nicht? Die »großen« Laufwerke von Commodore machen es möglich.

Das 1541-Laufwerk ist neben dem 1571 das einzige von Commodore hergestellte Diskettenlaufwerk, das an den C 64 direkt anschließbar ist. Gleichzeitig ist es ab er auch das langsamste. Warum bei der Entstehung des C 64 ausgerechnet die 1541 (damals 1540) favorisiert wurde, obwohl Commodore auch andere, wesentlich leistungsfähigere Laufwerke herstellt, ist wahrscheinlich ein Relikt aus VC 20-Zeiten. Der Preis ist, zumindest heute, kaum noch ein Grund auf ein größeres Laufwerk zu verzichten. Die SFD 1001, ein sehr schnelles Laufwerk mit einem MegaByte Speicherkapazität, wird inzwischen schon für 698 Mark im Handel angeboten und ist damit nicht wesentlich teurer als die 1541. Auch die 8250 (alte Version), ein Doppellaufwerk mit zwei Megabyte, kostet heute weniger als 2 000 Mark. Diese Laufwerke lassen sich leider nicht direkt am C 64 anschließen, da sie einen parallelen IEEE-488-Bus voraussetzen. Dieser Bus arbeitet wesentlich schneller als der serielle IEC-Bus des C 64. Natürlich können serielle Schnittstellen auch recht flott sein (über 19200 Bit pro Sekunde), aber beim seriellen IEC-Bus kommt ein weiteres Manko hinzu: Das gesamte Bus-Timing wird durch Software gesteuert, die umständlich und langsam arbeitet. Deshalb gibt es dort auch so viele Ansatzpunkte für Beschleunigungsroutinen, wie zum Beispiel das Programm »Hypra-Load«.

## Der IEEE-488-Bus

Dieser Bus ist kein Commodoretypisches Konzept, er wird von verschiedenen Herstellern, vor allem für Mehrbenutzer- und Meßsysteme, verwendet. Deshalb kann man ihn durchaus als Standard-Schnittstelle für Peripheriegeräte bezeichnen. Er wurde bei nahezu allen Geräten von Commodore verwendet, die vor dem C 64 entwickelt wurden (zum Beispiel bei der 3000-, 4000-, und 8000-Serie). Sogar der legendäre Pet 2001 verfügte über diese Schnittstelle.

Darum ist es schwer verständlich, daß bei der Entwicklung des C 64 von diesem bewährten Konzept abgewichen wurde. Glücklicherweise ist der C 64 ein sehr vielseitiger Computer. So dauerte es nicht lange, bis die ersten IEEE-488-Interfaces für den C 64 auf den Markt kamen. Sehr gut eignet sich das in der 64’er, Ausgabe 7/85 vorgestellte Interface, nicht nur wegen seines Preises (Bausatz 75 Mark, Fertiggerät 98 Mark), sondern auch wegen der sehr guten Verträglichkeit mit den meisten kommerziellen Softwareprodukten. Viele Textprogramme arbeiten zum Beispiel völlig problemlos mit diesem Interface.

Es gibt eine große Palette IEEE-488-Peripheriegeräte von Commodore und anderen Herstellern. Schon die einfacheren Diskettenlaufwerke wie die 2031 oder die 4040 beeindrucken durch ihre Schnelligkeit, die fünfmal höher liegt als bei der 1541. Aber richtig interessant wird die Sache erst bei den Laufwerken SFD 1001 und 8250.

## Die großen Laufwerke

Es ist schon eine beeindruckende Tatsache, wenn man nach dem Formatieren einer Diskette mit der SFD 1001 die Meldung »4133 Blocks free« bekommt. Aber dieses Laufwerk ist nicht nur fünfmal so schnell und kann mehr als das Sechsfache speichern, dieser Platz ist auch vielseitiger verwendbar, als bei der 1541 oder auch bei älteren Floppies, wie der 8050. Bei der 8050, einem Doppellaufwerk mit 500 KByte pro Diskette, dürfen relative Dateien nur zirka ein Drittel einer Diskette füllen. Diese Regelung gibt es bei der SFD 1001 nicht mehr, so daß die Größe von relativen Dateien nur durch den verfügbaren Diskettenplatz begrenzt ist. Gleichzeitig sind diese Laufwerke unerhört zuverlässig, ein kleines Beispiel aus der Praxis soll dies verdeutlichen. Beim Commodore Anwender-Club München ist eine SFD 1001 zum Betrieb der Club-Mailbox (Tel. 0 89/ 812 03 38) eingesetzt. Das Mailbox-Programm ist so konzipiert, daß es keinerlei Daten (außer dem Programm selbst) im Speicher hat. Die gesamte Datenübertragung wird direkt von und auf der SFD 1001 abgewickelt — eine enorme Belastung. Dies macht die SFD 1001 nun schon seit mehr als vier Monaten Tag für Tag, 24 Stunden durchgehend. In dieser Zeit gab es keinen einzigen Schreib- oder Lesefehler!

Alle IEEE-488-Laufwerke haben einen doppelt so großen Pufferspeicher, wie die 1541. Das bedeutet, daß drei relative oder fünf sequentielle Dateien gegenüber einer relativen oder drei sequentiellen Dateien bei der 1541 gleichzeitig geöffnet sein dürfen. Besonders interessant ist das Arbeiten mit Doppellaufwerken, wie zum Beispiel der 4040, 8050 oder 8250. Die 4040-Floppy besitzt als einzige das gleiche Aufzeichnungsformat wie die 1541, allerdings verleiht ihr der IEEE-488-Bus fast Flügel. Trotz des gleichen Diskettenformats ist eine 4040 mehr als zwei zusammengekoppelte 1541.

## Ein Doppellaufwerk ist mehr als zwei Einzellaufwerke

Durch die Befehle BACKUP und COPY dupliziert die 4040 beispielsweise eine Diskette, ohne den Computer damit zu belasten. Diese ganzen Möglichkeiten stehen natürlich auch mit der 8050- oder 8250-Floppy offen, nur mit wesentlich höheren Datenmengen. Das bedingt aber auch ein anderes Aufzeichnungsformat auf der 5¼-Zoll-Diskette. Eine 8250 kann deshalb keine auf der 1541 bespielte Disketten lesen und umgekehrt. Der einzige Weg, die Daten vom 1541 auf den SFD 1001- und 8250-Laufwerken zu verwenden, besteht darin, sie zu überspielen. Mit dem Überspielen kommerzieller Programme vom 1541- auf das 8250-Format hat es allerdings so seine Besonderheit auf sich. Obwohl die meisten Programme auch mit diesen Laufwerken (bei Verwendung des 64'er-Interfaces) problemlos funktionieren, ist man gezwungen, den, verständlicherweise angebrachten, Kopierschutz zu entfernen. Bei der Raffinesse heutiger Schutzarten wird das aber in der Regel ein erfolgloses Unterfangen sein.

## DOS-Befehle

Wenn man über ein Doppellaufwerk verfügt, bekommt zum Beispiel der DOS-Befehl COPY eine ganz neue Bedeutung. Mit ihm kann man jetzt einzelne Files von einer Diskette auf eine andere kopieren. Man kann aber auch alle Möglichkeiten der Namensauswahl treffen, die schon von der 1541 her bekannt sind. Damit sind die Zeichen»?«und »\*«, die die Programmauswahl aus dem Disketteninhaltsverzeichnis wesentlich erleichtern, gemeint. So kann man jetzt zum Beispiel alle Programme, die mit »C« anfangen, mit dem Befehl: OPENl,8,15,»C0:\*=1:C\*« leicht vom Laufwerk 1 zum Laufwerk 0 kopieren. Übrigens kann man mit dem COPY-Befehl auch Dateien beim Kopieren zusammenfügen, wie es ja schon von der 1541 her bekannt ist. Das geht aber eigentlich nur bei sequentiellen Dateien gut, da Programme nur physisch zusammengehängt werden. Was weniger bekannt ist, und auch bei der 1541 geht, ist das Anhängen einer Datei an eine andere, ohne die erste Datei zu kopieren. Der Befehl lautet hier: »C0:FILE1 = 0:FILE1,0:FILE2«.

Das bedeutet, daß die Datei mit dem Namen »FILE2« ein zweites Mal auf der Diskette angelegt und an die Datei »FILE1« angehängt würde. Die Laufwerksbezeichnungen »0:« sind mit anzugeben, obwohl sie eigentlich überflüssig wären. Werden sie weggelassen, so meldet die Floppy den Fehler »FILE EXISTS« und deutet damit an, daß sie die Datei mit Namen »FILE1« auch kopieren will, aber der Zielname identisch mit dem Urnamen ist. Für Doppellaufwerke interessant ist der Befehl »DUPLICATE«, mit dem die Floppy eine komplette Kopie aller Informationen durchführt. Dieser Befehl wird in den Handbüchern von Commodore nicht erläutert. Deshalb sei hier näher darauf eingegangen. Die Syntax des Befehls lautet »D:1 = 0«.

Hierbei findet eine Datenübertragung einer gesamten Diskette vom Laufwerk 0 auf das Laufwerk 1 statt. Es geht natürlich auch umgekehrt, wenn man die beiden Werte vertauscht. Die Floppy formatiert die angegebene Zieldiskette erst und kopiert dann Spur für Spur von der Original- auf die Diskette. Dieser Vorgang läuft intern in der Floppy ab, belastet also weder den Bus noch den daran angeschlossenen Computer.

## Endlich ein angemessener Massenspeicher

Insgesamt betrachtet, kann man sagen, daß das Arbeiten mit den »großen« Floppies von Commodore einfach fantastisch ist. Man hat endlich einen Massenspeicher, der dem C 64 gewachsen ist, sowohl in bezug auf die Geschwindigkeit als auch den verfügbaren Speicherplatz. Der Star dieser Laufwerke (abgesehen vom Festplattenlaufwerk mit 9 MegaByte) ist die 8250, denn sie besteht aus zwei Laufwerken mit insgesamt vier Schreib-/Leseköpfen. Mit ihr kann man 2 Mega-Byte direkt ansprechen. Das ist wesentlich mehr als der Marktführer der Personal Computer, der IBM-PC, bieten kann. Dessen Laufwerke haben in der Grundausstattung nur zweimal 360 KByte und damit kaum mehr als ein Drittel der Kapazität einer 8250 anzubieten.

## Warum eigentlich nicht?

Die 1541/1571 wird sicherlich das Standard-Laufwerk für den C 64 bleiben. In ihrem Disketten-Format gibt es die meisten Programme und ihre Leistungen reichen in der Mehrzahl der Anwendungen auch aus. Da sich aber auch im Heimbereich Anwendungen wie Datenverwaltung und Textverarbeitung immer mehr durchsetzen, ist die Anschaffung eines»großen« Laufwerks sicherlich eine Überlegung wert. Eine der interessantesten Alternativen ist die SFD 1001, die, zusammen mit dem von uns veröffentlichten Interface, weniger als 800 Mark kostet. Nicht zu unterschätzen ist auch der Preisvorteil bei den Speichermedien, denn immerhin paßt auf eine mit der SFD bespielten Diskette das Sechsfache einer 1541-Diskette. In Kombination mit diesen Speicherriesen macht der C 64 fast seinem Nachfolger Konkurrenz, dem C 128.

(K. Hinsch/aw)

# Diskettenlaufwerk 1541 selbst justiert \[32-34\]

> Es ist bekannt, daß das mechanisch anfällige 1541-Diskettenlaufwerk häufig Probleme beim Lesen eigener und im besonderen fremder Disketten hat. Hier werden zwei Verfahren vorgestellt, mit denen Sie diesen Fehler beseitigen können.

In den meisten Fällen ist die Ursache ein verstellter Schreib-Lesekopf. Wird das Laufwerk zu einem Reparaturservice eingeschickt, sind Wartezeiten bis zu drei Monaten leider üblich. Außerdem ist die Reparatur nicht ganz billig, und oft tritt der gleiche Fehler innerhalb kürzester Zeit wieder auf.

Wir wollen Ihnen deshalb zwei Verfahren vorstellen, mit denen Sie das 1541-Diskettenlaufwerk selbst einstellen können, beziehungsweise von jedem Radio und Fernsehfachhandel einstellen lassen können. Bei dem ersten Verfahren handelt es sich um eine reine Softwarelösung, mit der das Laufwerk zwar nicht exakt eingestellt werden kann, in den meisten Fällen ist es aber vollkommen ausreichend. Mit dem zweiten Verfahren kann das Laufwerk dagegen absolut genau eingestellt werden. Benötigt wird allerdings ein Oszilloskop.

## Fixierung der Mechanik

Unabhängig vom Verfahren muß zuerst der Schreib-Lesekopf neu fixiert werden. Schalten Sie dazu bitte alle Geräte aus und ziehen das Netz- und IEC-Kabel aus dem Laufwerk.

Nach dem Lösen der sechs Kreuzschlitzschrauben auf der Unterseite, läßt sich der Gehäusedeckel des Laufwerks entfernen. Da sich der Schrittmotor, an dem später die Einstellung vorgenommen wird auf der Chassisunterseite befindet, muß auch der Gehäuseboden entfernt werden, der mit sechs Kreuzschlitzschrauben befestigt ist. Lösen Sie bitte diese sechs Schrauben und ziehen vorsichtig den Stecker ab, der die grüne Leuchtdiode mit der Platine verbindet. Um später beim Zusammenbau Fehler zu vermeiden, markieren Sie alle Steckverbindungen mit einem Filzstift. Als nächstes lösen Sie alle Schrauben, die die Platine mit dem Chassis verbinden und ziehen vorsichtig die restlichen Steckverbindungen ab.

Die Platine kann nun abgehoben und zur Seite gelegt werden. Liegt das »nackte« Chassis vor Ihnen, sehen Sie auf der rechten Seite ein Stahlband, das den Schreib-Lesekopf mit dem Schrittmotor über einen Zylinder verbindet (Bild 1). Da der Zylinder sich bei Erwärmung mehr ausdehnt als die Achse des Schrittmotors und nur über eine Preßpassung mit dieser verbunden ist, tritt zwischen Schrittmotor-Achse und Zylinder ein Schlupf auf. Das heißt, daß sich der Zylinder auf der Achse beim Formatieren einer neuen Diskette verdreht und dadurch den Schreib-Lesekopf verstellt. Um das zu verhindern, muß die Achse und der Zylinder im betriebswarmen Zustand verklebt werden. Dazu eignen sich Superkleber, wie sie von vielen Firmen angeboten werden oder Epoxydharz, das mit einem Härter versehen ausreichend Festigkeit gewährleistet. Lassen Sie diesen Kleber vorsichtig zwischen Achse und Zylinder laufen. Passen Sie aber auf, daß der Kleber nicht versehentlich mit dem Stahlband in Berührung kommt. Nach etwa drei Stunden Trockenzeit können Platine und Chassis zusammengeschraubt werden. Vergessen Sie nicht die Steckverbindungen wiederherzustellen. Der Schreib-Lesekopf ist jetzt fixiert, und der eigentliche Einstellvorgang kann beginnen. Stellen Sie dazu das Laufwerk so vor sich hin, daß der Diskettenschacht senkrecht steht. Stellen Sie die Verbindung mit dem Computer und dem Netz wieder her und schalten alle Geräte ein.

## Verfahren 1 (Softwarelösung)

Laden Sie das vorher abgetippte Programm (Listing 1) und legen eine »sauber« bespielte Diskette in das Laufwerk (am besten die Test Demo Diskette). Nach dem Lösen der zwei Schrittmotor-Befestigungsschrauben (Einstellschrauben) an der Unterseite des Laufwerks, kann das Programm mit RUN gestartet werden. Der Menüunterpunkt »Feineinstellung« eignet sich nicht zur Justierung des Diskettenlaufwerkes; denn hier werden alle Spuren getestet, und die Lesezeiten der einzelnen Spuren weichen voneinander minimal ab. Es läßt sich also keine minimale Lesezeit einstellen. Wählen Sie deshalb den Menüunterpunkt Grobeinstellung. Sie werden nach der maximal zulässigen Lesezeit gefragt. Die Voreinstellung beträgt 0,2 Sekunden. Das ist die Zeit, die dem Laufwerk zur Verfügung steht, um einen Sektor zu lesen. Wird diese Zeit überschritten, erscheint auf dem Bildschirm in roter Farbe eine Fehlermeldung. Ist die Lesezeit kürzer als 0,2 Sekunden wird einmal die tatsächliche Zeit, die das Laufwerk braucht um einen Sektor zu lesen angezeigt. Zum anderen wird diese Lesezeit optisch durch einen querliegenden Balken verdeutlicht.

Versuchen Sie durch Verstellung des Schrittmotors diese Lesezeit auf ein Minimum zu justieren. Ist das geschehen, sind die Einstellschrauben leicht anzuziehen, so daß sich der Motor nicht mehr von selbst verstellen kann. Sie werden sehen, daß sich die Lesezeit alleine durch das Festschrauben verändert hat. Versuchen Sie jetzt, indem Sie den Vorgang wiederholen, die Lesezeit nochmals zu optimieren. Anschließend sind die Einstellschrauben fest anzuziehen und das Laufwerk wie oben beschrieben, nur in umgekehrter Reihenfolge, zusammenzubauen.

## Verfahren 2 (Hardwarelösung)

Da der C 64 wie jeder andere Computer auch, ein Gerät ist, das Daten digital verarbeitet, lassen sich analoge Einstellvorgänge zwar hinreichend genau, aber nicht exakt durchführen. Aus diesem Grund haben wir eine »Hardwarelösung« entwickelt, mit der jeder, der den Umgang mit einem Oszilloskop beherrscht, das 1541-Diskettenlaufwerk absolut exakt einstellen kann. Voraussetzung ist natürlich auch wieder eine Diskette, die mit einem Disketten-Laufwerk beschrieben wurde, das exakt eingestellt war. Die Vorgehensweise ist die gleiche wie beim Verfahren 1, mit dem Unterschied, daß nach dem Einschalten aller Geräte und nach dem Lösen der Einstellschrauben folgende Zeilen anstelle des Programms eingegeben werden müssen:
10 OPEN 2,8,2,"#": OPEN 15,8,15
20 PRINT#15,"U1 2 0 18 0":GOTO 20

Die Aufgabe dieses kleinen Programms, das mit RUN gestartet wird, ist das permanente Lesen des Sektors 0 auf Spur 18. Diese Spur und dieser Sektor sind mit Absicht so gewählt worden, da der Abstand nach Spur 1 und Spur 35 der gleiche ist. Stellen Sie nun die Y-Ablenkung des Oszilloskops auf 10 mV/cm und die X-Ablenkung auf 1 mS. Verbinden Sie den Tastkopf, der bei den angegebenen Einstellwerten ein Tastverhältnis von Vio haben muß, mit dem in Bild 1 markierten IC-Pin 8. Das Oszillogramm zeigt ein »hochfrequentes« Signal, das bei exakter Justierung einen Spannungspegel von etwa 350 mVss haben sollte. Dieser Spannungspegel ist aber nur ein Anhaltspunkt und hängt in erster Linie vom Alter der Diskettenaufnahme ab. Verdrehen Sie den Schrittmotor so lange, bis der Spannungspegel ein Maximum erreicht. Auch ist bei einem dejustiertem Schreib-Lesekopf dem hochfrequenten Signal ein niederfrequentes Signal überlagert, das an der zyklischen Veränderung der Amplitude zu erkennen ist. Dieses überlagerte Signal verschwindet bei exakt eingestelltem Schreib-Lesekopf.

(M. Kastermeier/ah)

# Die Datasette streikt nie wieder \[34-36\]

> Einer der häufigsten Fehler, der bei der Datasette auftritt, ist ein verstellter Tonkopf. Dieser Fehler macht sich besonders dann bemerkbar, wenn mit Turbo Tape oder ähnlichen Programmen gearbeitet wird. Mit der hier beschriebenen Schaltung läßt sich extrem einfach, ohne jegliches Programm, der Tonkopf an jede Datenkassette anpassen.

Um die Datasette oder einen anderen Datenrecorder zu justieren, gibt es grundsätzlich zwei Möglichkeiten. Eine kleine elektronische Schaltung, mit der sich unabhängig vom Computer die Tonkopfstellung an jede Datenkassette anpassen läßt und ein Programm, das in irgendeiner Form die Tonkopfstellung grafisch auf dem Monitor des Computers darstellt. Ein solches Programm ist aber unbrauchbar, egal wie gut oder schlecht es ist. Der Grund dafür ist ganz einfach der, daß sich nach erfolgter Justage Programme, die zuvor auf anderen Kassetten gespeichert wurden, nicht mehr laden lassen; unter anderem auch das Justageprogramm selbst. Sollen solche Programme geladen werden, müßte das Justageprogramm noch einmal abgetippt werden.

Um das zu vermeiden, stellen wir Ihnen eine Schaltung vor, mit der das Einstellen extrem einfach wird.

Damit die Schaltung verständlich wird, zuerst ein paar Worte zur Datasetten-Elektronik.

Sie besteht aus zwei Hauptgruppen, einem zweistufigen Verstärker, der die Aufgabe hat, das analoge Signal, das vom Tonkopf kommt, zu verstärken. Analog deshalb, weil sich digitale Signale nicht auf Band speichern lassen. Selbst wenn ein solches Signal am Tonkopf anliegt, wird es nicht als solches auf das Band geschrieben, sondern in Form einer Sinusschwingung. Beim Laden muß diese Sinusschwingung wieder in eine Form gebracht wer-

den, die der Computer versteht. Also Rechtecksignal. Dies geschieht in der zweiten Hauptstufe, mit Hilfe eines Schmitt-Triggers. Am Ausgang des Schmitt-Triggers liegt das Signal in Form einer Rechteckschwingung vor, die entweder einen Spannungspegel von 0 oder 5 Volt hat. Dieses Signal eignet sich nicht zur Einstellung des Tonkopfes, weil die Amplitude des Signals, unabhängig von der Tonkopfstellung, immer konstant zwischen 0 und 5 Volt hin- und herspringt.

Die Messung mit einem Oszilloskop ergab aber, daß, abhängig von der Tonkopfstellung, die Amplitude der analogen Spannung schwanke. Ist der Tonkopf optimal eingestellt, geht die Amplitude der Spannung gegen ein Maximum. Ist der Tonkopf dejustiert, weicht die Amplitude, abhängig von der Tonkopfstellung, vom Maximum ab. Man kann es jedoch keinem Datasetten-Besitzer zumuten, sich ein Oszilloskop anzuschaffen, nur um die Datasette zu justieren.

## Bastelanleitung

Die vorliegende Bastelanleitung, deren Bauteile zu einem Preis von unter fünf Mark zu haben sind, ersetzt in diesem Fall ein Oszilloskop. Mit der Schaltung (Bild 1) läßt sich eine Spannung, natürlich in gewissen Grenzen, auf Maximum abgleichen. Das Herz ist ein Operationsverstärker vom Typ LF 356, der als Komparator (Schwellwertschalter) betrieben wird. Außerdem hat dieser Operationsverstärker gegenüber anderen den Vorteil, daß seine Eingangsstufe aus einem Feldeffekttransistor besteht. Der Eingangswiderstand geht dadurch gegen unendlich und belastet das zu messende Signal in keinster Weise. Mit dem Trimmpotentiometer läßt sich eine Schwellspannung (Bild 2) einstellen, die laufend mit der analogen Sinusschwingung verglichen wird.

Ist der Momentanwert der Sinusschwingungkleiner als die vorgegebene Schwellspannung, führt der Ausgang des LF 356 0 Volt. Wird der Momentanwert größer, springt der Ausgang des LF 356 auf + 5 Volt und regt dadurch eine Leuchtdiode an. Wird die Schwellspannung in den Scheitelpunkt der Sinusschwingung gelegt (gestrichelte Linie in Bild 2), geht die Zeitspanne, in der der Ausgang des Komperators auf 5 Volt liegt, gegen ein Minimum. Daraus folgt, daß die Helligkeit der Leuchtdiode abnimmt, je näher die Schwellspannung an den Scheitelwert der Sinusschwingung rückt. Wird dagegen die Amplitude des Signals, also der Sinusschwingung, vergrößert, wird die Helligkeit der Leuchtdiode wieder größer. Denn die Zeitspanne, in der der Ausgang des Komparators auf 5 Volt liegt, wird größer. Dieses ist vom Prinzip her der ganze Abgleichvorgang. Mit dem Trimmpotentiometer wird auf minimale Helligkeit und mit der Tonkopfeinstellschraube auf maximale Helligkeit abgeglichen.

Aufgebaut wird die Schaltung auf einer kleinen Lochrasterplatine. Diejenigen, die sich eine Platine ätzen wollen, finden das Layout im Verhältnis 1:1 in Bild 3. Wie die einzelnen Pins der Bauelemente miteinander verbunden werden, zeigt Bild 4. Achten Sie beim Zusammenbau auf die richtige Polarität der Leuchtdiode (Bild 5).

Ist die Schaltung zusammengelötet, muß sie noch im Datasettengehäuse untergebracht werden. Offnen Sie dazu die Datasette und bohren an einer geeigneten Stelle ein Loch in das Gehäuseoberteil, so daß die Leuchtdiode gerade in dieses Loch paßt.

Verbinden Sie die Anschlüsse»+« und »—« (Bild 4) mit den Motoranschlußklemmen. Dabei ist ebenfalls auf die Polarität zu achten. Im allgemeinen ist sie auf dem Motor gekennzeichnet. Der in Bild 4 gekennzeichnete Punkt »E« (für Eingang) muß über ein abgeschirmtes Kabel mit einem der beiden Lötpunkte auf der Datasettenplatine (Bild 6) verbunden werden. Die Abschirmung ist an den mit »—« gekennzeichneten Punkt (Bild 4) zu löten.

Bei den beiden Lötpunkten handelt es sich um den Ausgang des ersten beziehungsweise zweiten Analogverstärkers einer Commodore-Datasette.

Geräte anderer Hersteller sind zum Teil anders aufgebaut. Es kann vorkommen, daß die beiden in Bild 6 gekennzeichneten Analogverstärker in einem Gehäuse untergebracht sind. In diesem Fall ist der Punkt »E« mit dem Pin 8 dieses ICs zu verbinden.

## Einfaches Einstellen

Bevor die Datasette zusammengebaut wird, ist die Schaltung an die Datasetten-Elektronik anzupassen. Schalten Sie dazu den C 64 ein, legen eine Programm-Kassette in die Datasette und drücken die PLAY-Taste.

Nach der direkten Eingabe POKE 54272 + 24,15 drehen Sie den Lautstärkeregler Ihres Monitors auf Maximum und warten bis die Übertragung des Programm- oder Datenco-. des im Lautsprecher zu hören ist. Nun muß in einem wechselseitigen Einstellvorgang die Helligkeit der Leuchtdiode am Trimmpotentiometer auf Minimum und an der Tonkopfeinstellschraube auf Maximum abgeglichen werden. Bei Commodore-Datasetten befindet sich die Tonkopfeinstellschraube (Kreuzschlitz) bei gedrückter PLAY-Taste unter einem etwa 5 mm großen Loch auf dem Gehäuseoberteil. Soll eine Datasette justiert werden, muß der Kassettendeckel abgebaut werden. Die Tonkopfschraube ist nun eine der beiden Tonkopfbefestigungsschrauben und zwar die, an der sich eine Spiralfeder befindet. Doch nun zum Abgleichvorgang. Dazu gehen Sie bitte folgendermaßen vor:

1.	Am Trimmpotentiometer drehen, bis die Leuchtdiode schwach flackert. Dadurch wird die Schwelloder Schaltspannung in den Scheitelpunkt der Sinusschwingung gelegt.
2.	An der Tonkopfeinstellschraube drehen, bis die Helligkeit der Leuchtdiode ein Maximum erreicht hat. Dadurch wie die Amplitude des Signals, dasvomTonkopfkommt, auf Maximum abgeglichen.

Der letzte Punkt ist nur dann erforderlich, wenn die Datasette nicht optimal eingestellt war, beziehungsweise eine Kassette benutzt wird, die mit einer anderen Datasette beschrieben wurde. In diesem Fall muß der Einstellvorgang solange wiederholt werden, bis eine Einstellung erreicht ist, bei der die Leuchtdiode erlischt sobald der Tonkopf minimal verstellt wird. Bauen Sie nun die Datasette wieder zusammen. Schalten Sie voher aber den C 64 aus.

Wollen Sie jetzt ein Programm laden, das mit einem dejustiertem Tonkopf aufgenommen wurde, brauchen Sie nur noch, nachdem der C 64 eingeschaltet wurde, die Kassette einzulegen, die PLAYTaste zu drücken und so lange an der Tonkopfeinstellschraube drehen, bis die Helligkeit der Leuchtdiode ein Maximum erreicht hat.

(ah)

# Das große Rennen \[37\]

> Neben der Floppy und der Datasette gibt es nah die sogenannten Bandlaufwerke. Das bekannteste aus dieser Gruppe schickten wir zu einem Geschwindigkeitsvergleich auf die Rennbahn.


Daß Geschwindigkeit keine Hexerei ist, beweisen die inzwischen recht zahlreichen Hard- und Software-Erweiterungen, die die Floppy schneller machen sollen. Kein Zweifel, Schnelligkeit ist gefragt. Lange Wartezeiten beim Laden sind out.

Bei diesen Worten denkt man natürlich sofort an die »Speicherschnecke« Datasette. Aber nicht jeder hat das Geld, ein Floppy-Laufwerk zu kaufen; es muß also ein Kompromiß geschlossen werden. Die eine Möglichkeit ist, das »Turbo-Tape de Luxe« aus dem 64'er-Sonderheft Nummer 5 abzutippen, die andere, sich eine Floppy-Alternative anzuschaffen. Damit meinen wir Bandlaufwerke mit besonderen Kassetten. Den bekanntesten Vertreter dieser Klasse, nämlich das »Quick-Data-Drive« von NCS, haben wir einmal der Datasette, dem Turbo-Tape und der Floppy in einem Geschwindigkeitsvergleich gegenübergestellt.

### Testbedingungen:

Es galt erstens, ein genau 8 KByte langes Basic-Programm zu speichern und wieder zu laden, und zweitens, eine sequentielle Datei mit 2 KByte Länge ebenfalls zu speichern und wieder zu laden.

Beim Arbeiten mit dem Quick-Data-Drive (QDD) zeigte sich schon bald eine deutliche Schwäche: Um das Gerät steuern zu können, muß ein spezielles »Quick-Operating-System« in den Computer geladen werden. Dieses Maschinenprogramm steht ab $C000 (49152) im Speicher. Da dieser Speicherbereich aber von vielen Basic-Programmen als Raum für Maschinenunterroutinen benutzt wird, kann es zu umfangreichen Problemen kommen.

Ein weiteres Problem: Da das QDD spezielle Endloskassetten verwendet, muß es bei jedem Laden das gesamte Band durchspulen, bis es die richtige Stelle gefunden hat. Bei den längsten Bändern (128 KByte) kann dies durchaus zu deutlichen Wartezeiten führen.

In der ersten Disziplin (Basic-Programme) zeigte sich schon, daß die Datasette, mit Turbo-Tape beschleunigt, durchaus der Floppy die Stirn bieten kann (siehe Tabelle).

Die zweite Überraschung bot das QDD: Es war fast doppelt so schnell wie das Diskettenlaufwerk! Beim Programme-Laden benötigte die Floppy 1541 sogar mehr als dreimal soviel Zeit.

Als zweite Disziplin waren sequentielle Dateien angesagt.

Auch dieser Durchgang verlief nicht ohne Schwierigkeiten: Turbo-Tape unterstützt nämlich die sequentielle Dateiverwaltung nicht.

Auch das QDD zeigt sich hier von seiner schwachen Seite. Die Floppy ist bei der Arbeit mit sequentiellen Dateien fast doppelt so schnell wie das Bandlaufwerk.

Als Fazit unseres kleinen Vergleichstests kann man sagen, daß das Quick-Data-Drive nur für den reinen Basic-Programmierer geeignet ist. Die Vorteile beschränken sich auf hohe Übertragungsgeschwindigkeit und einen relativ niedrigen Anschaffungspreis von 198 Mark. Die gravierendsten Nachteile sind, daß es erstens kaum fertige Software für dieses Laufwerk zu kaufen gibt und zweitens wegen der sehr ungünstig gewählten Speicherbelegung praktisch keine kommerziellen Programme mit dem QDD lauffähig sind. Auch sind die Kassetten mit Preisen zwischen 7,80 Mark für das 16-KByte-Band und 10,80 Mark für das 128-KByte-Band nicht gerade billig.

(tr)

Info: Quick-Data-Drive, Nettetaler Computer Shop (NCS), Steylerstr. 22, 4054 Nettetal 2, Tel. 0 2157/1616, Preis: 198 Mark

# Gut gekauft ist halb gespeichert \[38,40-41\]

> Die Diskette ist das wichtigste Speichermedium für Computerbesitzer. Unsere Marktübersicht hilft Ihnen, sich im »Diskettendschungel« zurechtzufinden.

Dem Disketten-Käufer wird die Bedeutung des Satzes »Qual der Wahl« recht bald bewußt. Disketten gibt es in den unterschiedlichsten Größen, und fast in jeder Farbe. Für den Commodore 64-Besitzer reduziert sich das Angebot auf 5¼-Zoll-Disketten. Die in diesem Format angebotenen Disketten sind allerdings nicht alle gleich. Sucht man die richtige Diskette, so ist es am besten einen Blick in das Laufwerk zu werfen. Das 1541-Laufwerk besitzt nur einen Schreib-/Lesekopf. Deshalb werden die Disketten auch nur auf einer Seite beschrieben. Unter dieser Voraussetzung eignen sich alle Disketten mit der Bezeichnung »SS« für Single Sided, die nur auf einer Seite geprüft sind. Disketten mit der Bezeichnung »DS« für Double Sided sind Garant für fehlerfreies Arbeiten auf beiden Seiten. Während SS-Disketten immer nur eine Schreibschutzkerbe besitzen, hat man bei DS die Möglichkeit zwischen Disketten mit einer oder zwei Kerben zu wählen. Natürlich kann man Disketten auch selbst mit einer zweiten Kerbe versehen, um dann auf die Rückseite zu schreiben — für Sicherheitskopien ein preiswerter Trick. Für viel benutzte Disketten eignet sich dies allerdings nicht, da der dem Schreib-/Lesekopf gegenüberliegende Andruckfilz immer über eine mit Daten beschriebene Seite schleift. Für die Güte einer Diskette gibt es weitere Kennbuchstaben. Die Buchstaben »SD« oder »1D« für Single Density (einfache Dichte) stehen meistens auf den etwas billigeren Disketten. Sie geben Aufschluß über die Dichte der Magnetisierungspartikel in der Diskettenbeschichtung. Finden Sie beispielsweise die Bezeichnung »DD« oder »2D« auf einer Diskette (Double Density = doppelte Dichte), besteht theoretisch die Möglichkeit, doppelt so viele Daten auf einer Diskette sicher abzulegen, als auf einer SD-Diskette. Für das 1541-Laufwerk genügt allerdings einfache Dichte. Nicht vernachlässigen dürfen Sie den Vermerk »Mit Verstärkungsring« (With Hub Ring) auf der Diskettenschachtel. Das heißt, daß um das Führungsloch der Diskette ein zweiter, verstärkend wirkender Ring geklebt ist. Da bei dem 1541-Laufwerk ein konischer Plastikring die Scheibe recht unsanft zentriert, ist es empfehlenswert, Disketten mit Verstärkungsring zu kaufen.

Dies alles sind Beurteilungskriterien, die Sie, ohne die Diskettenschachtel zu öffnen, feststellen können. Anders ist es aber mit den Qualitätsmerkmalen der Diskettenhülle, der Oberflächenstruktur der Magnetisierungsschicht und der Güte des Schutzvließes in der Diskette. Das ist für Sie in der Regel nicht so leicht überprüfbar. Die einzige Vergleichsmöglichkeit bieten die Datenblätter zu den einzelnen Disketten. Nur eines kann man hier mit Sicherheit sagen: Eine Spitzendiskette »schnurrt« leise vor sich hin ohne dabei die Tonlage nach oben oder unten zu verändern. Dies wäre nämlich ein Anzeichen dafür, daß sich die Diskette nicht einwandfrei in ihrem »Mantel« drehen kann. Das ist wichtig, weil es bei schwergängigen Disketten schnell zu Lesefehlern kommen kann.

Ein weiteres wichtiges Kriterium ist der Preis. Disketten werden im allgemeinen in 2er- oder in 10er-Packs angeboten. Hier lohnt es sich die Preise zu vergleichen und auf Sonderangebote zu achten. Beim Kauf größerer Mengen ist ein Preisnachlaß möglich. Um auf Stückzahlen dieser Größenordnung zu kommen, wendet man sich am besten an Clubs.

Wenn Sie nun alle diese Kriterien zu Ihrer Zufriedenheit abhaken konnten, werfen Sie noch einen Blick auf die Verpackung.

Um Ihnen die Entscheidung zu erleichtern, sind in der folgenden Marktübersicht die wichtigsten Argumente aufgezählt. Die Liste erhebt keinen Anspruch auf Vollständigkeit. Alle Daten beruhen auf Herstellerangaben.

(aw/og)

# EPROM-Trans - Die Super-Erweiterung \[42-45,140\]

> Der ROM-Speicher des C 64 ließ sich bislang nur mit Steckplatinen im Expansion-Port vergrößern. Mit einem raffinierten Trick geht es auch intern.

Wen hat es nicht schon geärgert, daß die Grundversion des C 64 kein Monitorprogramm aufweist, das nach dem Einschalten des Computers sofort zur Verfügung steht? Deshalb wurde eine Möglichkeit gesucht (und gefunden), mit der man Maschinenprogramme von einem festinstalliertem EPROM in den Bereich $C000 bis $CFFF transformieren kann, ohne für das EPROM vorhandenen Speicherplatz in Anspruch zu nehmen.

Um diese Schaltung zu realisieren, wurde bei den C 64-Entwicklern einiges abgeguckt. Es soll hier nicht die Funktionsweise des C 64 im Detail erläutert werden (das würde zu weit führen), doch läßt es sich für das Verständnis dieser Schaltung nicht vermeiden, auf den Speicherbereich $A000 bis $BFFF (hier liegt das Basic-ROM) näher einzugehen.

Wird dieser Bereich angesprochen, so wird das Basic-ROM über das sogenannte PLA-Chip (Programable-Logic-Array), auch Adreßraummanager genannt, unter bestimmten Voraussetzungen (zum Beispiel Lesen) aktiviert, das heißt der CE (Chip-Enable)-Anschluß auf Low-Potential gelegt. Drückt man zum Beispiel »RETURN«, so wird zur Adresse $A560 gesprungen. Diese liegt im Speicherbereich, in dem das Basic-ROM liegt. Dieses ROM ist folglich aktiviert, und das dort stehende Maschinenprogramm (Eingabe einer Zeile) wird abgearbeitet.

Wie aus Bild 1 ersichtlich, wurde dieser Bereich ($A000 bis $BFFF) benutzt. Über diesem ROM-Bereich liegt zum einen das »EPROM-Trans« ($A000 bis $AFFF) und zum anderen die EPROMs 1 bis 3 ($B000 bis $BFFF). In letzteren steht jeweils ein beliebiges Programm (bis 4 KByte), welches in den Bereich $C000 bis $CFFF transformiert werden soll. Ich habe zum Beispiel in EPROM 1 den »SMON« und in EPROM 2 »Fast Tape« abgelegt, EPROM 3 ist noch unbenutzt. Das Maschinenprogramm in EPROM-Trans (siehe Listing) soll den Inhalt des jeweils selektierten EPROMs 1 bis 3 von dem Bereich $B000 bis $BFFF in den Bereich $C000 bis $CFFF transformieren.

Wie kann dies jedoch funktionieren, wenn in diesem Bereich wie oben erwähnt, beim Lesen immer das Basic-ROM aktiviert ist? Für die Speichertransformation wird der Inhalt des Basic-ROMs nicht benötigt. Drückt man nun einen der drei Taster (Bild 2), wird die CE-Leitung des Basic-ROMs auf die Zusatzschaltung umgeleitet. Ist folglich ein Taster gedrückt, dann ist das Basic-ROM nicht mehr ansprechbar; kein Taster gedrückt entspricht dem Normalzustand des Computers.

Wie aus dem Listing ersichtlich, liegt bei der Adresse $0560 (= $A560) des Maschinenprogramms beim EPROM-Trans ein Sprungbefehl zur Adresse $A000, wo dann die Speichertransformation startet und mit einem Sprungbefehl nach $C000 endet. Will man diese Speichertransformation starten, muß der Computer zur Adresse $A560 oder $A000 springen. Wie oben schon erwähnt, wird die Adresse $A560 automatisch beim Drücken der »RETURN«-Taste angesprungen. Wird zum Beispiel EPROM 1 durch Betätigen von Taster 1 selektiert und dann »RETURN« gedrückt, startet das Maschinenprogramm in EPROM-Trans. Nun wird mit Adreßbit A12 zwischen den Bereichen $Axxx und $Bxxx hin- und hergeschaltet und so der komplette Inhalt von EPROM 1 nach $C000 bis $CFFF kopiert. Am Ende der Transformation wird das Programm durch den JMP-Befehl gestartet, so daß sich zum Beispiel der SMON gleich mit seiner Registeranzeige meldet. Nach Loslassen des Tasters steht auch das Basic-ROM wieder zur Verfügung.

Ein eventuell vorhandenes Basic-Programm wird während der Speichertransformation selbstverständlich nicht beschädigt. Änderungen sind nur im Bereich $C000 bis $CFFF zu registrieren. Die Transformation weist keine Zeitprobleme auf; wenn man »RETURN« betätigt (^ Start der Transformation), meldet sich auch gleich der SMON (um beim Beispiel zu bleiben).

In EPROM 1 bis 3 wird das Maschinenprogramm so abgelegt, wie es auch in $C000 bis $CFFF stehen würde, da ja $B000 nach $C000, $B001 nach $C001 und $BFFF nach $CFFF transformiert wird.

In Bild 2 ist die Steuerung der CE-Eingänge der einzelnen EPROMs und des Basic-ROMs dargestellt.

Das IC 74LS139 besteht aus zwei 1 auf 4 Demultiplexer DM1 und DM2. Je nach Codierung der Eingangsadresse (A0 und Al) wird der Eingang E auf den entsprechenden Ausgang DO bis D3 gelegt (Tabelle 1), ansonsten haben die Ausgänge High-Potential.

## Realisierung der Hardware

Mit DM1 erfolgt die eigentliche Selektierung der EPROMs. Es bestehen vier Möglichkeiten: Basic-ROM und EPROM 1 bis 3. Der Adreßcode ist abhängig von den Schaltzuständen der Taster T1 bis T3. Aktiviert werden alle EPROMs mit »Active Low« (Low-Potential). BASIC ist die Leitung, die normalerweise das Basic-ROM aktiviert, also dann Low-Pegel hat, wenn im Bereich $A000 bis $BFFF gelesen wird. Dieses Signal ist an die Eingänge E der Demultiplexer DM1 und DM2 geführt. Liegt BASIC auf, kann kein Baustein aktiviert werden, denn die Ausgänge DO bis D3 von DM1 und DM2 sind high oder entsprechend dem Pegel an E (hier dann auch high). Am CE-Eingang vom Basic-ROM steht folglich ein High-Pegel, entsprechendes gilt für EPROM-Trans. Die Ausgänge Dl bis D3 von DM1 werden invertiert, so daß an den betreffenden Eingängen der NAND-Gatter Low-Potential liegt Bekanntlich ist aber der Ausgang eines NAND-Gatters nur dann low, wenn beide Eingänge high sind. Folglich werden EPROM 1 bis 3 nicht aktiviert. Kommen wir jetzt zum interessanteren Teil: Basic für LOW. Als erstes wollen wir prüfen, ob der Computer »normal« arbeitet, wenn keine Taste gedrückt ist:
a) keine Taste gedrückt:

Wenn BASIC low ist, muß in diesem Fall das Basic-ROM aktiviert werden. Durch die Tasterstellungen liegt an den Eingängen A0, Al von DM1 Low-Potential. Dies bedeutet, die Information an E (BASIC = low) wird zum Ausgang D0 (vergleiche Tabelle 1) übertragen. Das Basic-ROM wird also aktiviert (unabhängig von A12). EPROM 1 bis 3 können nicht aktiviert werden, da die Ausgänge Dl bis D3 von DM1 High-Potential führen (siehe oben). Aber was ist mit EPROM-Trans? Hier (DM2) wird das Eingangssignal E auf den Ausgang D2 übertragen, wenn A0 low und Al high ist. Al ist aber abhängig vom CE-Signal des Basic-ROMs. Ist dieses aktiviert (low), kann EPROM-Trans nicht aktiviert werden. Der Computer arbeitet in diesem Fall also völlig normal.
b) Taster T1 wird gedrückt

Wird Taster T1 gedrückt, liegt an A0 von DM1 über den Pull-up-Widerstand (1,5 kOhm) high, Al bleibt über T2 und T3 auf low. Diese Adreßcodierung bedeutet, daß die Information an E auf den Ausgang Dl übertragen wird. Durch den Inverter liegt also am NAND-Gatter (Pin 1) high.

Als Adresse an DM2 liegt an Al jetzt high, da das Basic-ROM nicht aktiviert wird. A0 ist abhängig vom Adreßbit A12. Wie erwähnt ist A12 für den Bereich $Axxx low. Die Eingangsinformation (low) wird auf D2 gelegt und EPROM-Trans wird aktiviert. An Pin 2 vom NAND-Gatter liegt Low-Potential (high von D3 invertiert), weshalb EPROM 1 nicht aktiviert wird. Wechselt Adreßbit A12 seinen Zustand (von $Axxx — $Bxxx) wird Eingang E von DM2 mit Ausgang D3 zusammengeschaltet, denn A0=0 und A1=1. EPROM-Trans wird nicht mehr aktiviert (D2 — High). An D3 liegt nun aber Low-Potential welches über einen Inverter auf das NAND-Gatter (Pin 2) geführt wird. An Pin 1 und 2 dieses Gatters liegt folglich high und am Ausgang liegt Low-Pegel. EPROM 1 wird aktiviert.
c) Taster T2/T3 wird gedrückt

Das Prinzip ist das gleiche wie eben beschrieben. Es ändert sich nur die Adreßcodierung von DM1.

## Kernal oder Basic-ROM?

TODO Strich über CE, OE

Um ein Kabelgewirr zu vermeiden »zapft« man am besten ein ROM im Computer an, das heißt man erstellt eine Adapterplatine, auf der sämtliche zusätzliche EPROMs sowie das entwendete ROM Platz finden und Adreß- und Datenbus parallel verbunden werden. Diese Platine wird dann in den Steckplatz des herausgenommenen ROMs wie ein einzelnes IC gesteckt, wobei die Anschlüsse des ROMs direkt verbunden sind, während die zusätzlichen Anschlüsse der EPROMs (± , CE, OE, ...) extern herausgeführt werden. Welches ROM man verwendet, hängt von den ganz individuellen Wünschen ab. Ich habe mich für das Kernal entschieden, da ich so für ein geändertes Betriebssystem gleich einen EPROM-Steckplatz mit vorgesehen habe, so daß zum Beispiel diejenigen, die eine Betriebssystem-Erweiterung benutzen, ohne Änderungen die Adapterplatine nach dem Layout Bild 3 oben verwenden können. Dieser zusätzliche Steckplatz »Kernal neu« (EPROM vom Typ 2764) ist 100%ig zum Kernal verdrahtet, das heißt man kann nur einen der beiden Kernalplätze besetzen. Die folgende Beschreibung bezieht sich auf das Entfernen des Kernal-ROMs.

Man erstellt sich zunächst die beiden Platinen nach den Layouts in Bild 3. Nachdem die angedeuteten Löcher für Bauteile und Drahtbrücken gebohrt (1 mm) sind, beginnt das Bestücken, wobei es ratsam ist, mit den von den Abmessungen niedrigsten Bauteilen zu beginnen. So ergibt sich folgende Reihenfolge: Drahtbrücken, Widerstände, Fassungen. DerAdaptersockelwird unter die IC-Fassung des auf dieser Platine vorgesehenen Platzes für das Kernal festgelötet, da er ja quasi nur eine Verlängerung der Kernal-Pins ist. Dies muß so durchgeführt werden, daß der Adaptersockel möglichst rechtwinklig zur Platine steht und in eine 24polige IC-Fassung paßt. Am einfachsten kann dieses realisiert werden, wenn man den Adaptersockel in eine 24polige Fassung steckt, und dann anlötet und ausrichtet.

Zwischen Zusatzplatine und Adapterplatine werden sieben Verbindungskabel gezogen, wobei die zugehörigen Anschlußpunkte den Bestückungsplänen Bild 4 zu entnehmen sind. Auf der Adapterplatine kann man hierbei eine Steckverbindung (10polig) vorsehen (zum Beispiel: Typ MS-25-10; Völkner-Elektronik, Postfach 5330, 33 Braunschweig; Preis 3,25 Mark), damit die beiden Platinen nicht starr miteinander verbunden sind.

Die Taster T1 bis T3 werden als letztes — eventuell erst nach dem Einbau — nach Bild 4 unten angeschlossen. Die Qualität der Taster ist unbedeutend, da der Faktor des Prellens keine Rolle spielt.


TODO Strich über CE, OE, PRG

Verwendet man das hier abgebildete Platinenlayout, so müssen EPROM 1 bis 3 vom Typ 2532 sein, EPROM-Trans vom Typ 2716. Hier sollten wir noch einmal einen Blick auf Bild 5 werfen: Bis auf die CE-Anschlüsse, die zur Zusatzplatine geführt werden, sind die Leitungen fest mit den des Kernal-ROMs verdrahtet (also Adreß- und Datenbus). Die restlichen epromspezifischen Anschlüsse (OE, V<sub>pp</sub>, PRG) werden je nach Typ für EPROM-Lesen fest auflow oder high gelegt. Die Stromversorgung liegt beim Kernal an den Pins 12 (Masse) und 24 (V<sub>cc</sub> = 5V); A12 entspricht Pin 21.

## Einbau in den Computer

Zum Öffnen des Computers (vorher sämtliche Peripherie abziehen inklusive Stromversorgung, Achtung Garantieverlust) müssen die drei Schrauben an der vorderen Unterseite gelöst werden. Hinten sind Ober- und Unterteil des Gehäuses nur zusammengesteckt, so daß durch Anheben des Oberteils sich beide Gehäuseteile trennen lassen (Bild 6).

Jetzt müssen die beiden Steckverbindungen für Tastatur und Leuchtdiode gelöst werden, so daß beide Gehäuseteile völlig getrennt sind.

Als nächstes entfernt man das Kernal-ROM (Steckplatz U4) und steckt dieses in den entsprechenden Sockel auf der Adapterplatine gemäß dem Bestückungsplan.

Sollte das ROM fest eingelötet sein, so ist dies unter Verwendung von Entlötlitze und einer guten Lötstation (nicht mit irgendeinem Lötkolben) herauszulöten. An diesem freigewordenen Platz wird dann ein 24poliger IC-Sockel eingesetzt.

TODO Strich über BASIC (2x), CE.

Um die Leitungen BASIC und Basic-ROM zu erhalten, ist im Computer die Leiterbahn nach Bild 7 aufzutrennen. Hierzu nimmt man einen kleinen Schraubenzieher und unterbricht die Leiterbahn durch vorsichtiges Kratzen. Die grüne Schutzschicht auf der Leiterbahn wird an beiden Seiten (rechts und links von der Unterbrechung) entfernt, so daß das Kupfer sichtbar wird. Nun wird an diesen Stellen jeweils ein flexibles Kabel mit etwas Fingerspitzengefühl angelötet. Die eine Leitung entspricht dann BASIC (vom PLA), die andere Basic-ROM (zu CE dieses ROMs) und sind als solche bezeichnet auf der Zusatzplatine zu finden und entsprechend zu verdrahten (eventuell mit Steckverbindung auf der Zusatzplatine).

TODO Strich über BASIC

Diejenigen, die anstatt des Kernals das Basic-ROM anzapfen möchten, finden den Anschluß BASIC an Pin 20 vom Sockel des Basic-ROMs beziehungsweise der Adapterplatine, und Basic-ROM an Pin 20 des ROMs selber, wo die Leitungen dann anzuschließen sind. Am einfachsten ist dies wohl durch Herausbiegen des Pins am Basic-ROM (Achtung: nicht abbrechen) zu bewerkstelligen, so daß dieser nicht im Sockel steckt und ein Kabel angelötet werden kann.

Die Zusatzplatine ist so ausgelegt, daß man sie mit an den Schrauben, die auch zur Befestigung der Tastatur dienen, installieren kann. Ob man sie in der linken oder rechten Seite anbringt, ist völlig belanglos, nur sollte man die Taster auf der Gegenseite befestigen, beziehungsweise vorher prüfen, ob die Einbautiefe der Taster gering genug ist, so daß diese sich nicht mit der Zusatzplatine berühren.

Die Taster werden an dem oberen Gehäuseteil über der Tastatur montiert, wobei man darauf achten sollte, daß genügend Platz für die ausgewählten Taster zur Verfügung steht (Durchmesser; am besten vom Inneren des Gehäuses anpassen).

Ist die Adapterplatine so aufgesteckt, daß die Kerben der ICs in Richtung Kassettenport zeigen und mit EPROM-Trans, dem Kernal und mindestens einem EPROM 1 bis 3 bestückt, sind wir fertig und können den Computer wieder zusammenbauen.

Eventuell kann die Abschirmung — dies ist die Pappe mit der Alu-Schicht — so aufgeschnitten werden, daß beim Verlegen der Kabel von Adapter- zur Zusatzplatine keine Probleme auftreten.

Die Steckverbindung Tastatur — Computer kann nur in einer Richtung aufgesteckt werden; bei der Leuchtdiode zeigt das rote Kabel zum Ein-Aus-Schalter.

Gehäuse zusammenschrauben, fertig.

Ich betreibe diese Schaltung seit etwa 6 Monaten und möchte sie nicht mehr missen. Was ich damit aber zum Ausdruck bringen will, ist, daß die Stromversorgung den zusätzlichen Belastungen gewachsen ist; auch sind bis dato noch keine Wärmeprobleme aufgetreten.

Mir ist bekannt, daß sich viele C64-Besitzer schwer dazu durchringen können, ihren Computer äußerlich oder innerlich (Achtung! Garantieverlust) zu verändern. Diesmal ist es aber, glaube ich, eine Überlegung wert. Alle, die nicht die Möglichkeit zum Herstellen der Platinen haben, können sich an den Verlag wenden. Lesen Sie dazu unseren Hardware-Leserservice.

(Peter Rausche/aw)

# EPROMs im Expansion-Port \[46-48\]

> Es gibt kaum ein Speichermedium, von dem Daten so schnell geladen werden können wie von EPROMs. Bauen Sie sich selbst eine Erweiterungsplatine mit wahlweise 8 oder 16 KByte Speicher!

TODO Überstriche im gesamten Artikel!

Das Laden von Programmen dauert, selbst wenn man Hypra-Load verwendet, doch immer noch eine geraume Zeit. Viel praktischer sind die Ihnen sicher schon bekannten EPROMs. Der Anschluß von EPROMs stellt beim C 64 kein allzu großes Problem dar. Am Expansion-Port befinden sich alle für diesen Zweck wichtigen Adreß-, Daten- und Steuerleitungen. Analog dazu verfügt auch ein EPROM über Adreß-, Daten- und einige Steueranschlüsse. Letztere unterteilen sich in Pins für die Stromversorgung (0 V, + 5 V), Pins zur Programmierung und Pins zur letztendlich gewünschten Verbindung mit dem Bus-System des C 64. Da man nach einer Programmierung des EPROMs die Anschlüsse für die Programmiersteuerung (PGM) nicht mehr benötigt, diese aber im Betrieb einen definierten Zustand haben müssen, werden beide auf logisch High (+5V) gelegt. Der Anschluß »Chip Enable« (CE = Chipauswahl) teilt dem EPROM mit, daß es angesprochen ist, und »Output Enable« (OE = Ausgabe möglich) fordert das EPROM auf, die Daten an den Datenbus zu legen. Danach stehen die Daten genauso zur Verfügung, als ob der Computer sie aus dem RAM lesen würde.

## Zwei Platinen zur Wahl

Zum Aufbau der Schaltung ist es am besten, eine Platine anzufertigen, die in den Expansion-Port paßt. Dabei haben wir uns für zwei verschiedene Auführungen, eine mit 8 KByte für kleinere Programme und eine mit 16 KByte Speicherplatz entschieden. Es können wahlweise EPROMs vom Typ 2732 (4KByte) oder 2764 (8 KByte), verwendet werden. Zusätzlich bietet die 16 KByte-Platine mehrere Betriebsmodi, die im einzelnen noch beschrieben werden. DochzurückzumAnschluß der EPROMs an den C 64. Da ein EPROM maximal 8 KByte Speicherplatz hat und damit sicherlich nicht den ganzen Adreßraum des 6510-Prozessors ausfüllt, muß der C 64 den Speicherbereich für das EPROM festlegen. Für diesen Zweck sind zwei Leitungen vorgesehen: ROML und ROMH. Beide sind »aktiv-low«, das heißt sie wirken erst, wenn sie vom Zustand »1« in den Zustand »0« übergehen, beziehungsweise wenn sie ein Potential von 0 Volt gegenüber Masse haben. Diese Leitungen werden mit den Anschlüssen CE und OE (beide ebenfalls aktiv-low) des EPROMs verbunden. ROML wählt den Speicherbereich ab $8000, ROMH den Bereich ab $A000:

TODO

$8000:ROML OE
$A000: ROMH CE

Jetzt sollte man dem Computer noch mitteilen, daß er auf die EPROMs und nicht, wie gewohnt, auf sein internes RAM zugreift, denn die Leitungen ROML und ROMH können nicht direkt beeinflußt werden. Erst die Verwendung von zwei weiteren Leitungen bringt das gewünschte Ergebis. Diese Leitungen heißen EXROM und GAME. Sobald eine dieser Leitungen auf Masse gelegt wird, teilt sie der PLA (Programmable Logic Array = Adreßmanager) mit, daß die Daten im Bereich $8000, beziehungsweise $A000 vom Expansion-Port geholt werden sollen.

Damit sind die wesentlichen Funktionen der 8-KByte-Platine beschrieben. Sie ist so konzipiert, daß sie ein EPROM in den Bereich von $8000 bis $9FFF einblendet. Mit den vier Lötbrücken auf der Oberseite der Platine kann allerdings auch eine andere Speicheraufteilung eingestellt werden. Bei Bedarf trennen sie die beiden geschlossenen Lötbrücken auf und verbinden die beiden geöffneten. Damit wird der Speicherbereich von $A000 bis $BFFF für die EPROMs selektiert. Dies ist jedoch eine sehr ausgefallene Konfiguration, die Sie in der Praxis wahrscheinlich selten brauchen werden.

### Mehrere Betriebsarten

Bei der 16-KByte-Platine wird zwischen mehreren Betriebsarten unterschieden. Im einfachsten Fall wird das rechte EPROM A (vom Expansion-Port gesehen) in den Bereich ab $8000 und das linke in Bereich ab $A000 eingeblendet. Aus den einleitenden Betrachtungen wissen wir, daß für den Bereich ab $8000 EXROM auf »Low« und für den Bereich »$A000 GAME auf »low« gelegt (mit der Masse Leitung verbunden) werden müssen. Dies geschieht mit den Schaltern S4 (EXROM) beziehungsweise S3 (GAME). Weiterhin erfolgt über den Schalter S5 eine Verbindung von ROML mit CE/OE des rechten EPROMs und über den Schalter S1 ein Kontakt zwischen ROMH und CE/OE des linken EPROMs.

Als nächstes soll die Schaltung so verändert werden, daß beide EPROMs im Bereich ab $8000 stehen, besser gesagt, daß sich immer nur eines in Betrieb befindet und zwischen beiden EPROMs umgeschaltet werden kann. Dazu benötigt man eine kleine Logikschaltung mit einem JK-Flip-Flop und zwei OR-Gattern (Bild 1). Beim JK-Flip-Flop werden die Eingänge J und K auf + 5 V gelegt und bei jedem Wechsel von »High« nach »Low« an T (Takt) wir das Flip-Flop umgeschaltet. Der Ausgang Q wechselt dann von »0« nach »1«, »Q« wechselt von »1« nach »0«. Man braucht noch eine Leitung, die vom Computer aus kontrolliert, beziehungsweise geschaltet werden kann und die mit dem Takt-Eingang des Flip-Flop verbunden wird. Zu diesem Zweck gibt es zwei I/O-Leitungen im C 64, nämlich 1/01 und 1/02, denen zwei Register im Computer entsprechen. Diese Register (1/01: $DE00; 1/02: $DF00) kann man zum Beispiel mit POKE 57088,X oder STA $DE00 ansprechen. Dabei wechselt ihr Zustand kurzzeitig von »high« nach »low« und es entsteht gerade das Schaltverhalten, das man für das Flip-Flop benötigt. Die Zusammenhänge beim Schalten gehen am besten aus einer Logiktabelle hervor. Es darf dabei immer nur ein EPROM an den Pins CE/OE ein Signal »low« bekommen.

Einschalten (Hardware-Reset) beziehungsweise Zustand 1:
Q = L,Q = H

TODO Table

Q1 = L: EPROM A angewählt
Q2 = H: EPROM B nicht angewählt

Sobald der Takt-Eingang für kurze Zeit von »High« auf »Low« geht, erhöht man den anderen Zustand des Flip-Flops.

Umschalten beziehungsweise Zustand 2: Q = H,Q = L

TODO Table

Q1 = H: EPROM A nicht angewählt
Q2 = L: EPROM B angewählt

Die letzte Verwendungsmöglichkeit der Platine erlaubt das Ein- und Ausschalten von wahlweise einem 8-KByte-, oder 16-KByte-Bereich. Mit dem Schalter X5 wird zunächst ROML mit dem rechten EPROM verbunden ($8000). Für ein 16-KByte-Modul wird zusätzlich der Schalter S1 geschlossen und damit das linke EPROM im Bereich $A000 selektiert. Doch wie bereits beschrieben, greift der Computer immer noch nicht auf die EPROMs zu. Darum müssen die Leitung EXROM (zusätzlich GAME bei 16 KByte) mit Masse verbunden werden. Setzt man in diese Verbindung nun das schon verwendete Flip-Flop, so können die Leitungen, je nach Zustand, von 1/02 auf Masse gelegt werden oder nicht. Das Ein- und Ausschalten erfolgt jetzt mit dem schon erwähnten Ansprechen von 1/02 ($DF00). Zu erwähnen ist noch, daß das Flip-Flop nach einem Hardware-Reset in den Grundzustand (Q = L, Q = H) geht, da sein Reset-Eingang R mit dem Anschluß RESET des Expansion-Port verbunden ist. Dann ist im zweiten Fall das rechte EPROM selektiert und im letzten Fall das Modul eingeschaltet. Bei einem Software-Reset (SYS 64738) bleibt der Zustand des Flip-Flops, und damit der Platine, erhalten.

Bei der Eigenherstellung ist zu beachten, daß sich auf den Platinen einige Durchkontaktierungen (Bild 2 und 3) befinden. Außerdem sollten Sie darauf achten, ob die Bauteile mit der Platinenoberseite oder Unterseite verlötet werden müssen. Bestücken Sie die Platinen zuerst mit den Kondensatoren, und danach mit den Fassungen und Bauteilen (Bild 4). Achten Sie bei den Kondensatoren auf die richtige Polung. Bei der Verwendung von EPROMs des Typs 2732, die vier Pins weniger als ein 2764 haben, werden diese nicht bündig mit der Kerbe in die Fassung gesetzt. Die zwei Pins auf beiden Seiten der Kerbe bleiben frei.

(Markus Braun/aw)

# Der Hexer — Zusatztastatur für den MSE \[48-49\]

> Wer schon seitenweise Hex-Code eingetippt hat, weiß wie nervtötend das auf der Schreibmaschinentastatur des C 64 sein kann. Wir stellen Ihnen deshalb eine komfortable Selbstbau-Hex-Tastatur vor.

Als Programmierfan stehen Sie auch häufig vor dem Problem, seitenweise Zahlen eingeben zu müssen, zum Beispiel MSE-Listings. Meist erfolgen die Angaben im Hexadezimalsystem, das die Ziffern 0 bis F umfaßt. Deshalb zeigen wir Ihnen, wie man sich einfach eine Hex-Tastatur selbst bauen kann.

Der Bau dieser Hex-Tastatur dürfte dem geübten Bastler keine Schwierigkeiten bereiten. Dem handwerklich weniger Erfahrenen, können wir in Kürze eine Bezugsadresse für die entsprechende, fertig aufgebaute Tastatur geben.

Das wichtigste Kriterium der Tastatur war die Kompatibilität zu allen existierenden Programmen. Es mußte also eine Hardwarelösung geschaffen werden, die keinen Speicherplatz benötigt.

Der Verbindungsstecker zwischen Tastatur und C 64-Platine besitzt 19 Kontakte und eine sogenannte Codierungslücke. Diese Lücke in der Stiftleiste verhindert ein falsches Aufstecken. Die 19 Kontakte lassen sich in drei Gruppen aufteilen (Tabelle 1).

1.	Die Kontakte 1 und 3 sind der RESTORE-Taste zugeordnet. Der zweite Kontaktstift fehlt. Die entsprechende Bohrung im Stecker ist verschlossen. Diese Codierung verhindert ein falsches Aufstecken des Tastatursteckers.
2.	Die Stifte 5 bis 12 sind an die acht Reihen (Rows) der Tastaturmatrix (Bild 1) angeschlossen.
3.	Die Stifte 13 bis 20 geben den logischen Zustand der acht Matrixspalten (Columns) wieder.

Jede Taste verbindet eine Spalte der Matrix mit einer Reihe der Matrix. Bei acht Reihen und acht Spalten gibt es folglich 8x8 = 64 Möglichkeiten der Verschaltung, die der C 64 vollständig ausnutzt. Bild 1 zeigt, welche Matrixpunkte die einzelnen Tasten einnehmen.

Alle Tastenkontakte sind im Ruhezustand geöffnet und werden durch Tastendruck geschlossen. Will man eine Taste von außen ersetzen, braucht nur die entsprechende Matrixspalte und Reihe über einen Taster miteinander verbunden zu werden.

Der Anschluß der Zusatztastatur erfolgt über eine Adapterleiste (Bild 2).

Nach dem Öffnen des C 64 (Garantieverlust!) wird der Tastaturstecker abgezogen und zusammen mit dem Zwischenstück wieder aufgesteckt. Im einzelnen besteht der Adaptersockel aus einem kleinen Stück Lochrasterplatine mit Kupferbahnen im Abstand von 2,54 mm. Diese Platine stellt eine mechanisch feste Verbindung zwischen der Buchsenleiste (2,54 mm Rastermaß) und der Stiftleiste her. Die Buchsenleiste wird dann auf die Stiftkontakte der C 64-Platine gesteckt und der Tastaturstecker auf die Stiftkontakte des Adaptersteckers.

Es muß dann nur noch Stift 2 des Adaptersockels mit einem Seitenschneider abgezwickt und das Flachbandkabel angelötet werden. Das geschieht zwischen den Lötaugen der Buchsenleiste und den Lötstellen der Stifte.

Die Tastatur selbst besteht im wesentlichen aus einer Lochrasterplatine mit 24 Tasten. Bild 3 zeigt unseren Prototyp, bei dem noch einige Tasten »von Hand« beschriftet sind. Es hat sich jedoch eingebürgert, die 16 Hex-Tasten im Quadrat anzuordnen. Die Verschaltung der Tasten erfolgt mit dünnem isolierten Draht. Welche Pins der Stiftleiste des C 64 mit welchen Tasten verbunden werden müssen, entnehmen Sie bitte Bild 1.

### Die Verpackung

Der Tastenblock mit der Lochrasterplatine kann in einem Gehäuse eingebaut werden. Man sollte ein Pultgehäuse wählen, so daß das Tastenfeld nach hinten hin ansteigt.

Bevor Sie sich nun auf die Suche nach Tasten machen, ein Tip: Billig kommt man an Tasten, indem man alte Computer-Tastaturen ausschlachtet. Achten Sie dabei aber darauf, daß die Tasten einzeln verwendbar sind und von der Grundplatte gelöst werden können. Die Kosten für neue Tasten mit Lochrasterplatte und Gehäuse dürften etwa 50 Mark betragen. Eine Stückliste finden Sie in Tabelle 2. Häufig findet man sogar schon fertig aufgebaute Tastenblöcke, die man nur noch richtig verschalten muß.

(Stefan Thienel/hm)

# Hypra-Text \[50,67-74\]

> Wieder einmal können wir Ihnen ein Programm oder besser gesagt ein Programmsystem aus unserer Hypra-Reihe präsentieren, das alle erforderlichen Befehle enthält, die zu einem komfortablen Textverarbeitungsprogramm gehören.

Hypra-Text ist für den kommerziellen Einsatz geschrieben worden. Daher sind in diesem Programm alle deutschen Umlaute und zusätzliche Sonderzeichen zur Druckersteuerung (Bild 1) wie zum Beispiel »unterstreichen ein/aus« integriert. Es sind Funktionen vorhanden, die kaum ein anderes Programm dieser Art enthält.

So handelt es sich bei Hypra-Text um ein Mehrbenutzersystem, das es gestattet, persönliche Texte mit einem Codewort zu versehen. Dadurch kann nur derjenige auf den Text zugreifen, der das Codewort kennt. Für alle anderen sind diese Texte gesperrt. Das heißt sie können weder editiert, geladen noch gedruckt werden. Eine der hervorstechendsten Eigenschaften von Hypra-Text ist die klare und intelligente Benutzerführung. Sobald Sie sich im Hauptmenü (Bild 2) befinden, macht Sie das Programm darauf aufmerksam, welche sinnvollen Funktionen mit welchen Tasten gewählt werden können.

Weiterhin ist die Möglichkeit zur Verwendung von sogenannten Textvariablen erwähnenswert. Wörter oder kurze Sätze wie zum Beispiel eine Anrede-Formel (»Sehr geehrter Herr...«) oder Schlußsätze (»Mit freundlichen Grüßen...«) lassen sich in Variablen speichern. Mit drei Tastendrücken lassen sich diese Textbausteine in Ihren Text einsetzen. Weiterhin können Sie sehr einfach sogenannte Masken erstellen. Das sind zum Beispiel Briefformulare, die Sie sehr oft brauchen. Sie tippen den Vordruck wie einen normalen Text ein, und setzen an alle Stellen, die später ergänzt werden müssen (Name, Adresse, etc.) eine Markierung. Diese Maske können Sie dann mit einem Tastendruck ausfüllen. Dies sind alles Merkmale, die bei einem Programm zum Abtippen durchaus nicht selbstverständlich sind.

Hypra-Text ist zum größten Teil in Basic geschrieben. Dadurch läßt es sich leicht an eigene Bedürfnisse anpassen. Alle Routinen, die in Basic zu viel Zeit beanspruchen, sind in Maschinensprache realisiert worden. Trotzdem ist es angebracht, Hypra-Text zu compilieren. Dazu eignet sich allerdings nur der Austro-Compiler. In compilierter Form erreicht Hypra-Text etwa die gleiche Geschwindigkeit, wie vergleichbare Programme in reiner Maschinensprache. Neben dem eigentlichen Textverarbeitungsprogramm wird in der nächsten Ausgabe ein Druckertreiber mit integrierter Centronics-Schnittstelle erscheinen, mit dem, im Gegensatz zu den meisten anderen Textverarbeitungsprogrammen, sogenannte Formblätter erstellt werden können. Sie geben dem auszudruckenden Schriftstück eine bestimmte Form. So lassen sich mit ihm Fuß- und Kopfzeilen mit und ohne automatischer Seitennumerierung definieren. Außerdem gehört zu Hypra-Text noch eine kompfortable Adreßverwaltung, die wir ebenfalls in einer der nächsten Ausgaben veröffentlichen.

(Oliver Fendt/ah)

> Mit Hypra-Text haben Sie ein sehr leistungsfähiges Programm vorliegen. Besonders die Arbeit mit Textvariablen und die umfangreichen Möglichkeiten bei der Druckeransteuerung sind hervorzuheben. Hypra-Text gehört sicherlich zu den besten Programmen, die man abtippen kann.

Tippen Sie zuerst das Hauptprogramm (Listing 1) ab und speichern es auf Diskette. Anschließend ist noch eine Maschinenroutine »PROFIP V1.0« (Listing 2) und das Programm »Zloader« (Listing 3) einzugeben. Die Maschinenroutine übernimmt alle Aufgaben, die in Basic zu lange dauern würden. Das Programm »Zloader« ist ein in sich geschlossenes Basic-Programm, das es Ihnen erleichtert, einen beliebigen Drucker an das Programm anzupassen. So läßt sich mit diesem Programm zum Beispiel sehr leicht der Code eines Zeichens ändern, das zum Drucker gesendet wird. Um Ihnen Tipparbeit zu ersparen, ist in diesem Programm eine Routine integriert, die einen Großteil des Zloaders selbst generiert. Haben Sie das Programm »Zloader« abgetippt, ist es das erste Mal mit »RUN20000« zu starten. Auf dem Bildschirm erscheinen nun nacheinander die erzeugten Basic-Zeilen. Meldet sich das Programm mit READY, sind zwei Tabellen erzeugt worden.

Die erste Tabelle steht in den Zeilen 8000 bis 8500. Hier wird jedem Zeichen, das hinter der DATA-Anweisung steht, ein Drucker-Code zugeordnet. Sie werden feststellen, daß in den Zeilen 8000 bis 8060 statt des Zeichens nur ein Punkt steht. Dieser Punkt steht für die Tastenkombinationen, die zusammen mit der »CTRL-Taste« erreicht werden. So bedeutet der erste Punkt in Zeile 8000, hinter dem eine 1 steht, »CTRL A«. Der zweite in Zeile 8002, hinter dem eine 2 steht, bedeutet folglich »CTRL B«. Möchten Sie zum Beispiel einen Drucker an den User-Port über die im Programm »Profiprint« (erscheint in der nächsten Ausgabe) integrierte Centronics-Schnittstelle betreiben, so sind in den Zeilen 8000 bis 8500 alle Codes für Großbuchstaben durch die entsprechenden Codes für Kleinbuchstaben und die Codes für Kleinbuchstaben durch die entsprechenden Codes für Großbuchstaben zu ersetzen. Der Grund dafür ist, daß die meisten Drucker, die über eine Centronics-Schnittstelle betrieben werden, die Zeichen im ASCII-Format drucken. Der Commodore-Zeichensatz weicht jedoch insofern von dem Standard-ASCII-Zeichensatz ab, daß die Codes für Groß- und Kleinbuchstaben vertauscht sind. Achten Sie bei der Anpassung des Zeichensatzes darauf, daß im Zeilenbereich 8000 bis 8500 weder Zeilen hinzugefügt noch gelöscht werden dürfen. Auch ist es unzulässig, Zeichen zwischen den Anführungszeichen zu ändern.

Ein besonderer Leckerbissen befindet sich in der zweiten Tabelle, in den Zeilen 8500 bis 9000. Hier werden alle Umlaute und Sonderzeichen sowohl für den Bildschirm wie auch für den Drucker definiert.

Ersetzen Sie die erzeugten Zeilen durch das Listing 4. Denn in diesem Listing wurden die Steuerzeichen so definiert, wie sie in der Anleitung zu »Hypra-Text« erklärt werden. Sollten Ihnen die auf dem Bildschirm erzeugten Umlaute und Sonderzeichen nicht gefallen, oder stimmen die Drucker-Steuerzeichen nicht mit Ihrem Drucker überein, so besteht die Möglichkeit, die Umlaute, Sonderzeichen und Drucker-Steuerzeichen dem eigenen Bedarf anzupassen. Die Zeilen in Listing 4 sind ähnlich aufgebaut, wie die von 8000 bis 8500. Hier steht jedoch nicht nur ein Code, sondern acht Codes für das Bildschirm-Zeichen und acht Codes für das Drucker-Steuerzeichen. Die acht Codes für ein Bildschirmzeichen werden wie folgt erstellt:

1. Zeichnen Sie ein 8x8-Punkte-Raster (Bild 1).
2.	Wo später ein Punkt auf dem Bildschirm gesetzt werden soll, füllen Sie das entsprechende Kästchen aus.
3.	Addieren Sie die Spaltenwerte der ausgefüllten Kästchen und schreiben Sie sie hinter die Zeile.
4.	Übernehmen Sie die Zeilenwerte der Reihe nach in die DATA-Zeile.

Beispiel:
8534 DATA"{Commodore-E}",102,0,60,102,102,102,60, 0,185,196,196,196,185,128,0,0
definiert das Bildschirm- und Druckerzeichen »ö«.
Die Zahlenreihe »102,0,60,102,102,102,60,0,« definiert das Bildschirm-Zeichen,
die Zahlenreihe »185,196,196,196,185,128,0,0« definiert das Drucker-Zeichen.

Bestimmte Drucker-Steuerzeichen verlangen weniger als acht Codes. So bedeutet zum Beispiel 27, 45, 49 »unterstreichen ein« auf einem Epson-Drucker. Soll eine solche Befehlssequenz an den Drucker übergeben werden, so ist diese nach der Definition des Bildschirmzeichens unmittelbar einzugeben. Der Rest der Zeile ist mit Nullen aufzufüllen. In diesem Fall mit fünf Nullen.
Beispiel:
8500 DATA"(Zeichen)",1,2,3,4,5,6,7,8,27,45,49,0,0,0,0,0

Es müssen also nach der Definition des Bildschirmzeichens immer acht Codes für das Drucker-Steuerzeichen folgen, auch dann, wenn weniger Codes an den Drucker übergeben werden. Nullen im Drucker-Steuerzeichen sind durch den ASCII-Wert 48 zu ersetzen.

Wollen Sie das Bildschirm-Zeichen beibehalten, so ist nach dem in Anführungsstrichen stehenden Zeichen die Zahl 999, gefolgt von den acht Drucker-Codes, einzugeben. Alle Codes müssen, wie üblich bei DATA-Anweisungen, durch ein Komma getrennt werden.
Beispiel:
8500 DATA"(Zeichen)",999, 27,45,49,0,0,0,0,0

Wenn Sie in den Zeilen 8500 bis 9000 etwas ändern, ist darauf zu achten, daß Zeilen weder gelöscht, übersprungen oder hinzugefügt werden dürfen. Auch ist unbedingt darauf zu achten, daß die Reihenfolge der Steuerzeichen und Umlaute eingehalten wird. Denn das in der nächsten Ausgabe erscheinende Programm »Profiprint« erkennt aufgrund der Reihenfolge, ob es sich um ein Drucker-Sonderzeichen oder einen Umlaut handelt.

Haben Sie den Zeichensatz Ihren Wünschen angepaßt, ist das Programm »ZLOADER« nochmals mit »RUN« zu starten. Auf dem Bildschirm erscheinen jetzt nacheinander die neu definierten Sonderzeichen und Umlaute. Gefällt Ihnen eines der Zeichen nicht, so können Sie das Programm mit der RUN/ STOP-Taste jederzeit unterbrechen, die entsprechende DATA-Zeile ändern und das Programm noch einmal mit RUN starten. Sind alle Zeichen zu Ihrer Zufriedenheit definiert, erzeugt das Programm zwei Files auf Diskette. Einen Bildschirm-Zeichensatz mit dem Namen »ZEICHEN DIN« und einen Drucker-Steuersatz mit dem Namen »ZEICHEN DDIN«. Außerdem wird der Zloader unter dem Namen »LOADER DIN 2.1« mit den abgeänderten DATA-Zeilen gespeichert.

Noch eines vorweg: lm Hauptprogramm von Hypra-Text werden Sie gefragt, ob Sie mit der DIN- oder normalen C 64-(CBM-)Tastatur arbeiten möchten.

Der Unterschied zwischen den beiden Tastaturen liegt darin, daß bei der DIN-Tastatur die Tasten so belegt sind, wie Sie es von einer Schreibmaschine gewohnt sind. Es stimmen also die Zeichen die auf dem Bildschirm erscheinen nicht mit dem überein, was auf den Tasten steht. Wählen Sie dagegen die CBM-Tastatur, so erscheint genau das auf dem Bildschirm, was auf den Tasten steht. Trotzdem existieren auch hier die deutschen Umlaute, die über die Commodoretaste plus E,R,T,Z,U,I erreichbar sind. Um aber mit der CBM-Tastatur arbeiten zu können, erwartet Hypra-Text zwei Files auf der Diskette, die noch nicht erwähnt wurden. Bei den beiden Files handelt es sich um »ZEICHEN B« und »ZEICHEN D«. Diese beiden Files können aber sehr einfach generiert werden. Ersetzen Sie einfach im Programm »Zloader« in Zeile 40040 »ZEICHEN DIN« durch »ZEICHEN B« und in Zeile 40001 »ZEICHEN DDIN« durch »ZEICHEN D«. Anschließend ist das Programm Zloader nochmals mit RUN zu starten. Die erforderlichen Files werden nun auf der Diskette generiert.

Im weiteren Verlauf dieser Anleitung wird Ihnen auffallen, daß vor jeder Funktion zwei Zahlen stehen, die jeweils durch einen Punkt getrennt sind. So lesen Sie zum Beispiel »1.1.Eingabe des Textes«. Um diese Funktion zu erreichen, drücken Sie vom Hauptmenü aus einfach zweimal die »1«.

## Das Hauptprogramm von »Hypra-Text«

Bevor Sie die Arbeit mit Hypra-Text beginnen, überzeugen Sie sich davon, daß sich folgende Files auf Ihrer Diskette befinden:

1.	HYPRA-TEXT (in Basic, oder was zu empfehlen ist, in compilierter Form. Da im Programm SYS-Aufrufe mit zusätzlicher Parameterübergabe enthalten sind, eignet sich zum Compilieren nur der Austro-Compiler. Die Leser-Service-Diskette enthält neben dem Basic-Programm auch das compilierte File.)
2. PROFIP V1.0 (Maschinenroutinen)
3.	ZEICHEN DIN (Bildschirm-Zeichen)
4.	ZEICHEN DDIN (Drucker-Steuerzeichen) und wenn die CBM-Tastatur gewünscht ist:
5. ZEICHEN B (Bildschirm-Zeichen)
6.	ZEICHEN D (Drucker-Steuerzeichen)

Bevor Sie das Programm mit RUN starten, müssen Sie eine persönliche Kennung und die Laufwerksnummer Ihrer Floppy eingeben. Die Kennung dient dem Datenschutz: Außer Ihnen hat niemand Zugriff auf persönliche Daten und Texte. Dies geschieht mit folgenden Befehlen:

POKE 930,ASC("1.Buchstabe"):POKE 931,ASC("2.Buchstabe") :POKE 932,Laufwerksnummer

Als Kennung können Sie zum Beispiel die Initialen Ihres Namens eingeben. Die Laufwerksnummer ist im Normalfall »8«.

In einer der nächsten Ausgaben wird, passend zu Hypra-Text, eine Adreßverwaltung erscheinen, die diese POKEs durch die automatische Abfrage eines Geheimwortes überflüssig macht.

Nun werden Sie gefragt, ob Sie mit der DIN- oder der CBM-Tastatur arbeiten wollen. Ist die DIN-Tastatur gewünscht, drücken Sie einfach auf die RETURN-Taste. Ansonsten ist das Wort »din« durch »cbm« zu ersetzen. Es werden dann automatisch die erforderlichen Files nachgeladen.

Hypra-Text erwartet jetzt die Eingabe des Datums im Format TTMMJJ. Der 1. Januar 1986 wird zum Beispiel mit 010186 angegeben.

### 1	.Text erstellen

Nach Wahl dieses Punktes kommen Sie in ein Untermenü.

### 1.1.	Eingabe des Textes

Die Eingabezeile, also die Zeile, in der der Cursor steht, befindet sich immer in der Mitte des Bildschirms. Nach jeder abgeschlossenen Zeile wird der gesamte Text um eine Zeile nach oben geschoben. Um einen eingetippten Text zu editieren, können Sie mit RETURN den Text eine Zeile nach unten und mit F5 eine Zeile nach oben schieben. Die Tasten »Cursor rechts« und »Cursor-Iinks« behalten ihre alte Funktion bei. Mit »Cursor-hoch« und »Cursor-runter« können Sie ein Wort vor oder zurückspringen. Die HOME-Taste hat bei Hypra-Text die Funktion »Tabulator«. Dazu befindet sich in der fünften Bildschirmzeile von oben eine Tabulatorzeile. Wenn die Taste HOME gedrückt wird, so springt der Cursor bis zur nächsten »+«-Marke. Der Leerraum bei einem Tabulator-Sprung wird mit Punkten gefüllt, die aber nicht gedruckt werden.

Weiterhin sind die folgenden Tasten mit Drucker-Steuerzeichen belegt, vorausgesetzt, Listing 4 wurde wie abgedruckt in den Zloader übernommen:

Commodore-Taste und
n: Breitschrift an
m: Breitschrift aus
g: Fettschrift an
h: Fettschrift aus
j: Italic-Schrift an
k: Ialic-Schrift aus
c: Unterstreichen an
v: Unterstreichen aus

Diese Steuerzeichen sind natürlich nur dann sinnvoll, wenn der angeschlossene Drucker sie auch ausführen kann.
Die CLR-Taste löscht die Zeile, in der sich der Cursor befindet. SHIFT-RETURN markiert einen Absatz.
Die Funktionstasten sind wie folgt belegt:
F1: zum Hauptmenü (der erstellte Text bleibt natürlich erhalten)
F2: Einfügen. Man hat jetzt zwei Möglichkeiten, den Text einzufügen:
a) F3: Der Computer fügt ab der Cursor-Zeile die eingegebene Anzahl an Leerzeilen in den Text ein,
b) F5: Alles was rechts vom Cursor steht wird verschoben, und zwar so lang, bis eine Funktionstaste gedrückt wird.
F3: mehrere Zeilen löschen. Ab der Cursorzeile wird die eingegebene Anzahl an Zeilen gelöscht.
F4: Block kopieren. Die aktuelle Cursorposition wird nun als Blockanfang interpretiert; das Blockende wird mit den Tasten F5 und F7 verschoben und mit F3 markiert. Danach müssen Sie mit den selben Tasten angeben, an welche Stelle im Text dieser Block kopiert werden soll.
F5: Cursor eine Zeile hoch.
F6: Nach Drücken dieser Taste können Sie mit F5 oder F6 eine Textseite vor- oder zurückblättern.
F7: Diese Taste schaltet zwischen den Hilfstafeln im unteren Teil des Bildschirms hin und her.
F8: Text nachladen. Nach der Eingabe des Namens wird der Text geladen und ab der Cursor-Zeile eingefügt.

## Die Druckerbefehle von Hypra-Text

Diese Befehle bewirken nur etwas, wenn der Text auf dem Drucker ausgegeben wird. Auf dem Bildschirm werden sie nicht ausgeführt! Alle Befehle werden direkt in den Text hineingeschrieben.

### noformat

Druckt den Text so, wie er auf dem Bildschirm steht.

### mittezen

Druckt den Text mittezentriert.

### rechtsfo

Druckt den Text rechtsbündig.

### formnorm

Hebt »mittezen« und »rechtsfo« auf.

### dezlen=xy

Dient zur Formatierung von Zahlen innerhalb des Textes. dezlen=34 bedeutet zum Beispiel, daß alle Zahlen auf drei Stellen (=x) vor, und vier Stellen (=y) nach dem Komma formatiert werden.

### 1.2.	Eingabe des Textnamen

Der hier eingegebene Name kann in Punkt 5.5. durch »=« übernommen werden. Er wird im Hauptmenü angezeigt.

### 1.3.	Eingabe über Maske

Die Erstellung einer Maske (zum Beispiel für Serienbriefe) ist äußerst einfach.

Sie tippen im Texteingabemodus Ihre Maske als normalen Text ein. An alle Stellen, an denen Sie später zum Beispiel eine Adresse eingeben wollen, setzen Sie eine Markierung (Commodore-Taste und »Klammeraffe«). Dann speichern Sie die fertige Maske ab, und wählen Punkt 1.3.

### 1.4.	Text löschen

Es wird der gesamte, im Speicher befindliche Text gelöscht. Der Computer zeigt dabei an, welche Zeile er gerade löscht. Sicherheitshalber verlangt er vorher noch eine Bestätigung.

### 1.5.	Text ausfüllen

Hier können Sie an alle Zeilen Punkte oder bestimmte Zeichen anhängen. Ob links oder rechts vom Text, und ab welcher Zeile bestimmen Sie. Dies ist zum Beispiel sinnvoll, wenn Sie eine Tabelle haben und an jede dritte Zeile einen Namen oder ähnliches anhängen wollen.

Wenn Sie die Frage »Neben den Text (j/n)« mit »n« beantworten, so werden alle angegebenen Zeilen gelöscht und durch die Änderung ersetzt.

### 1.6.	Eingabe Tabulatorzeile

Hier können Sie die Tabulatorzeile des Texteingabemodus ändern. Dazu benützen Sie die Cursor-Tasten. Mit»+« markieren Sie einen Tabulator-Stop.

### 2.1.	Text ändern

Entspricht der Eingabefunktion (Punkt 1.1.). Sie geben nur zusätzlich mit an, ab welcher Zeile Sie ändern wollen.

### 2.2.Worttausch

Sie können den Text nach einem bestimmten Wort durchsuchen und durch ein anderes ersetzen lassen. Der Computer fragt Sie nach jedem gefundenen Wort, ob Sie es ändern wollen.

### 2.3.	Text löschen

Identisch mit Punkt 1.4.

### 3.Profiprint laden

Um einen Text auszudrucken, benötigt man das Programm Profiprint. Dieses wird in der nächsten Ausgabe veröffentlicht.

### 4.Bildschirmausgabe

Über diesen Punkt können Sie sich eine Übersicht über Ihren Text verschaffen. Es wird neben dem Text eine Zeilenmarkierung ausgegeben. (Diese Funktion ist auch mit F3 erreichbar.)

### 5.1.Text vergleichen

Der im Arbeitsspeicher befindliche Text wird mit dem gleichnamigen auf Diskette verglichen.

Diese Funktion ist auch hervorragend geeignet, um sich einen auf Diskette befindlichen Text anzusehen, ohne den gerade bearbeiteten zu löschen. Der Computer druckt nämlich alle Zeilen des Textes aus, die nicht mit dem Text im Speicher übereinstimmen. Nach jeder Zeile ist eine Taste zu drücken.
F1 bricht diesen Vorgang vorzeitig ab.

### 5.2.	Text umbenennen

Entspricht dem RENAME-Befehl der Floppy. Man kann einem auf Diskette befindlichen Text einen anderen Namen geben.

### 5.3.	Text löschen

Entspricht dem SCRATCH-Befehl der Floppy. Ein Text wird von Diskette gelöscht.

### 5.4.	Text laden

Ein Text wird von Diskette geladen. Sie haben dabei die Wahl zwischen:

### 5.4.1.	Text löschen und neuen Text laden

Der Arbeitsspeicher wird zuerst gelöscht, und dann der gewünschte Text geladen.

### 5.4.2.	Text hinter alten Text laden

Der zu ladende Text wird an den Text angehängt, der im Arbeitsspeicher steht.

### 5.5.	Text speichern

Der Inhalt des Arbeitsspeichers wird auf Diskette abgelegt.

### 5.6.Inhaltsverzeichnis

Es wird dabei nicht das gesamte Directory der Diskette ausgegeben, sondern nur alle Texte mit Namen, Datum der Eingabe, und der persönlichen Kennung, die verwendet wurde. (POKE 930,...)

Dabei ist wichtig, daß man nur auf seine eigenen Texte zugreifen kann.

### 6.Rechnen

Hier ist ein kleiner Taschenrechner eingebaut. Die Rechenergebnisse werden in drei Variablen gespeichert, und können im Text verwendet werden.

## Textvariable

### 7.Variablen

Die Arbeit mit Textvariablen ist eine der ganz großen Stärken von Hypra-Text. Wenn Sie einen Text schreiben, in dem zum Beispiel sehr oft das Wort »Computer« vorkommt, dann speichern Sie dieses Wort einfach in einer der 50 (fünfzig!) Textvariablen und wählen bei der Texterstellung diese Variable durch » @ « und einer zweistelligen Variablennummer an. (Aus Variable 1 wird 01 usw.) Hypra-Text ersetzt diese Variablennummer nach dem nächsten RETURN automatisch durch ihren Inhalt. Voraussetzung ist allerdings, daß Sie mit Punkt 7.3. diese Funktion aktiviert haben.

### 7.1.	Variablen zeigen

Der Inhalt aller fünfzig Variablen wird auf dem Bildschirm ausgegeben. Durch beliebigen Tastendruck können Sie weiterblättern.

### 7.2.	Variablen eingeben

Der Inhalt einer Variable darf maximal 40 Zeichen lang sein.

### 7.3.	Variablen an

Damit wird Hypra-Text mitgeteilt, daß man mit Textvariablen arbeiten möchte.

### 7.4.	Variablen aus

Die Variablenfunktion wird ausgeschaltet.

### 7.5.	Variablen in Text umwandeln

Man hat zum Beispiel einen Serienbrief erstellt. Für die Adresse wurden Variablen verwendet. Diese sollen erst später durch einen entsprechenden Inhalt ersetzt werden.

Man läßt also bei der Texterstellung die Variablen ausgeschaltet (7.4.), und speichert den Text. Später gibt man unter Punkt 7.2. zum Beispiel eine bestimmte Adresse in die Variablen ein. Dann wählt man Punkt 7.5. Hypra-Text ersetztjetzt die Variablen durch Klartext.

### 7.6.	Variablen in Textspeicher schreiben

Wenn Sie eine Anzahl von Variablen erstellt haben, so möchten Sie diese natürlich zur späteren Verwendung speichern. Dieser Menüpunkt schreibt den Inhalt der Variablen in den Textspeicher in die Zeilen 1-50. Von dort aus können Sie die Variablen dann wie einen normalen Text speichern.

### 7.7.	Textspeicher in Variablen schreiben

Um einmal definierte Variablen später wieder verwenden zu können, laden Sie den unter 7.6. gespeicherten Variablentext in den Arbeitsspeicher und rufen dann diesen Punkt auf. (Variablen anschalten nicht vergessen!) 7.8.Variablen aus Dateiverwaltung

In einer der nächsten Ausgaben wird eine Dateiverwaltung veröffentlicht. Mit diesem Menüpunkt können Sie Daten aus der Dateiverwaltung in Hypra-Text übernehmen. Genauere Angaben folgen.

(Oliver Fendt/ah/tr)

# Fit in Latein mit dem C 64 \[52,57-61,64-66\]

> Ein leidiges Thema für alle Lateinschüler: Vokabeln pauken. Mit dem C 64 kann es fast schon Spaß machen, vor allem, wenn man ein speziell auf lateinische Vokabeln zugeschnittenes Vokabellernprogramm hat.

Lernprogramme gibt es ja mittlerweile recht viele, aber keines, das zum Beispiel die verschiedenen lateinischen Fälle berücksichtigt. »Cursus-Latinus« hat neben dieser Besonderheit noch eine beispielhafte Benutzerführung.

Die Vokabeln lassen sich in verschiedene Lektionen aufteilen. Diese kann man später beliebig erweitern oder verbessern.

Bei der Eingabe der einzelnen Vokabeln muß man zuerst die Wortart wählen. Entweder »Nomen«, oder »Adjektiv«, »Adverb«, »Verb«, »Deponens« oder »Semideponens«. Hier zeigen sich bereits die Stärken des Programms. Bei »Nomen« kann man dann das lateinische Wort selber, dessen Genitiv, den Genus und maximal drei deutsche Bedeutungen eingeben.

Hat man »Deponens« gewählt, so besteht die Eingabe aus der ersten und der zweiten Stammform, und wieder den drei deutschen Bedeutungen. Beim Adjektiv muß zusätzlich noch der Genus eingegeben werden. Später beim Abfragen erteilt das Programm auf jede richtige Eingabe einen Punkt. Diese werden nach jeder Lektion ausgewertet und ausgegeben.

Im Programm wurde auf jede unnötige grafische Spielerei verzichtet. Nicht gespart wurde dagegen an aufwendigen Bildschirmmasken und Hilfstafeln, die auf einen Tastendruck eine Übersicht der einzelnen Tastenfunktionen bringen.

(Bernd Kraus/tr)

TODO ASIDE

Ich wurde am 23. Dezember 1969 in Heidelberg geboren und besuche zur Zeit die zehnte Klasse des Gymnasiums Walldorf. Meine Vorliebe für Informatik fand ich Ende der sechsten Klasse auf einem Schulfest unserer Schule.

Damals zeigten einige Teilnehmer der Arbeitsgemeinschaft Computer ihr Können auf einigen alten Commodore-Computern. Als ich den zuständigen Lehrer bat, mich auch in einer solchen Arbeitsgemeinschaft teilnehmen zu lassen, vertröstete er mich auf Anfang der nächsten Klasse und in dieser dann auf die folgende. Als mir das Spiel zu dumm wurde, beschloß ich, mir selbst einen guten, gängigen Computer anzuschaffen. Einen VC 20. Ich programmierte eifrig. Die Ergebnisse waren mehr als kläglich und die Kassetten, auf denen ich meine Programme speicherte, wurden schnell wieder mit Musik bespielt. Als ich im Herbst 1983 erstmals vom C 64 hörte, war ich nicht sehr überzeugt, daß dieser Computer dem VC 20 ernsthaft Konkurrenz machen könne. Dieser Glaube wurde auch dadurch bestätigt, daß ich in einem Kaufhaus ein Programm namens »Geisterjäger« eintippte und sah, daß man dieses Programm auch leicht auf einem VC 20 schreiben konnte. Erst als sich Anfang 1984 ein Freund einen C 64 kaufte und mir vorführte, wie man einen buntes Ballon-Sprite von der einen Bildschirmseite auf die andere und wieder zurück POKEn konnte, was für schöne Klänge diese Maschine vollbrachte und wie toll es doch ist, mit prächtigen 40 Zeichen pro Zeile statt 22 zu arbeiten, entschloß ich mich, meinen alten VC 20 loszuwerden und mir schnell das »Wunderding« C 64 anzuschaffen, wenn möglich, mit Floppy-Laufwerk. Das tat ich dann auch. Ich schrieb viele Programme, die natürlich erheblich besser waren als die, die ich auf dem VC 20 geschrieben hatte.

In dieser Zeit entstand auch das Programm »Cursus Latinus«, das ich in Verärgerung darüber geschrieben hatte, daß es kein Vokabellernprogramm gab, das auch für lateinische Vokabeln von Nutzen war. Mein Programm sollte mit möglichst wenigen Farben und einer komfortablen Eingabe-Maske arbeiten.

Bei der Entwicklung stieß ich auf einige Schwierigkeiten, wie dem Problem, daß beim zufälligen Abfragen der Vokabeln kein Wort wiederholt wird.

Motiviert von einem Klassenkameraden, der das leidige Pech hatte, Französisch als zweite Fremdsprache zu wählen, arbeite ich nun an einer Version mit französischen Vokabeln.

(Bernd Kraus)


> Mit »Cursus Latinus« können Sie sich Ihr eigenes elektronisches Lateinlehrbuch aufbauen und dieses lektionenweise studieren. Daß dabei die Besonderheiten der lateinischen Sprache berücksichtigt werden, macht das Programm so außergewöhnlich.

Grund zum Schreiben dieses Programms gaben mir einerseits meine schlechten Zensuren in Latein und andererseits mein Ärger darüber, daß alle mir bekannten Vokabellernprogramme für Lateinvokabeln gänzlich ungeeignet sind.

Große Probleme hatte ich anfangs mit der Abfrageroutine, aber ich habe das Programm so weit entwickelt, daß a) bei der zufälligen Abfrage der Vokabeln kein Wort doppelt abgefragt wird und b) die Bedeutung der Vokabeln in beliebiger Reihenfolge eingegeben werden können.

Das Programm ist an manchen Stellen recht langsam, allerdings empfehle ich nicht, es zu compilieren, denn dadurch würde derohnehin knappe Speicher für Vokabeln noch kürzer.

## Programmbeschreibung

Nach dem Starten des Programms wird dem Benutzer ein Menü mit fünf Punkten angeboten:

TODO

(a)	Editieren	(c) Diskette (e) Ende
(b)	Abfragen	(d) Drucken

### (a) Editieren

Im Informationskasten (siehe Bild 1, Punkt a) sind die vier Hauptfunktionen dieses Programmteils dargestellt:

TODO

(1)	Eingabe	(2) Verbessern
(3)	Löschen	(4) Einfügen

Weitere Funktionen sind (eine Übersicht ist mit der Taste f8 abrufbar):
(f1) Blättern 10 Einheiten vor
(f3) Blättern 10 Einheiten zurück
(f5) Blättern 1 Einheit vor
(f7) Blättern 1 Einheit zurück
(+) Index um 10 erhöhen
(—) Index um 1 erhöhen
(←) Hauptmenü

(1)	Eingabe der Vokabeln

Bei der Eingabe muß zuerst die Wortart mit den Tasten &lt; und > gewählt werden ( die angewählte wird in weiß dargestellt), Symbole:
Nom = Nomen
Adj = Adjektiv
Adv = Adverb
Ver = Verb
Dep = Deponens
Sem = Semideponens

Konjunktionen sollten wie Adverbien behandelt werden.

Jetzt beginnt die eigentliche Eingabe: Der Cursor steht im Vokabel-Indexfeld (Bild 1). Der Vokabel-Index dient dazu, Wörter, die in alphabetischer Reihenfolge eingegeben wurden, nach Lektionen zu gliedern (zum Beispiel 27/05 bedeutet Lektion 27, Vers 5). Nach Drücken der RETURN-Taste wird nun, sofern man »Nomen« gewählt hat, der Reihenfolge nach das lateinische Wort, der Genitiv, der Genus und die drei Bedeutungen eingegeben. Hat man in der oberen Zeile einen Fehler gemacht und irrtümlicherweise »RETURN« gedrückt, kommt man mit SHIFT-RETURN wieder zurück. Die Eingabe ist erst mit der Taste f1 beendet, das Programm kehrt dann in das »Editier«-Menü zurück.

Hier noch einmal die Tastaturbelegung:

TODO

RETURN	nächste Eingabezeile
SHIFT-RETURN	wieder in die letzte Eingabezeile zurück
HOME	löscht aktuelle Eingabezeile
f1	Eingabe beendet
f3	löscht alle Eingabezeilen

(2)	Verbessern

Um eine Vokabel zu verbessern, wählt man deren Nummer mit den Funktionstasten an.

Zuerst muß wie bei der Eingabe die Wortart gewählt werden, dann werden die alten Zeilen angezeigt, die mit den aus der Eingabe bekannten Tasten verbessert werden können.

(3)Löschen

Wie auch beim Verbessern, sollte man vorher mit den Funktionstasten die zu löschende Vokabel-Nummer anwählen. Dann drückt man die Taste »3«.

(4)	Einfügen

Bevor man diese Taste drückt, sollte man die einzufügende Vokabel-Nummer anwählen. Dies unterstützt die alphabetische Eingabe (falls man mal ein Wort übersehen hat, kann man diese Routine verwenden).

»BLÄTTERN«

Mit den Funktionstasten kann man im Speicher herumblättern. Es ist die Eingabe von 100 Vokabeln vorgesehen (von 0 bis 99), die gerade angewählte Nummer wird im Kasten »d« (siehe Bild 1 und 2) angezeigt.

»INDEX«

Der Index dient dazu, eine formatierte Lektionensammlung auf Diskette zu erstellen (mit dem Index gibt man die einzelnen Lektionen an). Näheres unter »Speichern«.

Der Index wird in Kasten »e« (Bild 1) angezeigt und läßt sich mit den Tasten »+« und »—« ändern.

### (b) Abfragen

Im Informationskasten der Abfrage (siehe Bild 3) sind folgende Möglichkeiten angezeigt.
(1)	Abfragen in der Reihenfolge der Eingabe
(2)	Zufällige Reihenfolge beim Abfragen
(f8) Informationen

Das »Abfragen in der Reihenfolge« dient eigentlich nur dazu, sich einen ersten Überblick über die Vokabeln zu verschaffen. Wenn man die Vokabeln in der Reihenfolge, in der man sie eingetippt hat, sieht, prägt man sie sich leichter ein. Wer diese Übung erfolgreich besteht, sollte jetzt die »Vokabeln zufällig« üben.

Nachdem alle Vokabeln abgefragt sind (gilt sowohl für »Reihenfolge« als auch für »Zufall«), wird das Ergebnis in absoluten Punkten und in Prozentzahlen angegeben (nach richtigen und falschen Antworten getrennt). Ich habe auf eine grafische Auswertung verzichtet, teils aus Speicherplatzmangel, teils weil ich meine, daß dies nur Spielerei ist. Jetzt hat man die Wahl, ob man alle Vokabeln nochmals wiederholen will, oder nur die nicht gewußten. Möchte man alle Wörter noch einmal durchgehen, so kann man sich wieder zwischen zufälliger oder alphabetischer Reihenfolge entscheiden.

Noch ein Wort zur Punktezählung beim Abfragen:

Für jede richtige Zeile erhält man einen Punkt. Hat man alle Zeilen richtig eingegeben, so gilt das Wort insgesamt als »richtig«. Ist auch nur eine falsch, so gilt es als »falsch«. Man kann übrigens die Bedeutungen in einer beliebigen Reihenfolge eingeben, sind alle richtig aber am falschen Platz, so zählen sie trotzdem als »richtig«.

Da es mir um ein reines Lernprogramm ging, habe ich auf alle überflüssigen und unnötigen Extras wie zum Beispiel einen brüllenden Löwen, hinaufkletternde Männchen und Abfragen nach Zeit verzichtet.

### (c)	Diskette

Dieser Programmteil unterscheidet zwischen folgenden Arbeitsgängen:
(1)	Laden
(2)	Speichern
(3)	Laden nächster Index
und (←) zum Hauptmenü

Beim Laden und Speichern, das übrigens sequentiell vorgenommen wird, muß man zuerst den Filenamen eingeben und danach den Index einstellen. Wer dies schon bei der Eingabe getan hat, kann getrost »RETURN« drücken.

Der Filename setzt sich zusammen aus dem eingegebenen Namen, einem Punkt (».«) und dem Index. Das heißt, hat man einen Namen »Lektion« und den Index »27« gewählt, so heißt der Filename »Lektion.27«.

Einer Erklärung bedarf auch Punkt (3): Hierbei wird der Index um eins erhöht und dann das entsprechende Programm geladen. Ist kein Filename aus früheren Eingaben da, so bringt der Computer eine Fehlermeldung. Man sollte dann mit Punkt (1) weitermachen.

### (d)	Drucken

Nach dem Drücken der Taste (1)wird die Vokabelliste ausgedruckt, ein Abbruch ist mit »SHIFT LOCK« möglich.
DRUCKFORM
00 02/05 dominus; domini; m
(Nom.) Herr; Hausherr

Dabei bedeutet:
00 — Nummer
02/05 — Index
dominus — Wort
domini; m — Bestimmungsstücke
(Nom.) — Wortart
Herr; Hausherr — Bedeutungen

### (e)	Ende

Da das Programm und somit auch die Variablen (Tabelle 1 und 2) nicht gelöscht werden, ist eine Rückkehr ins Programm mit GOTO 830 möglich. Will man alle Vokabeln löschen, so sollte man diese Taste drücken und das Programm mit RUN starten.

### Hinweise zum Abtippen

Die Druck-Routine ist für den MPS-801 geschrieben. Um sie an andere Drucker anzupassen, hier die Erklärungen: 4880 OPEN 1,4,7	schaltet Kleinschrift ein

TODO

4890 PRINT#1,CHR$(14);	Breitschrift
FL$	Drucktitel
CHR$(15)	Normalschrift

(Bernd Kraus/tr)

# Checksummer 64 V3 und MSE \[54\]

Bei beiden Programmen handelt es sich um Eingabeerleichterungen unserer Listings. Ferner werden alle Tippfehler bemerkt und angezeigt.

Mit dem Checksummer 64 V3 läßt sich überprüfen, ob eine Zeile korrekt eingegeben wurde. Dazu muß zuerst das Programm Checksummer 64 V3 geladen und mit RUN gestartet werden. Ist das geschehen, erscheint, sobald Sie eine Zeile eingeben und mit RETURN abschlossen haben, links oben auf dem Bildschirm eine geklammerte Zahl in reverser Darstellung. Bei dieser Zahl handelt es sich um eine Prüfsumme. Sie muß mit der ebenfalls geklammerten Zahl am Ende jeder Basic-Zeile übereinstimmen. Tut sie das nicht, haben Sie einen Tippfehler gemacht. Die Prüfsummen im Listing dürfen nicht mit abgetippt werden. Basic-Listings enthalten keinerlei Steuer- und Grafikzeichen, dafür aber unter- beziehungsweise überstrichene Zeichen und Wörter in geschweiften Klammern. Dabei bedeuten:
unterstrichenes Zeichen = SHIFT-Taste + Zeichen
überstrichenes Zeichen = Commodore-Taste + Zeichen
die Wörter in geschweiften Klammern:
UP, DOWN, RIGHT, LEFT = Cursorsteuertasten

Ferner werden alle Farben ausgeschrieben. Die Farbe, deren Abkürzung Sie auf der Tastatur des C 64 wiederfinden, erreichen Sie über die Control-Taste (CTRL) beziehungsweise Commodore-Taste plus der Farbtaste

Zahlen in geschweiften Klammern geben an, wie oft die Tastenkombination unmittelbar hinter der Zahl zu drücken ist, zum Beispiel 2SPACE = 2x Leertaste.

Das Listing zu diesem Checksummer V3 finden Sie zum erstenmal in der Ausgabe 8/85, Seite 54, und dem Drucker/ Grafik-Sonderheft. Alle anderen Checksummer-Listings (V2) sind damit hinfällig. Die ausführliche Anleitung aus diesen Ausgaben kann jedoch weiterhin benutzt werden.

Der **MSE** unterstützt die Eingabe von Listings, die in Maschinensprache geschrieben wurden. Bei ihm handelt es sich um ein Maschinensprache-Editor, der Fehleingaben ausschließt. Eine abgetippte Zeile wird nur dann angenommen, wenn sie richtig eingegeben wurde.

Das Listing zum MSE mit ausführlicher Anleitung finden Sie in den Ausgaben 1/85 bis 6/85. Auch dieses Programm ist auf jeder Leserservice-Diskette gespeichert.

Außerdem schicken wir Ihnen gegen Einsendung eines an Sie selbst adressierten Briefumschlags (Größe DIN C5 = 0,80 Mark, DIN C4 = 1,10 Mark Porto) gerne das Listing zum MSE und Checksummer 64 V3 zu.

# C 64-Schreiberling — Drucken wie gemalt \[54-56\]

Mit einem grafikfähigen Drucker sind der Kreativität kaum Grenzen gesetzt. Phantasievolle Schriften, wie sie jeder aus Märchen kennt, sind eines der reizvollen Anwendungsgebiete dieser Drucker. Mit dem Programm »Schreiberling« ersetzen sie sogar Tusche und Federhalter.

Wer hat nicht schon die wundervoll geschwungenen Schriften alter Märchenbücher bewundert und sich gewünscht, doch so schreiben zu können? Die Erfahrung zeigt aber, daß es gar nicht so einfach ist, mit Federhalter und Tusche den richtigen Schwung herauszubekommen, ohne dabei in Tinten klecksen unterzugehen. Wer aber trotzdem schöne Grußkarten, Einladungen oder sogar Urkunden in einer phantasievollen Schrift erstellen möchte, ist auf die Hilfe des Computers angewiesen. Zusammen mit dem Programm »Schreiberling« wird es Ihnen sicherlich oft gelingen, Ihre Verwandten und Freunde mit gestochen scharfen Schriftstücken zu überraschen.

»C 64-Schreiberling« verwendet eine der interessantesten Fähigkeiten eines Druckers — seinen Grafikdruck. Jeder, der einen Drucker mit dieser Funktion besitzt, hat sicherlich schon im Handbuch über die Technik des Binärausdrucks gelesen. Was man aber, außer Hardcopies, damit noch alles machen kann, soll hier beschrieben werden. Das Programm wurde für einen CP-80X entwickelt. Da dieser aber die gleichen Steuerzeichen wie ein Epson RX/FX-80 verwendet, funktioniert »C 64-Schreiberling« auch mit einer ganzen Reihe anderer Drucker.

Das Programm »Schreiberling« (siehe Listing) verwendet den Binärzeichendruck. Dabei hängt das Aussehen eines Buchstabens nicht mehr vom vorprogrammierten Inhalt des Festwertspeichers, sondern von einer eigenen Definition ab. Dazu ist es notwendig, dem Drucker genau zu befehlen, welche Nadel wann und wo drucken soll, um das gewünschte Resultat zu erhalten. Beim Binärzeichendruck werden nur acht der neun vorhandenen Nadeln des Druckers angesprochen. Die Nadeln sind übereinander angeordnet. Die unterste Nadel hat den Wert 1, die oberste den Wert 128 (Bild 1). Um nun ein Zeichen zu erhalten, muß man dem Drucker für jede Nadelstellung einzeln befehlen, welche Nadeln aktiv sein sollen.

Der Druckkopf rückt danach von selbst um ein kleines Stück weiter und druckt die nächste Nadelkombination. Auf diese Art werden beispielsweise Hardcopies vom Bildschirm gedruckt.

Oder man entwirft einen Satz geänderter Zeichen, wie es bei dem Programm Schreiberling gemacht wurde.

Betrachten wir einmal das große »Y« mit Schreiberling ausgedruckt(Bild 2). Man sieht, daß es eine 16x 24-Punktematrix besitzt. Da der Drucker aber nur acht Nadeln verwendet, muß er insgesamt dreimal drucken, um das »Y« zusammenzusetzen. Zuerst die Oberteile aller Zeichen, dann die Mittelteile und zuletzt die Unterteile.

Nach dem Eingeben und Starten des Programms dauert es eine Weile, bis alle DATA-Zeilen gelesen sind. Danach erscheint auf dem Bildschirm: »....eine.Zeile.eingeben:..«. Das heißt, Sie können nun einen beliebigen Text, mit einer Länge bis zu einer Druckzeile, eingeben. Da die einzelnen Zeichen unterschiedlich lang sind (das I ist beispielsweise kürzer als das M), läßt sich nicht genau sagen, wieviele Zeichen in eine Druckzeile passen. Auf jeden Fall sollten Sie niemals zu viele Zeichen eingeben, denn sie werden nicht mehr gedruckt. Bei normaler Dichte (normales Drucken mit Schreiberling) passen ungefähr 40 Zeichen in eine Druckzeile. Am besten ist es, Sie probieren es einfach einmal aus. Geben Sie dazu einen Beispieltext, etwa: »The never ending Story« ein. Dieser Text wird nun in normaler Dichte ausgedruckt (Bild 3). Das ist aber noch nicht alles, was Schreiberling kann. Wenn Sie vor die Zeile ein »#« stellen, werden alle Zeichen mit doppelter Dichte ausgegeben, probieren Sie es aus. Das Ergebnis sollte ähnlich wie Bild 4 auf Ihrem Drucker erscheinen.

Für alle, die gerne etwas experimentieren wollen, hier noch ein paar Hinweise. Beim Abtippen können Sie alle REM-Zeilen weglassen. Das Programm beginnt mit Zeile 145, in der die Bildschirmfarben verändert werden. In Zeile 160 werden drei Felder dimensioniert, in die später die Zeichendaten (Ober-Mittel- und Unterteil) eingelesen werden. Zeile 200 bis 290 füllt die drei Felder. In Zeile 300 bis 360 befindet sich der Einzeleditor und in den Zeilen 422 bis 550 werden die Daten auf den Drucker ausgegeben. Die l-Schleife von 422 bis 550 liest die Buchstaben vom Bildschirm (bei normaler Dichte eine Zeile, bei doppelter Dichte ungefähr zwei Zeilen). Die J-Schleife läßt die l-Schleife dreimal die Buchstaben lesen, da die Ober-, Mittel- und Unterteile einzeln gedruckt werden. In den Zeilen 1 000 bis 2 460 stehen die Zeichendaten. Da das Programm ganz in Basic geschrieben wurde, läßt es sich zwar leicht editieren, dafür ist es nicht gerade schnell — aber wozu gibt es Compiler?

(K. Kramer/aw)

# Pac-Man unter der Lupe \[76-78\]

> Eine ganz besondere Pac-Man-Version bieten wir Ihnen mit diesem Listing. Ihnen steht ein riesiges Labyrinth zur Verfügung. Um den Pac-Man hier noch zu erkennen, mußte er unter die Lupe genommen werden.

Nachdem ich des Spielens müde auf einem Apple ein Pac-Man-Spiel sah, das es in dieser Form auf dem C 64 noch nicht gab, erwachte der Programmierer in mir. Ich wollte dieses Spiel für den C 64 entwickeln.

Gegenüber dem Apple hat der C 64 Sprites zur Verfügung, die man sogar vergrößern kann. Also mußte man nur noch eine Bildschirm/Sprite-Verschieberoutine schreiben. Als diese Routine funktionierte, mußte das Spielfeld erstellt werden. Dafür wurde ein spezieller Line-Befehl geschrieben, der mit einem Minimum an Parametern über Spiegelung das Spielfeld erzeugt. Die Joystickabfrage wurde an Port 2 gelegt, da dies die meisten Spiele tun.

Der Verfolger-Algorithmus war anfänglich darauf ausgelegt »intelligent« zu sein. Aber bei dieser Steuerung wurde man spätestens nach dem Fressen von fünf Punkten eingeholt. So wurde ein einfacherer Algorithmus gewählt, der nur abläuft, wenn man sich selbst bewegt.

Noch ein wichtiger Hinweis: Nach dem ersten RUN wird das Programm »decompressed«, das heißt die Maschinenroutinen und die Grafik werden absolut im Speicher abgelegt. Jetzt kann man mit LIST ein kleines Basic-Programm einsehen, dessen Aufgabe es ist, die Verfolger und die Farben zu setzen. In Zeile 1 ändert man die Bildschirmfarbe. Hier muß die 110 ersetzt werden (Werte siehe Handbuch). In Zeile 2 wird durch Ändern der 110 die Score-Farbe gewählt. In Zeile 3 wird die Lupenfarbe eingestellt. Durch Ersetzen der 4 in Zeile 4 (Werte von 1 bis 8) kann die Anzahl der Verfolger geändert werden. Hat man nun die Farben eingestellt (oder auch nicht) wird das Spiel ein zweites Mal mit RUN gestartet.

Steuern können Sie mit dem Joystick in Port 2. Wird man gefressen, startet man ein neues Spiel mit dem Feuerknopf.

Eine kurze Bemerkung für Maschinensprache-Freaks: Wer Lust und Laune zu einem besseren Ton hat, der kann einfach Musik in den IRQ legen. Das Programm läuft in einer einzigen Jobschleife ab.

(Thomas Kaiser/rg)

# Cross-Ref optimiert \[83-84\]

> Viele Verbesserungsvorschläge sind uns seit Erscheinen der Ausgabe 6/85 zu dem Dokumentationsprogramm »Cross-Ref« zugeschickt worden. Die besten sind hier zusammengestellt. Jetzt ist es zum Beispiel auch möglich, Simons Basic-Programme bearbeiten zu lassen.

### Der Ärger mit dem GOTO

Zunächst muß im Programm (siehe Listing 1) darauf geachtet werden, daß Zeichen innerhalb von Anführungsstrichen grundsätzlich überlesen werden. Das gilt insbesondere in DATA- beziehungsweise REM-Zeilen. Das Flag »Y2« wird jeweils beim ersten Anführungszeichen gesetzt und beim nächsten Auftreten, spätestens am Zeilenende (X=0), gelöscht (Zeilen 342 und 345 sowie 762, 764 und 820, 825). Zeilensprünge nach »THEN« (Token 167) mit nachfolgendem »GOSUB« etc. werden in der alten Programmversion nicht gefunden. Die zusätzliche Zeile 495 testet bei vorausgegangenem »NEXT« (Flag »Y1« wurde dann in Zeile 358 gesetzt) die nachfolgenden Sprungbefehle »GOTO«, »RUN«, »GOSUB« und »GOTO« (Token 203 und 164), wobei das Flag für »GO« in Zeile 355 gesetzt wurde; der Test auf nachfolgendes »TO« erfolgt in Zeile 360.

Da beim Erstellen eines neuen Strings in der Version aus 64’er, Ausgabe 6/85, kein Test auf ein bereits vorhandenes gleiches Sprungziel erfolgt (dies geschieht nur innerhalb eines Strings in Zeile 460), bringen die neuen Zeilen 450, 455 und 458 Abhilfe; Entsprechendes gilt bei den Variablen für die Zeilen 920, 925 und 928.

Ein ganz wichtiger Punkt ist die Tatsache, daß »E« (ASCll-Code=69) nach Ziffern oder nach einem Punkt keine Variable ist. Dieses wird in Zeile 855 in Verbindung mit Zeile 90 (X2=ASCII-Code des vorausgehenden Zeichens) untersucht. Längere Variablennamen, die im Commodore-Basic vorkommen können, werden in der Programmversion falsch interpretiert. Durch die neue Zeile 952 werden maximal zwei Zeichen und/oder »$,%H,(« (Zeilen 870 beziehungsweise 880) zugelassen. Da das nachfolgende Zeichen bereits in Zeile 870 gelesen werden mußte, sorgt das Flag »Y3« dafür, daß in Zeile 750 dieses Zeichen nicht übersprungen wird (letzteres gilt auch für die Zeile 965 beim Auftreten eines Anführungszeichens).

Damit die Zeilensprünge in der richtigen Reihenfolge ausgegeben werden, sollten die Sortier-Routine (Zeilen 520 bis 540) und die Ausgabezeilen 650 und 660 entsprechend der Variablen-Ausgabe (siehe Zeilen 990 und 1 140) geändert werden.

Einige der angesprochenen Punkte werden durch das beiliegende Testprogramm (Listing 2) deutlich. Nach Eingabe der zusätzlichen beziehungsweise geänderten Zeilen dürfte einer guten Programmdokumentation nichts mehr im Wege stehen.

(Gerhard Löber/tr)

## Simons Basic dokumentieren

Zuerst einmal ein dickes Lob an Stefan Becker, den Autor der Dokumentationshilfe in der 64’er, Ausgabe 6/85, für sein hervorragendes Programm. Aber auch hier gilt: Kein Programm, das nicht noch besser werden könnte.

Als erstes fiel mir auf, daß eine Dokumentation von Simons-Basic-Programmen nicht möglich war. Hier die vorläufige Lösung: Folgende Zeilen müssen eingefügt werden:
495 ifx=100 then 330
805 ifx=34 then y=2
806 if x=100 then y=3
835 if y=3 and (x=49 or x=50 or x=51) then y=0
836 if y=3 goto 750
Folgende Zeilen müssen geändert werden:
770 if x=34 <u>or x=100</u> or x=131 or x=143 <u>then z=0</u>: goto 800
820 if x=34 <u>and y=2</u> goto 750
920 ...:va$(i)=<u>v1$</u>+” :”

Des weiteren empfand ich es als einigermaßen lästig, bei vielen Variablen ständig die Frage »Wollen Sie Bemerkungen eingeben?« beantworten zu müssen. Nach folgenden Änderungen kann man die Variablen beliebig durchsuchen und mit Text versehen, um danach durch Eingabe von »E« wie Ende zur Ausgabe zu gelangen. Außerdem kann man nun bei Variablen, die sich über mehrere Druckzeilen erstrecken, seine Bemerkungen auf alle zugehörigen Zeilen verteilen. Folgende Zeilen sind einzufügen:
1105 if a$ =”e” goto 1180
1135 print ”{home}{9down}”le$
Folgende Zeilen müssen geändert werden:
1080 ...a$<>chr$(13) <u>and a$<>”e”</u> goto 1080
1020 open 1,0
1160 ...: goto <u>1070</u>
Die folgenden Zeilen sind zu löschen:
1140
1150
1170

Bei der Ausgabe ohne Zeilennummer genügt es im allgemeinen, wenn eine Variable, auch wenn sie sich über mehrere Zeilen erstreckt, nur einmal ausgegeben wird. Die folgende Lösung berücksichtigt dabei die Bemerkungen, die sich über mehrere Zeilen erstrecken. Es sind folgende Zeilen zu ändern:
1272 ...:goto 1275
1273 if left$(va$(i+1),4)=left$(va$(i),4) then 1275
1274 print#1,left$(va$(i), 8)
1275 next i

Die Abfrage »Nochmal/Weiter« läßt sich bei einer Ausgabe auf den Drucker durch Einfügen folgender Zeilen vermeiden:
685 if dv=4 then 712
1245 if dv=4 then 1269

Meine letzte Anmerkung betrifft die leidige Garbage-Collection (siehe hierzu auch den Kurs »Effektives Programmieren«, 64’er, Ausgabe 1/85), die der Computer durchführt, wenn sein Stringspeicher voll ist, und er weiteren Platz braucht. Bei meinen längeren Programmen lag der Computer spätestens bei der Eingabe von Bemerkungen für längere Zeit stumm und schweigend vor mir. Folgende Änderungen können hier Verbesserung schaffen:
1)	Die Variable OB in Zeile 150 verkleinern. Sie gibt die Größe der Stringfelder an. Die Dauer der Garbage-Collection hängt aber in etwa vom Quadrat der Variablenzahl ab. Ich halte eine Angabe von QB=200 im Normalfall für völlig ausreichend. Ansonsten erscheint während des Programmlaufs eine entsprechende Fehlermeldung.
2)	Das Ersetzen der speicherplatzverschwendenden Sortierprozedur durch die SWAP-Routine aus der 64’er, Ausgabe 1/85, Seite 123. Hierzu
1)	Zeile 550 ersetzen durch:
550 sys 6000(ps$(i), ps$(j))
2) Zeile 1000 ersetzen durch:
1000 sys 6000(va$(i),va$(j))
3) Eingabe im Direktmodus:
print (peek(45)+256\*peek(46))
Den erhaltenen Wert aufschreiben!
4)	In den Zeilen 550 und 1000 den Wert 6000 durch den aufgeschriebenen Wert ersetzen.
5)	Das Programm mit SAVE”XREF1.0”,8 abspeichern.
6)	Den Basic-Lader der SWAP-Routine laden und starten.
7)	Auf die Frage nach der Startadresse den aufgeschriebenen Wert eingeben.
8)	Das Dokumentationsprogramm mit LOAD”XREF1.0”,8 laden.
9)	lm Direktmodus eingeben (für »W« dabei den aufgeschriebenen Wert einsetzen):
POKE 45,(W+50)AND255:POKE 46,(W+50)/256
POKE174,(W+50)AND255:POKE175,(W+50)/256

Das Programm kann nun mit SAVE”XREF2.0”,8 abgespeichert werden.

Achtung! Es dürfen keine Veränderungen mehr vorgenommen werden, die die Länge des Programms beeinflussen, da das Maschinenprogramm direkt hinter dem Basic-Programm steht! Das Zwischenprodukt "XREF1.0” kann jetzt gelöscht werden.

(Lutz Kleinostendarp/tr)

## Anpassung von Cross-Ref auf Datasette:

Bedingt durch ein anderes Speicherformat auf Datasette gegenüber der Floppy ist Cross-Ref mit den in 64’er, Ausgabe 6/86 genannten Änderungen für Kassettenbetrieb trotzdem nicht lauffähig. Auch die Abfrage der Status-Variablen ist nicht korrekt.

Um Cross-Ref trotzdem auch für unsere Datasettenbesitzer zugänglich zu machen, ist folgendes zu beachten:

Das zu bearbeitende Programm muß in einem »Pseudo-Floppy-Format« gespeichert werden. Dazu das Programm laden und mit folgenden Befehlen im Direktmodus (also ohne Zeilennummern) neu aufs Band schreiben.
OPEN 1,1,1,”name” \[RETURN\]
PRINT#1,CHR$(PEEK(43));CHR$(PEEK(44) \[RETURN\]
FORI = PEEK(43) + 256\*PEEK(44)TOPEEK(45) + 256\*PEEK(46):PRINT#1,CHR$(PEEK(I));:NEXT \[RETURN\]
CLOSE1 \[RETURN\]

Das File hat zwar jetzt das richtige Format, aber die Statusabfrage in Zeile 90 ergibt immer noch falsche Werte. Auf Diskette zeigt ein ST=64 nämlich das Ende eines Files an, auf Kassette dagegen bedeutet ST=64, daß ein CHR$(0) folgt! Die folgenden Änderungen berücksichtigen dies:
90 GET#1,A$ : X=ASC(A$+N$) : IF X &lt;>0 THEN XX=0 : RETURN
95 XX=XX+1 : IF XX&lt;3 THEN RETURN
290 OPEN 1,1,0,NA$ : GOSUB 120 : IF X=2049 THEN 310
730 OPEN 1,1,0,NA$ : GOSUB 120

Die Zeilen 1290 bis 1310 entfallen.

(Stefan Becker/tr)

Anmerkung der Redaktion:
Auf der Leserservice-Diskette dieser Ausgabe befindet sich »Cross-Ref« in der verbesserten Version von Gerhard Löber und die Simons Basic-Version von Lutz Kleinostendarp. Auch ist die Löber-Version zusätzlich compiliert worden. Diese Version können wir allen Lesern wegen der gewaltigen Geschwindigkeitsvorteile nur empfehlen.

# Programm-Generator für den C 64 \[86\]

> Diese Routine kann Basic-Zeilen innerhalb eines Basic-Programms erzeugen, löschen und in einen String einlesen, ohne Variablen zu zerstören.

Das Programm (Listing 1) ist vollständig in Maschinensprache geschrieben und belegt den Speicherbereich von $C800 bis $CA70. Nach dem Laden ist eine Initialisierung nicht notwendig. Um die Basic-Zeiger zurückzusetzen, ist nur ein NEW &lt;RETURN> einzugeben.

Zum Erzeugen einer Basic-Zeile ist die Zeile selbst in einem String abzulegen. Anschließend kann dieser String mit
SYS51200, String
in das Basic-Programm eingebunden werden. Zum Beispiel:
A$="100 S=SQR (2):PRINTS,S+100":SYS 51200,A$

Mit dem Befehl SYS 51442, Zeilennummer, läßt sich eine Basic-Zeile innerhalb eines Basic-Programms löschen.

Der Befehl
SYS 51442,100
löscht zum Beispiel die Zeile 100. Beim Generieren oder Löschen ergeben sich folgende Einschränkungen:
1. Der Aufruf (SYS 51200,A$ oder SYS 51442,100) darf nicht innerhalb einer FOR-NEXT-Schleife stehen.
2. SYS 51200,A$ oder SYS51442,100 darf nicht in einem Unterprogramm stehen, falls sich die neue oder die zu löschende Zeile vor diesem Unterprogramm befindet.

Auch kann der Programm-Generator Zeilen in einen String einlesen. Dazu muß der String vorher jedoch mit beliebigen Zeichen gefüllt werden. Dabei gilt: Anzahl der Zeichen > = Anzahl der Zeichen in der zu erwartenden Zeile.

Es bietet sich natürlich an, den String mit Leerzeichen (CHR$(32)) zu belegen.

Anschließend kann die Zeile mit
SYS 51642, String, Zeilennummer eingelesen werden.
Beispiel:
100 S=SQR(2):PRINTS,S + 100
110 A$=”
120 SYS51642,A$,100
130 PRINT A$

Nach dem Start dieses Beispiels mit RUN &lt;RETURN> erscheint auf dem Bildschirm die Zeile 100:
S=SQR(2): PRINT S, S+100
READY.

Für dieses Programm gibt es nun eine Anzahl von Anwendungsmöglichkeiten. Es läßt sich zum Beispiel ein nur acht Zeilen langes Basic-Programm schreiben, das ein Maschinenprogramm in DATA-Zeilen ablegt (Listing 2).

Dabei wird etwa die Geschwindigkeit erreicht, die die entsprechende Routine im SMON hat. Außerdem wäre ein »intelligentes« Programm vorstellbar, das sich selbst verändert. Typische Maschinenroutinen wie RENUMBER, FIND und AUTO sind natürlich auch denkbar. Sie sehen, die Möglichkeiten dieses Programm-Generators sind nahezu unbegrenzt.

(Michael Dietz/ah)

# Neues vom SMON \[87-88\]

> Diese Erweiterung stellt elf weitere Befehle zur Verfügung. So läßt sich der Monitor zum Beispiel frei im Speicher verschieben und Sprites oder Zeichensätze können sehr einfach erstellt und geändert werden.

Um die Befehlserweiterung zu initialisieren, geht man folgendermaßen vor:
1.	SMON absolut laden.
2.	Den Basic-Lader (siehe Listing) eintippen und abspeichern.
3.	Nach dem Start des Laders die Startadresse (dezimal) Ihrer SMON-Version eingeben:
zum Beispiel 49152 (= $C000).
4.	Den erweiterten SMON zum Beispiel mit "SMONEX” Startadresse Endadresse abspeichern.

Die neuen Routinen werden, genau wie die meisten bereits vorhandenen, durch einen Buchstaben, zum Teil gefolgt von Adressenangaben, aufgerufen. Bei den ersten drei Ausgabebefehlen kann der Speicherinhalt durch Überschreiben der Zeile geändert werden.
**Z 4000 (4100)** (Zeichendaten)

gibt den Speicherinhalt von $4000 (bis $40FF) folgendermaßen aus: Jeweils ein Byte pro Zeile wird in 8-Bit-Form dargestellt. Dabei ist ein »*« ein gesetztes, ein ».« dagegen ein nicht gesetztes Bit. Die beiden Zeichen sind willkürlich gewählt und können durch Überschreiben der Speicherzellen $xE65, $xE2D (Bit = 1) und $xE69, $xE30 (Bit = 0) in den Bildschirm-Code (!) der gewünschten Zeichen geändert werden.

Die Anwendung dieses Befehls liegt beispielsweise in der gezielten und anschaulichen Beeinflussung bestimmter Steuerbits in VIC, CIA, etc. Andererseits lassen sich — besonders in Verbindung mit dem Kommando »Q« — Zeichendaten leicht modifizieren.
**H 4000(4100)**
entspricht dem Befehl »Z« mit dem Unterschied, daß jeweils drei Byte pro Zeile ausgegeben werden. Das entspricht dem Format für Spritedaten. Auf diese Weise steht mit dem erweiterten SMON ein kleiner »Sprite-Editor« zur Verfügung.
**N 4000 (4100)** (Normaldarstellung)

interpretiert den Speicherinhalt von $4000 (bis $40FF) als Bildschirm-Code und gibt 32 Zeichen pro Zeile aus.
**U 4000 (4100)** (Übersicht)

Wie »N«, jedoch werden in einer Zeile 40 Zeichen dargestellt. Änderungen sind nur mit »N« möglich. Dieser Befehl dient hauptsächlich dazu, im Speicher abgelegte Bildschirminformationen so auszugeben, wie sie tatsächlich im 40-Zeichen/Zeile-Format aussehen würden. Dieser Befehl ist recht nützlich, um professionelle Videospiele zu analysieren, da hier Spielszenen oft im Bildschirm-Code gespeichert sind.
**E 4000 (4100)** (Erase)

ist der bereits in 64’er Ausgabe 2/85 vorgeschlagene Erase-Befehl zum Füllen des Speicherbereiches von $4000 bis $40FF mit $00.
**Y 40**

kopiert die vorhandene SMON-Version in nur drei Sekunden nach $4000 bis $4FFF und nimmt dabei alle notwendigen Anpassungen vor. Die ursprüngliche Speicherversion des Monitors bleibt unverändert. Mit »G 4000« kann man in den neuen SMON springen. Von dem Byte-Wert, der übergeben werden muß, wird nur das obere Nibble ($4) gewertet, so daß sich theoretisch 16 SMON-Versionen im Speicher unterbringen lassen, wobei natürlich nicht alle Möglichkeiten sinnvoll sind.

Auf diese Weise läßt sich stets die erforderliche Speicherversion herstellen, ohne daß langwierige Änderungen notwendig sind.
**Q 2000**

kopiert den Zeichensatz aus dem ROM von $D000 bis $DFFF in das RAM nach $2000. Dort kann er mit dem Befehl »Z« nach Belieben geändert werden. Möchte man zum Beispiel das Zeichen »A« in ein »Ä« umdefinieren, so ist der Zeichensatz mit »Q 2000« ins RAM zu kopieren. Anschließend kann mit »Z 2000 2015« der Bereich in binärer Form auf dem Bildschirm ausgegeben werden, in dem auch das Zeichen »A« steht. Dieses kann nun (siehe Bild) in ein »Ä« geändert werden, indem man mit dem Cursor an die zu ändernde Stelle fährt und für einen Punkt, der gesetzt werden soll, ein »*« und für einen Punkt der nicht gesetzt werden soll ein ».« setzt. So, jetzt ist der Zeichensatz umdefiniert, aber noch nicht aktiviert. Als nächstes muß dem Videocontroller die Startadrese des neuen Zeichensatzes mitgeteilt werden. Dazu ist die Adresse $D018, in der eine hexadezimale 15 steht, durch eine hexadezimale 18 zu ersetzen.
**J**

bringt den letzten Ausgabebefehl ( K, D, M, Z, H, N, U) auf den Bildschirm zurück. Mit RETURN wird der letzte Befehl noch einmal ausgeführt.

Zum Schluß noch ein Tip:

DATA-Zeilen in Hex-Byte-Darstellung sind wegen ihrer konstanten Länge (immer zwei Ziffern pro Wert!) übersichtlicher als solche mit dezimalen Zahlen. Da für die Ausgabe von Hex-Werten bereits alle Routinen im SMON integriert sind, kann der »B«-Befehl (Basic-DATA-Zeilen erzeugen) durch Verändern eines einzigen Sprungbefehles dahingehend manipuliert werden, daß der Speicherinhalt künftig in Form von Hex-Byte ausgegeben wird:

Disassemblieren Sie dazu den Byte-Ausgabebefehl mit »D x99F« und ersetzen »JSR BDD1« durch »JSR x32A«. Für das »x« muß der 4-KByte-Block, in dem die zu ändernde SMON-Version steht, eingesetzt werden. Liegt Ihre SMON-Version bei $C000, so ersetzen Sie das »x« durch ein »C«.

Die Gesamtlänge der DATA-Zeile kann außerdem durch Verändern der Speicherzelle $x9AE variiert werden. Bei dem Wert $1C werden zum Beispiel genau acht Hex-Byte pro Zeile ausgegeben.

(Mark Richters/ah)

# Tips und Tricks \[88-89\]

## Programme nachladen

Wenn man von Basic aus ein Programm nachladen will, so ist im allgemeinen die Tatsache störend, daß der Interpreter anschließend das Basic-Programm neu startet. Mit folgender Befehlsfolge wird dies umgangen:
SYS 57812”name”,8,1:POKE 780,0:SYS 65493

Das gewünschte Maschinenprogramm wird geladen, und das Basic-Programm mit dem nächsten Befehl fortgesetzt.

Wenn man statt ...,8,1 die Sekundäradresse ...,8,0 setzt, und im X- und Y-Register des 6510 (Speicherstellen 781 und 782) Low-Byte und High-Byte einer bestimmten Adresse angibt, so wird das Programm an diese Adresse geladen. Eine Anwendung wäre zum Beispiel eine Merge-Routine:
1000 AD=PEEK(45) + PEEK(46)\*256-2
1010 AH = INT(AD/256)
1020 AL=AD-256\*AH
1030 POKE 781,AL
1040 POKE 782,AH
1050 SYS 57812”name”,8,0
1060 POKE 780,0
1070 SYS 65493

(Martin Barth/tr)

## Gelöschte Files retten

Hat man versehentlich ein Programm auf Diskette gelöscht, so gibt es eine einfache Möglichkeit, dieses wieder zu retten: LOAD ”\*”,8. Voraussetzung ist allerdings, daß man inzwischen noch kein anderes File von Diskette geladen hat.

Dieser Befehl lädt das zuletzt bearbeitete Programm von Diskette; auch wenn dieses inzwischen gelöscht wurde!

(Michael Keukert/tr)

## »Kopierschutz« für Datasette

Auf Datasette läßt sich sehr leicht ein wirkungsvoller Softwareschutz erzeugen:

Es besteht nämlich beim C 64 die Möglichkeit, einen bis zu 172 (!) Zeichen langen Programmnamen abzuspeichern. Dieser wird zwar beim Laden nicht angezeigt, steht aber trotzdem ab Adresse 849 im Speicher. Dort kann man ihn dann gezielt auf bestimmte Zeichen untersuchen.

(Peter Dreuw/tr)

## Neue Farben für den SMON

Da die Farbkombination des SMON meiner Meinung nach recht ungünstig gewählt ist, hier mein Verbesserungs-Vorschlag (für SMON $C000):

TODO

Monitor Hintergrund und Rahmenfarbe hellblau ($C220: 0E) ($CFC7: 0E)
Monitor Schriftfarbe schwarz ($C228: 00)
Basic: Schrift- und Rahmenfarbe blau ($C36F: 06)
Basic: Hintergrundfarbe hellblau ($0377: 0E)
Diskmonitor Rahmenfarbe blau ($CEOA: 06)

(Björn Hendrik Gemein/tr)

## Hi-EDDI auf Star SG-10

Betrifft: Anpassung der Druckerroutine HI-PRINT von HI-EDDI an den SG-10.

Folgende Änderungen müssen an der Druckerroutine vorgenommen werden:
460 DATA 4: REM Direktkanal
550 DATA 27,51,15,255,255: REM Zeilenabstand 15/144 Inch
580 DATA 27,103,4,255,255: REM Grafikmodus 4

In dieser Betriebsart werden Kreise in Y-Richtung etwas gedehnt. Wer auf den Ausdruck zweier Bilder nebeneinander und auf Großbilder verzichtet, sollte folgende Werte eingeben (Zeile 460 muß natürlich trotzdem geändert werden):
550 DATA 27,51,16,255,255: REM Zeilenabstand 16/144 Inch
580 DATA 27,103,5,255,255: REM Grafikmodus 5

Dafür werden Kreise auch als Kreise dargestellt. Wenn man breiteres Papier als A4 verwendet, kann man auch zwei Bilder nebeneinander und Großbilder drucken. Der Drucker muß auf Star-Betriebsart eingestellt sein (siehe Handbuch). Der User-Port kann weiterhin als Parallelschnittstelle verwendet werden.

(Kurt Reiter/tr)

## 3D-Zeichensatz

Dreidimensionaler Zeichensatz auf dem C 64 (nicht SX 64)? Kein Problem, mittels eines einzigen POKE:
POKE 53270,250

Man sollte aber a) über einen Farbmonitor oder Farbfernseher verfügen, und b) die Hintergrundfarbe mit POKE 53281,4 auf violett setzen. Dadurch kommt der Effekt besser zur Geltung.

(Matthias Eberhardt/tr)

# 64'er Extra \[92-93\]

TODO ASIDE

Das 64’er Extra ist eine Extra-Leistung für unsere Leser. Sie finden hier geballte Informationen für Ihren C 64 zum Herausnehmen und Sammeln.

Im 64’er Extra 2 finden Sie eine komplette Übersicht über alle Register des Video-Chips im C 64. Damit haben Sie auf einem Blick alle Informationen über:

- Spritesteuerung
- Farbgebung
- hochauflösende Grafik
- Multicolor-Modus
- Zeichensatz
- Scrolling
- Rasterzeilen-Interrupt

Geballte Information, verständlich und übersichtlich präsentiert, das ist das Konzept des 64’er Extra.

Ob Sie sich die Extra-Seiten als Poster über Ihren Schreibtisch hängen, oder einmal in der Mitte gefaltet in einer Plastikhülle griffbereit neben Ihrem Computer unterbringen — in jedem Fall bekommen Sie mit der Zeit ein einzigartiges Archiv über Ihren Commodore 64 zusammen.

Diese zweite Ausgabe des 64’er Extra bringt Ihnen eine Übersicht über den VIC II-Chip, der in Ihrem C 64 alles steuert, was irgendwie mit Farbe, Grafik oder Zeichensatz zu tun hat. Zu jedem Register finden Sie die Bedeutung der einzelnen Bits im Klartext erläutert. Ob Anfänger oder Profi, hier haben Sie in jedem Fall eine kompakte, vollständige Übersicht über den VIC II. Sie ersparen sich damit umständliches Blättern im Handbuch und anderer Literatur, und brauchen sich auch nicht mit unverständlichen Bezeichnungen und Abkürzungen herumschlagen.

Setzen einzelner Bits per Basic (ADR: Adresse eines Registers, BIT: gewünschtes Bit, also eine Zahl zwischen 0 und 7):
POKE ADR, PEEK (ADR) OR 2 ↑ BIT

Löschen einzelner Bits in VIC II-Registern per Basic:
POKE ADR, PEEK (ADR) AND (255 - 2 ↑ BIT)

Abfragen eines Bits:
? PEEK (ADR) AND 2 ↑ BIT

Es ergibt sich ein Wert von Null, wenn das Bit gelöscht ist und ein Wert ungleich Null, wenn das Bit gesetzt ist.
Beispiel: POKE 53277, PEEK (53277) OR 2 ↑ 7
bewirkt, daß Sprite 7 in
X-Richtung vergrößert wird.

# Dem Klang auf der Spur (Teil 9) \[126-129\]

> In diesem Teil wird gezeigt, wie man dreistimmige Musikstücke programmgesteuert, schnell und zeit exakt auf aem C 64 wiedergeben kann. So ganz nebenbei erfahren Sie eine Menge über die Interrupttechnik.

Zunächst einige Grundlagen zum Sequenzer. Unter einem Sequenzer versteht man ein Gerät oder Programm, das einen Synthesizer mit einer vorprogrammierten Tonfolge ansteuert. Die zentrale Rolle spielt dabei das genaue Einhalten eines programmierbaren Zeitmaßes.

Musikstücke werden üblicherweise in Takte von etwa 1 bis 4 Sekunden Länge eingeteilt. Am gebräuchlichsten ist der %-Takt, der die Länge einer ganzen Note hat. Andere gebräuchliche Taktarten sind 2/4, 3/4, 6/8, 4/4, 5/4, 3/2. Diese Angaben betreffen allerdings nur die Zählweise der Takte und nicht das Tempo eines Musikstücks. So sind zum Beispiel 3/4- und 6/8-Takt bis auf die Zählweise vollkommen identisch.

Die Notenlängen werden in Bruchteilen der ganzen Note angegeben:

TODO

Es kommen auch ungeradzahlige Vielfache dieser Notenlängen vor. Durch Punktierung kennzeichnet man die Verlängerung einer Note um die Hälfte ihrer ursprünglichen Länge:


TODO

Alle diese Notenlängen passen in ein Raster, welches eine ganze Note in 16 oder 32 gleiche Zeitabschnitte teilt. Es werden aber häufig auch sogenannte Triolen (Drittelnoten) eingesetzt. Zum Beispiel Achteltriolen,

TODO

das sind drei gleichlange Noten mit der Länge einer Viertelnote. Aus diesem Grund sollte das Zeitraster (die Anzahl der Zeitabschnitte, in die der Sequenzer eine ganze Note einteilt) auch den Faktor 3 enthalten. Ein sinnvolles Zeitraster ist zum Beispiel 96( = 3x32).

Das Tempo wird in der Musik in Schlägen pro Minute (beats per minute: bpm) gemessen. Ein Schlag entspricht dabei einer Viertelnote. Der sinnvolle Bereich für dieses Maß liegt bei etwa 40 bis 240 bpm. Beim schnellen Tempo 240 bpm dauert eine ganze Note genau eine Sekunde. Der Sequenzer muß dann 96 Schritte pro Sekunde ausführen.

### Programmtechnik

Ein Sequenzer ist von der zu erbringenden Funktion her eigentlich ein sehr einfaches Programm. Seine Leistungen sind schnell aufgezählt:

- Tonhöhen steuern
- Triggerung der einzelnen Stimmen (GATE ON und GATE OFF)

Diese Steuerungen müssen zeitgenau und unabhängig voneinander für drei Stimmen erfolgen. Darüber hinaus wären einige Zusatzfunktionen sinnvoll: — programmierbare Tempoänderungen

- programmierbare Soundwechsel
- programmierbare Änderung der Inhalte beliebiger Speicherplätze (Parameter-Änderung)

Es soll zunächst ein einfacher Basis-Sequenzer entwickelt werden, der sich dann leicht um die genannten Zusatzfunktionen erweitern läßt. Die Erweiterungen sollen über Vektoren, also ohne Änderung des Grundprogramms, an dieses angeschlossen werden können.

Ein Sequenzer ist, ähnlich wie der in dieser Reihe veröffentlichte Modulator, ein Programm, das in regelmäßigen Zeitabständen eine Leistung erbringen muß. Der Aufruf per Interrupt, ausgelöst durch einen Zeitgeber, bietet sich also auch hier an. Jeder CIA (Complex Interface Adapter) ist mit zwei 16-Bit-Timern ausgestattet, die sich für diese Aufgabe eignen. Timer A in CIA1 wird bereits für den Systeminterrupt eingesetzt. Ein Systeminterrupt findet konstant 60-mal pro Sekunde statt und kann mit dem Aufruf eines Modulatorschritts gekoppelt werden.

## Musik per Interrupt

Die Aufruffrequenz der Sequenzer-Schritte soll dagegen im Bereich von zirka 20-100 Hz, abhängig vom Tempo des Musikstücks, variabel sein. (Man erinnere sich: 240 bpm entsprechen 96 Hz bei einem Zeitraster von 96 Schritten pro ganzer Note.) Das legt den Einsatz eines weiteren unabhängigen Timers nahe. In Frage kommen dafür:
Timer B in CIA1 (IRQ)
Timer A in CIA2 (NMI)
Timer B in CIA2 (NMI)

Die Auswahl des Timers ist willkürlich. Im vorliegenden Programm wird Timer B in CIA1 eingesetzt. Dadurch bleiben die Timer in CIA 2 noch vollkommen frei für Zwecke, die nichts mit der Musikprogrammierung zu tun haben müssen. Da nun Timer A und Timer B beide unabhängig voneinander Interrupts auslösen können, muß die angesprungene Interrupt-Service-routine die Interrupt-Quelle ermitteln, also feststellen, welcher Timer den Interrupt ausgelöst hat und abhängig davon weiterverzweigen. Zu diesem Zweck wird im sogenannten Interrupt-Control-Register (ICR) $DCOD bei einem Timer-A-Interrupt Bit 0 und bei einem Timer-B-Interrupt Bit 1 gesetzt.

### Programmierung des CIA

Zur Steuerung von CIA-Interrupts dient das schon erwähnte Interrupt-Control-Register (ICR) $DC0D. Dieses Register hat zwei Funktionen, je nachdem, ob schreibend oder lesend darauf zugegriffen wird. Bei Lesezugriff zeigt es an, ob, und wenn ja, woher ein Interrupt ausgelöst wurde. Zugleich wird das Register gelöscht und die Interrupt-Anforderung zurückgenommen (Die IRQ-Leitung geht von low auf high). Die Bits 0-4 sind dabei verschiedenen Interruptquellen zugeordnet. Uns interessieren hier nur die Bits 0 und 1, welche zu den Timer-Interrupts gehören. Durch einen Schreibzugriff wird dagegen ein Masken-Register angesprochen. Damit lassen sich die Interruptquellen einzeln freigeben oder sperren. Die Bits 0-4 kann man einzeln setzen oder zurücksetzen. Ist im geschriebenen Byte Bit 7 gesetzt, wird jedes mit einer 1 beschriebene Bit gesetzt, während die anderen Bits unverändert bleiben. Ist Bit 7 rückgesetzt, so wird jedes mit einer 1 beschriebene Bit zurückgesetzt, während die anderen Bits wieder unverändert bleiben. Gesetzte Bits ermöglichen eine Interrupterzeugung durch die jeweilige Quelle. Die Freigabe der Interrupterzeugung durch Timer B sieht also so aus:
LDA #%10000010
STA $DD0D ;ICR Bit 1 setzen

Der Timer selbst wird durch drei Register gesteuert.

Das Registerpaar TIMER B ($DC06/$DC07) liefert bei Lesezugriff den aktuellen 16-Bit-Zählerstand. Dieser Wert wird kontinuierlich heruntergezählt. Bei Erreichen von Null stoppt der Timer entweder (One-Shot-Mode) oder lädt einen Wert aus einem Timer-Latch (Latch = Zwischenspeicher) nach und zählt von neuem herunter (Continous Mode). Bei diesem Timer-Unterlauf wird ein Interrupt erzeugt, wenn Bit 1 im ICR gesetzt ist. Ein Schreibzugriff auf TIMERA bezieht sich dagegen auf das 16-Bit-Latch. Mit dem Latch-Wert kann man die Zeit zwischen zwei Interrupts im Bereich von 1 bis 65535 Mikrosekunden steuern.

Das Register CRB (Control Register B, $DC0F) steuert die Betriebsart des Timers (Start/Stop, One Shot/Continous, u.a.)
Durch LDA #%00010001
STA $DD0E
wird der Zählerstand mit dem Latch-Wert geladen und der Timer gestartet.

### Die Interrupt-Service-Routine

Sie fragt zunächst ab, ob der Interrupt von Timer A (Systeminterrupt, Modulatorschritt) oder von Timer B (Sequenzerschritt) kommt. Bei einer möglichen gleichzeitigen Interruptanforderung durch beide Timer, wird der Timer-B-Interrupt bevorzugt behandelt. Das hat folgende Gründe:

- Für ein exaktes Sequenzer-Timing sollten anzuspielende Noten möglichst wenig verzögert werden.
- Die Abarbeitung eines Sequenzer-Schritts benötigt viel weniger Rechenzeit als ein Modulatorschritt (zeitaufwendige Multiplikationen) oder eine Systeminterrupt-Behandlung.
- Die Aufruffrequenz kann bei den Sequenzer-Schritten sehr hoch sein (96 Hz bei 240 bpm, aber auch über 200 Hz sind technisch leicht möglich).

Da das ICR beim Lesen gelöscht wird, muß sein Inhalt zwischengespeichert werden, damit beim Auftreten von zwei Interrupts die Behandlung des niedriger priorisierten Timer-A-Interrupts nachgeholt werden kann.

Bei Auftreten eines Interrupts wird immer das Interrupt-Bit im CPU-Statusregister gesetzt, damit die CPU nicht gleich wieder unterbrochen werden kann. Da die IRQ-Leitung so lange auf Low-Pegel bleibt, bis die CPU durch Auslesen des CIA-ICR die Interruptanforderung löscht, würde sich das System ohne gesetztes Interrupt-Bit durch einen Dauerinterrupt aufhängen. Es steht dem Programmierer allerdings frei, nach dem Auslesen des ICR das Interrupt-Bit durch den Befehl CLI (Clear Interrupt-Flag) zurückzusetzen, um damit das Programm wieder unterbrechbar zu machen. Beim vorliegenden Programm bleibt bei einem Sequenzer-Schritt das Interrupt-Bit gesetzt, während es zur Abarbeitung eines Timer-A-Interrupts rückgesetzt wird. Dadurch kann die CPU auch dann durch einen Timer-B-Interrupt unterbrochen werden.

Das Betriebssystem und das Programm Modulator machen beide intensiven Gebrauch von der Zero-Page. Die Inhalte der Zero-Page-Speicherplätze dürfen von einem interruptgetriebenen Programm nicht verändert werden. Das Sequenzer-Programm belegt daher nur zwei Zero-Page-Speicherplätze C$FE,$FF). Ihre Inhalte werden bei Programmbeginn zwischengespeichert und bei Programmende restauriert.

### Die verwendeten Datenstrukturen

Um ein Musikstück in eine computergerechte Form zu bringen, muß man im wesentlichen die Tonhöhe und die Länge der einzelnen Noten codieren. Beim Einsatz mehrerer, verschieden klingender Stimmen, muß man außerdem jede Note eindeutig einer Stimme zuordnen. Die hier verwendete Datenstruktur (Bild 1) verfolgt mit ihrem etwas komplizierten Aufbau zwei Ziele:

- Sparsamer Umgang mit dem Speicher
- Gute Editiermöglichkeiten. (Ein Editorprogramm in. Basic folgt in der nächsten Ausgabe)

### Tracks

Die Steueranweisungen werden für die drei Stimmen getrennt in drei sogenannten. Tracks (Tonspuren) gespeichert. Ein Track ist eine zusammenhängende Folge von 1-Byte-Kommandos. Das häufigste Kommando dürfte das Ton-Kommando sein. Die Tonhöhe wird aus einer Oktav-Nummer und einer Tonnummer (siehe Bild 2), die in den beiden Nibbles (=Halbbytes) eines Bytes stehen, ermittelt. Das Programm benötigt dazu lediglich eine Tabelle der Frequenzen der höchsten Oktave. Die Frequenzen der niedrigeren Oktaven werden durch Teilung durch Zweierpotenzen errechnet. Eine Division durch 2 wird durch einen einfachen Rechts-Shift realisiert. Die Dauer des Tones ist nicht Bestandteil des Ton-Kommandos. Sie wird durch das Zeit-Kommando voreingestellt. Da häufig mehrere Töne mit gleicher Länge aufeinanderfolgen, genügt ein einziges Zeit-Kommando (ein oder zwei Bytes), um die Tonlänge (siehe Bild 3) einzustellen. Dabei wird zwischen einer GATE-ON- und einer GATE-OFF-Phase unterschieden, deren Längen zusammengenommen die gewünschte Tonlänge ergeben.
Beispiel: GATE-ON-Zeit = 5
GATE-OFF-Zeit = 7
Gesamtzeit = 12

Das entspricht einer kurz angeschlagenen Achtelnote (bei 96 Zeitschritten pro ganzer Note). Die GATE-ON-Zeit ist im Bereich 1-96, die GATE-OFF-Zeit im Bereich 0-30 einstellbar. Der Sequenzer setzt nach Ablauf der GATE-ON-Zeit das GATE-Bit der entsprechenden Stimme im SID zurück und wartet dann die GATE-OFF-Zeit ab. Ist diese 0, so wird natürlich sofort der nächste Ton gespielt. Man kann aber auch explizit Pausen programmieren (Code $EF). Ihre Länge ist die Summe aus GATE-ON- und GATE-OFF-Zeit.

Der Code $00 ist zur Kennzeichnung für das Track-Ende vorgesehen. Die Codes $F8 bis $FF sind für Sonderfunktionen reserviert, die für eine spätere Erweiterung des Sequenzers gedacht sind. Angesprungen werden sie über eine Tabelle von Vektoren, die im Moment nur in den Programmteil zur Ausführung des nächsten Kommandos führen, also nichts bewirken. Sinnvolle Sonderfunktionen sind:

- Änderung von Soundparametern
- Wahl eines ganzen Parametersatzes (Soundwechsel) im Zusammenhang mit dem Programm Modulator
- Tempowechsel

Diese Sonderfunktionen werden den Sequenzer in der nächsten Folge ergänzen.

## Sequenzen

Für jede der drei Stimmen gibt es eine Folge von Kommandos, einen Track. Die drei Tracks werden zu einer Sequenz zusammengefaßt. Eine Sequenz ist hier ein zusammenhängender Abschnitt eines Musikstücks, der einen einzigen Ton, einen Takt oder auch das ganze Stück umfassen kann. Den drei Tracks gehen drei Zeiger auf die Track-Startadressen voran. Obwohl es sich aus Gründen der Übersichtlichkeit empfiehlt, die Sequenzen wie in Bild 1 zusammenhängend in der Folge Zeiger-Track 1, -Track 2, -Track 3 zu speichern, besteht dazu kein Zwang. Es müssen lediglich die drei Track-Zeiger einer Sequenz und die Tracks in sich zusammenhängen.

### Sequenzfolge-Liste

Um eine Sequenz zu wiederholen, muß man sie nicht zweimal programmieren, sondern kann sie wie ein Unterprogramm mehrmals aufrufen. Die Sequenzfolge-Liste enthält dazu die Startadressen der Sequenzen in der Reihenfolge, in der diese gespielt werden sollen. Dabei können die gleichen Adressen natürlich mehrfach auftreten. Unter der Startadresse einer Sequenz wird hier die Adresse des Zeigers auf Track 1 verstanden. Die Sequenzfolge-Liste enthält für jede Sequenz außer dem Zeiger noch ein drittes Byte, das für spätere Erweiterungen vorgesehen ist. Drei Nullen schließen die Liste ab.

## Flexibilität durch Steuerflags und Vektoren

Im Normalfall wird man die drei Tracks einer Sequenz gleich lang programmieren. Macht man dagegen die Tracks unterschiedlich lang, so wiederholt das Programm die kürzeren Tracks so lange, bis der längste Track zu Ende gespielt ist. Erst dann geht das Programm zur nächsten Sequenz über. Dieses Verhalten kann bei manchen Musikstücken nützlich sein. Das MSE-Listing 2 enthält einen Musik-Datensatz, bei dem in der zweiten Sequenz der dritte Track aus nur vier Tönen besteht, die fortlaufend wiederholt werden.

Normalerweise hält der Sequenzer an, wenn alle Sequenzen gemäß Sequenzfolge-Liste durchgespielt sind. Nach dem Anhalten wird auch der Interruptvektor auf seinen ursprünglichen Wert zurückgestellt. Eine 1 im Flag REPMODUS bewirkt, daß das ganze Stück endlos wiederholt wird.

Eine 1 im Flag SEQMODUS bewirkt, daß die aktuelle Sequenz endlos wiederholt wird. Auch hier ist der längste Track der Sequenz maßgeblich.

Eine 1 im Flag LEGATO bewirkt, daß die GATE-Bits in den SID-Steuerregister nicht zurückgesetzt werden. Dadurch klingen die Töne gebunden. Dazu muß allerdings ein Sustain-Pegel ungleich Null eingestellt sein, sonst ist überhaupt nichts hörbar.

An allen wichtigen Stellen des Sequenzers wird der Programmfluß über Vektoren weitergeleitet. Damit soll die Möglichkeit, das Programm nachträglich leicht zu erweitern, offengehalten werden. Die Vektoren für die acht Sonderfunktionen wurden schon erwähnt. Außer diesen acht gibt es noch drei weitere Vektoren: TONVEKTOR

Er führt das Programm weiter, nachdem die Frequenz für einen Ton-an-Befehl ermittelt wurde. Im vorliegenden Programm wird der Frequenzwert direkt in den SID geschrieben. Bei einem Einsatz zusammen mit dem Modulator muß die Frequenz dagegen in ein Modulator-Register geschrieben werden.
EXTRAVEKTOR

Über diesen Vektor kann man weitere Aktionen an einen Sequenzer-Schritt anhängen. Denkbar wäre zum Beispiel die Anzeige der gespielten Noten auf dem Bildschirm in Realtime.
IRQAVEKTOR

Führt zum Systeminterrupt $EA31. Dieser Vektor muß beim Einsatz mit dem Modulator auf die Startadresse des Modulatorschrittes zeigen.

Das vorliegende Sequenzerprogramm (Listing 1) belegt den Speicherbereich $C480-$C778. $C480 = 50304 ist gleichzeitig auch die Startadresse (SYS. 50304). Tabelle 1 faßt die wichtigsten Routinen, Variablen und Vektoren des Sequenzer-Programms zusammen.

Das Programmieren von Musikstücken mit Hilfe der Tabelle 2 ist noch etwas mühsam. Ein Editor in der nächsten Ausgabe wird diese Arbeit erleichtern. Mit dem Datensatz aus Listing 2 (»Kobold« aus den »Lyrischen Stücken« von Edvard Grieg) kann man den Sequenzer testen.

Die Verschmelzung des Sequenzers und des Modulators zu einer funktionellen Einheit wird in der nächsten Folge behandelt.

(Thomas Krätzig/tr)

# C 64 extern — Der Weg noch draußen (Teil 3) \[129-132\]

> Nachdem wir in der letzten Folge die Programmierung der Control-Ports abgeschlossen haben, wenden wir uns heute einer der vielseitigsten Schnittstellen des C 64WC 20 zu — dem User-Port.

Der User-Port führte neben dem Expansion-Port lange Zeit ein Schattendasein, denn an ihm können keine Programm-Module verwendet werden. Mittlerweile hat der User-Port aber weit aufgeholt. Er wird für Steuerzwecke, zum Anschluß eines Druckers, für die RS232 und auch zum Programmieren von EPROMs mit einem Zusatzgerät verwendet. Sehen wir uns diese interessante Schnittstelle etwas genauer an. Die Anschlußbelegung der User-Ports von C 64 und VC 20 zeigen die Bilder 1 und 2. Beachten Sie bitte, daß die Anschlüsse an der Ober- und Unterseite des User-Ports verschiedene Funktionen haben. Klemmen Sie deshalb dort niemals eine Krokodilklemme oder vergleichbares an! Ich möchte Ihnen nun zuerst zeigen, wie der 8-Bit-Parallelport am User-Port programmiert wird. Dieser Port bietet sehr vielseitige Anwendungsmöglichkeiten, obwohl er einfach zu programmieren ist. Angesprochen wird er über die acht Leitungen PB0 bis PB7 (Pin C bis L).

Über den Parallelport kann man Daten einlesen und Daten ausgeben. Das Praktische an dieser Tatsache ist, daß man die Richtung der Daten für jede der acht Leitungen einzeln bestimmen kann. Warum es aber gerade acht Leitungen gibt, hat einen einfachen Grund: Zur Steuerung des Ports gibt es im Computer zwei verschiedene Speicherstellen. Jeder Leitung am Port ist in jeder dieser Speicherstellen genau ein Bit zugeordnet. Daher also acht Leitungen, gleich acht Bit, gleich ein Byte.

Welche Bedeutungen haben nun diese beiden Speicherzellen? Die erste nennt sich »DDR«. Das heißt »Data Direction Register« (Datenrichtungsregister). Hier wird, wie der Name schon sagt, die Datenrichtung festgelegt. Aber wie? Dem Bit X im DDR ist die Datenleitung PBX zugeordnet. Ist zum Beispiel Bit 2 in diesem Register auf 1, dann ist die Leitung PB2 als Ausgang deklariert. Eine 0 macht die entsprechende Leitung zum Eingang. So einfach ist das!

Die zweite bereits genannte Speicherstelle enthält die eigentlichen Daten. Man bezeichnet sie als Portregister.

Nehmen wir einmal an, wir hätten in das Datenrichtungsregister die Zahl 255 eingeschrieben, also alle Leitungen als Ausgänge programmiert. Eine 255 im Portregister legt dann High-Pegel auf alle acht Datenleitungen. Eine 0 im Portregister bewirkt GND auf allen Datenleitungen. Man kann also wie im Datenrichtungsregister bitweise den Spannungszustand am Ausgang bestimmen (l = high, 0 = low). Hierbei ist Bit 0 wieder PB0 zugeordnet. Die Spannungspegel, die wir am Port erhalten, können wir dann »extern« verarbeiten, doch davon später.

Im zweiten Beispiel benutzen wir den Parallelport als Eingang. Nehmen wir an, wir hätten in das Datenrichtungsregister eine 0 eingeschoben, also alle Datenleitungen als Eingänge definiert. Jetzt müssen wir »externe« Daten an den Port anlegen. Das geschieht durch Verbinden der Datenleitungen entweder mit + 5 V oder GND der Computerversorgungsspannung. Dabei entspricht einer »0« GND und eine »1« + 5V. Eine »1« entsteht auch, wenn eine Leitung nicht angeschlossen, also weder mit + 5 V noch mit GND verbunden wird. Das spart oft viel Schaltungsaufwand. Die an den Port angelegte Bitkombination kann jederzeit durch Abfragen des Portregisters ausgelesen werden. Der neue Zustand der Datenleitungen wird, wenn sich etwas geändert hat, jeweils sofort und automatisch in das Portregister übernommen.

Die beiden Funktionen Eingänge/Ausgänge dürfen, wie schon gesagt, beliebig gemischt werden. So ist beispielsweise möglich, die Leitungen 2, 5 und 7 als Ausgänge und alle restlichen Leitungen als Eingänge zu definieren. Dazu müßte man im Datenrichtungsregister die Zahl 164 ablegen (164 = Bits 2, 5 und 7 gesetzt). Die Information über die Spannungszustände an den Ausgängen müßte in die Bits 2, 5 und 7 des Portregisters gePOKEt und die Information über die Eingänge aus den Bits 0, 1, 3, 4 und 6 des Portregisters ausgelesen werden.

Nach soviel grauer Theorie wollen wir endlich wieder etwas programmieren. Bevor es losgeht, müssen Sie noch wissen, wie die Adressen der eben besprochenen Speicherstellen lauten. Sie sind in Tabelle 1 aufgelistet. Jetzt haben wir alles nötige Rüstzeug, um voll in eine sinnvolle Anwendung des Computers einzusteigen: Programmieren wir eine Alarmanlage!

## Alarmanlage per User-Port

Tippen Sie Listing 1 ab und starten Sie das Programm mit RUN. Auf dem Bildschirm erscheint der Kontaktplan des Parallelports. Hoffentlich haben Sie beim Einkauf für die letzte Folge an den Stecker für den User-Port gedacht, den brauchen wir nämlich jetzt.

Bringen Sie an einem der vier Eckkontakte ( = GND, siehe Bild 1) des User-Port-Steckers einen Draht an, und stecken Sie den Stecker in den User-Port. Zum Anbringen des Drahtes ist Löten wohl das Beste. Keinesfalls dürfen Sie einen anderen Anschluß versehentlich berühren, beziehungsweise mit GND in Verbindung bringen.

Nehmen Sie sich nun das andere Ende des Drahtes zur Hand, und berühren Sie damit eine der Datenleitungen PB1 bis PB7. Bitte nicht die Datenleitung PB0, da diese vom Programm als Ausgang (Alarmanzeiger) benutzt wird (was wir mit diesem machen können, sehen wir in der nächsten Folge). Welche Pins die richtigen sind, können Sie Bild 1 und 2 entnehmen.

Beim Berühren erklingt ein Alarmton, der Bildschirmrahmen ändert die Farbe, und der Alarmanzeiger (PB0) geht auf high (+5 V). Zusätzlich wird auf dem Bildschirm angezeigt, welche Kontakte den Alarm ausgelöst haben. Wenn Sie keine der Datenleitung mehr mit dem Draht berühren, die Eingänge also alle High-Signal erhalten, werden alle Alarmsignale sofort gelöscht.

Werfen wir einen Blick auf das Listing. Nach der Initialisierung der Variablen, der Portregister, des SID-Chips und des Bildschirms wird in Zeile 390 das Portregister (Variable R) so lange ausgelesen, bis ein anderer Wert als 254 auftaucht. Warum 254? 254 ist die Summe der Wertigkeiten der Bits 1 bis 7, also aller Bits des Portregisters ohne den Alarmanzeiger. Das ist der Ruhezustand der Alarmanzeige; alle Kontakte sind geöffnet ( = High-Pegel).

Wird ein Alarm ausgelöst, dann werden ab Zeile 430 sämtliche Alarmanzeiger eingeschaltet. Ab Zeile 470 wird ein neuer Kontaktplan ausgegeben. Dabei wird jeder Kontakt auf Alarm überprüft und das Ergebnis angezeigt.

Anschließend wartet der Computer auf das Alarmende. Wenn noch Alarm besteht, wird wieder ein neuer Kontaktplan ausgegeben, weil sich am Kontaktzustand etwas geändert haben kann. Andernfalls werden die Alarmanzeiger ausgeschaltet und es wird zur Bildschirminitialisierung zurückgesprungen.

Wer sich das Programm genau ansieht, wird schnell feststellen, daß es so, wie es hier abgedruckt ist, zum realen Einsatz als Alarmanlage weniger geeignet ist. Dazu hat es verschiedene Schwächen. Zum einen wird nicht mit Sicherheit jeder Alarm erkannt: Wenn der Älarmimpuls sehr kurz ist, kann es passieren, daß der C 64 gerade etwas anderes tut, als das Portregister auszulesen, zum Beispiel den Rücksprung nach 390 ausführen. Außerdem ist der eigentlich alarmauslösende Zustand am Portregister nicht der, der ausgewertet wird, weil der auszuwertende Zustand erst nach dem Alarmauslösen in Zeile 420 ermittelt wird. In der Zwischenzeit kann sich schon etwas verändert haben. Das genannte trifft aber nur auf sehr kurze Impulse zu.

Zum anderen ist die Auswertung des Alarmes viel zu einfach gehalten, eben nur als Beispiel. Wenn hier ein Alarm von einer Sekunde auftritt, wird auch nur eine Sekunde lang Alarm gegeben, was natürlich viel zu wenig ist.

## Codeschloß

Kommen wir zu einem weiteren Programmbeispiel, dem Codeschloß in Listing 2. Wir haben es wieder mit Raumsicherung zu tun. Wieder wird die Datenleitung PB0 als Ausgang und die restlichen Datenleitungen als Eingänge benutzt.

Was leistet das Programm? Sie müssen durch Verbinden der Datenleitungen PB2 bis PB7 einen sechsstelligen Code eingeben. Wenn Sie keinen Fehler gemacht haben, wird die Datenleitung PB0 auf high gelegt, also beispielsweise eine Tür geöffnet oder eine geheime Anlage eingeschaltet. Wie Sie solche Dinge ansteuern können, erfahren Sie im nächsten Teil dieses Kurses. Über die Leitung PB1 wird das Codeschloß zurückgesetzt (sowohl nach dem Auslösen des Schlosses als auch nach einer Fehlereingabe). Jede Berührung an den Eingängen wird durch einen Signalton quittiert.

In den Zeilen 250/260 werden zwei Variablen deklariert, deren Bedeutung ich kurz erläutern möchte. CL enthält die Länge des einzugebenden Codes, CI$ den Code selbst. Den Inhalt dieser beiden Variablen können Sie nach Belieben verändern. Der von mir gewählte Code ist bewußt sehr primitiv.

In C2$ wird der Code aufgebaut, den Sie durch Berühren der »externen« Kontakte eingeben. Der große Vorteil hierbei ist, daß die Eingabeeinheit für den Code an einer anderen Stelle (zum Beispiel im Nebenraum) als der Computer sein kann. Man wird also von der Computertastatur unabhängig. Mit einem langen Code wird ein Knacken theoretisch unmöglich. Da sich das Programm durch REM-Anweisungen selbst dokumentiert, bleibt nur noch zu sagen, daß es der Einfachheit halber bei jedem »RESET« an Kontakt PB1 einfach neu mit RUN gestartet wird.

Auch bei diesem Programm ist nur eine Minimallösung angegeben. Man kann es um viele Raffinessen erweitern, so daß zum Beispiel ein Einbruchsversuch als solcher gedeutet wird und so weiter.

Nachdem wir nun wissen was sich am User-Port abspielt, wollen wir noch einmal einen Schritt zurückgehen. Im ersten Teil dieses Kurses sind ein paar Fragen offen geblieben, die ich jetzt beantworten möchte.

Da war als erstes die Sache mit der Umschaltung des Computers auf Joystickeingabe. Vielleicht haben Sie schon eine Ähnlichkeit zwischen Joystick- und Parallelport-Programmierung entdeckt. Bei beiden mußte etwas umgeschaltet werden. Dann gab es zwei mögliche Zustände: 0 oder 1! Die Umschaltung des Computers auf Joystickeingabe ist nichts anderes als die Programmierung des zugehörigen Datenrichtungsregisters. Bitte ,erinnern Sie sich: Wir haben bei der Umschaltung die zugehörigen Bits gelöscht, also die Datenleitungen der Control-Ports zu Eingängen gemacht. Wer darüber nachdenkt, wird schnell zu der Frage kommen, was denn passiert, wenn wir in die DDRs einfach Einsen hineinschreiben. Die Antwort ist trivial: Die Joystickleitungen werden zu Ausgängen! Doch darum wollen wir uns erst im dritten Teil dieses Kurses kümmern. Die Zusammenstellung aller Adressen, die hierfür interessant sind, zeigt Tabelle 2.

Als nächstes interessiert Sie wahrscheinlich, warum eigentlich Paddles, Joystick, Lichtgriffel und Tastatur einander behindern. Das kommt daher, daß alle diese Eingabeeinheiten dieselben Datenleitungen benutzen. Aus diesem Grund sind auch die Umschaltungen notwendig.

Warum aber benutzt die Tastatur Leitungen am Control-Port? Eine Computertastatur ist durch eine Matrix aus Zeilen und Spalten mit dem Computer verbunden. An jedem Kreuzungspunkt sitzt eine Taste, die, wenn sie gedrückt wird, die beiden Leitungen des Kreuzungspunktes miteinander verbindet. Die Routine des Betriebssystems, welche die Tastatur abfragt, legt nun an eine Zeile ein Signal an und überprüft, in welcher Spalte dieses Signal auftritt. Daraus läßt sich ableiten, welche Taste gedrückt ist. Wird kein Signal entdeckt, so ist in dieser Zeile keine Taste gedrückt, und das Signal wird an die nächste Zeile angelegt. Aus diesem Verfahren erklärt sich, warum einige Tasten Priorität gegenüber anderen haben. Das können Sie feststellen, indem Sie mehrmals zwei Tasten gleichzeitig drücken. Es wird immer dieselbe Taste vom Computer registriert werden.

Diese Zeilen- und Spaltenmatrix liegt auf denselben Leitungen wie der Joystick, weil auch hier »externe« Signale gegeben und Informationen gelesen werden müssen, wozu unser Computer eben nur eine bestimmte Anzahl von Bausteinen hat. Deshalb funktioniert die Tastatur nach dem POKEn in die Control-Port-DDRs meist nicht mehr, weil sie nicht mehr ordnungsgemäß decodiert wird. Die Werte, die in bestimmte Speicherzellen immer wieder hineingeschrieben werden (siehe Folge 1) stammen auch aus der Tastaturdecodierungs-Routine.

Die Störung der Tastatur kommt nun daher, daß es dem Computer völlig gleichgültig ist, ob Sie den Joystickhebel bewegen oder auf die Tasten hämmern. Er prüft artig seine Spalten nach und kümmert sich nicht darum, woher die festgestellte Verbindung denn nun kam. Die Störung durch den Lichtgriffel hat dieselbe Ursache.

Jetzt müssen wir nur noch einen Rückstand aus der letzten Folge aufklären. Dabei handelt es sich um die Feuerknöpfe der Paddles. Ich kann Ihnen erst jetzt zeigen wie sie abgefragt werden, weil wir auch hier die Kenntnisse über die Programmierung des Parallelports benötigen. Es funktioniert nämlich schon wieder genauso: Man setze im zugehörigen DDR die entsprechenden Bits auf Null (Leitung auf Eingang schalten) und frage dann die entsprechenden Bits im zugehörigen Portregister ab. Natürlich zeigt auch hier wieder eine Null im Portregister an, daß der Feuerknopf am Paddle gedrückt wurde. In Tabelle 3 sind die nötigen Informationen für Port 1 des C 64, in Tabelle 4 die für den Port 2 und in Tabelle 5 die für den VC 20 zusammengefaßt. Dabei sind die Paddles gemäß der Position ihres Verbindungskabels am Control-Port mit links und rechts bezeichnet. Das rechte Paddle ist also an POT X, das linke an POT Y angeschlossen. Da die Feuerknöpfe der Paddles dieselben Leitungen wie der Joystick benutzen, gilt hier ebenfalls das oben Beschriebene über die gleichzeitige Benutzung von Paddles und Tastatur.

'Damit wollen wir es für heute bewenden lassen. Das nächste mal sehen wir dann, wie versprochen, wo sich den Control-Ports Signale entnehmen lassen. Außerdem wollen wir uns mit Anschlußmöglichkeiten verschiedener Adapter an den User-Port beschäftigen und unter anderem einen 220 Volt-Adapter für unseren Computer bauen!

(Tobias Nicol/aw)

# Memory Map mit Wandervorschlägen (11) \[133-134,139-140\]

> Bei unserer Wanderung durch die Speicherlandschaft treffen wir heute auf die Speicherstellen 183 bis 199. Sie sind unter anderem auch für die Filenummer, Geräteadressen und Sekundär-Adresse verantwortlich.

Gelegentlich erwähne ich bei meinen Erklärungen, daß wichtige Dinge der Commodore-Computer nicht in den Handbüchern stehen.

Kürzlich erhielt ich zu diesem Thema den Brief eines Lesers, der mich darauf hinwies, daß entgegen meiner Behauptung die meisten der von mir vermißten Erklärungen in einem Handbuch, nämlich im »64 Intern« von Data Becker zu finden sind. Natürlich hat dieser Leser recht: In diesem Buch steht in der Tat sehr viel Informatives. Ich benutze es selbst oft und kann es den fortgeschrittenen Computer-Amateuren sehr empfehlen.

Nur, lieber Leser, ich halte es nicht für ein Handbuch, sondern für Fachliteratur. Wenn ich Handbuch sage, dann meine ich die von Commodore offiziell herausgegebenen Schriften — für Anfänger und Amateure. Und diese Gattung könnte wirklich etwas ergiebiger sein.

## Adresse 183 ($B7)

### Länge des derzeitigen Filenames

Die LOAD-, SAVE- und VERIFY-Befehle für Disketten verlangen die Angabe eines Programm- oder Dateinamens, auf Computerdeutsch »File-Name«. Nähere Angaben dazu finden Sie im Texteinschub # 1 »Files-Geräte-Namen-Nummern«.

Auch der OPEN-Befehl kann einen File-Name haben. Bei Kassettenoperationen kann der File-Name weggelassen werden.

In der Speicherzelle 183 steht während und nach der Verwendung eines der oben genannten Befehle eine Zahl, die angibt, aus wievielen Zeichen der File-Name besteht.

Bei Disketten sind File-Namen möglich, die aus maximal 16 Zeichen bestehen.

Bei Kassetten dagegen sind Namenslängen von maximal 187 Zeichen erlaubt. Allerdings werden vom Computer auf dem Bildschirm nur 16 Zeichen ausgedruckt (siehe dazu den Texteinschub »Tape-Header«).

Für die Längenangabe in Zelle 183 gilt dabei nur die Anzahl derjenigen Zeichen, die zwischen den Gänsefüßchen stehen.

Diese Zahl kann nach einer Ein-/Ausgabeoperation, auch nach einer ungültigen oder abgebrochenen, durch PEEK (183) ausgelesen werden.

Ein File-Name wird übrigens auch bei einem OPEN-Befehl der RS232-Schnittstelle angegeben. Dieser Name, der bis zu vier Zeichen lang sein kann, wird in die Speicherzellen 659 bis 662 übertragen und gibt dort die Übertragungsrate, Wortlänge und Parity-Prüfung an.

## Adresse 184 ($B8)

### Nummer der derzeitigen Datei (File)

Hinter jedem OPEN-Befehl steht eine Zahl, die der durch diesen Befehl angefangenen Datei zugeordnet wird. Diese Datei- oder File-Nummer gilt als Referenz für alle anderen Ein- und Ausgabebefehle derselben Datei. Nähere Angaben dazu können Sie dem nebenstehenden Texteinschub Nr. 1 »Files-Geräte-Namen-Nummern« entnehmen.

Ein OPEN-Befehl ruft die entsprechende Routine des Betriebssystems auf, welche die File-Nummer in die Speicherzelle 184 schreibt. Vor dort kann sie mit PEEK(184) ausgelesen werden. Geben Sie die folgende Zeile direkt ein:
A = 30:OPEN A,3:PRINT PEEK (184):CLOSE A

Um verschiedene File-Nummern auszuprobieren, definieren wir sie als Variable A. Nach dem »A« des OPEN-Befehls steht die Zahl 3. Damit wird der Bildschirm angewählt (siehe »Sekundär-Adresse« im schon erwähnten Texteinschub). Das Anwählen des Bildschirms vermeidet eine störende Meldung des Betriebssystems.

Mit RETURN nach der obenstehenden Zeile wird der jeweilige Wert von A als Inhalt der Zelle 184 ausgedruckt.

## Adresse 185 ($B9)

### Derzeitige Sekundär-Adresse

Die Sekundär-Adresse steht als dritte Angabe hinter den Ein- und Ausgabe-Befehlen LOAD, SAVE, VERIFY und OPEN. Sie hat bei den verschiedenen Peripheriegeräten spezielle Funktionen. Diese Funktionen sind im nebenstehenden Texteinschub näher erläutert.

Der jeweilige Wert der Sekundär-Adresse steht in der Speicherzelle 185, allerdings um 96 erhöht. Für Sekundär-Adressen stehen, über die Standardwerte der einzelnen Peripheriegeräte hinaus, die Zahlen von 0 bis 31 zur Verfügung. Ab 32 fängt in Zelle 185 wieder der Zyklus ab 0 an. Das können wir uns anschauen. Ich wähle zur Eröffnung einer Datei wieder den Bildschirm als »nichtstörendes« Empfangsgerät.
A = 15:OPEN 1,3,A:PRINT PEEK(185)-96:CLOSE 1

Durch Verändern des Wertes von A können Sie alle Möglichkeiten durchspielen.

## Adresse 186 ($BA)

### Derzeitige Geräte-Nummer

Jedes an den Computer anschließbare Gerät hat eine eigene Nummer, die zusammen mit den Ein-/Ausgabe-Befehlen LOAD, SAVE, VERIFY und OPEN angegeben werden muß. Wird keine Nummer angegeben, nimmt der Computer automatisch an, daß die Datasette gemeint ist.

Alle von Commodore vorgegebenen Geräte-Nummern sind in der folgenden Tabelle aufgelistet.

TODO TABLE

Geräte-Nummer	angesprochenes Gerät
0	Tastatur
1	Datasette
2	RS232- (User-Port) Schnittstelle
3	Bildschirm
4	Drucker (normal)
5	Drucker (zusätzlich)
8	Disketten- Laufwerk Nr. 0
9	Disketten- Laufwerk Nr. 1
10, 11	weitere Disketten-Laufwerke

Die normale Geräte-Nummer eines Druckers ist 4, die eines Disketten-Laufwerks 8. Die zusätzlichen Nummern müssen gesondert am betreffenden Gerät eingestellt werden.

Nach der Ausführung eines der oben genannten Befehle steht die entsprechende Geräte-Nummer in der Speicherzelle 186, aus der sie mit PEEK(186) ausgelesen werden kann.

## Adresse 187 bis 188 ($BB bis $BC)

### Zeiger auf Adresse des derzeitigen File-Namens

Die Bedeutung eines Programm- oder Dateinamens — normalerweise kurz »Files-Name« genannt, sind im nebenstehenden Texteinschub »File-Geräte-Namen-Nummern« näher beschrieben. In den Speicherzellen 187/188 steht in der Low/High-Byte-Darstellung ein Zeiger auf diejenige Adresse im Programm-Speicher, wo dieser Name gespeichert ist.

Eine Ausnahme ist hier der OPEN-Befehl der RS232-Schnittstelle. Ihr File-Name wird in die Speicherzellen 659 bis 662 gebracht, wo er verschiedene Parameter dieser Schnittstelle steuert.

## Adresse 189 ($BD)

### Zwischenspeicher für RS232-Parity-Prüfung und für Kassettenoperationen

Die RS232-Routinen benutzen diese Speicherzellen als Zwischenspeicher für ein Prüf-Byte (Parity-Prüfung) bei der Ausgabe. Die Parity-Prüfung habe ich kurz im letzten Heft im neunten Teil des Kurses erklärt.

Auch die Kassetten-Routinen bedienen sich dieser Speicherzelle. Sie verwenden sie als Zwischenspeicher für das gerade gesendete oder empfangene Zeichen.

## Adresse 190 ($BE)

### Blockzähler für Kassetten-Ein-/Ausgabe

Das Betriebssystem des Computers schreibt bei SAVE ein Programm zweimal auf das Band der Datasette. Beim LOAD-Befehl wird der erste Block in den Arbeitsspeicher des Computers geladen; der zweite — identische — Block wird dann mit dem ersten Block Byte für Byte verglichen, um Datenfehler auf dem nicht immer ganz zuverlässigen Bandmaterial zu erkennen.

In der Speicherzelle 190 wird dem Betriebssystem angezeigt, wieviele Blockteile bei diesem Prozeß noch gelesen oder gespeichert werden müssen. Vom Basic-Programm aus ist diese Speicherzelle nicht zugänglich.

## Adresse 191 ($BF)

### Zwischenspeicher für LOAD-Operationen vom Band

Diese Speicherzelle wird beim Laden eines Programms vom Band dazu benutzt, um Zeichen aus einzelnen Bits zusammenzusetzen.

## Adresse 192 ($C0)

### Motorsperre der Datasette

Die Tasten der Datasette werden sechzigmal in der Sekunde von der »Interrupt-Routine« des Betriebssystem überprüft, ob eine von ihnen gedrückt worden ist. Die Speicherzelle 192 spielt dabei eine entscheidende Rolle, beim C 64 allerdings in einer anderen Weise als beim VC 20. Wie sie diese Rolle beim C 64 spielt, ist im Zusammenhang mit der Speicherstelle 1 ganz am Anfang dieses Kurses beschrieben worden (siehe 64’er-Ausgabe, 11/84, Seite 173). Ich habe dabei in zwei Beispielen gezeigt, wie durch Abfrage des vierten Bits von Adresse 1 geprüft werden kann, ob eine Taste der Datasette gedrückt ist und wie der Motor durch Setzen und Löschen des Bit 5 der Zelle 1 ein- und ausgeschaltet werden kann. Vorausgesetzt, der Inhalt der Speicherzelle 192 ist ungleich Null und eine Taste der Datasette ist gedrückt.

Heute will ich, wie damals versprochen, denselben Vorgang für den VC 20 beschreiben.

Wie Sie sich vielleicht noch erinnern, wird die Speicherzelle 1 beim VC 20 nicht für die Steuerung der Ein- und Ausgänge des Mikroprozessors verwendet. Diese Rolle wird beim VC 20 durch zwei Register des »Versatile Interface Adapter« (VIA 6522-A) ausgefüllt.

Für die Abfrage der Datasetten-Tasten ist das sechste Bit des VIA-Registers 37151 zuständig. Bei gedrückter Taste steht es auf 1, sonst auf 0. Ein kleines Programm zeigt es Ihnen:
10 X = PEEK(37151)
20 PRINT X
30 IF X = 62 THEN 50
40 GOTO 10
50 PRINT”TASTE GEDRÜCKT”

Wenn keine Taste gedrückt ist, läuft ein Zahlenband mit 126 ab. Die entsprechende Darstellung als Dualzahl lautet 1111 1110. Bei einer gedrückten Taste steht in 37151 die Zahl 62, als Dualzahl 0011 1110. Wichtig, wie gesagt ist nur das zweithöchste Bit.

Mit der Abfrage der Zeile 30 springt beim Drücken einer Taste das Programm auf die Zeile 50 und druckt den Text aus.

Den Motor der Datasette können wir mit Hilfe des Registers 37184 schalten. Wie beim C 64 gilt auch jetzt, daß dazu die hier angesprochene Speicherzelle 192, auch Interlock-Register genannt, eine Zahl größer als 0 enthält und daß außerdem eine Taste der Datasette gedrückt ist. Drücken Sie auf PLAY und geben Sie direkt ein:
POKE 192,255
POKE 37148,251: der Motor bleibt stehen.
POKE 37148,252: der Motor läuft los.

Bestimmend sind hier Bit 2, 3 und 4.

Zum Ausschalten muß lediglich Bit 2 auf 1 stehen, zum Einschalten die drei Bits auf 110. Jede Zahl, die als Dualzahl diese Bedingungen erfüllt, kann dafür hergenommen werden. Um unabhängig von den anderen Bits des Registers 37148 zu bleiben, die ja auch ganz bestimmte andere Funktionen haben, empfiehlt es sich, über Boole’sche Verknüpfungen nur die wichtigen drei Bits zu verändern. Die beiden POKE-Befehle sehen dann so aus:
Ausschalten: POKE 37148,PEEK (37148) OR 2
Einschalten: POKE 37148,PEEK (37148) AND 12

## Adresse 193 bis 194 ($C1 bis $C2)

### Anfangsadresse für Ein-/Ausgabe-Operationen

In diesen Speicherzellen steht in Low/High-Byte-Darstellung die Adresse, ab der ein Programm gerade geladen oder gespeichert wird. Dieses Adresse wird übrigens von hier auch in die Speicherzellen 172/173 gebracht, die wir schon früher besprochen haben.

Bei LOAD und SAVE auf Band steht hier die Anfangsadresse des Bandpuffers (828). Im Bandpuffer steht allerdings nur der sogenannte Bandvorspann (auf englisch »Tape Header«), während der Hauptteil des Programms im Programmspeicher ab einer Adresse steht, auf die der Zeiger in den Speicherzellen 195/196 hinweist.

## Adresse 195 bis 196 ($G bis $C4)

### Zeiger auf den Anfang des Programms hinter dem Tape Header

Bei jedem LOAD- und SAVE-Befehl für Kassetten wird der Vorspann (Tape Header), in dem Programmtyp, Anfangs- und Endadresse aufgezeichnet sind, im Kassettenpuffer ab Adresse 828 gespeichert. Der eigentliche Teil des Programms steht dann im Programmspeicher.

In den Speicherzellen 195/196 steht in der Low-High-Byte-Darstellung diese Adresse, ab der das Programm beginnt. Ich habe für alle diejenigen, die mit der Datasette arbeiten, im nebenstehenden Texteinschub # 2 »Tape-Header« die Zusammenhänge mit einem Beispiel dargestellt.

## Adresse 197 ($C5)

### Tasten-Code der zuletzt gedrückten Taste

In Ausgabe 6/85 des 64’er auf Seite 123 habe ich Ihnen mit Wort und Bild beschrieben, wie die Tasten des Computers abgefragt werden. Die dabei für jede Taste entstehende Dualzahl wird in eine Dezimalzahl (0 bis 63) umgewandelt und zuerst in die Speicherzellen 203 beziehungsweise 653 gebracht. Zur Umwandlung und Abfrage der Zellen 203 und 653 bringe ich das nächste Mal mehr Details. Nach der Prüfung, welche Taste gedrückt worden ist, wird die Codezahl von 203 in die Speicherzelle 197 gebracht und dort »aufgehoben«. Diese vermeintliche Verdoppelung wird vom Betriebssystem dafür gebraucht, um zu erkennen, ob die nächste gedrückte Taste mit der vorhergehenden identisch ist. Ist sie identisch, dann entscheidet der Inhalt der Speicherzelle 650, ob das Zeichen dieser Taste mehrfach ausgedruckt wird. In 650 steht die sogenannte Wiederholfunktion. Aber ich will nicht vorgreifen. Die Codezahlen der einzelnen Tasten werde ich bei der Besprechung der Zelle 203 auflisten.

## Adresse 198 ($C6)

### Anzahl der Zeichen im Tastaturpuffer

Die Funktion des Tastaturpuffers, zu dem wir bei den Speicherzellen 631 und 640 noch kommen werden, habe ich bereits in diesem Kurs und zwar in Ausgabe 7/85 auf Seite 141/142 im Texteinschub »Dynamische Tastenabfrage« erklärt. Dabei habe ich damals schon sozusagen im Vorgriff die Zelle 198 verwendet.

In dieser Speicherzelle steht die jeweilige Anzahl der Zeichen, die im Tastaturpuffer gespeichert sind und darauf warten, weiterverarbeitet zu werden.

Das folgende kleine Programm zeigt es.
10 GET A$
20 PRINT PEEK (198);A$ 30 FORJ=1 3000:NEXTJ
40 GOTO 10

Der GET-Befehl holt ein Zeichen aus dem Tastaturpuffer — sofern eines dort zu finden ist. Die Zeile 20 druckt die Anzahl der Zeichen im Puffer aus, daneben das erste dieser Zeichen. Dann folgt eine Warteschleife, die uns erlaubt, ganz schnell ein paar Tasten zu drücken. Danach springt das Programm an den Anfang zurück und arbeitet diese eingegebenen Zeichen ab. Es ist dabei deutlich zu sehen, wie durch den GET-Befehl bereits ein Zeichen aus dem Puffer genommen und dadurch der Inhalt der Zelle 198 sofort um 1 reduziert wird.

Der Inhalt der Speicherzelle 198 kann mit POKE auch verändert werden.

Eine sinnvolle Anwendung dieser Beeinflussung erlaubt der nicht gerade sehr populäre WAIT-Befehl.

Ersetzen Sie bitte im obigen Programm die Warteschleife der Zeile 30 durch:
30 POKE 198,0: WAIT 198,1

Zuerst wird dem Computer vorgegaukelt, daß der Tastaturpuffer leer sei. Durch den WAIT-Befehl wartet das Programm danach so lange, bis ein Zeichen im Tastaturpuffer erscheint und springt erst dann auf die nächste Zeile 40.

Wenn Sie nach dem WAIT-Befehl statt der 1 eine 2 eingeben, wartet diese Zeile entsprechend auf zwei Tasteneingaben. Allerdings wird in der Zeile 20 dann nur jedes zweite Zeichen ausgedruckt.

## Adresse 199 ($C7)

### Flagge für inverse Darstellung der Zeichen

Mit dieser nützlichen Adresse fahren wir das nächste Mal fort.

(Dr. H. Hauck/ah)

TODO ASIDE

## Texteinschub #1

### Files — Geräte — Namen — Nummern

In den Handbüchern von Commodore und auch in anderen Beschreibungen wird von den Ein- und Ausgabe-Befehlen, wie zum Beispiel LOAD, SAVE, OPEN etc. leider ein recht verwirrendes Bild geboten. Ich beziehe mich dabei auf die hinter diesen Befehlen stehenden Ziffern und Namen.

In der Bezeichnung »File-Name« und »Geräte-Nummer« sind sich die Autoren noch weitgehend einig. Daß die dritte Angabe hinter den Befehlen aber Sekundär-Adresse, Command, Speicheradressen-Flag oder gar EOT-Flag genannt wird, muß den Computeramateur zwangsläufig verwirren.

Da wir im nebenstehenden Kurs gerade die Speicherzellen 183 bis 188 besprechen, die alle mit diesen Anhängseln der eingangs genannten Befehle zusammenhängen, ist dies eine gute Gelegenheit, etwas Systematik in die Angelegenheit zu bringen.

Als erstes gebe ich die Bezeichnungen der Befehle aus einem Commodore-Buch wieder, bevor die einzelnen Angaben im Detail diskutiert werden.

- LOAD Tile-Name”, Geräte-Nr., Speicheradressen-Flag -SAVE ”File-Name”, Geräte-Nr., EOT-Flag
- VERIFY ”File-Name”, Geräte-Nr., Speicheradressen-Flag
- OPEN File-Nr., Geräte-Nr., Sekundär-Adresse, "File-Name, Typ, Modus”
- INPUT# File-Nr., Variable — GET# File-Nr., Variable
- CMD File-Nr.
- CLOSE File-Nr.

### File-Name

»File« wird normalerweise mit »Datei« übersetzt.

Einen Datei-Namen gibt es aber nur beim OPEN-Befehl. Bei den Befehlen LOAD, SAVE und VERIFY ist der Name des Programms gemeint, der bekanntlich in Gänsefüßchen hinter diesen Befehlen steht. Bei Disketten als Pflicht, bei Kassetten als Option. Beim OPEN-Befehl steht der Name zwar auch in Gänsefüßchen, aber nicht direkt hinter dem Befehl, sondern erst an vierter Stelle. Auch er kann bei Kassetten-Betrieb, aber auch beim Drucker weggelassen werden.

Bei Disketten-Dateien steht hinter dem Namen — als sein Bestandteil — noch Typ und Modus. Typ bezeichnet die Art der Datei (RELative, SEQuential, USeR, PRoGramm), Modus die Operation (Read, Write, Append).

Der File-Name kann bei Disketten auch eine Anweisung an das Betriebssystem des Disketten-Laufwerks sein (NEW, SCRATCH, RENAME etc.) Nähere Erklärungen dazu finden Sie im Handbuch des Disketten-Laufwerks.

Da in 187/188 die Adresse angegeben ist, ab der der Programm- beziehungsweise Datei-Name im Speicher steht, können wir ihn dort ansehen.

Geben Sie direkt ein
LOAD ”1234”

Nach der RETURN-Taste kommt die übliche Aufforderung der Datasette, die wir aber mit der STOP-Taste abwürgen. In 187/188 steht jetzt die Anfangsadresse »A«des gespeicherten Namens: A = PEEK(187) + 256\*PEEK (188):PRINT PEEK(A)

Wir erhalten die Zahl 49, das ist der ASCII-Codewert der Ziffer »1«. Durch Erhöhen der Anfangsadresse »A« im PRINT-Befehl um jeweils 1, kommen auch die übrigen Zeichen des Namens zum Vorschein.

Die VC 20-Besitzer kennen sicher den Effekt, der entsteht, wenn beim SAVE-Befehl vor dem File-Namen, aber innerhalb der Gänsefüßchen, eine Farbtaste eingegeben wird. Die FOUND-Meldung druckt nämlich den File-Namen in der gewählten Farbe aus, was besonders bei Kassetten-Operationen sehr eindrucksvoll ist.

Das Disketten-Laufwerk bietet eine andere Überraschung. Die geSHIFTete SPACE-Taste innerhalb des File-Namens, erzeugt das zweite Gänsefüßchen. SAVE”SPIEL 2 (SHIFT-SPACE) SYS 16000",8 erscheint in der Directory als: "SPIEL 2” SYS 16000 und kann mit LOAD"SPIEL 2”,8 geladen werden.

### Geräte-Nummer

Alle an den Computer anschließbaren Peripheriegeräte haben eine eigene Nummer, unter welcher sie »angesprochen« werden können. Es handelt sich eigentlich um eine Adresse, und in der Tat sprechen manche Autoren von der »Primär-Adresse«. In der Beschreibung der Speicherzelle 184 sind sie alle zusammengestellt.

Bei den Befehlen LOAD, SAVE, VERIFY und OPEN steht diese Geräte-Nummer als zweite Angabe, vor der ersten Angabe durch ein Komma getrennt: LOAD”NAME”,1......bedeutet "Laden von Datasette” LOAD”NAME”,8......bedeutet "Laden von Diskette” OPEN 12,4.........bedeutet ”An den Drucker”

(Die 12 hinter dem OPEN-Befehl ist eine »File-Nummer«. Sie kommt weiter unten an die Reihe.)

Die Gerätenummer kann auch weggelassen werden. Dann allerdings nimmt der Computer automatisch an, daß es sich um die Datasette handelt. Die Geräte-Nummer steht jeweils in der Speicherzelle 186 und kann von dort mit PEEK ausgelesen werden.

### Sekundär-Adresse

Die dritte Angabe hinter LOAD, SAVE und OPEN hat widersprüchliche Namen, wohl deshalb, weil sie abhängig von der Gerätenummer verschiedene Aufgaben hat. Von den ganz am Anfang schon genannten Varianten gefällt mir »Sekundär-Adresse« am besten.

Die folgende Tabelle faßt die Funktionen der Sekundär-Adresse zusammen.

Sie sehen, die Sekundär-Adressen haben es in sich! Die gerade benutzte Sekundär-Adresse steht in der Speicherzelle 185 und kann mit PEEK von dort ausgelesen werden.

### File-Nummer

Die File-Nummer, oft auch logische File-Nummer genannt, steht als erste Angabe hinter dem OPEN-Befehl und den damit verbundenen PRINT#-, INPUT#-, GET#-und CLOSE-Befehlen.

Sie gibt einer zu bearbeitenden Datei eine Nummer, die von den nachfolgenden, anderen Befehlen ebenfalls verwendet werden muß, wenn sie sich auf dieselbe Datei beziehen. Auf diese Weise können mehrere Dateien nebeneinander bearbeitet werden, und zwar fünf bei Disketten und auf alle Geräte verteilt insgesamt zehn.

File-Nummern dürfen die Werte von 1 bis 255 haben.

Bei Werten über 127 wird bei einem PRINT#-Befehl nach jedem RETURN-Zeichen — CHR$(13) — zusätzlich ein ASCII-Code für Zeilenvorschub — CHR$(10) — an das Gerät gegeben. Diese Eigenschaft kann bei denjenigen Geräten nützlich sein, die normalerweise auf CHR$(13) ohne Zeilenvorschub reagieren (kein automatisches Line-Feed).

Die File-Nummer steht jeweils in der Speicherstelle 184, von wo sie mit PEEK ausgelesen werden kann. Zum Beispiel, um nachzuprüfen, welches Gerät als letztes angesprochen worden ist.

Abschließend möchte ich nochmals darauf hinweisen, daß in den Speicherzellen 183 bis 188 immer die gerade als letzte verwendete Angabe steht. Wir haben aber gesehen, daß der Computer sich maximal zehn File-Nummern mit dazugehörenden Geräte-Nummern, Sekundär-Adressen etc. merken kann.

Er tut dies in speziellen Tabellen, die in den Speicherzellen 601 bis 630 stehen.

Wir werden uns also noch einmal mit dieser Sache befassen, wenn wir bei dem entsprechenden Adressen angekommen sind.

TODO ASIDE

## Texteinschub # 2

### Tape Header

Wenn ein Programm oder eine Datei auf Band gespeichert wird, setzt der Computer vor das Programm einen Vorspann, der auf englisch »Tape-Header« genannt wird. Da dieser Name weit verbreitet ist, will ich ihn hier beibehalten. Der Tape-Header ist 192 Byte lang. Er enthält alle wichtigen Angaben über das nachfolgende Programm.

Beim Laden eines Programms wird der Tape Header im Kassettenpuffer gespeichert, für den die Speicherstellen 828 bis 1019 reserviert sind. Von dort kann der Inhalt des Tape-Headers gelesen und analysiert werden.

Bevor wir das versuchen, will ich erst seine Zusammensetzung erklären.

Im **ersten Byte** steht eine Kennzahl für den Typ des Programms. Diese Kennzahl ist abhängig von der Sekundär-Adresse, die beim SAVEn eingegeben worden ist. Die Arten der Sekundär-Adressen und ihre Bedeutung ist im anderen Texteinschub »Files-Geräte-Namen-Nummern« genau beschrieben. Es gibt zwei Kennzahlen: 1 und 3.

In Anlehnung an die Erklärung der Sekundär-Adresse kann man die Kennzahl generell dadurch beschreiben, daß ein Programm mit Kennzahl 1 immer an den Anfang des zur Verfügung stehenden Programm-Speichers geladen wird. Hauptsächlich kommt das für Basic-Programme in Frage.

Eine Kennzahl 3 bewirkt, daß das Programm an diejenige Stelle des Programmspeichers geladen wird, wo es vor dem SAVEn gestanden hat. Das ist hauptsächlich der Fall bei Programmen in Maschinensprache.

In Verbindung mit der Bedeutung der Sekundär-Adresse kann man den Zusammenhang wie Tabelle 1 zeigt darstellen:

In **Byte 2 und 3** steht in Low/ High-Darstellung die Adresse, ab der das Programm im Speicher des Computers stand, als es gespeichert wurde.

In **Byte 4 und 5** steht die entsprechende End-Adresse des Programms.

Ab **Byte 6 bis Byte 192** steht der Name des Programms. Er darf also maximal 187 Zeichen lang sein. Bei LOAD werden allerdings nur 16 Zeichen auf dem Bildschirm dargestellt.

Jetzt wollen wir das alles mit einem kleinen Experiment überprüfen.

Schreiben Sie bitte ein kleines Programm, es braucht nicht sehr sinnvoll zu sein, wie zum Beispiel:
10 REM TAPE HEADER
20 REM TEST PROGRAMM

Nehmen Sie ein leeres Band und laden das Programm mit einem Namen, der länger sein soll als 16 Zeichen, zum Beispiel:
SAVE ”TEST PROGRAMM FUER INHALT TAPE HEADER"

Nach Drücken der RECORD- und PLAY-Tasten der Datasette meldet der Computer:
FOUND TEST PROGRAMM FU

Es werden also nur 16 Zeichen inklusive Leerzeichen gedruckt. Sobald das Programm geladen ist, schauen wir im Kassettenpuffer nach, was in den ersten fünf Bytes steht, danach lesen wir die restlichen Bytes des Puffers.

Geben Sie direkt, ohne Zeilennummer, ein:
FOR I = 0 TO 4: PRINT PEEK (828 + I);: NEXT,

Sie erhalten die Zahlen 1 1 8 41 8 (beim VC 20 mit 3-K-Speichererweiterung 1 1 4 41 4)

Danach geben wir wiederum direkt ein:
FOR I = 5 TO 192: PRINT CHR$(PEEK(828 + I));: NEXT

Beim VC 20 geben Sie in der FOR...NEXT-Schleife eine kleine Zahl ein, da der Bildschirmspeicher beim VC 20 kleiner ist als beim C 64.

Jetzt erscheint der volle Programmname, gefolgt von nicht sichtbaren Leerstellen. Wenn Sie in der letzten Direkteingabe den CHR$-Teil weglassen, dann druckt die Zeile die ASCII-Codes aus, und Sie sehen dann die Leerstellen als Zahl 32.

Diese Resultate habe ich zur besseren Übersicht in Tabelle 2 dargestellt.

Die Kennzahl in Byte »1« können Sie dadurch verändern, daß Sie dem oben verwendeten SAVE-Direktbefehl nach dem langen Namen ein ,1,1 anhängen. Im Ausdruck steht dann die Kennzahl »3«.

Übrigens, wenn Sie in den Speicherzellen 195/196 nachschauen, finden Sie dort denselben Wert wie in den Zellen 829/830, so wie die Beschreibung es in der Memory Map erklärt.

Vielleicht fragen Sie jetzt nach dem Nutzen dieser ausführlichen Erklärung. Nun, hauptsächlich kann man damit Programme, die eigentlich wegen LOAD ERROR nicht mehr ladbar sind, retten. Oder aber man kann durch Verändern der Zahlen in den Bytes 2 bis 5 nachträglich die Adressen ändern, in die das Programm geladen wird. Die erste Anwendung werde ich erklären, sobald wir zu den Adressen des Kassetten-Puffers selbst kommen.

Das Problem des LOAD oder SAVE mit geänderten Adressen ist aber zu umfangreich für einen Texteinschub innerhalb dieses Kurses. Es wäre eigentlich einen eigenen kleinen Beitrag wert.

# Assembler ist keine Alchimie — Teil 12 \[143-146,148\]

> Im Gegensatz zum sonstigen Sprachgebrauch erregt das Kürzel CIA bei Commodore 64-Kennern angenehme Assoziationen. Die beiden CIAs (Complex Interface Adapter) unseres Computers und ihre Rolle bei der Unterbrechungs-Programmierung sollen in dieser Folge entschleiert werden.

Lassen Sie uns kurz rekapitulieren: Als primäre Unterbrechungsanforderer hatten wir drei Bausteine unseres Computers benannt, nämlich den VIC-II-Chip und die beiden CIA-Bausteine. CIA kommt von »Complex Interface Adapter« und ist die Bezeichnung für die beiden Ein- und Ausgabe-Bausteine, die den gesamten Verkehr zwischen dem zentralen Gehirn unseres C 64 und der Peripherie managen. Wir hatten bemerkt, daß ein CIA, der IRQ-CIA (Adressen von 56320 bis 56575), ausschließlich für die maskierbaren Unterbrechungen zuständig ist. Dazu gehören die 60mal pro Sekunde stattfindenden »Timer-Interrupts«, die die Cursorbehandlung, die TI$-Uhr, die Tastaturabfrage etc. bearbeiten. Der andere CIA, genannt NMI-CIA, (Adressenraum 56576-56831) ist nur für die nicht maskierbaren Unterbrechungen verantwortlich und wird bei normaler Nutzung des C 64 so gut wie nie eingesetzt. Ich gehe im folgenden davon aus, daß Sie keine RS232C-Schnittstelle in Ihren Computer eingesetzt haben. Sollte das aber der Fall sein, dann müßten Sie darauf achten, die folgenden Beispiele — die den NMI-CIA betreffen — ohne gleichzeitigen Betrieb dieser Schnittstelle anzuwenden, weil sich sonst Störungen ergeben könnten.

In der Folge 10 dieser Serie (64'er, Ausgabe 7/85) haben wir uns ein Register (das Register 13, Interrupt-Kontrollregister) der CIAs schon genauer angesehen und auch die Unterschiede beider Bausteine festgestellt. Dort war dann die Rede von Timern, Echtzeituhren, Alarm-Funktionen etc. Was es damit auf sich hat und wie man diese Möglichkeiten nutzen kann, das soll diesmal unser Thema sein. Wir werden uns dazu alle Register der CIAs genauer ansehen, die für die von uns ausgewählten Unterbrechungsoptionen eine Rolle spielen. Dabei fallen einige unter den Tisch — das habe ich aber schon in Folge 10 angekündigt —, nämlich diejenigen, die mit dem Verkehr über den seriellen Port, beziehungsweise über die RS232C-Schnittstelle, zu tun haben. Es bleibt dann anderen — kompetenteren — überlassen, darüber zu schreiben. Wie wäre es zum Beispiel mit Ihnen ?

Auch so bleibt uns genug zu tun. In Tabelle 1 finden Sie zunächst eine Übersicht der von uns behandelten Register.

Sie sehen darin, daß jeder CIA über zwei sogenannte Timer (A und B) verfügt, sodann über die »Time of Day« (zu deutsch etwa »Tageszeit«) genannte Echtzeituhr mit vier Registern und schließlich noch über drei Kontrollregister, zu denen auch das schon erwähnte Register 13 gehört. Sehen wir uns zunächst die Timer an.

### Die Timer der CIAs.

Insgesamt verfügen wir über vier dieser Timer: Timer A und B im CIA1 und dasselbe nochmal im CIA2. Es handelt sich dabei um 16-Bit-Register, in die ein Startwert geschrieben werden kann, von dem an dann heruntergezählt wird. Jedesmal, wenn dann der Wert 0 unterschritten ist, gibt es für uns die Möglichkeit, bestimmte Ereignisse stattfinden zu lassen. Man kann diese Register unabhängig voneinander, aber auch kombiniert, benutzen. Ein Lesen des Registers liefert immer den momentan gerade aktuellen Wert. Ein Schreiben in das Register führt automatisch zum Festlegen eines Startwertes. Was an Optionen mit diesen Timern möglich ist, wird über Kontrollregister gesteuert. Das CRA (Register $ 0E) bezieht sich vor allem auf den Timer A, das CRB (Register $ 0F) auf Timer B. Die 16-Bit-Register werden — wie gewohnt — in der Form LSB/MSB betrieben. In den Timer A des CIA1 wird bei jedem I/O-Reset folgendes Wertepaar eingetragen:

TODO TABLE

56324	dezimal 37	LSB
56325	dezimal 64 MSB

Das entspricht einem Startwert von 16421. Im PAL-System hat der Quarz, der die Taktfrequenz bestimmt, eine Frequenz von 17.734472 MHz. Die Prozessorfrequenz errechnet sich daraus mittels Division durch 18 zu 985248.4 Hz (also etwas weniger als 1 MHz, was den europäischen C 64 langsamer macht als den amerikanischen, der etwas mehr als 1 MHz verwendet). Wenn mit dieser Geschwindigkeit der Timer heruntergezählt wird, erhält man genau einen Unterlauf alle %0 Sekunden. Das ist der Weg, eine kontrollierte Zeitspanne durch den Timer zählen zu lassen. Sei X der gesuchte Startwert, der zu einer Spanne von T Sekunden führt, dann kann man X berechnen mittels:
X = 985248.4 \* T

Der Integerwert von X ist dann in ein LSB und ein MSB zu teilen und in die Timer-Register einzutragen. Allerdings ergibt sich so eine natürliche Grenze. Die höchste durch 2 Bytes darstellbare Zahl ist ja 65535. Wenn wir diesen Wert in den Timer schreiben, dann ist er alle 1/15 Sekunden auf 0 heruntergezählt. Für längere Zeiten ist aber vorgesorgt. Die beiden Timer A und B sind kombinierbar (wie, dazu kommen wir gleich noch) zu einem 32-Bit-Register. Die höchste Zahl X ist dann:
4 294 967 296 = 2^32

Damit kann im Extremfall eine Herabzählzeit von 1 Stunde, 12 Minuten und zirka 40 Sekunden eingeplant werden, was für die meisten Zwecke ausreichen dürfte.

Möchten Sie also genau eine Sekunde Spielraum haben beim Herunterzählen, dann muß die Zahl 985248 als 4-Byte-Integer-Wert in die Speicher von Timer A und Timer B gebracht werden. Das führt dann zu den Werten 0, 15, 8, 160 (weil 985248 = 0\*16777216 + 15\*65536 + 8\*256 + 160). 0 und 15 gelangen als MSB beziehungsweise LSB in Timer B (also Register 07 und 06), 8 und 160 sind MSB und LSB für den Timer A (Register 05 und 04). Sehen wir uns nun an, wie wir dem Computer sagen, was mit diesen Startwerten in den Timer-Registern geschehen soll. Die beiden Kontrollregister CRA und CRB beziehen sich weitgehend auf die gleichnamigen Timer. Im Bild 1 finden Sie das Register $0E, also CRA und in Bild 2 das andere Kontrollregister CRB ($0F):

Die Bedeutung der Bits 0 bis 4 ist — jeweils für den dazugehörigen Timer — identisch:
Bit 0
an dieser Stelle führt zum sofortigen Anhalten des Timers. 1 in diesem Bit startet das Herunterzählen.
Bits 1 und 2

Diese beiden Bits hängen mit dem externen Signalverkehr zusammen und sollen für uns außer acht bleiben.
Bit 3

Ist dieses Bit = 1, dann ist der sogenannte »One Shot«-Betrieb des Timers aktiv. Das bedeutet, daß vom Startwert an heruntergezählt wird bis auf Null. Es findet nun das programmierte Ereignis statt (zum Beispiel ein IRQ). Anschließend wird der Startwert wieder eingeladen und der Timer gestoppt.

Im Gegensatz dazu läuft der »Continuous«-Betrieb, wenn das Bit den Wert 0 enthält. Dabei geschieht zunächst dasselbe wie beim One Shot Modus, der Timer wird aber nicht angehalten, sondern der ganze Vorgang wiederholt sich in einer Endlosschleife.
Bit 4

Ein Hineinschreiben einer 1 in dieses Bit erzeugt ein sofortiges Neuladen der Timer-Register mit dem Startwert. Dabei ist es gleichgültig, ob der Timer gerade läuft oder nicht. Schreibt man eine Null ein, hat das keine Wirkung.

Beim Lesen des Registers ist dieses Bit immer 0.

Zu diesem Bit und seiner Wirkung ist noch etwas zu sagen. Das Neuladen des Timers geschieht
- immer dann, wenn ein Unterlauf stattgefunden hat oder
- falls der Timer steht und in die Register ein Startwert geschrieben wird. Dabei ist der CIA so konstruiert, daß man kein zwangsweises Laden (also mit Bit 4 = 1) braucht, wenn man den Startwert in der Reihenfolge LSB MSB in die Register bringt.

Die Bits 5 bis 7 haben nun unterschiedliche Bedeutung im CRA und im CRB:
Register CRA ($0E)
Bit 5:

Ist dieses Bit gleich Null, dann wird im Systemtakt gezählt. Den hatten wir vorhin zur Zeitberechnung schon verwendet. Wenn das Bit auf 1 gesetzt ist, zählt der Timer externe Signale.
Bit 6:

Spielt für den Signalverkehr über den seriellen Port eine Rolle und soll uns hier nicht weiter beschäftigen.
Bit 7:

Damit steuert man nicht den Timer A, sondern dieses Bit bezieht sich auf die gleich noch zu behandelnde Echtzeituhr.
Register CRB ($0F)

Die Bits 5 und 6 sind hier im Zusammenhang von Bedeutung. Es gibt vier Kombinationsmöglichkeiten:
Bit 6 — Bit 5

0 - 0

Der Timer B wird — wie vorhin der Timer A — im Systemtakt heruntergezählt.

0 - 1

Der Timer B wird durch externe Signale heruntergezählt.

1 - 0

Der Timer B zählt die Unterläufe von Timer A. Das ist der vorhin erwähnte Punkt, der beide Timer kombiniert zum 32-Bit-Zähler. Man kann also im Extremfall 65536 mal 65536 Takte zählen lassen.

1 - 1

Auch in diesem Fall zählt Timer B die Unterläufe von Timer A. Er tut das aber nur, wenn ein bestimmtes externes Signal vorhanden ist.
Bit 7:

Auch beim Register CRB steuert dieses Bit bestimmte Möglichkeiten der Echtzeituhr. Deshalb haben Sie noch ein wenig Geduld, bis wir diese Uhr behandeln.

Wir kennen uns nun ganz gut aus, wie wir mit den Timern umzugehen haben. Unser Wissen soll in einem kleinen Test erprobt werden. Dazu bedienen wir uns des y6o Sekunden IRQ. Wir verändern diese regelmäßige Unterbrechung derart, daß sie nur noch einmal in der Sekunde geschieht. Welche Zahlen dazu in ein 32-Bit-Register gepackt werden müssen, haben wir schon vorhin berechnet. Jeweils in der Reihenfolge LSB/ MSB müssen wir sie einschreiben und vorher die Timer anhalten, indem die Bits 0 der Kontrollregister CRA und CRB auf 0 gesetzt werden. Nach dem Einschreiben und Starten der beiden Timer müssen folgende Bitmuster in CRA und CRB stehen:
CRA
Bit 0 = 1 Start Timer A
Bit 3 = 0 Dauerlauf
Bit 5 = 0 Systemtakt
CRB
Bit 0 = 1 Start Timer B
Bit 3 = 0 Dauerlauf
Bit 5 = 0
Bit 6 = 1 Timer B zählt Unterläufe von Timer A.

Bevor wir die Timer starten, muß auch noch das Interrupt-Kontrollregister verändert werden (das hatten wir uns in der 10. Folge genauer angesehen). Bislang erzeugt ein Unterlauf des Timer A eine Unterbrechung. Wir möchten aber, daß der Timer B (damit wir das 32-Bit-Register voll ausnutzen) der Auslöser ist. Dazu muß Bit 0 des ICR gelöscht und statt dessen Bit 1 gesetzt werden.

Im Programm »Timer-Test« (siehe Listing 1 und 2) ist all das realisiert. Mit SYS 49152 gestartet, zeigt sich sofort ein deutlich verlangsamter Cursor. Noch langsamer kann alles werden, indem Sie höhere Werte in die Timer-Register schreiben. Den Normalzustand stellen Sie einfach durch Drücken der RUN/ STOP- und der RESTORE-Tasten her. Dabei wird ja — wie Sie aus der letzten Folge her wissen, auch ein I/O-Reset ausgeführt, der den Ausgangszustand wiederherstellt.

Die Verlängerung des IRQ-Zyklus hat übrigens noch einen sinnvollen Nebeneffekt. Je seltener ein laufendes Programm unterbrochen wird, desto schneller wird es mit seinen Jobs fertig. Das kann man immer dann tun — im Extremfall sogar den IRQ ganz ausschalten — wenn man die Möglichkeiten, die der Computer während des normalen IRQ anbietet, nur selten oder aber gar nicht braucht.

### Die Echtzeituhren

Wir kennen nun fünf Uhren in unserem Computer: Die vier Timer Qeweils A und B im CIA1 und CIA2), die wir, weil wir die Impulszahlen in Zeiteinheiten umrechnen können, zur Zeitmessung einsetzen könnten und die im Basic verfügbare Uhr TI$, die aber — wie wir nun wissen — lediglich die Umsetzung des Timer A im CIA1 in ein bequemer handhabbares Software-Instrument ist. Zudem ist die Ganggenauigkeit dieser Uhr recht gering. Schon einige Kassettenoperationen genügen, sie völlig aus dem Takt zu bringen.

Um so mehr verwundert es, daß zwei hervorragende Echtzeituhren im Commodore 64 so gut wie nie benutzt werden, ja nicht einmal in irgendeiner Weise softwaremäßig unterstützt werden. Vielleicht ist das ein bißchen zuviel »mehr sein als scheinen«, was Commodore da betreibt, wenn man bedenkt, welche verborgenen Schätze da alle zutage gefördert werden können (man denke nur an die hochauflösende Grafik) bei genauer Untersuchung des Computers.

Jeder der beiden CIAs verfügt über solch eine Uhr, die direkt von der Netzfrequenz getaktet wird. Die Zählung der Zeit geschieht in vier Registern (Register $08 bis $0B), die in Bild 3 gezeigt sind.

Vielleicht fällt Ihnen etwas auf, wenn Sie sich diese vier Bytes mal genauer ansehen: Die Speicherung geschieht in Form von Einer- und Zehnerstellen. Das kann also weder im Binärformat noch als ASCII-Zeichen funktionieren. Hier werden die Ziffern als BCD-Zahlen abgelegt. In der 3.Folge dieser Serie wurde dieses »binary coded decimal«-Format erklärt. Das ist lange her (64’er, Ausgabe 11/84) und soll deshalb hier nochmal vorgestellt werden, damit alle wissen, wovon die Rede ist.

In dieser Zahlendarstellung wird jede Dezimalstelle einer Zahl gesondert in eine Binärzahl umgewandelt. Dann ergibt sich der folgende Zusammenhang:

TODO TABLE

Binär	Dezimal
0000	0
0001	1
0010	2
0011	3
0100	4
0101	5
0110	6
0111	7
1000	8
1001	9

Das war’s! Die anderen möglichen Binärkombinationen (also zum Beispiel 1010 etc.) werden nicht benutzt. Die Zahl 25 beispielsweise lautet im BCD-Format:

TODO TABLE

0010 0101
2	5

Jetzt ist es Ihnen sicherlich verständlich, warum für die Sekunden- und Minuten-Zehnerstellen nicht mehr als drei Bits reserviert wurden: größer als 6 wird die Zehnerstelle nicht.

Zum Stundenregister TODHR ist aber noch etwas zu sagen: Dort ist nur ein Bit reserviert für die Stunden-Zehnerstelle. Die Uhr läuft nicht bis 24 Uhr, sondern lediglich bis 12 Uhr. Zur Unterscheidung, ob vor- oder nachmittags gemeint ist, dient das Bit 7. Dieses sogenannte AM/PM-Flag ist orientiert an der angelsächsischen Gewohnheit, zum Beispiel für 16Uhr den Ausdruck 4 PM zu verwenden. PM kommt vom lateinischen »post meridiem«, was übersetzt heißt »nach dem Mittag«, wohingegen AM steht für »ante meridiem«, also »vor dem Mittag«. Meint man nun AM, dann muß diese Flagge auf 0, bei PM aber auf 1 gesetzt sein.

Beim Stellen der Uhren sollte eine Reihenfolge eingehalten werden. Sobald nämlich in das Stundenregister geschrieben wird, hält die Zählung automatisch an. Man kann nun die anderen Werte in die Register schreiben. Den Startschuß liefert das Schreiben in das Register TOD10TH: von nun an tickt die Uhr wieder.

Ähnlich funktioniert das Lesen der Uhrzeit. Sobald das Stundenregister gelesen wird, führt das zum Anhalten der Uhr, so daß die restlichen Register reibungslos auslesbar sind. Wieder ist es das Zehntelsekundenregister, das beim Auslesen ein Weiterlaufen der Uhr bewirkt. Aber, so werden Sie bemerken, wenn der Auslesevorgang eine bestimmte Zeit beansprucht, führt das zu Verzögerungen? Die Lösung ist, daß der gesamte Inhalt der vier Register gleichzeitig mit dem Auslesen des Stundenwertes in einen internen Speicher transferiert wird und dort weiterläuft. Nach dem Lesen des TODlOTH kommt der aktuelle Wert zurück in die Register und dieser wird weitergezählt.

Nun wird es höchste Zeit, daß wir uns die beiden Bits im CRA und im CRB ansehen, die wir vorhin bei der Timer-Behandlung links liegen ließen. Bit 7 im CRA kündigt der Echtzeituhr an, welche Netzfrequenz zu erwarten ist. Eine 1 an dieser Stelle steht für 50 Hz, eine 0 für 60 Hz. Unser Stromnetz in Deutschland liefert einen Wechselstrom mit 50 Hz, weshalb wir dann dort die 1 setzen sollten. Da gibt es ein kleines Problem: Beim I/O-Reset, der durch Drücken der RUN/STOP- und der RESTORE-Tasten zusammen ausgelöst wird, schreibt der Computer immer den amerikanischen Wert für 60 Hz in dieses Bit. Dann geht die Uhr aber empfindlich nach. Man muß also einen Weg finden, der erlaubt, dort in diesem Fall wieder eine 1 einzuschreiben. Das ist durch eine eigene NMI-Routine möglich. Sie sehen schon, der Weg zur Nutzung dieser verlockenden Uhren ist ziemlich dornenreich!

Noch interessanter ist das Bit 7 im CRB. Das Setzen der Uhrzeit ist nämlich nur möglich, wenn dieses Bit den Inhalt 0 hat. Was geschieht, wenn dort eine 1 steht? Dann bestimmt man nicht die aktuelle Uhrzeit, sondern man stellt einen Wecker (das ist die Alarmzeit). Das geschieht nach dem Setzen dieses Bits genauso wie vorhin das Einschreiben der Uhrzeit (also erstaunlicherweise auch in genau dieselben Register!). Im Unterschied dazu ist allerdings ein Lesen der Alarmzeit nicht möglich — das ergibt immer die aktuelle Uhrzeit. Man muß für diesen Fall die Weckzeit irgendwo abspeichern und bei Bedarf dann von dort lesen.

Weil man ja meistens nach dem Erreichen der Alarmzeit irgendeine Reaktion erwartet, ist im ICR (also dem Unterbrechungskontrollregister 13) jedes CIA noch ein Bit reserviert — das Bit 2 —, mit dessen Hilfe der Alarm per IRQ oder NMI wie auch immer geartet losbrechen kann. Der Phantasie sind hier nur wenige Grenzen gesetzt. Wie man mit diesem ICR umgeht, ist Ihnen noch aus der Folge 10 geläufig.

Damit sind wir durch die Eigenheiten der CIAs durch. Man braucht tatsächlich keine Scheu zu haben, diese Echtzeituhrenzu nutzen. Lediglich die Uhr im CIA1 wird manchmal verwendet, einen bestimmten Wert für die Zufallszahlenerzeugung zu generieren. Aber das sollte einer eigenen Uhren-Routine nicht in die Quere kommen. Solch eine Echtzeituhr finden Sie im beiliegenden Listing 3 und 4.

Durch SYS49152 aktivieren Sie die Uhr, die Sie mit SYS49261 auch wieder abschalten können. Durch ein USR-Kommando A = USR (String) stellen Sie die Startzeit ein. String kann dabei eine Stringvariable sein oder auch direkt ein String der Form »HHMMSST« (also Stunden, Minuten, Sekunden, Zehntelsekunden). In A steht eine 0, wenn kein Fehler, aber eine -1, wenn ein Fehler aufgetreten ist. Das Lesen der Uhr erfolgt über ein zweites USR-Kommando: PRINTUSR(Zahl). Dabei kann Zahl eine beliebige Zahl oder Variable sein. Eine Alarmzeit ist ebenfalls einstellbar durch ein USR-Kommando, in dem vor der Zeiteingabe noch ein Buchstabe steht. Beispielsweise stellt A = USR(»A1200000«) einen Wecker auf 12 Uhr. Der Alarm im Programm läßt den Bildschirmrahmen blinken. Abstellen kann man das durch Auslösen eines RESTORE-NMI (also RUN/ STOP und RESTORE). Sollten Sie vor dem eingestellten Alarm mal solch einen NMI auslösen, dann muß die Alarmzeit neu gestellt werden. Als Basis für dieses Programm diente ein Listing aus dem schon oft erwähnten Buch von Babel/Krause/Dripke »Das Interface Age Systemhandbuch zum Commodore 64«.

Die Unterbrechungs-Programmierung ist damit abgeschlossen — ebenso diese Serie, die als Einführung in die Assembler-Alchimie nun alle Geheimnisse der Kunst aufgedeckt hat. In den letzten Folgen sind wir schon in die Meistergrade der Zunft aufgestiegen. Vielleicht ging es manchem etwas zu schnell? Dann wird Ihnen der anschließende Kurs »Von Basic zu Assembler« eine Hilfe sein, der behutsam und mit vielen an Basic angelehnten Beispielen die nötige Programmierpraxis vermitteln wird. So wie die Segler sich oft »Mast- und Schotbruch« wünschen, verabschiede ich mich, indem ich Ihnen viele grandiose Abstürze wünsche.

(Heimo Ponnath/gk)

# Hallo Hardware-Entwickler! \[150\]

Haben Sie eine nützliche Erweiterung für den C 64 oder C 128 selbst entwickelt? Ob EPROM-Brenner, Stereo-Interface, Video-Signalverstärker, Floppy-Speeder oder Centronics-Interface — senden Sie uns Ihre Bauanleitung. Die 64'er ist auch in dieser Beziehung ein Magazin für Computer-Fans, bei der aktive Mitarbeit großgeschrieben wird! Ihre Entwicklung in der 64'er — reizt Sie der Gedanke nicht?

Wie bei den Listings benötigen wir auch für jede Hardware-Entwicklung ein paar Unterlagen:

- Ausführliche Beschreibung der Entwicklung
- Ein fertig aufgebautes Probeexemplar
- Technische Beschreibung, aus der das Funktionsprinzip der Schaltung hervorgeht
- Auf- und Einbauanleitung
- Ein reprofähiges Platinen-Layout, möglichst im Maßstab 1:1 und 2:1
- Illustrieren Sie die Beschreibungen, wo nötig, durch Zeichnungen und Grafiken
- Alle Entwicklungen müssen von Ihnen selbst stammen, die Verwendung von Schaltungen (auch teilweise) aus Büchern und anderen Publikationen ist nicht möglich. Auch wenn Sie selbst nichts entwickelt haben, sind wir an Ihrer Meinung interessiert. Schreiben Sie uns, welche Erweiterung Ihrer Meinung nach am wichtigsten ist.

Wenn Sie sich an der Gestaltung unseres Magazins mit Hardware-Bauanleitungen beteiligen wollen, schreiben Sie einfach an:
Markt & Technik
Verlag Aktiengesellschaft
Redaktion 64’er
Herrn Arnd Wängler
Hans-Pinsel-Str. 2
8013 Haar bei München

# Comal 80 — die universelle Programmiersprache \[151-152,154,164\]

> Vergessen Sie alles, was Sie über die Programmierung Ihres C 64 wissen! Denn mit Comal 80 verwandelt sich der C 64 in einen neuen Computer.

Hand aufs Herz: Wie oft haben Sie sich als C 64-Programmierer schon über die Unzulänglichkeiten des eingebauten Basic 2.0 geärgert und sich ein komfortableres Basic gewünscht? Diese Zeiten sind jetzt endgültig vorbei. Mit Comal 80 nutzen Sie die enormen Hardware-Fähigkeiten des C 64 voll aus, und zwar ohne Maschinensprache, ohne PEEKs und POKEs, dafür schneller, komfortabler und übersichtlicher, als Sie es sich je vorgestellt haben. Comal vereinigt die leichte Erlernbarkeit von Basic mit der übersichtlichen Strukturierung von Pascal und den grafischen Fähigkeiten von Logo. Das Ergebnis ist eine neue Sprache, die alles, was es bisher an Programmiersprachen für den C 64 gibt, in den Schatten stellt.

## 64 KByte im ROM-Modul

Comal 80 ist für den C 64 nur als Steckmodul erhältlich. Dieses Modul enthält 64 KByte ROM, die in vier Speicherbänkenzuje 16KByte organisiert sind. Die eingebaute Bank-Auswahl-Logik schaltet ganz nach Bedarf zwischen den vier Comal-ROM-Bänken, dem Basic-ROM und dem darunterliegenden RAM hin und her. Bild 1 zeigt die Speicheraufteilung des C 64 unter Comal 80. Der gesamte adressierbare Speicherbereich (RAM und ROM) beträgt 152 KByte (!), für Comal-Programme stehen davon 30 KByte zur Verfügung. Das entspricht dem auch bei Basic-Erweiterungen wie Simons Basic oder Exbasic Level II vorhandenen Programm-Speicherplatz. Dazu kommen nochmals 16 KByte RAM, die für selbstgeschriebene Spracherweiterung (User Packages) verfügbar sind. Wem dieser Speicherplatz noch nicht ausreicht, kann sich Comal-Erweiterungen mit einem Umfang von bis zu 32 KByte entweder in Assembler oder in Comal selbst schreiben und in ein EPROM brennen — das Comal-Modul enthält zu diesem Zweck einen freien EPROM-Steckplatz.

Der bildschirmorientierte Editor des C 64 wurde in vielen Punkten noch weiter verbessert. Zahlreiche Control-Funktionen wie »lösche ab Cursor-Position bis Zeilenende« oder »Cursor auf vorhergehendes Wort setzen« erleichtern die Programmeingabe. Spezielle Comal-Kommandos wie DEL (Zeilenbereich löschen), AUTO (automatische Zeilennummern-Vorgabe) oder RENUM (Neunumerierung eines Comal-Programms) bringen großen Komfort bei der Programm-Eingabe und -Änderung. Die Funktionstasten sind mit sinnvollen Kommandos belegt, können aber vom Anwender beliebig umdefiniert werden.

## Komfortabler Editor

Comal ist genaugenommen weder ein Interpreter noch ein Compiler, sondern eine Zwischenstufe. Comal-Programme werden vor der Ausführung (die interpretativ erfolgt) in zwei Stufen »vor-übersetzt«. Die erste Stufe ist die Umsetzung der Comal-Schlüsselworte in sogenannte »Token«, also meist aus einem Byte bestehende Befehls-Abkürzungen. Eine solche Vorübersetzung findet auch beim normalen Basic 2.0 statt. Comal geht aber noch weiter: Wird ein Comal-Programm gestartet, dann führt Comal vor dem eigentlichen Programmlauf eine semantische Analyse durch, in deren Verlauf die effektiven Adressen von Variablen, Prozeduren und Funktionen ermittelt und gespeichert werden. Während des Programmlaufs braucht Comal daher nicht lange in Variablentabellen zu suchen, sondern findet die gesuchte Adresse praktisch unmittelbar vor. Dadurch werden Ausführungsgeschwindigkeiten erreicht, die m der Regel erheblich über denen vergleichbarer

Basic-Programme liegen. Einen Compiler kann man bei Comal getrost vergessen, er würde keinen nennenswerten Geschwindigkeitsvorteil mehr bringen.

## Von Basic zu Comal

In Comal 80 sind die besten Eigenschaften der drei Programmiersprachen Basic, Pascal und Logo zu einem sehr komfortablen Programmier-System zusammengefaßt. Auf der Kommando-Ebene braucht der von Basic kommende Comal-Anwender nur wenig umzulernen: Programme werden mit LOAD geladen, mit SAVE gespeichert und mit LIST gelistet. Auch Befehle wie NEW, RUN, AUTO, RENUM oder MERGE dürften dem Basic-Programmierer nicht unbekannt sein.

Viele im Programm-Modus verwendete Befehle sind an Basic angelehnt. Das geht so weit, daß Comal vielfach Basic-Befehle akzep-. tiert, wo eigentlich spezielle Comal-Schlüsselwörter stehen müßten. Ein Beispiel ist die FOR-Schleife, die in Comal statt mit NEXT mit ENDFOR abgeschlossen werden muß. Tippt man jedoch versehentlich »NEXT«, so macht das nichts aus: Das Comal-System ist intelligent genug, um zu erkennen, was der Benutzer mit NEXT meinte und ersetzt das NEXT stillschweigend durch ENDFOR.

## Strukturiert wie Pascal

Comal 80 für den C 64 ist in vieler Hinsicht mit Pascal vergleichbar, ohne allerdings dessen in vielen Fällen unnatürliche Strenge und Kompliziertheit zu übernehmen. Comal versucht stets, dem Benutzer dort Arbeit abzunehmen, wo dies von einem intelligenten System auch getan werden kann. Beispielsweise zwingt Pascal dazu, alle Variablen, Konstanten oder Prozeduren vor der ersten Verwendung des entsprechenden Namens zu definieren. Bei Comal dagegen ist es gleichgültig, wo eine Prozedur im Programm definiert wird. Bevor das RUN-Kommando ausgeführt wird, ordnet Comal jedem Auftreten eines Prozedur-Namens die entsprechende Prozedur selbst zu, egal, ob diese vorne, hinten oder in der Mitte eines Programms steht.

Comal 80 ist eine blockstrukturierte Sprache und sorgt dadurch für Lesbarkeit der Programme. Die Sprachstruktur wird durch die Form der Bildschirmausgaben beim Listen noch unterstützt. Comal rückt verschachtelte Strukturen automatisch ein, ohne dafür zusätzlichen Speicherplatz zu brauchen. So werden schon optisch von vornherein klare Gliederungen und Strukturen geschaffen, die sich durch Kommentare und Leerzeilen noch vertiefen lassen.

Der Sprachumfang von Comal 80 umfaßt praktisch alle Elemente der strukturierten Programmierung:

Die von Basic her bekannte, vergleichsweise primitive IF-THEN-Abfrage ist in Comal dahingehend erweitert worden, daß ganze Programmteile bedingt ausgeführt werden können. Hierzu wird die IF-Anweisung in der Form IF-THEN-ENDIF verwendet, wobei zwischen THEN und ENDIF ein beliebig umfangreicher Programmteil stehen kann, der nur ausgeführt wird, wenn die Bedingung nach IF wahr ist. Im Falle zweier alternativer Möglichkeiten kann die IF-Anweisung durch ELSE zur Form IF-THEN-ELSE-ENDIF ergänzt werden. Weitere Alternativen lassen sich durch zusätzliche Abfragen mittels ELIF (eine Wortbildung aus ELSE IF) leicht abfragen. Der folgende Programmteil druckt einen Wetterbericht in Abhängigkeit vom Inhalt der Variablen »WETTER«:

TODO PRE

100 IF WETTER = -1
110     PRINT "schlechtes Wetter"
120   ELIF WETTER = 1
130     PRINT "gutes Wetter"
140   ELSE
150     PRINT "veraenderlich"
160 ENDIF

Falls mehrere Bedingungen zu prüfen sind, ist die CASE-Konstruktion allerdings meist übersichtlicher. Der gleiche Wetterbericht mittels CASE-Anweisung formuliert, sieht so aus:

TODO PRE

100 CASE WETTER
110   WHEN -1
120     PRINT "schlechtes Wetter" 130 WHEN 1
140     PRINT "gutes Wetter"
150   OTHERWISE
160     PRINT "veraenderlich"
170 ENDCASE

Für die Programmierung von Schleifen stehen neben der bereits angesprochenen FOR-ENDFOR-Schleife (entspricht FOR-NEXT in Basic) drei weitere Schleifen-Konstruktionen zur Verfügung:

LOOP-ENDLOOP ist eine Endlosschleife, die nur durch einen eingefügten EXIT-Befehl verlassen werden kann.

REPEAT-UNTIL wird durchlaufen, bis die Bedingung hinter UNTIL erfüllt ist.

WHILE-ENDWHILE dagegen prüft zuerst die hinter WHILE stehende Bedingung. Der Programmteil zwischen WHILE und ENDWHI-LE wird solange ausgeführt, wie die Bedingung wahr ist.

Für ganz spezielle Zwecke existiert auch noch ein Sprungbefehl (GOTO), jedoch nur auf ein mit einem Namen versehenes Sprungziel (LABEL).

Ebenfalls von Pascal übernommen wurde das Konzept der Prozeduren und Funktionen. Auch hier fällt wieder angenehm auf, daß auf einen puren Formalismus zugunsten erhöhter Anwenderfreundlichkeit verzichtet wurde.

## Prozeduren und Funktionen

Eine Prozedur ist entfernt mit einem Unterprogramm in Basic verwandt, nur wird sie nicht über »GOSUB (Zeilennummer)«, sondern direkt mit einem Namen aufgerufen. Im Gegensatz zu Basic können dabei alle benötigten Parameter mit übergeben werden. Dies können Zahlen, Strings oder sogar ganze Felder sein. Die Prozedur legt sich dann lokale Variablen an, was bedeutet: Die Namen der Variablen sind nur innerhalb der Prozedur gültig, der gleiche Variablenname bezeichnet also in Prozedur und Hauptprogramm verschiedene Variable. Im übrigen wird, wie in Pascal, zwischen reinen Werteparametern und sogenannten Variablenparametern unterschieden.

Durch Prozeduren bietet Comal die Möglichkeit, den Sprachumfang praktisch beliebig zu erweitern. Ähnlich verhält es sich mit den Funktionen, die — anders als Basic-Funktionen — über beliebig viele Zeilen definiert werden können. Die Funktionsdefinition wird eingeleitet durch das Schlüsselwort FUNC und beendet durch ENDFUNC. Wie bei Prozeduren können beliebig viele Parameter an eine Funktion übergeben werden. Der Unterschied zu Prozeduren besteht darin, daß eine Comal-Funktion immer einen bestimmten Wert zurückliefert, der durch RETURN (Wert) ausgewählt wird. RETURN hat hier nichts zu tun mit dem Basic-Befehl RETURN, sondern definiert nur den von der Funktion zurück zu liefernden Wert.

## Fehlerbehandlung leicht gemacht

Um eine möglichst weitgehende Benutzerfreundlichkeit zu realisieren und die Programmierung zu vereinfachen, wurde Comal mit komfortablen Möglichkeiten zur Behandlung von Fehlern versehen. Diese beschränken sich nicht nur auf das Abfangen aller möglichen Fehlerarten, sondern es sind auch automatische Korrekturen und die Weitergabe von Meldungen an übergeordnete Programm-Strukturen möglich. Dabei können sogar bewußt Fehler erzeugt oder übertragen werden. Die Fehlerbehandlung stellt selbst eine Programmstruktur dar. Der Teil des Programms, in dem Fehler abgefangen werden sollen, wird durch TRAP und ENDTRAP eingeklammert. Dieser Programmteil enthält auch die Fehlerbehandlungs-Routine RANDLER), die im Fehlerfall aufgerufen wird. Ein Beispiel:

TODO PRE

10 // Quadratwurzel
15 PRINT "bitte Zahl eingeben:"
20 TRAP
25   INPUT ZAHL
30   PRINT SQR(ZAHL)
35 HANDLER
40   CASE ERR 0F
45     WHEN 206
50       PRINT "nur Zahl eingeben !"
55     WHEN 1
60       PRINT "negative Zahl nicht erlaubt ! "
65     OTHERWISE
70       PRINT ERR, ERRTEXT$
75   ENDCASE
80 ENDTRAP

Dieses Programm wartet auf die Eingabe einer Zahl und berechnet danach die Quadratwurzel aus dieser Zahl. Zwei Fehlermöglichkeiten sind dabei offensichtlich: Zum einen kann der Benutzer irrtümlich irgendwelche Buchstaben mit eingeben (Fehler 206, »numeric constant expected«), zum anderen darf das Argument der Quadratwurzel-Funktion nicht negativ werden (Fehler 1, »Argument Error«), Durch den TRAP-HANDLER werden diese beiden Fehler abgefangen und mit entsprechenden Meldungen quittiert. Falls wider Erwarten irgendein anderer Fehler auftreten sollte, so wird in Zeile 70 einfach die Fehlernummer samt dazugehörigem Fehlertext übergeben. Wenn Sie sich an den englischen Fehlermeldungen stören sollten — Comal ermöglicht es Ihnen, alle Fehlermeldungen neu zu formulieren und abzuspeichern.

## Comal und die 1541

Ein Schwachpunkt im C 64-System ist bekanntlich die Floppy-Station 1541. Die meisten C 64-Besitzer haben sich wohl zähneknirschend daran gewöhnt, daß das Auflisten des Directorys mit Programmverlust bestraft wird und daß man zur Anzeige der DOS-Fehlermeldungen ein Programm benötigt. Mit Comal 80 hat es ein Ende mit dem Zähne knirschen: DIR oder CAT zeigen das Directory, PASS sendet Kommandos an die 1541. Der Fehlerkanal wird entweder sofort angezeigt — wobei dies mit Hilfe des TRAP-Handlers gesteuert werden kann — oder kann durch STATUS abgefragt werden. CREATE legt eine relative Datei an, mit GET$ kann eine beliebige Anzahl von Bytes von der Floppy-Station eingelesen werden.

Auch in Richtung Programmiertechnik hat man sich einiges einfallen lassen. Programmteile können mit CHAIN nachgeladen werden, wodurch Comal-Programme theoretisch bis zu 200 KByte lang sein konnen(30KByte im RAM, 170 KByte auf Diskette). Außerdem können Comal-Prozeduren und -Funktionen als EXTERNAL deklariert werden. Dies bedeutet, daß im Programm nur der Prozedurkopf vorhanden sein muß. Die Prozedur selbst befindet sich in diesem Fall auf der Diskette und wird beim Aufruf automatisch nachgeladen und ausgeführt. Nach getaner Arbeit wird die Prozedur dann einfach wieder aus dem Speicher geworfen, um keinen Platz zu verschwenden.

Comal kann mit bis zu acht Laufwerken gleichzeitig arbeiten und unterstützt von vorneherein auch den Anschluß der »großen« Commodore-Laufwerke der 40xx- und 80xx-Serie.

## Die Zusaft-Pakete

Natürlich läßt sich auch mit der Datasette arbeiten, allerdings mit den von Basic bekannten Einschränkungen hinsichtlich Bedienungskomfort und Leistungsfähigkeit.

Bisher war nur von dem international genormten Grundwortschatz

von Comal die Rede. Es ist jedoch auch möglich, systemabhängige oder anwenderspezifische Spracherweiterungen zu integrieren. Eine solche Spracherweiterung wird in Comal als »Package« bezeichnet. Packages (Pakete) sind nichts anderes als Sammlungen von Comal-Prozeduren oder-Funktionen, die meist in Maschinensprache geschrieben sind, aber natürlich auch in Comal verfaßt sein können. Eine Reihe derartiger Spezial-Pakete sind in Comal 80 bereits fest eingebaut. Es bereitet aber nur wenig Mühe, sich weitere Packages selbst zusammenzustellen.

Ein fertig programmiertes Package kann auf Diskette abgelegt und bei Bedarf in einen reservierten 16-KByte-RAM-Bereich geladen werden, belastet also nicht den 30 KByte großen Comal-Programmspeicher. Fest eingebaut sind bereits elf Packages, mit denen sich die Fähigkeiten des Comal-Systems nochmals potenzieren:

### 1.	English

Nach »USE ENGLISH« gibt Comal alle Fehlermeldungen im englischen Klartext aus.

### 2.	Danish

Hiermit erscheinen alle Fehlermeldungen im dänischen Original.

### 3.	Graphics

Dieses Package erweitert Comal um eine Reihe von speziell auf den C 64 zugeschnittenen Grafik-Befehlen.

### 4. Turtle Graphics

An diesem Package werden Logo-Freunde ihre helle Freude haben. Alle Grafikbefehle von Logo stehen hiermit zur Verfügung.

### 5.	Sprites

Alles, was der C 64 in dieser Richtung hardwaremäßig zu bieten hat, ist hier in Form komfortabler Comal-Befehle verfügbar.

### 6.	Sound

Es gibt wohl keine Funktion des SID-Chips, die nicht durch spezielle Comal-Befehle unterstützt wird. Als besonderer Komfort können Noten als Strings codiert und abgespielt werden. Dies geschieht interruptgesteuert, so daß Hintergrundmusik sehr einfach programmiert werden kann.

### 7.	Paddles

Dieses Package enthält Prozeduren und Funktionen zur Abfrage der Controlports.

### 8.	Joysticks

Hiermit wird die Joystick-Kontrolle zum Kinderspiel.

### 9.	Lightpen

Wer einen Lightpen sein eigen nennt, der findet hier alle Spezial-Befehle, um damit optimal arbeiten zu können. Zusätzliche Treibersoftware wird damit überflüssig.

### 10.	System

Mit dem System-Package können eine Vielzahl von speziellen Eigenschaften des C 64-Systems angesprochen werden.

### 11.	Font

Mit einfachen Befehlen kann der Zeichensatz des C 64 geändert, geladen oder gespeichert werden. Es ist möglich, einen speziellen Zeichensatz fest mit einem Comal-Programm zu verbinden. Wird dieses Programm gespeichert, so wird auch der zugehörige Zeichensatz ohne weiteres Zutun automatisch mit abgespeichert. Bei jedem Laden eines derart präparierten Programms steht dieser Zeichensatz dann wieder zur Verfügung.

## Fazit

Die hervorragenden Eigenschaften dieser neuen Programmiersprache lassen auf eine Durchsetzung auf breiter Front hoffen. Comal ist wie kaum eine andere Sprache dazu geeignet, strukturiertes und übersichtliches Programmieren interaktiv, im Dialog mit dem Computer zu lernen. Comal nimmt dem Benutzer im Gegensatz zu anderen Sprachen so leicht nichts übel, im Gegenteil: offensichtliche Fehleingaben werden vom System automatisch korrigiert. Der eingebaute Syntax-Check bereits bei der Eingabe von Programmzeilen, ist nicht nur für den Anfänger eine große Hilfe. Ausführliche Fehlermeldungen lassen den Benutzer nicht im unklaren, was er falsch gemacht hat. Die hohe Ausführungsgeschwindigkeit von Comal-Programmen ermöglicht Anwendungen, die beim C 64 sonst nur durch Maschinensprache zu realisieren sind. Der Komfort bei der Programmierung in Comal ist für C 64-Verhältnisse so enorm, daß man sich an einen anderen Computer versetzt glaubt. Alle, wirklich alle, Unzulänglichkeiten des C 64 sind durch Comal 80 behoben. Und wenn jemand doch noch etwas finden sollte — kein Problem, denn Comal ist durch das Package-Konzept flexibel genug, vom Anwender fast beliebig erweitert werden zu können. Mit einem Wort: Comal ist nicht eine, sondern die Programmiersprache für den C 64.

(S. Bauer/ev)

Comal 80 gibt es derzeit nur als Steckmodul für den C 64 bei Commodore Data a/s, Bjerrevej 67, DK-8700 Horsens, Dänemark. Preis zirka 1000 DKr. (etwa 300 Mark).

# Aufgeräumt mit Mainfile II \[157\]

> Bringen Sie Ordnung in Ihre Karteikästen und Adressenbücher! Mainfile II ist ein Hilfsmittel zur einfachen Programmierung von Dateiverwaltungen. Das Besondere: es belegt keinerlei Speicher im Computer.


Während herkömmliche Programme zur Dateierstellung und Dateiverwaltung sequentielle oder relative Dateien anlegen, folgt Mainfile II wegen der mit den genannten Dateitypen verbundenen Nachteile einem völlig anderen Prinzip: Mainfile II ist eine von Grund auf neue Betriebssystemerweiterung für Commodore-Diskettenlaufwerke. Mainfile II ist völlig unabhängig vom Commodore-Computer. Voraussetzung an den Computer ist lediglich, daß die Floppy 1541 anschließbar ist, da sich alles in deren RAM abspielt. Einsetzbar ist Mainfile II bisher für C 16, VC 20, C 64, SX 64, C 116 und Plus/4!

Mit Mainfile II können pro Diskette bis zu 114 Dateien erstellt werden. Eine Datei besteht dabei aus einzelnen Datensätzen, auf die man extrem einfach und schnell zugreifen kann. Eine Diskette kann maximal 650 Datensätze zu je 228 Byte enthalten.

Bevor man mit Mainfile II zu arbeiten beginnt, muß man sich eine Datendiskette mit den vier sogenannten Makrobefehlen erstellen. Alle Makrobefehle sind durch ein vorangestelltes &-Zeichen kenntlich gemacht. Dem Kopieren dieser Befehle dient ein auf der Systemdiskette befindliches Programm.

Ungewohnt bei Mainfile II ist, daß keinerlei Programme in den Computer geladen werden müssen. Zuerst einmal ist ein Öffnen der Kanäle 2 und 15 zur Übertragung von Daten, Befehlen und Meldungen an die Floppy erforderlich. Mit PRINT #15, "&CREATE,Test" wird der Makrobefehl CREATE aufgerufen, der eine neue Datei mit dem Namen »Test« auf der Diskette einrichtet.

Die Befehlsfolge PRINT#15,"& MAINFILE,Test" aktiviert das Mainfile II-System und gibt den Namen der Datei an, auf die zugegriffen werden soll.

Der einfachste Weg, sich in Mainfile II einzuarbeiten, ist wohl das Laden des Demo-Programmes von der Systemdiskette. Nachdem das in Basic geschriebene Demonstrationsprogramm zur Erstellung und Bearbeitung einer Adreßdatei gestartet wurde, wird man aufgefordert, die Datendiskette einzulegen.

Nur beschränkt durch die Kapazität der Diskette wäre es theoretisch möglich, 650 Datensätze mit Name, Vorname, Straße, Wohnort und Telefonnummer einzutragen. Namen dürfen leider nicht mehrfach vorkommen, da sie nicht unterschieden werden können. Jeder Datensatz wird unmittelbar nach der Eingabe über den Kanal # 2 zur Floppy übertragen und in der Datei, deren Name vorher mit »Demo« definiert wurde, gespeichert.

Die eingegebenen Datensätze können anschließend bearbeitet oder nach bis zu acht Kriterien durchsucht werden. Zum Auswerten der Datensätze definiert man Suchbegriffe, indem man zum Beispiel »1 München« eingibt. Anschließend kann man mit dem Kriterium »1« alle Adressen, in denen das Wort »München« vorkommt, suchen und zur Bearbeitung ausgeben lassen. Nachdem man so Mainfile II etwas erprobt hat, sollte man sich das Listing des Demo-Programmes vornehmen. Es ist so klar und übersichtlich geschrieben, daß man die praktische Verwendung aller wesentlichen Befehle sehr schnell versteht (gewisse Grundkenntnisse der Programmiersprache Basic vorausgesetzt). Die klare Gliederung ergibt sich insbesondere durch die hier konsequent benutzte Unterprogrammtechnik.

Mainfile II benutzt die binäre Datenspeicherung: Der zuerst eingegebene Datensatz wird als Vater bezeichnet. Der Vater kann zwei Söhne haben. Ein Sohn ist dabei alphabetisch kleiner, der andere alphabetisch größer als der Vater. Entsprechend kann jeder Sohn wieder Vater von zwei eigenen Söhnen sein. Beim Suchen hangelt sich Mainfile II dann durch den so erstellten Binärbaum. Selbstverständlich ist es bei diesem Anordungsprinzip nicht sinnvoll, Datensätze alphabetisch geordnet einzugeben, der Suchbaum würde entarten, da immer nur »große Söhne« angelegt würden.

## Befehlssatz:

**&CREATE** legt eine Mainfile II-Datei auf der Diskette an
**&MAINFILE** aktiviert die Userbefehle
**&PROTECT** schützt ein File vor dem Löschen mit dem DOS-Befehl SCRATCH
**&UNPROTECT** hebt den Löschschutz auf UAPPEND ermöglicht das Anhängen weiterer Daten an einen schon bestehenden Datensatz UBACK sucht den alphabetischen Vorfahr UEND beendet einen Schreibvorgang in eine Datei
**UFIND** sucht einen mit seinem Namen bezeichneten Datensatz
**UHELP** gibt den Namen, Track und Sektor des aktuellen Datensatzes aus
**UINITIALIZE** versetzt das Laufwerk in seinen Einschaltzustand
**UJOKER** definiert einen Testjoker, der beim Suchen überlesen wird
**UKEY** ermöglicht die Definition von bis zu acht Suchtexten
**UMOVE** bewirkt ein Lesen des Datenblockes durch Angabe des entsprechenden Zeigers UNEXT sucht den alphabetischen Nachfolger UOFF schaltet die User-Befehle ab und versetzt das Laufwerk in den Grundzustand
**UPOS** gestattet Direktzugriff durch Angabe von Track und Sektor
**USCRATCH** löscht Datensätze
**UTEST** testet den aktuellen Datensatz auf Name und Suchbegriffe
**UVALIDATE** belegt die von Mainfile II benutzten Blöcke
**UWRITE** legt einen neuen Datensatz an oder überschreibt einen alten

Mainfile II kann in jeder Programmiersprache, die Kommandos an die Floppy zuläßt, eingesetzt werden. An den relevanten Stellen ist nur der entsprechende Befehl einzugeben.

### Fazit:

Mainfile II ist für alle fortgeschrittenen Basic-Programmierer empfehlenswert, die ein schnelles und komfortables Hilfsmittel zur Programmierung von Datenverwaltung suchen. Es muß aber an dieser Stelle vor dem nicht nur für Anfänger teilweise unverständlichen und lückenhaften Handbuch gewarnt werden. (Um ein erstes Arbeiten mit dem Programm überhaupt erst möglich zu machen, müssen die Makrobefehle auf eine eigene Diskette kopiert werden.) Weiterhin sollte der Käufer bereits über umfangreiche Programmkenntnisse verfügen. Der Sinn von Mainfile II besteht darin, sich seine eigenen Datenverwaltungen zu programmieren.

(Dieter Hein/tr)

Info: Mainfile II, GES-Computer, Steinheimer Straße 22, 6450 Hanau. Unverbindliche Preisempfehlung: 98 Mark

# Trends \[158\]

In Deutschland wird der Jugendschutz jetzt auch bei Software sehr ernst genommen. Im August setzte die Bundesprüfstelle für jugendgefährdende Schriften sieben Spiele auf den Index. Was bedeutet dies?

Für indizierte Spiele darf nicht geworben werden. Weiterhin dürfen diese Spiele nicht mehr an Minderjährige verkauft oder ihnen zugänglich gemacht werden.

Die jetzt indizierten Spiele sind schon relativ alt, aber einmal in Gang gesetzt, wird die »schwarze Liste« wohl sehr schnell wachsen. Besonders der Versandhandel wird schwer betroffen. Wie soll man in dieser Branche Spiele anbieten, ohne werben zu dürfen?

Die Meinungen über die Entscheidung der Prüfstelle sind geteilt. Über eine Indizierung von Spielen wie zum Beispiel »Beach Head II« braucht man nicht zu diskutieren. Doch sollte sich die Indizierung so ausweiten, daß jedes Spiel, in dem man in irgendeiner Form schießen muß, auf die »schwarze Liste« kommt, hat man wohl am Ziel »vorbeigeschossen«.

# Preisbrecher \[158\]

Ganz im Trend zur preiswerten Software liegen die Angebote von Quellesoft, einer neuen Abteilung des Großversandhauses Quelle. Unter diesem neuen Label gibt es Software zu sehr niedrigen Preisen. So wird ein Software-Paket angeboten, das sechs Spiele beinhaltet (unter anderen »Decathlon« und »Hunchback II«) und nur knapp 30 Mark kostet, sowie ein deutsches Actionadventure für nur 10 Mark.

Mit diesen Billig-Angeboten möchte sich nun auch Quelle einen Anteil am Softwaremarkt sichern. Der Vertrieb soll auf zwei unterschiedliche Arten erfolgen. Spiele, bei denen man vermutet, daß sie »Dauerbrenner« werden, sollen im Katalog ins Angebot kommen. Sie sind dann im Versand erhältlich. Alle anderen Programme sind nur in den einzelnen Quelle-Niederlassungen zu bekommen.

In Zukunft will die Quellesoft-Abteilung nur noch Programme vertreiben, die exklusiv bei Quelle zu bekommen sind.

Ob es auch weiterhin bei so niedrigen Preisen bleiben kann, muß sich erst erweisen. Auf jeden Fall dürfte es sich bei diesen Preisen für Raubkopierer nicht mehr lohnen, sich mit den Programmen zu beschäftigen. (rg)

# 50x »Elite« zu gewinnen \[158\]

In der Ausgabe 9/85 stellten wir Ihnen das Spiel »Elite« vor. Hier noch einmal eine kurze Zusammenfassung: Es handelt sich bei Elite um ein dreidimensionales Weltraum-Abenteuerspiel der Spitzenklasse. Die Aufgabe besteht hauptsächlich darin, in acht Galaxien mit über 2000 verschiedenen Planeten Handel zu treiben, um möglichst viel Geld zu verdienen. Dies ist nicht so einfach, da überall Gefahren wie zum Beispiel Piraten lauern. Wenn Sie erfolgreich sind, werden Sie in Ihrer Rangstufe hoch gesetzt. Der höchste zu erreichende Rang ist »Elite«. Auf dem optimalen Weg benötigen Sie mindestens 89 Stunden, um diesen Rang zu erreichen.

In dieser Ausgabe verlosen wir 50 Exemplare der deutschen Elite-Version, die uns vom englischen Hersteller Firebird und der deutschen Vertriebsfirma Rushware zur Verfügung gestellt wurden. Um sich an dieser Verlosung zu beteiligen, müssen Sie nur die drei unten aufgeführten Fragen beantworten.

Senden Sie Ihre Antwort an:
Markt & Technik Verlag AG
Redaktion 64'er
»Elite-Verlosung«
Hans-Pinsel-Str. 2
8013 Haar bei München

TODO ASIDE

Wenn Sie sich an der Verlosung der 50 Elite-Exemplare beteiligen wollen, beantworten Sie bitte folgende Fragen. Die Antworten senden Sie bitte an die oben erwähnte Adresse.

1.	Wieviele Planeten können Sie mit »Elite« anfliegen?
2.	Welches ist der höchste Rang, den Sie in diesem Spiel erreichen können?
3.	Wie lange benötigen Sie für die Lösung, wenn Sie den optimalen Lösungsweg nutzen?

Bitte beachten Sie den Einsendeschluß: 15. Oktober 1985. Nach diesem Termin eingehende Postkarten können leider nicht mehr berücksichtigt werden.

# Rescue on Fractalus \[158\]

Wieder einmal gilt es, eine Invasion von Außerirdischen abzuwehren. Die dafür ausgewählten Raumpiloten haben allerdings ein kleines Problem. Die Gegner, Jaggies genannt, haben sich auf einem der schlimmsten Planeten des Universums, Fractalus, verschanzt. Fractalus ist ein zerklüfteter Gebirgsplanet mit giftiger Säure-Atmosphäre. Die Raumpiloten, die die Jaggies vernichten sollten, sind bei ihrem Einsatz abgeschossen worden. Sie warten auf der Planetenoberfläche auf ihre Rettung. Und ohne die Raumpiloten sind die Chancen eines Siegs gleich Null. Soweit zur Rahmenhandlung.

Hier setzt nun der Spieler ein. Mit einem Spezialgleiter soll er die Piloten einsammeln und im Mutterschiff abliefern. Daß die Jaggies dabei nicht tatenlos zusehen, ist wohl klar. So erwarten den Spieler Laser-Gefechtsstationen, fliegende Bomben und als Piloten getarnte Jaggies.

Die Ausführung des Spiels ist rundum gelungen. Eine gute, aber etwas langsame 3D-Grafik zeigt die Gebirgslandschaft, Angreifer und hervorragend animierte Piloten. Die Soundeffekte sind spärlich, aber sehr gut. Die Auftaktmusik ist guter Durchschnitt.

Rescue on Fractalus ist ein gut gemachtes Action-Spiel mit neuen Ideen und guten Effekten.

Ein wichtiger Hinweis: Dieses Spiel läuft noch nicht im C 64-Modus des C 128!

(bs/rg)

# Boulder Dash II \[159\]

Boulder Dash-Fans dürfen sich freuen: MicroFun hat endlich ein Folgespiel produziert. Ähnlich wie der Championship Loderunner für Loderunner-Fans, ist Boulder Dash II ebenso speziell für Personen gedacht, die den ersten Teil schon ausgiebig gespielt haben. Die Levels wurden noch wesentlich aufwendiger gemacht als die des ersten Teils. Was bedeutet: Mehr denken, schneller spielen und weniger Fehler machen.

Für diejenigen, die Boulder Dash noch nicht kennen: Ziel des Spiels ist es, Juwelen aufzusammeln und den Level lebend zu verlassen. Behindert wird man von fallenden Steinen, explodierenden Schmetterlingen (die nach der Explosion zu Juwelen werden), pulsierenden Vierecken (die einen Verfolgungsdrang zu haben scheinen) und noch einigen anderen Dingen.

Im Vergleich zum ersten Teil hat Boulder Dash II einige neue Elemente, zum Beispiel Wände, die nach links und rechts expandieren, bis sie an den Rand oder ein Hindernis stoßen. In Boulder Dash II gibt es Levels, in denen nur ganz bestimmte Lösungssysteme funktionieren. Das soll nicht bedeuten, daß man nicht mehrere Lösungswege benutzen kann. Aber zuerst muß man eben ein ganz bestimmtes System herausfinden, mit dessen Hilfe man sich dann die Lösung erarbeitet.

Ein Muß für Boulder Dash-Fans!

(M. Kohlen/rg)

# Nick Faldo Plays the Open \[159\]

Nick Faldo heißt einer der weltbesten Golfspieler. Sie als Nick Faldo müssen nun zeigen, was ein guter Golfspieler kann. Als Kurs wurde der »Royal St. George’s Golf Club« für das Spiel übernommen.

»Nick Faldo Plays the Open« ist ein gutes Golfspiel. Alle Schwierigkeiten der Originalgolfstrecke sind in dies Spiel eingebaut. Die Windstärke ist nicht nur miteinberechnet, sondern wechselt ständig und ist wirklichkeitsgetreu. Wählbar sind die verschiedenen Schläger, die Stärke des Schlags, die Richtung und das Loch, das man anzuspielen wünscht. Hat man das alles ausgewählt, so geht es an den Schlag selbst: Man sieht den Caddy den entsprechenden Golfschläger reichen, und der Spieler schlägt ab. Während der Ball fliegt, scrollt das Spielfeld mit. Das Spielfeld ist etwa 900 Bildschirme groß. Auf Wunsch kann natürlich eine Gesamtübersicht angesehen werden, die dann den gesamten Golfplatz auf dem Bildschirm darstellt.

Trotz der vielen Auswahlmöglichkeiten ist keine Tastatursteuerung notwendig, denn durch ein gutes Auswahlmenü kann man alle Optionen mit dem Joystick einstellen.

»Nick Faldo Plays the Open« ist ein Spiel, das auch über längere Zeit hinweg Spaß machen kann. Die Grafik ist ansprechend, auf den spärlichen Sound braucht man angesichts des interessanten Spiels eigentlich nicht zu achten.

(M. Kohlen/rg)

# Thing on a Spring \[159\]

Es ist mal wieder ein Held im Kampf gegen das Böse unterwegs. Der Bösewicht hat alle Schätze der Welt in seine unterirdische Fabrik gehext. Unserem Helden ist es gelungen, in diese Fabrik einzudringen. Der Held ist übrigens kein Mensch, sondern ein »Thing on a Spring«, ein »Ding auf einer Feder«. Sein Ziel ist natürlich die Vernichtung des Bösewichts. Auf dem Weg zu dieser Heldentat müssen insgesamt neun Puzzleteile eingesammelt werden. Zusammengesetzt geben sie einen Hinweis und das »Ding auf einer Feder« kann die versteckten Schätze wieder zusammentragen. Mit Hilfe der einzelnen Schätze erlangt er verschiedene Fähigkeiten. Der erste erlaubt das Benutzen der Lifte, mit einem weiteren kann er die Teleporter ausnutzen.

Zum Hüpfen braucht das Ding Öl, um seine Feder zu schmieren. In jedem Raum ist ein Ölbehälter zu finden. Doch er muß sich das Öl gut einteilen, um sein Ziel zu erreichen.

Auf dem Weg zum Bösewicht bleiben dem Spieler zwei Alternativen: erst denken, dann handeln oder einfach ausprobieren. Aber meist kommt man mit etwas Überlegen schneller ans Ziel.

Die schöne Grafik, verbunden mit einem unvergleichlichen Sound, machen aus diesem Spiel ein Erlebnis. Thing on a Spring ist nicht einfach nur ein Hüpfspiel, es ist auch ein logisches Puzzle, das den Spieler zum Denken zwingt

(Manfred Kohlen/rg)

# Directory-Manipulationen II \[163-164\]

> Wollen Sie nicht, daß jemand unbefugt Ihre Proqrammsammlung benutzt oder kopiert? Schützen Sie doch einfach Ihr Directory! Wir zeigen Ihnen, wie man's macht.

In der 64’er, Ausgabe 6/85, berichteten wir zum ersten Mal über Manipulationen an Directories. Die Resonanz auf diesen Artikel war sehr groß. Es kamen sowohl neue Tipsbei uns an, wie auch Verfahren zur Überwindung der schon vorgestellten Manipulationen. Beides wollen wir Ihnen nicht vorenthalten. Deswegen also einiges mehr über Directories und deren Manipulation. Alles, was Sie an Handwerkszeug benötigen, ist ein Diskettenmonitor wie beispielsweise den aus der 64’er, Ausgabe 8/85.

## Mit dem Fragezeichen überlisten

Sehr ausführlich haben wir über Tricks berichtet, die mit dem Gänsefüßchen zusammenhängen. Ein Gänsefüßchen im Filenamen sorgt für Verwirrung, weil es sich ja nicht direkt mit dem LOAD-Befehl eingeben läßt. Floppy-Experte Karsten Schramm machte uns aber auf das Fragezeichen, das zweite, selten benutzte Jokerzeichen der 1541 aufmerksam. Will man ein mit Gänsefüßchen im Filenamen gesichertes Programm laden, dann benutzt man beim LOAD-Befehl einfach das Fragezeichen. Anstelle von »LOAD " 64 " CHR$(34)" ER ", 8« funktioniert also auch »LOAD "64?ER",8«. Ähnlich kann man natürlich vorgehen, wenn Grafikzeichen oder Steuercodes in den Filenamen untergebracht worden sind. Ein bekanntes Beispiel sind die auf Diskette gespeicherten Bilder des Koala-Painter mit dem reversen Pik im Filenamen. Auch hier leistet das Fragezeichen gute Dienste.

## Endlose Directories

Die Ladezeit für ein Directory beträgt normalerweise nur einige Sekunden. Das ändert sich schlagartig, wenn man ein Directory unendlich lang macht. Wer ein solches endloses Directory mit dem LOAD-Befehl laden will und nicht nach mehreren Minuten entnervt die STOP-Taste drückt, der wird mit netten optischen Effekten und einem Systemabsturz belohnt. Spätestens dann, wenn der $D-Bereich (I/O-Bausteine, VIC, etc.) überschrieben wird, spielt Ihr Computer nicht mehr mit. Wer den Ladevorgang unterbricht, kann mit dem normalen LIST-Befehl das Directory nicht lesen, da die Basic-Zeiger nicht richtig gesetzt werden. Ein Maschinensprachemonitor oder ein RENEW (OLD) können die Filenamen aber sichtbar machen. Trotzdem ist der Verblüffungseffekt groß, wenn ein einfacher LOAD-Befehl, den man jeden Tag benutzt, zum Systemabsturz führt.

Doch wie erzeugt man ein endloses Directory? Benötigt wird nichts weiter als ein einfacher Disk-Monitor. Wenn Sie das Directory auf der Spur 18 mitverfolgen, stellen Sie fest, daß die beiden ersten Bytes des letzten Directoryblocks $00 und $FF lauten.

Ändern Sie einfach diese beiden Bytes auf »12 01« (hexadezimal). Der letzte Directoryblock zeigt nun auf den ersten Directoryblock. Das Directory befindet sich jetzt sozusagen in einer Endlosschleife: Ist es zu Ende, geht es gleich wieder von vorne los. Eine recht amüsante Sache, die übrigens auch bei professioneller Software häufig zu finden ist.

## Ein Directory zieht um

Beim folgenden Trick könnte man auch von »multiplen« (mehrfachen) Directories sprechen, der Begriff »Umzug« ist allerdings viel anschaulicher. Den Effekt zu beschreiben, der beim Listen von umgezogenen Directories auftritt, ist praktisch unmöglich, da sich ein umgezogenes Directory durch fast nichts von einem normalen unterscheidet. Versucht man aber, eines der weiter hinten gelegenen Programme zu laden, beispielsweise das zehnte, dann passiert alles mögliche. Vom »FILE NOT FOUND ERROR« über den »OUT OF MEMORY ERROR« bis hin zum Systemabsturz. Allerdings lassen sich die ersten acht Files ganz normal laden und starten. Diese acht Files laden nun Programmteile nach, die entweder nicht von Hand geladen werden können, weil dann oben beschriebene Effekte eintreten, oder gar nicht im Directory stehen! Was ist passiert? Ein Blick mit dem Diskettenmonitor offenbart folgendes: Der erste Directoryblock (18,1) weist nicht auf den normalerweise zweiten Directoryblock (18,4), sondern auf einen anderen, beispielsweise 18,5. Trotzdem steht in 18,4 ein vernünftiger Teil des Directorys. Dieser wird normalerweise aber niemals gelesen. Das Ladeprogramm, das auf diese Teile des Directorys zugreifen will, muß vor dem Zugriff den Zeiger in 18,1 von 18,5 auf 18,4 ändern. Dann ist das Directory so, wie es sein sollte. Nach dem Zugriff wird der Zeiger dann wieder sofort auf das Dummy-Directory, das keinerlei Funktion außer der Verwirrung hat, zurückgestellt. Es existieren also zwei unterschiedliche Directories auf der Diskette, wobei das »echte« immer nur nach einer Vorbehandlung der Diskette erreichbar ist.

Wie man so ein Dummy-Directory erstellt? Nichts einfacher als das: Kopieren Sie mit einem Disketten-Monitor Directory-Blöcke von anderen Disketten auf freie Blöcke der zu schützenden Diskette und gleichen Sie die Zeiger an. Der Begriff »Umzug« ist deswegen treffend, weil man sich ja nicht nur auf die Spur 18 beschränken muß: Der Zeiger des ersten Blockes kann beispielsweise auf 1,1 zeigen, das Directory (oder der Dummy) geht also auf der Spur 1 weiter, wo man es nicht vermutet und somit auch mit einem Diskmonitor nicht so leicht findet (Wer sucht schon alle 683 Blöcke einer Diskette nach einem Directory ab?).

Wer jetzt besonders gemein zu seinen lieben Mitmenschen sein will, der kann das Directory zum Laufwerks-Killer umgestalten. Man kombiniert dazu den Umzugtrick mit dem des endlosen Directorys: Der erste Directoryblock verweist auf 1,1, dieser verweist auf 35,1 und der wieder zurück auf 1,1. Die Folge: Beim Ladeversuch des Directories rast der Schreib-Lese-Kopf wie wild zwischen den Spuren 1 und 35 hin und her. Bis zu über zweihundert Mal kann das gehen, betätigt man vorher nicht die STOP-Taste. Danach erhält man dann wieder den schon bekannten Systemabsturz. Warnung! Mit dieser Methode kann man die Laufwerksmechanik überlasten und somit beschädigen!

## Geheimnisvolles Leerzeichen

Mit einem Leerzeichen kann man ganz verrückte Sachen anstellen. Es geht hier allerdings nicht um das Leerzeichen, das man bei Druck auf die SPACE-Taste erhält, sondern um seinen nahen Verwandten: SHIFT-SPACE. Optisch lassen sich die beiden nicht auseinanderhalten. Nur durch ihre ASCII-Codes, 32 für das normale und 160 für SHIFT-SPACE, unterscheiden sie sich. Wenn es aber um Directories geht, dann erhält SHIFT-SPACE eine tragende Bedeutung, die es weit über das normale Leerzeichen hinaushebt. Um sich die fatalen Wirkungen von SHIFT-SPACE vor Augen zu führen, sehen Sie sich doch einmal das Directory in Bild 1 an. Das sieht alles so bekannt aus, werden Sie sagen. Richtig: Ähnliche Effekte lassen sich auch mit einem Gänsefüßchen als erstem Buchstaben im Filenamen erzielen. Dummerweise lassen sich diese Programme aber nicht mit »LOAD CHR$(34)"name",8« laden. Und sogar das Fragezeichen als Ersatz für den ersten Buchstaben versagt! Was geht hier vor?

Ein Blick mit einem Disk-Monitor offenbart das Geheimnis: Alle Filenamen beginnen mit SHIFT-SPACE. Normalerweise werden Filenamen, die kürzer als 16 Buchstaben sind, mit SHIFT-SPACE aufgefüllt. Findet das DOS beim Übertragen des Directory nun ein SHIFT-SPACE, denkt es, daß der Filename somit zu Ende ist und sendet ein Gänsefüßchen an den Computer. Nachfolgende Zeichen werden aber nicht ignoriert. Will man so gesicherte Files laden, dann muß der Befehl »LOAD" SHIFT-SPACE Filenamenrest", 8« lauten. Das Fragezeichen als Joker arbeitet in diesem Fall nicht einwandfrei.

Der Trick funktioniert nicht nur, wenn SHIFT-SPACE der erste Buchstabe ist. Taucht es allerdings mitten im Filenamen auf, dann ist dieser tatsächlich an der entsprechenden Stelle zu Ende. Auf diesem Trick beruhen auch Directories, an deren Filenamen ein »,8,1« angehängt wurde. Dort folgen die entsprechenden ASCII-Codes einem SHIFT-SPACE.

Was man mit dem geheimnisvollen Leerzeichen noch so alles anstellen kann, sollten Sie mit einem Disk-Monitor mal selbst ausprobieren. Nur eines sei noch gesagt: Hinter SHIFT-SPACE im Directory werden Steuercodes nicht mehr in Grafikzeichen umgesetzt, sondern ausgeführt.

## Steuercodes im Filenamen

Manche Leser wollten nach dem ersten Teil wissen, was man mit Steuercodes im Filenamen anfangen kann. Nach einem Gänsefüßchen oder SHIFT-SPACE im Filenamen werden alle gesendeten Steuercodes, deren ASCII-Werte unter 128 liegen, ausgeführt. Hier ein paar Beispiele:

- CHR$(18) - REVERS ON
- CHR$(19) - HOME
- CHR$( 5) - Weiß
- CHR$(28) - Rot
- CHR$(30) - Grün
- CHR$(31) - Dunkelblau
- CHR$(20) - DELETE

Ein Anwendungsbeispiel: Ist ein Filename nur sieben Buchstaben lang, dann kann man ihn wirkungsvoll im Listing verschwinden lassen, wenn hinter den sieben Zeichen des Filenamens ein SHIFT-SPACE und dann acht DELETE-Codes folgen.

Weiterhin lassen sich im Filenamen per Disk-Monitor die beiden verbotenen Jokerzeichen »\*« und»?« einbauen. Ihre ASCII-Codes sind dezimal 42 und 63.

So, damit dürften wir jetzt fast alle Möglichkeiten der Directory-Manipulation ausgelotet haben. Und gleich damit verbunden eine Bitte: Senden Sie uns keinesfalls Programme, die auf diese oder andere Arten geschützt sind. Wir können nur Programme bearbeiten, die LIST-fähig sind, sowohl Directory als auch Programm.

(bs)

# Besser Lernen mit dem Computer \[166\]

> Die Lernsoftware wird immer ausgefeilter. Doch kann sie einen Lehrer ersehen, oder ist sie nur ein Hilfsmittel zum Lernen?

In der heutigen Arbeitswelt kann auf den Computer kaum noch verzichtet werden. Prognosen sagen voraus, daß in der nächsten Zukunft mindestens jeder zweite Arbeitnehmer an seinen Arbeitsplatz mit dem Computer zu tun hat. Die Schulen begannen bereits vor einigen Jahren sich auf diesen Trend einzustellen. Informatikkurse wurden angeboten und die ersten Computer angeschafft. Der Computer hielt Einzug in die Schulen. Doch vom Unterricht über den Computer ist es nicht weit zum Unterricht mit dem Computer.

## Schule, Computer und Lernsoftware

Die »Geschichte« der Lernsoftware begann mit dem Erscheinen der Homecomputer. Bald danach kamen die ersten einfachen Vokabel-Abfrageprogramme. Diese übernahmen nur das reine Abfragen von Vokabeln und ließen in den meisten Fallen keine Doppelbedeutung von Begriffen zu. Mit dem schnell wachsenden Homecomputer-Markt gewann die Lernsoftware immer mehr an Bedeutung. Die Programme wurden verbessert, auf bestimmte Anwendergruppen zugeschnitten und auf viele Lernbereiche ausgeweitet.

Heute kann der Lernwillige auf ein breit gestreutes Lernsoftware-Angebot zurückgreifen (siehe auch unsere Marktübersicht in dieser Ausgabe). Viele der Programme sind von ihrer Themenauswahl auf Schulbücher zugeschnitten. Sie werden von den Schülern meist zu Hause genutzt, um ihre Leistungen in der Schule zu verbessern. In den Schulen selbst wird von dieser Möglichkeit jedoch seltener Gebrauch gemacht. Doch immerhin empfehlen schon einige Lehrer ihren Schülern, die einen Computer besitzen, von dem »Nachhilfelehrer Computer« Gebrauch zu machen.

Zu der Lernsoftware sind in letzter Zeit Simulationsprogramme dazugekommen. Wie schon aus dem Namen ersichtlich ist, werden hier mit dem Computer bestimmte Situationen ausgeführt. Auf Großcomputern sind Simulationen schon lange im Gebrauch. Sie werden zum Beispiel in der Pilotenausbildung und im Flugzeugbau eingesetzt. Für den C 64 bewegen sich diese allerdings noch auf der spielerischen Ebene, wie zum Beispiel »Flightsimulator II« und »Injured Engine«.

## Der Trend

Die Entwicklung der Lernprogramme in der letzten Zeit weist einen deutlichen Weg. Immer besser durchdachte und für bestimmte Anwendergruppen ausgelegte Programme erscheinen. Die grafischen Fähigkeiten des Computers werden gezielt zur Unterstützung des Lernerfolges eingesetzt. So lassen Vokabelprogramme, wie »Superlearning« verschiedene Anfrageformen zu, die vom Lückentext-Diktat bis hin zu Silbenrätseln reichen.

Man kann in puncto Lernsoftware optimistisch in die Zukunft sehen, dann das Lernen wird, Dank dem Computer, immer mehr zum Vergnügen. Nur eines, das kann der Computer Ihnen nicht abnehmen. Lernen, müssen Sie immer noch selbst.

(rg)

# Kurse: Einstieg in die Welt der Computer? \[166-167\]

> Der Weg, seinen Computer kennenzulernen, ist weit. Eine Hilfe sollen hier Computerkurse bieten.

Die verschiedensten Arten von Kursen werden angeboten. Diese reichen von Büchern bis hin zu Computer-Camps. Eine allgemeingültige Antwort, welche Art von Kursen besonders geeignet ist, kann nicht so einfach gegeben werden.

### Die Bücher

Im deutschsprachigen Raum wird eine nahezu unüberschaubare Menge von Büchern zum Thema Computer angeboten. Viele hiervon verstehen sich als Lehrbücher. Bei Büchern für Anfänger wird meist anhand von kleinen Beispielprogrammen auf bestimmte Fähigkeiten und Eigenschaften des jeweiligen Computers eingegangen. Aber leider läßt die Qualität vieler dieser Beispiele oft zu Wünschen übrig. Der Erfolg, auf diesem Weg den Computer kennenzulernen, ist oft gleich Null. Für Fortgeschrittene finden sich im Buchangebot allerdings einige gute Nachschlagwerke.

### Computerkurs auf Diskette

Computerkurse auf Diskette ist eine bisher recht wenig genutzte Art, den Computer kennenzulernen. Uns sind nur drei deutsche Anbieter bekannt, die solche Kurse für Anfänger anbieten. Sie sind gut geeignet, um den ersten Kontakt mit dem Computer herzustellen.

### Computeruntericht an Schulen

Seit einigen Jahren wird an den Schulen Informatik unterrichtet. Dieser Unterricht bietet einige große Vorteile, die bei den bisher aufgeführten Kursen fehlen. Hauptsächlich ist dies der direkte Kontakt zu jemanden, der bei auftretenden Problemen helfen kann und dem Fragen gestellt werden können. Doch zur Zeit gibt es an einigen Schulen noch Probleme. Zum einen mangelt es an Fachkräften, die Informatik unterrichten können. Zum anderen sind dies fehlende Geräte. Wenn für eine Klasse von 30 Schülern nur fünf Computer zur Verfügung stehen, muß der Lernerfolg stark bezweifelt werden.

### Computer-Camps

Mit dem Computer Ferien machen, ist die Devise der Computer-Camps. Über einen Zeitraum von ein bis zwei Wochen wird der erste Kontakt zum Computer hergestellt. Unter fachlicher Anleitung wird man mit dem Computer vertraut gemacht und bis zur Erstellung eigener Programme geführt. Computer-Camps sind auf jugendliche Computer-Neulinge ausgelegt. Ein Computer-Camp für Erwachsene ist uns nicht bekannt.

### Fazit

Den Computer-Kurs, der für jeden gleichermaßen geeignet ist, gibt es zur Zeit noch nicht. Aus dem vorhandenen Angebot muß man sich das heraussuchen, was einem für sich persönlich am geeignetsten erscheint. (rg)


# Roboter selbst gebaut \[167\]

> Mit einem Roboterbausatz können Sie sich jetzt Ihre eigenen Roboter bauen. Wie Sie dies machen, zeigt unser Bericht.

Die in der Industrie eingesetzten Roboter sind oft sehr teuer und ihre Programmierung ist meist schwer zu verstehen. Fischertechnik Computing bietet jetzt einen Roboterbausatz für verschiedene Heimcomputer an. Anhand ihres Aufbaus und ihrer Programmierung lernt man ihre »großen Brüder« in der Industrie zu verstehen. Öffnet man die Verpackung, bekommt man zuerst die von normalen Fischertechnik-Baukästen bekannten Quaderbausteine zu Gesicht. Aus diesen Einzelteilen setzen sich im wesentlichen die verschiedenen Geräte zusammen, die man aus diesem Kasten zusammenbauen kann. Zwei Motoren bilden dabei das Herzstück der einzelnen Roboter.

Weiterhin benötigt man ein Steuerinterface für den C 64, dem auch die Programmdiskette beigefügt ist. Für das Interface braucht man aufgrund des großen Strombedarfs noch ein Netzteil, das das Interface mit der nötigen Zusatzspannung versorgt. Die beiligende Anleitung liefert Anregungen für den Bau von zehn verschiedenen Geräten, die alle über den Computer angesteuert werden. Das sind unter anderem eine Ampelanlage, eine Sortieranlage, ein Sortier-Roboter, ein Roboter, der die Bausteine der Türme von Hanoi transportiert, ein Teach-in-Robot oder ein Plotter.

Der Aufbau muß in der Anleitung anhand von Bildern nachvollzogen werden, was jedoch manchmal etwas Phantasie und ein gutes Sehvermögen erfordert. Dies liegt vor allem daran, daß die einzelnen Aufbauschritte teilweise zu grob unterteilt sind. Hat man das Gerät anhand des Schaltplans verdrahtet und das Interface angeschlossen, so muß nur noch das entsprechende Programm in den Computer geladen werden, damit der Roboter »Leben« eingehaucht bekommt. Die dazugehörige Software ist in Basic geschrieben und baut auf einem Maschinenprogramm — für die Bedienung des Interface — auf. Die Programmierung ist aber sehr einfach, so daß man sich schnell mit ihr vertraut machen kann.

Natürlich ist es auch möglich eigene Geräte zu entwerfen, zu bauen und deren Ansteuerung zu programmieren. Sollten dazu die vorhandenen Bausteine nicht ausreichen, so kann man in Ergänzung auf normale Fischertechnikkästen zurückgreifen.

Wie ist es aber um den pädagogischen Wert dieser Bausätze bestellt! Nun, gerade dadurch, daß man die einzelnen Geräte selbst zusammenbauen muß, fällt es einem leicht, die Arbeitsweise zu verstehen. So ist es zum Beispiel bei der Bewegungssteuerung nicht nur mit dem einfachen Ein-/ Ausschalten der Motoren getan ist. Schließlich muß sich der Roboter auch »Orientieren« können, was über eingebaute Schalter oder Potentiometer möglich ist. Das Interface wertet diese Signale aus und sendet sie an den Computer. Dieser kann dann, wiederum über das angeschlossene Interface, entsprechend reagieren.

Wir hatten das Gerät aufgebaut, das die Bausteine für die Türme von Hanoi bearbeitet. Mit Hilfe eines Potentiometers in der Längsachse kann der C 64 die Position abfragen, damit ist eine mehr oder weniger exakte Positionierung des Roboters möglich. Leichte Ungenauigkeiten machen sich bei diesem Roboter nicht allzu negativ bemerkbar. Beim Plotter allerdings können diese Ungenauigkeiten zu Abweichungen führen, die nicht mehr zu akzeptieren sind.

Dieser Bausatz wurde hauptsächlich für diejenigen zusammengestellt, die mit ihrem C 64 in die Roboterprogrammierung hineinschnüffeln wollen. Mit einem Gesamtpreis von zirka 600 Mark für Grundkasten, Interface und Netzteil, dürfte der Roboterbausatz wohl deutlich über dem liegen, was ein privater Anwender für so ein »Spielzeug« ausgeben kann. Sinnvoll könnten diese Kästen für den Informatikunterricht der Schulen sein. Hier wäre allerdings das Engagement der Lehrer gefragt, die diesen Unterricht sinnvoll aufbauen müssen.

(Christoph Sauer/rg)

Info: Fischer-Werke, Artur Fischer GmbH & Co. KG, Weinhalde 16—18, 7244 Tumlingen/Waldachtal.

# Marktübersicht: Lernsoftware \[168-172\]

> Über 130 verschiedene Lernprogramme sind in Deutschland erhältlich. Diese Marktübersicht bietet Innen eine Auswahl- und Entscheidungshilfe.

Das Lernsoftware-Angebot in Deutschland erstreckt sich hauptsächlich auf den schulischen Bereich. Die Produkt-Palette reicht von Vokabel-Lernprogrammen bis hin zu Programmen über Enzymkinetik. Viele dieser Programme sind auf bestimmte Schulstufen und -klassen ausgelegt. Unsere  Marktübersicht zeigt Ihnen die wichtigsten Merkmale der Programme und bietet so eine Auswahl- und Entscheidungshilfe für den Kauf.

Alle in der Marktübersicht angeführten Daten beruhen auf Herstellerangaben. Die Marktübersicht erhebt keinen Anspruch auf Vollständigkeit.

(rg/og)

# Sie haben gewonnen! \[174\]

> Das Interesse an unserem Umfrage-Preisausschreiben der Ausgabe 6/85 sprengte alle Grenzen - mehr als 12000 Leser beteiligten sich. Gewonnen haben eigentlich alle, obwohl nicht jeder einen PC 10 mit nach Hause nehmen konnte.


In den letzten Wochen und Monaten waren sowohl für unsere Redaktionsassistenz als auch für uns Redakteure die neuesten Teilnehmerzahlen immer wieder Grund zum Staunen. Daß es den meisten nicht nur um die ausgesetzten Preise gegangen ist, zeigen die fast ausnahmslos vollständig ausgefüllten Fragebögen. Die Antworten auf den Fragebögen waren ausführlich, ehrlich und manchmal auch konstruktiv kritisch. Einige Leser sendeten uns sogar, zusammen mit dem Fragebogen, seitenlange Briefe ein. Dies ist für uns vor allem ein Zeichen dafür, daß die Mehrzahl unserer Leser aktiv an der Gestaltung der 64’er teilnehmen möchte. Und das wird berücksichtigt, denn wir nehmen Ihre Meinung ernst. In der größten Umfrageaktionen seit Bestehen der 64’er wurden alle Ihre Wünsche, Vorstellungen und Anregungen erfaßt und statistisch ausgewertet. Es ist unvorstellbar, welche Datenmengen dabei zusammengekommen sind. Die Endauswertung ist ein über 200 Seiten (DIN A 3) starkes Dokument und mußte von einem Cyber-Großcomputer errechnet werden. Wichtigste Erkenntnis daraus ist, daß es den typischen 64’er-Leser nicht gibt. Jeder unserer Leser verwendet den Computer auf seine ganz individuelle Weise. Der Anteil derer, die mit dem Computer mehr als nur spielen wollen, ist dabei außerordentlich hoch. Wir wollen uns aber nicht in Zahlen verlieren. Eines ist auf jeden Fall sicher: Alle Ihre Vorstellungen darüber, wie die 64’er in Zukunft aussehen soll, werden gewissenhaft geprüft. Seien Sie gespannt, vielleicht erkennen Sie Ihre Meinung in den nächsten Ausgaben wieder. Einen Wunsch vieler Leser können wir bereits in dieser Ausgabe erfüllen: Mehr Hardware-Selbstbauanleitungen. Und damit auch die Leser, die nicht in der Lage sind, sich Platinen selbst zu bauen, in den Besitz unserer Veröffentlichungen kommen, gleich noch eine Neuerung. Mit dieser Ausgabe startet der 64’er-Hardware-Bestellservice.

Aber nun wollen wir endlich zu dem Punkt kommen, auf den Sie sicher schon lange gewartet haben: der Bekanntgabe der glücklichen Gewinner der Sachpreise. Unserer Glücksfee Christiane zitterten etwas die Hände (Bild), als sie den Gewinner des über 5500 Mark teuren PC 10 zog.

### Der Gewinner des PC 10 ist:

Herr Martin Romisch, Frankfurt

### Die Diskettenlaufwerke gewannen:
Brigitte Witzer, Ratingen; Georg Hüttinger, Stinglloh; Werner Krüger, Blaustein-Arnegg; Karsten Wenzel, Berlin; RolfBeutner, Bohmte; Bernd Kattein, Sparneck; Holger Pietsch, Wunstorf; Hans-Peter Labude, Dreieich; Hans-Herrmann Arndt, Holzminden; Roland Rohe, Dortmund.

### Je einen Buchgutschein im Wert von 50 Mark erhalten:

Detlef Metze, Andreas Schildbach, Soren Thade Petersen, Peter Hegelbach, Walter Stemmer, Peter Ackermann, Rolf Eckhardt, Christoph Balzer, Thomas Löper, Günter Meißner, Andreas Konrad, Werner Meyer, Christian Ruhl, W.L.M. Vermaegle, Christian Deissinger, Thomas Schäfer, Bernd Sauer, Peter Siegle, Daniel Reinert, Oliver Hertel, Udo Niehoegen, Volkmar Koch, Siegfried Pauer, Jens Thöming, Norbert Büchner, Bernd Bügner, Andre Kurzweg, Michael Weidel, Christian Meller, Georg Isak, Dirk Treppe, Zenek Przechacki, Hartmut Schulz, Sven-Eric Jordt, Helmut Nickl, Andreas Greß, Elmar Kellner, Christian Badry, Christian Patt, Matthias Eiser, Karl Wilhelm Vieten, Thorsten Müller, Thomas Meyer, Bernd Tophoven, Adolf Obenaus, Martin Horstkötter, Alexander Hild, Oliver Herrman, Herbert Niebuhr, Michael Spannuth. Alle Gewinner werden innerhalb der nächsten Tage schriftlich benachrichtigt. Den Gewinner des Hauptpreises laden wir zu uns, nach Haar bei München in die Redaktion ein, um ihm seinen Hauptgewinn zu überreichen.

Herzlichen Glückwunsch allen Gewinnern. Aber auch ein ganz großes Dankeschön an alle die mitgemacht haben. Auch Ihre Teilnahme war nicht umsonst, denn das 64’er ist ein Magazin der Leser, und damit auf dem richtigen Weg. So gesehen gibt es eigentlich nur Gewinner!

Ihre 64’er Redaktion

Wir danken der Firma Commodore, Frankfurt, für die freundliche Stiftung des PC 10 und der Diskettenlaufwerke sowie dem Markt & Technik-Buchverlag, für die Buchpreise.

(aw)

# Programmier-Wettbewerb »Blockgrafik« \[175\]

> 1000 Mark winken bei diesem Wettbewerb. Dabei ist die Aufgabe so einfach gestellt, daß wirklich jeder mitmachen kann, auch wenn er nur minimale Programmierkenntnisse besitzt.

Programmieren ist eine Faszination ganz besonderer Art. Doch immer wieder zeigt es sich, daß viele Leser Probleme haben, sich eine entsprechende Aufgabe zu stellen. Man freut sich regelrecht, wenn jemand zu einem kommt und fragt: »Ich habe ein Problem. Kann Dein Computer das lösen?« Na klar, denken wir, und schon ist man für einige Zeit von der Umwelt abgeschnitten, unterbrochen lediglich von einigen lebenserhaltenden Maßnahmen wie Essen, Trinken etc.

Und wenn das Problem nicht allzu anspruchsvoll ist, kommen wir eines Tages mit einem strahlenden Gesicht und der Lösung aus unserem Einsiedlerdasein zurück und präsentieren unsere geistige Leistung erwartungsvoll einem ewig kritischen Publikum, das keine Ahnung hat von den Mühen, die unser Programmierobjekt entstehen ließen. Doch wir wissen aus eigener Erfahrung, wie wertvoll jedes eingesandte Listing ist. Natürlich treffen wir eine Auswahl, wenn es auf die Suche nach einem veröffentlichbaren Programm geht. Doch mit jedem Programm, das Sie schreiben, gewinnen Sie. Und damit auch eine Aufgabe da ist, denken wir uns eine für Sie aus. Diesmal ist die Aufgabe besonders einfach.

### Die Aufgabe

Bilder in Blockgrafik zu erstellen, verlangt mehr Kreativität als Programmierwissen. Anders als bei der hochauflösenden (HiRes) Grafik brauchen Sie weder den Grafik-Kurs gelesen zu haben noch andere, schwierige Literatur zu verarbeiten. Das einzige, das Sie sollen, ist, mit den Grafiksymbolen auf dem Tastenfeld Ihres Computers zu spielen, bis ein wirklich schönes oder interessantes Bild herauskommt. Ein paar PRINT-Zeilen, gespickt mit Grafiksymbolen und Farbe, garniert vielleicht mit etwas Text, reicht schon. Wollen Sie noch etwas mehr tun, können Sie noch Bewegung mit ins Spiel bringen. Sprites oder andere HiRes-Spielchen sind nicht erlaubt. Und übertreiben Sie bitte nicht bei der Länge des Programms. Wenn Sie Ihr Programm bis zum 30. Oktober 1985 eingeschickt haben, haben Sie alle Chancen, die 1000 Mark zu gewinnen, die auf den Sieger unseres Blockgrafik-Wettbewerbs warten. Schicken Sie Ihr Programm an
Markt & Technik Verlag Aktiengesellschaft,
64’er Redaktion,
Stichwort »Blockgrafik«,
Hans-Pinsel-Str. 2,
8013 Haar bei München

# Wir suchen die Anwendung des Monats \[176\]

Anwendung des Monats, was ist das? Nun, Sie haben einen Commodore 64 oder einen VC 20 und versuchen diesen irgendwie sinnvoll einzusetzen. Unter einer sinnvollen Anwendung versteht die 64’er Redaktion alles, was beispielsweise Programme im häuslichen Bereich bewirken. Es kann sich dabei um die Berechnung der Benzinkosten für Ihren Wagen handeln, um ein eigenes Textverarbeitungsprogramm gehen, sich um die Verwaltung Ihrer Tiefkühltruhe drehen oder ein ausgeklügeltes Telefon- und Adreßregister sein.

Setzen Sie Ihren VC 20/C 64 mehr oder weniger beruflich ein? Auch, oder vor allem, das ist eine sinnvolle Anwendung. Sie führen die Lohn- und Gehaltsabrechnung, Ihre Lagerverwaltung, die Bestellungen auf einem Commodore-Heimcomputer durch? So spezielle Anwendungen wie die Berechnung der Statik von selbstgezimmerten Regalen, von Klimadiagrammen oder Vokabellernprogrammen für den Schulunterricht oder die Zinsberechnung bei Krediten sind ebenfalls Themen, die mehr als konkurrenzfähig sind.

Uns ist die Anwendung des Monats
**500 Mark**
wert.

Schreiben Sie uns, was Sie mit Ihrem Computer machen:

Redaktion 64’er, Aktion: Anwendung des Monats, Hans-Pinsel-Str. 2, 8013 Haar bei München.

# Einmal im Monat gibt es die SUPERCHANCE \[177\]

Diese nicht einmalige Gelegenheit sollten Sie nutzen. Wie? Schicken Sie uns Ihr bestes, selbst erstelltes Programm. Bei der Art des Programms sind wir nicht wählerisch.

Sie haben ein sehr gutes (Schieß-, Knobel-, Denk-, Action-, Abenteuer-)Spiel geschrieben: einschicken!

Sie verfügen über ein komfortables Disketten-Kopier-(Sortier) Programm mit einigen außergewöhnlichen Leistungsmerkmalen: einschicken!

Sie haben das Basic um einige sinnvolle Befehle erweitert: einschicken!

Sie arbeiten mit einem selbsterstellten Textverarbeitungsprogramm, einer eigenen Tabellenkalkulation, einem semiprofessionellen Datenverwaltungsprogramm: einschicken!

Sie zeichnen und konstruieren mit einem selbsterstellten Programm in hochauflösender Grafik: einschicken!
Wir freuen uns über jeden Beitrag und honorieren mit bis zu
** 2000 Mark für das Listing des Monats**

Aus den besten Listings, die veröffentlicht werden, sucht die 64'er-Redaktion einmal im Monat das »Listing des Monats« aus. Alle Listings, die im 64'er abgedruckt sind, werden mit 100 bis 300 Mark honoriert. Die genaue Vorgehensweise beim Einsenden von Listings ist in dem Beitrag »Wie schicke ich meine Programme ein?« in verschiedenen Ausgaben beschrieben.

TODO ASIDE

Schicken Sie Ihr Listing an: Redaktion 64’er, Superchance: Listing des Monats, Hans-Pinsel-Str. 2, 8013 Haar bei München.

# Fehlerteufelchen \[178\]

### Auf zu neuen Welten, Ausgabe 7/85, Seite 44

Leider treten in Verbindung mit manchen C 64 und dem IEEE-Interface Probleme auf. Statt des 4069-Bausteins sollte man dann einen 7405 oder 7406 (keine LS-Typen!) verwenden. Die Software ist in folgenden Punkten zu ändern: Ab Speicherstelle $FDDD folgende Bytefolge eingeben: $ AD A6 02 F0 00 A9 04 85 02 A9 25 8D 04 DC A9 40 4C F3 FD DC Verwenden Sie dazu am besten ein Monitor-Programm.

Die so geänderte Software wird wieder in ein 2764-EPROM gebrannt und in den Computer eingesetzt.

### Ausgabe 7/85-MSE-Listing Terminalprogramm

Bei den von uns verschickten Seiten mit dem MSE-Listing des Programms »Terminalprogramm« ist bei der Montage ein Fehler aufgetaucht. In den Listings »Terminal« und »Editor« müssen die Zeilen $2081 bis $22b9 ausgetauscht werden. Das bedeutet, daß dieser Zeilenblock aus dem Listing »Terminal« in das Listing »Editor« geschrieben werden muß und umgekehrt.

### Sound-Machine, Ausgabe 9/85, Seite 23

Im Listing 2, Noteneingabe, muß die Zeile 1140 »SYS 53027« lauten. Wird dies nicht korrigiert, stürzt der Computer beim Befehl »Save« ab.

Die Zeile 1890 muß ebenfalls »SYS 53027« heißen, der REM-Befehl entfällt.

### Mousetrap, SH3 »Spiele«, Seite 57

In der »Hex-Eingabe-Routine« verhindert die Zeile 155 das ordnungsgemäße Funktionieren der Lade-Routine. Bitte ersetzen Sie die Zeile 155 duch »155 REM«.

# Wir suchen die ersten 128er Profis \[178\]

Der neue C 128 ist seit einigen Wochen im Handel. Vielleicht gehören Sie ja zu den ersten Besitzern dieses vielseitigen und leistungsfähigen neuen Computers und haben schon erste, tiefergehende Erfahrungen damit gesammelt oder interessante Programme dafür geschrieben?

In diesem Fall sollten Sie Ihre Erfahrungen nicht für sich behalten. Tragen Sie doch einfach mal zusammen, was Sie über den C 128 herausgefunden haben, das nicht im Handbuch steht. Wir werden alle guten Tips und Tricks zu diesem Computer sowie die besten Programme dafür im 64’er-Magazin veröffentlichen.

Bitte vermerken Sie bei allen Zusendungen, mit welcher Gerätekonfiguration Sie arbeiten und ob sich Ihr Beitrag auf den 128-Modus oder auf den CP/M-Modus bezieht. Beiträge für den C 64-Modus schicken Sie bitte nicht unter dem Stichwort C 128, sondern als normale C 64-Programme oder Tips ein. Bei Programmeinsendungen legen Sie bitte unbedingt eine Diskette/Kassette mit Ihrem Programm sowie eine möglichst ausführliche Beschreibung bei. Selbstverständlich werden alle abgedruckten Beiträge abgemessen honoriert — es winken bis zu 2000 Mark, wenn Ihr Programm Listing des Monats wird.

Schicken Sie Ihre Tips und Programme an
Markt & Technik
Verlag Aktiengesellschaft
Redaktion 64’er
Kennwort: C 128
Hans-Pinsel-Str. 2
8013 Haar bei München

# Vorschau \[180\]

## Druckertest

Vier neue Drucker testen wir für Sie: Epson JX-80, FX-85, Seikosha SP 1000 und den MPS 803 von Commodore. Lesen Sie, was den JX-80 außer Farbdruck noch auszeichnet und den FX-85 vom Spitzenreiter FX-80 unterscheidet. Daß Seikosha nicht nur preiswerte, sondern auch gute Drucker baut, beweist der SP 1000.

## Alles über Joysticks

In der nächsten Ausgabe erfahren Sie alles über die »Steuerknüppel«, die zum unentbehrlichen Eingabegerät bei Spielen geworden sind. Neben einem Vergleichstest der wichtigsten Joysticks finden Sie eine Marktübersicht, die auch Trackballs und Lightpens berücksichtigt.

## Der C 128 im 64’er-Magazin

Mittlerweile sind die ersten speziell an C 128 angepaßten CP/M-Programme erhältlich. Und das zu sensationellen Preisen von unter 200 Mark. Wir haben zwei der interessantesten Programme für Sie getestet: WordStar und Turbo Pascal. Beides sind professionelle Programme.

## Textverarbeitung

Paper Clip erhebt den Anspruch, ein professionelles Textverarbeitungsprogramm zu sein. Wir haben diesen Anspruch getestet und sind auf einige bemerkenswerte Sonderfunktionen gestoßen. Kann sich Paper Clip, in Amerika lange Zeit Nummer eins, gegen Vizawrite, Textomat und Startexter behaupten? Lesen Sie unseren Test.

## Computer-Grafik

Farbige Grafiken aus dem Wunderland der Mathematik. Sie erfahren, wie sich mit einfachen Mitteln komplizierte Computer-Grafiken erstellen lassen, die bis jetzt nicht, oder nur mit großem Aufwand, auf einem Heimcomputer möglich waren. Die fertigen Bilder lassen sich speichern und als Hardcopy mit Hi-Eddi drucken.

## Lyrik-Generator

Ein Basicprogramm macht Ihren Computer zum Dichter:
»Goldene Ränke zerschmettern eine Hoffnung —
Das Auge schreit —
Da immer wieder pulsierende Welten verwehen, stirbt das Universum.«

Eines von Millionen von Gedichten, die der C 64 in sekundenschnelle für Sie schreibt, wenn Sie dieses Programm haben. Wie Sie leicht an unserem Beispiel feststellen können, sind die Lyrik-Ergüsse des C 64 keine Aneinanderreihung von Wörtern, sondern syntaktisch und semantisch korrekte Sätze. Inwieweit allerdings diese Elektronik-Lyrik sinnvoll ist, entscheidet der . Zufall. Lassen Sie sich überraschen. Wir sind allerdings davon überzeugt: Das ist die Anwendung des Monats.

## Spiele-Trainer

Kommen Sie bei ihrem Lieblings-Spiel nicht über das erste Bild hinaus? Werden Sie von ihrem Gegner stets niedergemetzelt, aufgefressen oder abgeschossen? Suchen Sie verzweifelt nach dem rettenden POKE, konnten ihn bisher aber nicht finden? Dann sollten Sie unseren Spiele-Trainer abtippen und vor dem Kampf laden. Die Angriffe der Gegner können Ihnen dann nichts mehr anhaben, denn Sie sind dagegen immun.

## Schnellere 1541

Zurück zum Ursprung. Mit unserem Umbausatz verwandeln Sie die 1541 in ein 2031-Laufwerk mit Parallelübertragung, dem Vorgänger der 1541. Für weniger als 100 Mark können Sie sich einen Floppy-Speeder bauen, der die Geschwindigkeit fast aller Disketten-Optionen vervielfacht.

## Außerdem ...

- 64’er Extra. Diesmal alle Kernalroutinen
- Die ersten Listings für den C 128
- Verbesserungen zu Hypra-Ass und SMON
- PC 128: Grafik im 80-Zeichen-Modus
- und wieder viele Tips und Tricks für den C 64 und C 128.
