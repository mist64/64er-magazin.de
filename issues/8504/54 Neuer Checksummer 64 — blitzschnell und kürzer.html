<!DOCTYPE html>
<html lang="de">

<head>
    <title>Neuer Checksummer 64 — blitzschnell und kürzer</title>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="../style.css">
    <meta name="author" content="Frank Lonczewski, gk">
    <meta name="64er.issue" content="4/85">
    <meta name="64er.pages" content="54-56">
    <meta name="64er.head1" content="Anwendung">
    <meta name="64er.head2" content="C 64/VC 20">
    <meta name="64er.toc_category" content="Listings zum Abtippen|Anwendung">
    <meta name="64er.id" content="checksummer">
</head>

<body>
    <article>
        <h1>Neuer Checksummer 64 — blitzschnell und kürzer</h1>
        <p class="intro">Der Checksummer überprüft jede eingegebene Basic-Zeile und erspart Ihnen deshalb eine langwierige Fehlersuche. Und neu ist der Checksummer, weil die Initialisierung zirka einhundertmal schneller ist als die alte.</p>

        <p>Der Checksummer 64 ist ein kleines Maschinenprogramm, das, wenn es aktiviert ist, Sie sofort davon unterrichtet, ob Sie die jeweilige Programmzeile korrekt eingegeben haben.</p>

        <ol>
            <li>Tippen Sie den Basic-Lader sorgfältig ein. Es gibt zwei Versionen: Eine für den Commodore 64 und eine für den VC 20.</li>
            <li>Bevor Sie »RUN« eingeben, speichern Sie den Basic-Lader bitte erst ab, denn wenn Sie zum Beispiel einen Fehler bei den eingetippten POKE-Anweisungen gemacht haben, ist es möglich, daß der Rechner aussteigt. Heben Sie sich den abgespeicherten Checksummer 64 auf — Sie werden ihn immer wieder brauchen, wenn Sie ein Basic-Programm aus dem 64’er eintippen wollen.</li>
            <li>Nach Initialisierung des Maschinenprogramms ist der Checksummer 64 aktiviert. Er steht innerhalb des Betriebssystems und verbraucht kein einziges Byte Speicherplatz. Es sei hier für Interessierte gesagt, daß selbst alle Sprungvektoren unverändert bleiben, das Programm also mit einer Vielzahl von Programmier-Spracherweiterungen problemlos zusammenarbeitet. Achten Sie aber darauf, daß bestimmte Spracherweiterungen das hinter dem ROM liegende RAM für Hires-Grafiken benutzen. Wird zum Beispiel eine Hires-Grafik von Simons Basic aus angesprochen, so wird der Checksummer 64 zerstört.</li>
            <li>Wenn Sie den Checksummer 64 zwischenzeitlich nicht benutzen, können Sie ihn jederzeit mit »POKE 1, 55« desaktivieren. Auch durch Drücken der Run-Stop- und der Restore-Taste wird der Checksummer 64 desaktiviert. Wollen Sie, daß der Checksummer 64 auch noch nach Drücken dieser Tastenkombination erhalten bleibt, so geben Sie bei aktiviertem Checksummer 64 »POKE64982,53« ein. Der Checksummer 64 ist dann nur durch »POKE1, 55« abschaltbar.<br>Wollen Sie den Checksummer 64 wieder einschalten, so geben Sie bitte »POKE 1, 53« ein.<br>Das Maschinenprogramm bleibt solange erhalten, bis der Computer ausgeschaltet, oder wenn von anderen Programmen auf das hinter dem ROM liegende RAM zugegriffen wird.</li>
            <li>Eine Checksumme wird nur dann ausgegeben, wenn der Commodore 64 (VC 20) eindeutig erkennt, daß Sie eine Zeile, bestehend aus der Zeilennummer und zumindestens einem alphanumerischen Zeichen, eingegeben haben. Ansonsten reagiert der Commodore 64 normal.</li>
        </ol>


        <p><strong>Hinweis</strong>: Wenn Sie bei aktivertem Checksummer 64 ein Programm mit »LOAD« in den Speicher holen, wird auch eine Checksumme ausgegeben. Dies liegt jedoch an rechnerinternen Routinen und hat keine weitere Bedeutung, stellt insbesondere keine Gefahr für das geladene Programm dar, da alle Pointer richtig gesetzt werden.</p>

        <p>Nach Eingabe von RUN wird zunächst einmal das ROM in das RAM des Commodore 64 verschoben, wonach der Basic-Interpreter modifiziert wird. Dadurch hat man den Vorteil, trotz einer zusätzlichen Routine das gesamte RAM des Rechners zur Verfügung zu haben. Nach ordnungsgemäßem Ablauf des Programms können Sie sofort mit Eingaben beginnen. Für Maschinensprache-Spezialisten: die Einschaltmeldungen des Rechners werden nur nach einem Reset generiert. Der Textbereich, in dem die Meldung steht, wird von dem erzeugten Maschinenprogramm überschrieben.</p>

        <p>Alle veröffentlichten Listings sind mit einer Checksumme versehen, dieam Ende jeder Programmzeile steht. <strong>Diese Checksumme steht zwischen &lt; und >. Sie wird beim Eintippen des Programms nicht mit eingegeben</strong>. Die Zahl zwischen den beiden Zeichen stellt lediglich eine Information für Sie dar. Wenn Sie diese Checksumme dennoch mit eintippen, werden Sie schnell bemerken, daß Sie etwas falsch gemacht haben. Bei aktiviertem Checksummer 64 wird nämlich nach Eingabe einer Basic-Zeile, die mit Return beendet wird, in die linke obere Bildschirmecke die Checksumme eingeblendet, die mit der Summe aus dem veröffentlichten Listing übereinstimmen muß. Ist das nicht der Fall, haben Sie die Zeile anders eingegeben, als sie im Listing dargestellt ist. Vergessen Sie also bitte nicht, daß die am Ende einer Zeile zwischen &lt; und > stehende Prüfsumme nicht mit eingegeben werden darf.</p>

        <p>Der Checksummer 64 ist so ausgelegt, daß er abhängig von der Zeilennummer und dem Text der Zeile eine Checksumme ausgibt. Beim Bilden dieser Checksumme werden Spaces (Leertaste) überlesen, was für Sie bedeutet, daß es egal ist, wieviel Leerzeichen Sie zwischen den Worten lassen, da sie für den Programmablauf ohnehin keine Bedeutung haben. Aber manchmal ist das richtige Setzen von Leerzeichen doch wichtig, besonders innerhalb von Strings (Zeichenketten), die gedruckt werden sollen. Seien Sie deshalb besonders genau bei Leerzeichen, die innerhalb von Anführungszeichen stehen, denn meistens ermöglichen nur die richtig gesetzten Spaces eine sinnvolle Textausgabe auf dem Bildschirm.</p>

        <p>Beachten Sie auch, daß es durchaus erlaubt ist, Abkürzungen für die Commodore-Befehlswörter zu verwenden. So führt die Eingabe von »?« als Kurzschreibweise für »PRINT« nicht etwa zu einem Checksummen-Fehler, sondern wird korrekt verarbeitet und dementsprechend die Checksumme generiert. Zahlendreher werden allerdings nicht erkannt. Eine 320 in der DATA-Zeile ergibt also dieselbe Prüfsumme wie 230! Nachdem Sie ein Listing eingegeben haben, sollten Sie es aus Sicherheitsgründen vor dem Starten abspeichern. Sie brauchen hierfür jedoch nicht den Checksummer 64 zu desaktivieren.</p>

        <h2>Wichtiger Hinweis für alle Listings in unseren Heften!</h2>

        <p>Um Ihnen die Eingabe unserer Listings zu erleichtern, gibt es weder Steuerzeichen noch andere Grafikzeichen. 8ie werden ersetzt durch Klartext. In der Tabelle finden Sie die Erklärung der übersetzten Steuerzeichen.</p>

        <p class="noindent">Beispiel 1:</p>
        
        <p>In einem Listing sehen Sie folgende Zeile:</p>

        <p>TODO</p>

        <p>Dann dürfen Sie weder die geschweiften Klammern eintippen (es gibt sie eh nicht auf der Tastatur) und auch nicht die Wörter CLEAR, 13SPACE, RVSON oder RVOFF, sondern Sie müssen die diesen Wörtern zugeordneten Tasten drücken. In der Tabelle sehen Sie zum Beispiel für<br>CLEAR = Shift-Taste und 2. Taste ganz rechts oben.</p>

        <p>Gemeint ist also, daß Sie anstelle des Wortes CLEAR die Taste CLR/HOME drücken müssen, gefolgtvon 13maligem Betätigen der Leertaste (13SPACE) und so weiter. Auf Ihrem Bildschirm erscheint dann als erstes ein revers dargestelltes Herz. Entsprechendes gilt für alle anderen Wörter innerhalb der geschweiften Klammern.<br>
            Beispiel 2:</p>

        <p>In manchen Listings tauchen ganz seltsame unterstrichene und manchmal auch überstrichene Zeichen auf, zum Beispiel:</p>

        <p>TODO</p>

        <p>Das unterstrichene U bedeutet, daß Sie die Shift-Taste und die Taste U drücken müssen.</p>

        <p>Der überstrichene Stern bedeutet, daß Sie die Commodore-Taste und die Taste mit dem Stern drücken müssen. Das Zeichen davor ist nicht etwa ein unterstrichenes kleines f, sondern ein unterstrichenes Pfund-Zeichen (Sie drücken deshalb die Shift-Taste und die 3. Taste oben rechts).</p>

        <p>Also, <strong>unterstrichen</strong> bedeutet <strong>Shift-Taste</strong> und den entsprechenden Buchstaben (oder Zeichen), <strong>überstrichen</strong> bedeutet die <strong>Commodore-Taste</strong> und den entsprechenden Buchstaben (oder Zeichen). Auf dem Bildschirm sollten Sie dann natürlich die zugehörigen Grafik-Zeichen sehen.</p>

        <p>Die beiden Programm-Zeilen von oben sehen später (auf dem Drucker oder ähnlich auf dem Bildschirm) so aus:</p>

        <p>TODO</p>

        <h2>Checksummer VC 20</h2>

        <p>Der Checksummer VC 20 ist im Prinzip genauso aufgebaut wie der Checksummer 64. Da beim VC 20 jedoch nicht die Möglichkeit besteht, das ROM softwaremäßig zu modifizieren, mußte ein anderer Weg als beim Commodore 64 gewählt werden, um die Checksumme zu generieren.</p>

        <p>In Ihrer Funktionsweise unterscheiden sich der Checksummer VC 20 und der Checksummer 64 nicht. Es gelten folgende Sonderregelungen bei der Benutzung des Checksummer VC 20:</p>

        <ul>
            <li>Da der Basic-Bereich nicht belegt werden soll, ist das Programm im Kassettenpuffer abgelegt.</li>
            <li>Angeschaltet wird der Checksummer VC 20 mit »SYS 955«.</li>
            <li>Abschaltung des Checksummer VC 20 wird mit »SYS 58459« vollzogen.</li>
        </ul>

        <p>Achtung: Nehmen Sie keine Kassetten-Operationen vor, wenn der Checksummer VC 20 eingeschaltet ist. Da das Betriebssystem den Kassettenpuffer mit Daten belegt, kann der Checksummer VC 20 überschrieben werden, was zur Folge hat, daß sich der Computer bei aktiviertem Checksummer VC 20 »aufhängt«. Wollen Sie deshalb ein Programm auf (von) Kassette abspeichern (laden), so müssen Sie erst den Checksummer VC 20 abschalten (SYS 58459).</p>

        <p>Daraufhin kann der Kassettenpuffer mit Daten überschrieben werden, ohne daß der Computer »aussteigt«.</p>

        <p>Als Sicherung wird bei der Initialisierung geprüft, ob das zuletzt angesprochene Peripherie-Gerät der Kassettenrecorder war. Ist das der Fall, so werden die Betriebssystemroutinen LOAD und SAVE für die Benutzung gesperrt. Der Rechner meldet bei Aufruf einer dieser beiden Routinen READY, ohne weitere Aktionen durchzuführen. Diese Sicherung kann man nach der Tipparbeit aufheben, wenn man den Checksummer VC 20 mit SYS 58459 abschaltet. Dadurch wird der Kassettenpuffer für andere Daten freigemacht. Weiterhin wird dann durch gleichzeitiges Drücken der Tasten »Run-Stop &amp; Restore« erreicht, daß die Betriebssystemroutinen LOAD und SAVE wieder eingerichtet werden.</p>

        <ul>
            <li>Bei Benutzung einer Diskettenstation brauchen Sie nicht darauf zu achten, daß bei LOAD beziehungsweise SAVE der Checksummer VC 20 überschrieben wird, da der Kassettenpuffer für die Diskettenstation normalerweise nicht genutzt wird. Deshalb können Sie die beiden Routinen weiterhin normal nutzen, sofern der Rechner bei der Initialisierung des Checksummer VC 20 feststellt, daß das zuletzt angesprochene Peripherie-Gerät nicht der Kassettenrecorder war.</li>

            <li>Bedingt durch den anderen Aufbau des Checksummer VC 20 wird anders als beim Checksummer 64 nach der LOAD-Routine keine Checksumme ausgegeben.</li>

            <li>Wird eine Zeile gelöscht, also eine Zahl zwischen 0 und 65999 eingegeben, und danach Return gedrückt, so wird eine Checksumme ausgegeben, die aber keine Bedeutung hat.</li>

        </ul>

        <p>Sie können die Programme auch weiterhin ohne den Checksummer eintippen.</p>

        <address class="author">(F. Lonczewski/gk)</address>

        <figure>
            <table class="plain">
                <tr>
                    <td colspan="2">CTRL steht für Control-Taste, so bedeutet [CTRL-A], daß Sie die
                        Control-Taste und die Taste »A« drücken müssen. Im folgenden steht:</td>
                <tr>
                    <td>[DOWN]</td>
                    <td>Taste neben rechtem Shift, Cursor unten</td>
                </tr>
                <tr>
                    <td>[UP]</td>
                    <td>Shift-Taste &amp; Taste neben rechtem Shift, Cursor hoch</td>
                </tr>
                <tr>
                    <td>[CLEAR]</td>
                    <td>Shift-Taste &amp; 2. Taste ganz rechts oben</td>
                </tr>
                <tr>
                    <td>[INST]</td>
                    <td>Shift-Taste &amp; Taste ganz rechts oben</td>
                </tr>
                <tr>
                    <td>[HOME]</td>
                    <td>2. Taste von ganz rechts oben</td>
                </tr>
                <tr>
                    <td>[DEL]</td>
                    <td>Taste ganz rechts oben</td>
                </tr>
                <tr>
                    <td>[RIGHT]</td>
                    <td>Taste ganz rechts unten</td>
                </tr>
                <tr>
                    <td>[LEFT]</td>
                    <td>Shift-Taste &amp; Taste unten rechts</td>
                </tr>
                <tr>
                    <td>[SPACE]</td>
                    <td>Leertaste</td>
                </tr>
                <tr>
                    <td>[F1]</td>
                    <td>grauer Tastenblock rechts</td>
                </tr>
                <tr>
                    <td>[F3]</td>
                    <td>grauer Tastenblock rechts</td>
                </tr>
                <tr>
                    <td>[F5]</td>
                    <td>grauer Tastenblock rechts</td>
                </tr>
                <tr>
                    <td>[F7]</td>
                    <td>grauer Tastenblock rechts</td>
                </tr>
                <tr>
                    <td>[F2]</td>
                    <td>grauer Tastenblock rechts &amp; Shift</td>
                </tr>
                <tr>
                    <td>[F4]</td>
                    <td>grauer Tastenblock rechts &amp; Shift</td>
                </tr>
                <tr>
                    <td>[F6]</td>
                    <td>grauer Tastenblock rechts &amp; Shift</td>
                </tr>
                <tr>
                    <td>[F8]</td>
                    <td>grauer Tastenblock rechts &amp; Shift</td>
                </tr>
                <tr>
                    <td>[RETURN]</td>
                    <td>Shift-Taste &amp; Return</td>
                </tr>
                <tr>
                    <td>[BLACK]</td>
                    <td>Control-Taste &amp; 1</td>
                </tr>
                <tr>
                    <td>[WHITE]</td>
                    <td>Control-Taste &amp; 2</td>
                </tr>
                <tr>
                    <td>[RED]</td>
                    <td>Control-Taste &amp; 3</td>
                </tr>
                <tr>
                    <td>[CYAN]</td>
                    <td>Control-Taste &amp; 4</td>
                </tr>
                <tr>
                    <td>[PURPLE]</td>
                    <td>Control-Taste &amp; 5</td>
                </tr>
                <tr>
                    <td>[GREEN]</td>
                    <td>Control-Taste &amp; 6</td>
                </tr>
                <tr>
                    <td>[BLUE]</td>
                    <td>Control-Taste &amp; 7</td>
                </tr>
                <tr>
                    <td>[YELLOW]</td>
                    <td>Control-Taste &amp; 8</td>
                </tr>
                <tr>
                    <td>[RVSON]</td>
                    <td>Control-Taste &amp; 9</td>
                </tr>
                <tr>
                    <td>[RVOFF]</td>
                    <td>Control-Taste &amp; 0</td>
                </tr>
                <tr>
                    <td>[ORANGE]</td>
                    <td>Commodore-Taste &amp; 1</td>
                </tr>
                <tr>
                    <td>[BROWN]</td>
                    <td>Commodore-Taste &amp; 2</td>
                </tr>
                <tr>
                    <td>[LIG.RED]</td>
                    <td>Commodore-Taste &amp; 3</td>
                </tr>
                <tr>
                    <td>[GREY 1]</td>
                    <td>Commodore-Taste &amp; 4</td>
                </tr>
                <tr>
                    <td>[GREY 2]</td>
                    <td>Commodore-Taste &amp; 5</td>
                </tr>
                <tr>
                    <td>[LIG.GREEN]</td>
                    <td>Commodore-Taste &amp; 6</td>
                </tr>
                <tr>
                    <td>[LIG.BLUE]</td>
                    <td>Commodore-Taste &amp; 7</td>
                </tr>
                <tr>
                    <td>[GREY 3]</td>
                    <td>Commodore-Taste &amp; 8</td>
                </tr>
                <tr>
                    <td colspan="2">Wenn Sie sich erst einmal an die in Klartext geschriebenen Steuerzeichen gewöhnt haben, werden Sie den Vorteil dieser Schreibweise erkennen. Der zu dem jeweiligen Steuerzeichen gehörende Klartext ist so verfaßt, daß Sie leicht die Taste beziehungsweise die Tastenkombination finden, die Sie drücken müssen.</td>
            </table>
            <figcaption>Die Steuerbefehle im Klartext</figcaption>
        </figure>

        <figure>
            <pre data-filename="checksum.schnell" data-name="Checksummer (C 64)"></pre>
            <figcaption>Der Checksummer für den C 64</figcaption>
        </figure>
        <figure>
            <pre data-filename="checksummer vc20" data-name="Checksummer (VC 20)"></pre>
            <figcaption>Der Checksummer für den VC 20</figcaption>
        </figure>
    </article>
</body>

</html>