<!DOCTYPE html>
<html lang="de">

<head>
    <title>Anhalter — Programmstop auf Tastendruck</title>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="../style.css">
    <meta name="author" content="Georg Kramer, aw">
    <meta name="64er.issue" content="Sonderheft 5/85">
    <meta name="64er.pages" content="109">
    <meta name="64er.head1" content="Tips & Tricks">
    <meta name="64er.toc_category" content="Tips und Tricks">
    <meta name="64er.id" content="anhalter">
</head>

<body>
    <article>
        <h1>Anhalter — Programmstop auf Tastendruck</h1>
        <p class="intro">Mit dieser kleinen Maschinensprach-Routine können Sie jedes Programm anhalten. Der Computer stoppt so lange, bis Sie eine Taste drücken</p>

        <p>Dieses kleine Maschinenprogramm kann Ihnen in vielerlei Hinsicht nützlich sein. Man kann sich beispielsweise folgende Anwendungsgebiete vorstellen: In einem selbstprogrammierten Spiel wird oft eine Pause-Taste benötigt, ähnlich, wie es sie auch in manchen kommerziellen Spielen gibt Auch das Auflisten von Programmen kann jederzeit angehalten werden und sogar der Datenfluß zur Floppy ist gegen eine Unterbrechung nicht gefeit Mit dem Programm »Anhalter« steht es Ihnen vollkommen frei, zu entscheiden, an welchen Stellen ein Programm angehalten werden soll.</p>

        <p>Nach dem Starten des Programms (siehe Listing 1) werden Sie zunächst gefragt, wohin das Programm verschoben werden soll (bitte Dezimalzahlen eingeben). Da das Programm vollkommen frei verschiebbar ist, brauchen Sie keine weiteren Angaben zu machen. Danach brauchen Sie nur noch die Funktionstaste F1 zu drücken um Ihr Programm zu stoppen. Soll das Programm weiter laufen, so genügt es, eine beliebige Taste zu betätigen.</p>

        <p>Falls Sie nicht die F1-Taste, sondern eine andere mit der Anhalte-Funktion belegen möchten, so ist dies möglich. Dazu brauchen Sie nur in die Speicherstelle (Startadresse + 16) den Wert der neuen Taste hineinschreiben. Diesen Wert erhalten Sie, indem Sie folgende Zeile im Direktmodus eingeben, die gewünschte Taste drücken und sich die angezeigte Zahl merken.<br>
            FOR I=1 TO 10000 : PRINT PEEK(203): NEXT</p>

        <p>Jetzt können Sie die Abfrage ändern:<br>
            POKE Startadresse + 16,X (X=neuer Wert)</p>

        <p>Listing 2 erläutert die genaue Funktionsweise des Programmes.</p>

        <address class="author">(Georg Kramer/aw)</address>

        <figure>
            <pre data-filename="anhalter" data-name="Anhalter"></pre>
            <figcaption>Listing 1. »Anhalter«. Bitte beachten Sie die Eingabehinweise auf Seite 6</figcaption>
        </figure>

        <figure>
            <pre>,C000    7B          SEI            ;Interrupt abschalten
,C001    A9  0D      LDA    #$0D    ;Interrupt auf C00D
,C003    8D  14  03  STA    $0314   ;setzen
,C006    A9  C0      LDA    #$C0    ;
,C008    8D  15  03  STA    $0315   ;
,C00B    58          CLI            ;Interrupt zulassen
,C00C    60          RTS            ;Rückkehr zum Basic
,C00D    A5  CB      LDA    $CB     ;hole Wert der letzten
                                    gedrückten Taste
,C00F    C9  04      CMP    #$04    ;vergleiche mit Wert
                                    für F1-Taste
,C011    F0  03      BEQ    $C016   ;verzweige:ja
                                    =eig.Routine,
                                    nein=norm.IRQ
,C013    4C  31  EA  JMP    $EA31   ;verlasse
                                    Routine zum normalen
                                    IRQ
,C016    20  87  EA  JSR    $EA87   ;springe zur normalen
                                    Tastaturabfrage
,C019    A5  CB      LDA    $CB     ;hole Wert der letzten
                                    gedrückten Taste
,C01B    C9  40      CMP    #$40    ;vergleiche mit $40
                                    (#64) = keine Taste
,C01D    F0  F7      BEQ    $C016   ;wenn keine Taste,
                                    dann zur Tastaturabf.
,C01F    4C  31  EA  JMP    $EA31   ;wenn Taste gedrückt,
                                    dann norm. IRQ</pre>
            <!-- Eingetippt von goloMAK -->
            <figcaption>Listing 2. Schnell eingegeben und leicht zu verstehen — der Source-Code von »Anhalter«</figcaption>
        </figure>
    </article>
</body>

</html>