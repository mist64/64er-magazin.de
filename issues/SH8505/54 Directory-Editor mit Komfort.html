<!DOCTYPE html>
<html lang="de">

<head>
    <title>Directory-Editor mit Komfort</title>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="../style.css">
    <meta name="author" content="Dieter Temme, ev">
    <meta name="64er.issue" content="Sonderheft 5/85">
    <meta name="64er.pages" content="54-59">
    <meta name="64er.toc_category" content="Floppy-DOS-Erweiterungen">
    <meta name="64er.toc_title" content="Directory-Editor<br>Mit dem Directory-Editor können Sie das Directory Ihrer Disketten ganz nach Ihren Wünschen gestalten.">
    <meta name="64er.id" content="directory-editor">
</head>

<body>
    <article>
        <h1>Directory-Editor mit Komfort</h1>
        <p class="intro">Mit diesem Programm gestalten Sie das Disketten-Directory ganz nach Ihren Wünschen.</p>

        <p>Mit dem Directory-Editor kann man das Inhaltsverzeichnis einer Diskette auf komfortable Art und Weise ändern. Das Programm ist lauffähig auf dem Commodore 64 sowie seinen »großen Brüdern«CBM 2001 bis8001. EserkenntComputer-und Floppy-Laufwerk-Typ und sollte ohne Schwierigkeiten auch an andere und zukünftige Commodore-Computer und -Floppy-Laufwerke anzupassen sein.</p>

        <p>Das Programm wird mit RUN gestartet. Es dauert einige Sekunden, bis Computer- und Floppy-Laufwerk-Typ erkannt und die Variablen entsprechend gesetzt sind.</p>

        <h2>Befehlsbeschreibung</h2>

        <p>Tabelle 1 zeigt eine Übersicht über alle Befehle des Directory-Editors. Die Befehle im einzelnen: Durch »A« oder »SPACE« (Leertaste) erhöht man eine zweiseitige Kurzanleitung mit einer Befehlsübersicht (weiter mit beliebiger Taste).</p>

        <figure>
            <table>
                <thead>
                    <tr>
                        <th>Befehl</th>
                        <th>Mnemonic</th>
                        <th>*)</th>
                        <th>Bedeutung</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>A/SPC</td>
                        <td>Anl</td>
                        <td></td>
                        <td>Anleitung zeigen</td>
                    </tr>
                    <tr>
                        <td>B</td>
                        <td>Block</td>
                        <td></td>
                        <td>blockweises Weiterlesen der Directory</td>
                    </tr>
                    <tr>
                        <td>D</td>
                        <td>DEL</td>
                        <td></td>
                        <td>File als gelöscht kennzeichnen</td>
                    </tr>
                    <tr>
                        <td>E</td>
                        <td>Ende</td>
                        <td></td>
                        <td>Bearbeitung der Directory beenden</td>
                    </tr>
                    <tr>
                        <td>F</td>
                        <td>Floppy</td>
                        <td></td>
                        <td>Floppykommando eingeben</td>
                    </tr>
                    <tr>
                        <td>I</td>
                        <td>Init</td>
                        <td></td>
                        <td>Editor initialisieren, Diskettennamen und -ID ändern</td>
                    </tr>
                    <tr>
                        <td>L</td>
                        <td>Letter</td>
                        <td></td>
                        <td>Groß-/Kleinschrift umschalten</td>
                    </tr>
                    <tr>
                        <td>N</td>
                        <td>Name</td>
                        <td></td>
                        <td>Dateinamen neu eingeben</td>
                    </tr>
                    <tr>
                        <td>P</td>
                        <td>PRG</td>
                        <td></td>
                        <td>als Programmfile kennzeichnen</td>
                    </tr>
                    <tr>
                        <td>R</td>
                        <td>REL</td>
                        <td>*)</td>
                        <td>als relatives File kennzeichnen</td>
                    </tr>
                    <tr>
                        <td>S</td>
                        <td>SEQ</td>
                        <td></td>
                        <td>als sequentielles File kennzeichnen</td>
                    </tr>
                    <tr>
                        <td>U</td>
                        <td>USR</td>
                        <td></td>
                        <td>als User-File kennzeichnen</td>
                    </tr>
                    <tr>
                        <td>V</td>
                        <td>Valid</td>
                        <td></td>
                        <td>Block-Überprüfung erzwingen</td>
                    </tr>
                    <tr>
                        <td>X</td>
                        <td>Exit</td>
                        <td></td>
                        <td>Programm beenden</td>
                    </tr>
                    <tr>
                        <td>←=</td>
                        <td></td>
                        <td></td>
                        <td>nächsten Fileeintrag anzeigen</td>
                    </tr>
                    <tr>
                        <td>&lt;RET&gt;</td>
                        <td></td>
                        <td></td>
                        <td>einen Fileeintrag zurückgehen</td>
                    </tr>
                    <tr>
                        <td>*</td>
                        <td></td>
                        <td>*)</td>
                        <td>geöffnetes File schließen</td>
                    </tr>
                    <tr>
                        <td>+</td>
                        <td></td>
                        <td>*)</td>
                        <td>Löschschutz aktivieren</td>
                    </tr>
                    <tr>
                        <td>−</td>
                        <td></td>
                        <td>*)</td>
                        <td>Löschschutz abschalten</td>
                    </tr>
                    <tr>
                        <td>0/1</td>
                        <td></td>
                        <td></td>
                        <td>auf entsprechendes Laufwerk schalten</td>
                    </tr>
                </tbody>
            </table>
            *) nicht für 2040/3040-Laufwerke
            <figcaption>Tabelle 1. Die Befehle des Directory-Editors</figcaption>
        </figure>

        <p>Mit »0« und »1« kann man bei einem angeschlossenen Doppelfloppy-Laufwerk zwischen den beiden Laufwerken wählen. Falls ein Doppelfloppy-Laufwerk angeschlossen ist, wird beim Start des Programms automatisch Laufwerk 1 gewählt, so daß sich folgende Laufwerksaufteilung anbietet: Laufwerk 0 mit Systemdiskette und Laufwerk 1 mit der zu bearbeitenden Diskette.</p>

        <p>»L« dient zur Umschaltung zwischen Groß- und Kleinschreibung. Mit »X« kann das Programm jederzeit verlassen werden. Wird gerade eine Diskette bearbeitet, so wird zunächst automatisch der Befehl »E« ausgeführt.</p>

        <p>Der eigentliche Editor wird mit »I« initialisiert. Die Aufforderung zum Einlegen der zu bearbeitenden Diskette bestätigt man mit einem beliebigen Tastendruck. Nun wird die eingelegte Diskette initialisiert und nachgeprüft, ob sie dem Format des Floppy-Laufwerks entspricht. Jetzt werden nacheinander Diskettenname und Identität (ID) angezeigt, die man durch einfaches Überschreiben ändern kann. Die ID darf übrigens bis zu fünf (bei CBM 2040/3040 vier) Zeichen lang sein. Mit der RETURN-Taste kommt man zum Inhaltsverzeichnis.</p>

        <p>Das Programm zeigt jetzt den ersten Eintrag an. Im ersten Feld wird die Länge des Files in Blöcken angezeigt. Das zweite Feld enthält den Filenamen, der nach dem Drücken von »N« frei geändert werden kann.</p>

        <p>Im dritten Feld werden drei Fileparameter angezeigt, die in dem Directory auf der Diskette alle in einem Byte untergebracht sind: Wenn ein Stern vor dem Filetyp angezeigt wird, so wurde das File nach dem Schreiben nicht geschlossen, was es normalerweise unmöglich macht, auf dieses File wieder zuzugreifen. Glücklicherweisegeschiehtdies recht selten, daso etwas nur durch Stromausfall, versehentliches Ziehen des Netzsteckers oder durch Unterbrechen eines Basic-Pro-gramms mitten im Schreibvorgang zustandekommen kann. Trotzdem ist es ärgerlich, wenn es einmal passiert. Mit dem Directory-Editor können solche Files wieder lesefähig gemacht werden, indem man »*« eingibt. Dabei wird die erste Spur/Sektor-Kennzeichnung ausgelesen und das File bis zum Ende verfolgt. Danach wird die errechnete Blockzahl in das Directory geschrieben und ein Validate der Diskette nach dem Programmlauf veranlaßt (ab Zeile 6000). Der Stern vor dem Filetyp verschwindet, das File ist wieder in Ordnung. Es kann wohl vorkommen, daß die letzten (maximal 254) Bytes verlorengehen, wenn diese bei dem Zwischenfall noch im Floppypuffer zwischengespeichert waren; dafür ist der Rest aber gerettet.</p>

        <p>Als zweite Information in diesem dritten Feld wird der Filetyp ausgegeben. Dieser kann durch Drücken des Anfangsbuchstaben des gewünschten Filetyps geändert beziehungsweise das File mit »D« gelöscht werden. Auch gelöschte Files werden mit angegeben und können (leider nicht bei den Floppy-Laufwerken CBM 2040/3040 wegen der völligen Zerstörung der Block-Zeiger) wieder eingetragen werden. Bei der Benutzung ist aber Vorsicht geboten, denn wenn nach dem Löschen schon wiederauf die Diskette geschrieben wurde, können Teile des Files oder Programms zerstört sein. Werden nach einem Validate zu viele freie Blöcke ausgegeben, dann kann man nichts mehr retten und das File sollte wieder gelöscht und die Diskette mit dem Validate-Befehl nochmals überprüft werden.</p>

        <p>Die dritte Information, die nur ab DOS-Version 2 vorhanden ist (also nicht für 2040/3040), ist der Löschschutz. Er wird durch »+« ein- und durch »—« wieder ausgeschaltet und schützt vor dem Scratch-Befehl. Der New-Befehl beachtet solch einen softwaremäßigen Schutz nicht, hier hilft nur der physikalische Löschschutz, das Ankleben einer Schreibschutzmarke. Der softwaremäßige Löschschutz wird mit »\&lt;« hinter dem Filetyp in der Directory angezeigt.</p>

        <p>Die letzten beiden Felder der Zeile zeigen den Startsektor, also den Anfang des Files, auf der Diskette. Bei 2040/3040-Floppy-Laufwerken sieht man, daß mit »Scratch« gelöschte Files eine Null in der Anzeige der Spur anzeigen und somit nicht mehr reparabel sind.</p>

        <p>Mit der RETURN-Taste, »-« oder »=« kann man den nächsten Eintrag in die Anzeige holen. Sucht man nur ein bestimmtes File, um etwas zu ändern, so kann man mit »B« gleich bis zum Ende des Directory-Blocks »vorspulen«. Dies hat den Vorteil, daß es schneller geht. Trotzdem kann man immer mit »t» oder »@« ein File zurückgehen, falls es in demselben Block liegt.</p>

        <p>Wenn ein File wieder in die Directory zurückgeholt oder gelöscht wird, so muß die Diskette später zur korrekten Blockbelegung überprüft werden. Will man diesen Vorgang erzwingen, so kann man »V« drücken. Ob überprüft wird oder nicht, steht unten in der vorletzten Textzeile hinter »V«. Ein »+« bedeutet, daß erst später überprüft wird.</p>

        <p>Mit »E« kann die Bearbeitung jederzeit unterbrochen und zum Ende gesprungen werden. Am Ende des Directory, beziehungsweise wenn »E« eingegeben wurde, wird — falls erforderlich durch Löschen, Wiedereintragen oderSchließen eines Files — die Diskette mit dem »Validate«-Befehl überprüft. Dies kann eine Minute dauern, falls sich viele Files auf der bearbeiteten Diskette in ungelöschtem Zustand befinden. Danach wird die Anzahl der benutzten und der freien Blöcke ausgegeben. In Klammern erscheint die Anzahl der freien Blöcke, die in dem Directory abgelegt sind. Kommt es zu Unterschieden, so sollte, wenn das Directory bis zum Ende durchgeblättert wurde, mit »Validate« überprüft werden. Wenn mit »E« oder »X« abgebrochen wurde, dann sind wahrscheinlich nicht alle belegten Blöcke mitgezählt worden und die Zahlen, die nicht in Klammern stehen, sind nicht relevant. Nach Anzeige der Blockzahlen ist das Programm bereit, eine neue Diskette zu bearbeiten.</p>

        <h2>Eingebaute Geräteanpassung</h2>

        <p>Am Anfang des Programms wird in eine Unterroutine ab Zeile 7 500 gesprungen, die durch Vergleichen eines Bytes mit einer Tabelle herausfindet, in welchem Computer sich das Programm im Augenblick befindet, und danach alle systemspezifischen Adressen, die vom Hauptprogramm benötigt werden, in Variablen einliest. Dieses Vorgehen ermöglicht es, jeden Commodore-Computer, der mindestens einen 40 Zeichen breiten Bildschirm besitzt, zu benutzen, ohne das Programm vollständig verändern zu müssen. Außerdem können auch die großen Commodore CBM 600/700 oder die kleinen C 16/C 116 und der Plus/4 mit dem gleichen Programm laufen, wenn die Abfragen entsprechend erweitert werden. Zur eigenen Anpassung des Programms sind in Tabelle 2 die benötigten Systemadressen aufgeführt. Sie müssen in dieser Reihenfolge nach dem PEEK-Wert und dem Namen des Computers ab Zeile 7 560 in DATAs abgelegt werden.</p>

        <figure>
            <table>
                <thead>
                    <tr>
                        <th></th>
                        <th></th>
                        <th colspan="5">Computer-Name</th>
                    </tr>
                    <tr>
                        <th>Variable CT$</th>
                        <th>Bedeutung</th>
                        <th>CBM 2001</th>
                        <th>CBM 3001</th>
                        <th>CBM 4001</th>
                        <th>CBM 8001</th>
                        <th>C 64</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>C%(0)</td>
                        <td>PEEK(58453)</td>
                        <td>136</td>
                        <td>152</td>
                        <td>32</td>
                        <td>76</td>
                        <td>189</td>
                    </tr>
                    <tr>
                        <td>WI</td>
                        <td>Zeilenlänge des Bildschirms</td>
                        <td>40</td>
                        <td>40</td>
                        <td>40</td>
                        <td>80</td>
                        <td>40</td>
                    </tr>
                    <tr>
                        <td>C0</td>
                        <td>Länge des Tastaturpuffers</td>
                        <td>525</td>
                        <td>158</td>
                        <td>158</td>
                        <td>158</td>
                        <td>198</td>
                    </tr>
                    <tr>
                        <td>C1</td>
                        <td>=0: Cursor eingeschaltet</td>
                        <td>532</td>
                        <td>167</td>
                        <td>167</td>
                        <td>167</td>
                        <td>204</td>
                    </tr>
                    <tr>
                        <td>C2</td>
                        <td>Zähler für Cursorblinken</td>
                        <td>533</td>
                        <td>168</td>
                        <td>168</td>
                        <td>168</td>
                        <td>205</td>
                    </tr>
                    <tr>
                        <td>C3</td>
                        <td>Zeiger auf Start der BS-Zeile</td>
                        <td>224</td>
                        <td>196</td>
                        <td>196</td>
                        <td>196</td>
                        <td>209</td>
                    </tr>
                    <tr>
                        <td>C4</td>
                        <td>augenblickl. Cursorspalte</td>
                        <td>226</td>
                        <td>198</td>
                        <td>198</td>
                        <td>198</td>
                        <td>211</td>
                    </tr>
                    <tr>
                        <td>C5</td>
                        <td>=1: Hochkommamodus (”)</td>
                        <td>234</td>
                        <td>205</td>
                        <td>205</td>
                        <td>205</td>
                        <td>212</td>
                    </tr>
                    <tr>
                        <td>C6</td>
                        <td>Länge der Bildschirmzeile</td>
                        <td>242</td>
                        <td>213</td>
                        <td>213</td>
                        <td>213</td>
                        <td>213</td>
                    </tr>
                    <tr>
                        <td>C7</td>
                        <td>augenblickliche Cursorzeile</td>
                        <td>245</td>
                        <td>216</td>
                        <td>216</td>
                        <td>216</td>
                        <td>214</td>
                    </tr>
                    <tr>
                        <td>C8</td>
                        <td>Anzahl der Inserts</td>
                        <td>251</td>
                        <td>220</td>
                        <td>220</td>
                        <td>220</td>
                        <td>216</td>
                    </tr>
                    <tr>
                        <td>C9</td>
                        <td>=128: Repeat auf allen Tasten bei C9=0: kein Repeat-Flag</td>
                        <td>---</td>
                        <td>---</td>
                        <td>---</td>
                        <td>228</td>
                        <td>650</td>
                    </tr>
                </tbody>
            </table>
            <figcaption>Tabelle 2. Adressenerklärung zur Computeranpassung</figcaption>
        </figure>

        <p>Für alle Commodore-Computer gilt, daß mindestens 16 KByte RAM vorhanden sein müssen. Hiervon sollten 12 KByte zur freien Verfügung übrigbleiben, denn der Directory-Editor belegt 10 KByte und benötigt noch einmal 2 KByte für Variablen.</p>

        <p>Auch die Floppy-Laufwerke besitzen unterschiedliche Eigenschaften und Eigenarten, die es nötig machen, den Geräte-Typ durch das Programm erkennen zu lassen, um ein zufriedenstellendes Arbeiten des Directory-Editors mit allen Laufwerken zu gewährleisten. Diese Routine (ab Zeile 7 000) wurde aus dem Programm »Disk Addr Change« der 1541-Test/ Demo-Diskette entnommen und für den Directory-Editor erweitert. Auch dieses Unterprogramm kann leicht an neue Floppy-Laufwerke angepaßt werden. Es werden mit »M-R« einzelne Bytes aus dem Floppy-ROM gelesen, die charakteristisch für bestimmte Floppy-Laufwerke sind. Anpassungen an alle gängigen Commodore-Floppy-Laufwerke sind eingebaut (2/4031, 1540/1, 2/3040, 4040, 8050, 8250, wobei CBM 4040/8050 entweder mit DOS 2.1/2.5 oder DOS 2.7 ausgestattet sind). Die Erweiterung auf neue Commodore-Laufwerke (zum Beispiel 1571 und SFD 1001/1002) ist natürlich möglich. In Tabelle 3 werden alle erforderlichen Variablen erklärt und am Beispiel der eingebauten Anpassung demonstriert. Tabelle 4 zeigt die Bedeutung wichtiger Variablen, die bei verschiedenen Laufwerks-Typen unterschiedlich sein kann.</p>

        <figure>
            <table>
                <thead>
                    <tr>
                        <th></th>
                        <th></th>
                        <th colspan="6">Floppy-Name und DOS-Version</th>
                    </tr>
                    <tr>
                        <th>Variable F$</th>
                        <th>Bedeutung</th>
                        <th>2/3040</th>
                        <th>4040 2.1/2.7</th>
                        <th>2/4031 1540/1</th>
                        <th>8050 2.5/2.7</th>
                        <th>8250 /LP</th>
                        <th></th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>F%(2)</td>
                        <td>Floppy-PEEK(65535) *)</td>
                        <td>226</td>
                        <td>213/198</td>
                        <td>254</td>
                        <td>242/198</td>
                        <td>198</td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>F%(1)</td>
                        <td>Floppy-PEEK(16618)</td>
                        <td>–99</td>
                        <td>–99/0</td>
                        <td>–99</td>
                        <td>–99/1</td>
                        <td>1</td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>F%(2)</td>
                        <td>Floppy-PEEK(16556)</td>
                        <td>–99</td>
                        <td>–99/–99</td>
                        <td>–99</td>
                        <td>–99/1</td>
                        <td>2</td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>DR</td>
                        <td>Anzahl der Laufwerke –1</td>
                        <td>1</td>
                        <td></td>
                        <td>0</td>
                        <td>1</td>
                        <td></td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>BF</td>
                        <td>Puffer #0 (High-Byte)</td>
                        <td>17</td>
                        <td></td>
                        <td>3</td>
                        <td>17</td>
                        <td></td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>TY</td>
                        <td>Floppy-Typ (siehe Tab. 4)</td>
                        <td>1</td>
                        <td>2</td>
                        <td></td>
                        <td>3</td>
                        <td>4</td>
                        <td></td>
                    </tr>
                </tbody>
            </table>
            *) –99: Nicht zur Unterscheidung benötigt, daher auf »0« gesetzt
            <figcaption>Tabelle 3. Variablenerklärung zur Floppy-Anpassung</figcaption>
        </figure>

        <figure>
            <table>
                <thead>
                    <tr>
                        <th>Variable</th>
                        <th>Bedeutung</th>
                        <th>TY= 1</th>
                        <th>2</th>
                        <th>3</th>
                        <th>4</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>FB</td>
                        <td>Anzahl der freien Blöcke</td>
                        <td>670</td>
                        <td>664</td>
                        <td>2052</td>
                        <td>4133</td>
                    </tr>
                    <tr>
                        <td>DM$</td>
                        <td>Formatkennzeichen auf Disk</td>
                        <td>CHRS$(1)</td>
                        <td>"a"</td>
                        <td>"c"</td>
                        <td>"c"</td>
                    </tr>
                    <tr>
                        <td>TT,TS</td>
                        <td>Directory-Header-Block</td>
                        <td colspan="2">18,00</td>
                        <td colspan="2">39,00</td>
                    </tr>
                    <tr>
                        <td>TD,SD</td>
                        <td>erster Directory-Block</td>
                        <td colspan="2">18,01</td>
                        <td colspan="2">39,01</td>
                    </tr>
                    <tr>
                        <td>NB</td>
                        <td>Beginn des Namen (Byte#)</td>
                        <td colspan="2">144</td>
                        <td colspan="2">6</td>
                    </tr>
                    <tr>
                        <td>AT</td>
                        <td>Anzahl der Tracks +1</td>
                        <td colspan="2">36</td>
                        <td colspan="2">78</td>
                    </tr>
                    <tr>
                        <td>DT</td>
                        <td>Anzahl der Dateitypen</td>
                        <td>4</td>
                        <td></td>
                        <td>5</td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>FT$</td>
                        <td colspan="5">Dateitypen (im Augenblick: DEL, SEQ, PRG, USR, REL)</td>
                    </tr>
                    <tr>
                        <td>Typ 1:</td>
                        <td colspan="5">2040/3040 V1.0</td>
                    </tr>
                    <tr>
                        <td>Typ 2:</td>
                        <td colspan="5">4040 V2.1/2.7, 1540/1 V2.6, 4031/2031 V2.6, (SFS 491)</td>
                    </tr>
                    <tr>
                        <td>Typ 3:</td>
                        <td colspan="5">8050 V2.5/2.7</td>
                    </tr>
                    <tr>
                        <td>Typ 4:</td>
                        <td colspan="5">8250/LP V2.7, (SFD 1001/1002)</td>
                    </tr>
                </tbody>
            </table>

            <figcaption>Tabelle 4. Variablenerklärung für verschiedene Floppy-Laufwerke</figcaption>
        </figure>

        <h2>Die Unterroutinen</h2>

        <p>Der Programmablauf ist in Tabelle 5 erläutert. Einige interessante, auch für andere Programme verwendbare Unterroutinen sind enthalten. Das Unterprogramm ab Zeile 8000 stellt eine neue Eingabe-Routine dar, die die Möglichkeit bietet, die Cursorsteuerung sowie lnsert/Delete zu erlauben, und trotzdem aufzupassen, daß nicht über den Rand des Eingabefeldes hinausgefahren wird. Außerdem sind zwei Tasten etwas anders belegt: Die HOME-Taste setzt den Cursor auf den Anfang des Eingabe-Feldes und CLR löscht nur das Eingabe-Feld, so daß der Bildschirmaufbau nicht aus Versehen einmal zerstört werden kann. Zeile 8021 wurde nur speziell für den Directory-Editor eingebaut: sie füllt den Rest des Strings bis zur Maximallänge IL mit SHIFT-Leerzeichen auf. Das wird zum Löschen eines möglichen Reststrings in der Directory benötigt und kann bei eigener Anwendung der Eingabe-Routine gegebenenfalls weggelassen werden. Die Eingabe von SHIFT-RETURN bewirkt, daß der Rest ab der Cursor-Position gelöscht und die Eingabe wie bei RETURN beendet wird.</p>

        <figure>
            <table class="plain">
                <thead>
                    <tr>
                        <th>Adresse</th>
                        <th>Bedeutung</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>1000-1999</td>
                        <td>Initialisierung der Variablen, Aufruf von 7000 und 7500</td>
                    </tr>
                    <tr>
                        <td>2000-2499</td>
                        <td>Eingabe-Warteschleife und Verarbeitung der Befehle</td>
                    </tr>
                    <tr>
                        <td>2500-2999</td>
                        <td>Unterprogramm: Schließen eines Files</td>
                    </tr>
                    <tr>
                        <td>2800-2999</td>
                        <td>Unterprogramm: Umschaltung Groß-/Kleinschreibung</td>
                    </tr>
                    <tr>
                        <td>3000-3499</td>
                        <td>Unterprogramm: Ausgabe der Anleitung</td>
                    </tr>
                    <tr>
                        <td>3500-3999</td>
                        <td>Unterprogramm: Ein- und Weitergabe eines Floppykommandos</td>
                    </tr>
                    <tr>
                        <td>4000-4999</td>
                        <td>Unterprogramm: Initialisierung des Editors</td>
                    </tr>
                    <tr>
                        <td>5000-5999</td>
                        <td>Unterprogramm: Anzeige des nächsten Eintrags</td>
                    </tr>
                    <tr>
                        <td>6000-6999</td>
                        <td>Unterprogramm: Ende des Directorys, Anzeige der Blockzahl</td>
                    </tr>
                    <tr>
                        <td>7000-7099</td>
                        <td>Unterprogramm: Erkennung des Floppy-Typs</td>
                    </tr>
                    <tr>
                        <td>7100-7199</td>
                        <td>Vorbereitung von 2040/3040</td>
                    </tr>
                    <tr>
                        <td>7200-7299</td>
                        <td>Data: Floppy-Laufwerk-Erkennung (Tabelle 3)</td>
                    </tr>
                    <tr>
                        <td>7300-7399</td>
                        <td>Data: Merkmale gleicher Typen (Tabelle 4)</td>
                    </tr>
                    <tr>
                        <td>7400-7499</td>
                        <td>Data: erweitertes M-R für 2/3040</td>
                    </tr>
                    <tr>
                        <td>7500-7599</td>
                        <td>Unterprogramm: Erkennung des Computer-Typs</td>
                    </tr>
                    <tr>
                        <td>7600-7699</td>
                        <td>Data: computerspezifische Variablen (Tabelle 2)</td>
                    </tr>
                    <tr>
                        <td>8000-8999</td>
                        <td>
                            Unterprogramme:<br>
                            8000 Eingabe-Routine<br>
                            8030 Inget-Routine<br>
                            8040 Bildschirroll-Routine<br>
                            8050 Diskettenfehler behandeln<br>
                            8060 Taste holen<br>
                            8070 Ausgabe mit Steuerzeichen<br>
                            8080 Cursor auf Zeile LN stellen
                        </td>
                    </tr>
                    <tr>
                        <td>9000-9099</td>
                        <td>Data: Bildschirmaufbau</td>
                    </tr>
                    <tr>
                        <td>9100-9199</td>
                        <td>Data: Änderungen des Aufbaus für die Anleitung</td>
                    </tr>
                    <tr>
                        <td>9500-9999</td>
                        <td>Data: Anleitung</td>
                    </tr>
                </tbody>
            </table>

            <figcaption>Adressbereiche und ihre Bedeutung</figcaption>
        </figure>
        <p>Die Routine ab Zeile 8040 scrollt einen beliebigen Bildschirmbereich von Zeile X1 bis X2 aufwärts, falls der Cursor in Zeile X2 steht. Dies geschieht durch »INPUT« vom Bildschirm und Ausgabe der eingegebenen Strings je eine Zeile höher.</p>

        <figure>
            <img src="54-1.png" alt="">
            <figcaption>Das Hauptmenü des Disk-Directory-Editors</figcaption>
        </figure>

        <p>Ab Zeile 8060 steht die Warteschleife bis zum Drücken einer Taste. Dabei wird der Cursor eingeschaltet und an eine vordefinierte Stelle auf den Bildschirm gesetzt. In PR$ ist das Promptzeichen enthalten. Wenn das Unterprogramm von Zeile 2000 her angesprungen wird, sieht man ein »>«. Aus einem anderen Unterprogramm heraus (zum Beispiel Anleitung) zeigt sich ein » &lt; «. Daran erkennt man, in welchem Modus man sich gerade befindet. Die gedrückte Taste wird direkt daneben angezeigt.</p>

        <p>Ab Zeile 8 070 befindet sich eine Routine, die einen Text inklusive aller Steuerzeichen ausdruckt. Auch ein sonst »unverdauliches« RETURN-Zeichen (CHR$(13)) wird mitgedruckt. Da Sie mit einem fehlerhaft arbeitendem Directory-Editor einigen Schaden anrichten können, sollten Sie erst nach dem sorgfältigen Austesten des Programms mit Disketten, von denen ein Doppel existiert, die Arbeit mit dem Directory-Editor beginnen.</p>

        <address class="author">(Dieter Temme/ev)</address>

        <figure>
            <pre data-filename="directory-editor" data-name="Disk-Directory-Editor"></pre>
            <figcaption>Listing »Disk-Directory-Editor«. Beachten Sie bitte die Eingabehinweise auf Seite 6.</figcaption>
        </figure>
    </article>
</body>

</html>
