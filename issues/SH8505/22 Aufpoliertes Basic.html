<!DOCTYPE html>
<html lang="de">

<head>
    <title>Aufpoliertes Basic</title>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="../style.css">
    <meta name="author" content="Markus Feldmann, rg">
    <meta name="64er.issue" content="Sonderheft 5/85">
    <meta name="64er.pages" content="22-25">
    <meta name="64er.toc_category" content="Basic-Erweiterungen">
    <!-- <meta name="64er.toc_title" content="XXX"> -->
    <meta name="64er.id" content="code_free">
</head>

<body>
    <article>
        <h1>Aufpoliertes Basic</h1>
        <p class="intro">39 zusätzliche und leistungsfähige Befehle stellt dieses Programm dem Programmierer zur Verfügung.</p>

        <p>Das Programm (siehe Listing) belegt nur 8 KByte des Basic-RAMs. Der Restbedarf an Arbeitsspeicher wurde mit den Bereichen $C000 bis $CFFF und $E000 bis $FFFF abgedeckt.</p>

        <p>Der zusätzliche Interpreter arbeitet nach demselben Prinzip wie der Commodore-Interpreter, das heißtjeder Befehl belegt nur genau 1 Byte. Die Erweiterung ist so geschrieben, daß Verzögerungen der Befehlserkennung kaum auftreten.</p>

        <p>Das Programm wird mit SYS 64738 oder einem RESET-Schalter gestartet.</p>

        <p>Die Basic-Erweiterung kann noch durch eigene Befehle ergänzt werden. Dazu hängt man die neuen Befehlsnamen an das Ende derTabelle, die bei $800A beginnt. Die Adresse der neuen Befehle wird an das Ende der Tabelle gehängt, die bei $8275 beginnt. Hierbei muß der Wert »Adresse — 1« angegeben werden. Beispiel: Für eine Routine ab $9E00 muß die Adresse $9DFF (im Lo-Byte/Hi-Byte-Format) angegeben werden. Bei den Befehlen ist darauf zu achten, daß das letzte Zeichen geSHIFTet angegeben wird (MSB gesetzt), damit der Computer weiß, wo das Befehlswortendet. Alle Befehle lassen sich abkürzen, da sie in 1-Byte-Tokens umgesetzt werden.</p>

        <p>Zusätzliche Befehle kann man risikolos von $9875 unmittelbar nach dem JMP $984F-Befehl bis $9FFF (Basic-RAM-Ende) hinzufügen.</p>

        <address class="author">(Markus Feldmann/rg)</address>

        <h3>Hinweise:</h3>

        <p>Wird während des Listens die SHIFTTaste gedrückt, so hält der Computer so lange damit an, wie diese gedrückt bleibt; wird jedoch die »Commodore-Taste« gedrückt, so wird sehr langsam gelistet (auch nur solange die Taste gedrückt bleibt).</p>

        <p>Wenn der C 64 sich längere Zeit (einige Sekunden) mit der Grafik beschäftigt (Abspeichern, Laden von Grafiken) sollte man ihn auf keinen Fall mit RUN/STOP-RESTORE abbrechen, da es sonst zum System-Absturz kommen kann (das Kernal-ROM ist während des Zeichnens, und der Basic-Interpreter</p>

        <p>während des Abspeicherns und Einladens von Grafiken abgeschaltet)!</p>

        <p>Die Erweiterung ist darauf ausgelegt, auf ein EPROM gebrannt zu werden. Dieses ist daher ein recht einfacher Vorgang. Ist die Erweiterung nur als Programm vorhanden, läßtsie sich durch »POKE32776,0:COLD« abschalten.</p>

        <p>Wichtig: Sollen die neuen Basic-Befehle nach »IF&hellip;THEN« benutzt werden, so müssen sie mit einem Doppelpunkt vom »THEN« getrennt werden. (Beispiel: IF A=0 THEN:PLOT X,Y)</p>

        <figure>
            <table>
                <tr>
                    <td><strong>COLD</strong></td>
                    <td>— Bewirkt einen Kaltstart, der den C 64 in den Startzustand bringt</td>
                </tr>
                <tr>
                    <td><strong>REVIC</strong></td>
                    <td>— Bewirkt, daß der Videocontroller in den Startzustand gebracht wird</td>
                </tr>
                <tr>
                    <td><strong>DUMP<br>DIRECTORY</strong></td>
                    <td>— Gibt alle benutzten Variablen aus<br>— Gibt das Directory aus, wobei Programme im Speicher bleiben</td>
                </tr>
                <tr>
                    <td><strong>DERR</strong></td>
                    <td>— Gibt den Fehlerkanal der Floppy auf dem Bildschirm aus</td>
                </tr>
                <tr>
                    <td><strong>CURSET X,Y,'TEXT'</strong></td>
                    <td>— Setzt Cursor und Position (X,Y) und druckt Text</td>
                </tr>
                <tr>
                    <td><strong>RENEW</strong></td>
                    <td>— Holt ein mit »NEW« gelöschtes Programm in den Speicher zurück</td>
                </tr>
                <tr>
                    <td><strong>AUTLIN X</strong></td>
                    <td>— Beginnt automatische Zeilennumerierung nach der nächsten eingegebenen Zeilennummer mit der Schrittweite »X«</td>
                </tr>
                <tr>
                    <td><strong>DELETE X-Y<br>DELETE -X<br>DELETE X-</strong></td>
                    <td>— Löscht die Zeilennummern von »X« bis »Y«<br>— Löscht die Zeilennummern bis »X«<br>— Löscht die Zeilennummern von »X« bis Programmende</td>
                </tr>
                <tr>
                    <td><strong>SSTP</strong></td>
                    <td>— Bewirkt eine Einzelschrittbearbeitung des Programmes, wobei nach jedem Druck auf die SHIFT-Taste ein Befehl ausgeführt wird</td>
                </tr>
                <tr>
                    <td><strong>OFF</strong></td>
                    <td>— Schaltet sowohl die »SSTP«- als auch die »TRACE«-Anweisung ab</td>
                </tr>
                <tr>
                    <td><strong>HOLD 'X'</strong></td>
                    <td>— Wartet, bis die Taste in ' ' gedrückt wird, wird als Taste ein '?' angegeben, so wird jede Taste akzeptiert</td>
                </tr>
                <tr>
                    <td><strong>RENUM X,Y,Z</strong></td>
                    <td>— Numeriert das Programm von Zeile »X« bis Ende mit der Schrittweite »Z« neu und beginnt bei der Neunumerierung mit »Y«</td>
                </tr>
                <tr>
                    <td><strong>FIND 'TEXT'</strong></td>
                    <td>— Sucht im Programm nach »TEXT« und gibt gefundene Zeilen aus</td>
                </tr>
                <tr>
                    <td><strong>FIND GOTO</strong></td>
                    <td>— Sucht im Programm nach dem Befehl GOTO und gibt ebenfalls gefundene Zeilen aus, wobei zu beachten ist, daß, wenn man »neue« Befehle sucht, nicht die Bezeichnung des Befehls ausgegeben wird, sondern ein alter Befehl, was aber nicht weiter schlimm ist, da ja nur die Zeilennummern von Interesse ist und das Listing nicht beeinflußt wird</td>
                </tr>
                <tr>
                    <td><strong>TRACE X</strong></td>
                    <td>— Zeigt in der rechten oberen Ecke des Bildschirms die aktuelle Zeilennummer an und wartet auf die SHIFT-Taste. Da sich diese aber nicht als einzelnen Tastendruck abfragen läßt, wird mit »X« die Geschwindigkeit angegeben von »O« sehr langsam bis »255« sehr schnell. Während des Ablaufs ist die STOP-Taste nicht aktiv. Zum Abbruch erst die Commodore-Taste, dann die STOP-Taste drücken.</td>
                </tr>
                <tr>
                    <td><strong>INIT</strong></td>
                    <td>— Initialisiert das Disk-Laufwerk</td>
                </tr>
                <tr>
                    <td><strong>COLLECT</strong></td>
                    <td>— Führt einen Validate auf der Diskette durch</td>
                </tr>
                <tr>
                    <td><strong>SCRATCH "NAME"</strong></td>
                    <td>— Löscht auf Disk das mit »NAME« bezeichnete Programm</td>
                </tr>
                <tr>
                    <td><strong>HRDCPY</strong></td>
                    <td>— Gibt auf dem Drucker eine Hardcopy aus (Drucker Adresse 4, auf fast allen Druckern lauffähig)</td>
                </tr>

                <tr>
                    <td><strong>HELP</strong></td>
                    <td>— Gibt alle neuen Befehle aus</td>
                </tr>
                <tr>
                    <td><strong>HIRES X,Y</strong></td>
                    <td>— Schaltet HIRes-Grafik ein, mit Vordergrundfarbe »X« und Zeichenfarbe »Y« (Grafik liegt bei $E000)</td>
                </tr>
                <tr>
                    <td><strong>TEXT</strong></td>
                    <td>— Schaltet die HiRes-Grafik ab, der Bildschirm bleibt dabei vorhanden</td>
                </tr>
                <tr>
                    <td><strong>PLOT X,Y</strong></td>
                    <td>— Setzt den Punkt mit den Koordinaten (X,Y)</td>
                </tr>
                <tr>
                    <td><strong>CPLOT X,Y</strong></td>
                    <td>— Löscht den Punkt mit den Koordinaten (X,Y)</td>
                </tr>
                <tr>
                    <td><strong>GRDI A,"NAME",GN</strong></td>
                    <td>— Speichert beziehungsweise lädt ein Bild auf (von-) GN=8: DISK GN=1:DATASETTE, wobei A=1 Abspeichern und A=0 Laden bedeutet</td>
                </tr>
                <tr>
                    <td><strong>LINE X1,Y1,X2,Y2</strong></td>
                    <td>— Zeichnet eine Linie von (X1,Y1) nach (X2,Y2)</td>
                </tr>
                <tr>
                    <td><strong>REC X1,Y1,X2,Y2</strong></td>
                    <td>— Zeichnet ein Rechteck mit der linken oberen Ecke (X1,Y1) und der rechten unteren Ecke (X2,Y2)</td>
                </tr>
                <tr>
                    <td><strong>BIT X</strong></td>
                    <td>— Bestimmt, ob beim folgenden Grafik-Kommando gezeichnet oder gelöscht wird; X=1 : Zeichnen ; X=0 : Löschen</td>
                </tr>
                <tr>
                    <td><strong>BLOCK X1,Y1,X2,Y2</strong></td>
                    <td>— Zeichnet ein ausgefülltes Rechteck mit der linken oberen Ecke (X1,Y1) und der rechten unteren Ecke (X2,Y2)</td>
                </tr>
                <tr>
                    <td><strong>GCL<br>INV</strong></td>
                    <td>— Löscht die im Speicher befindliche Grafik<br>— Invertiert die im Speicher befindliche Grafik</td>
                </tr>
                <tr>
                    <td><strong>TRI E1,E2,E3,E4,E5,E6</strong></td>
                    <td>— Zeichnet ein Dreieck mit den Eckkoordinaten (E1,E2);(E3,E4);(E5,E6), zu beachten ist, daß (E5,E6) immer die Ecke ist, die auf dem Bildschirm unten rechts gezeichnet wird, da es ansonsten zu Fehlfunktionen kommen kann (eine Linie wird nicht gezeichnet)</td>
                </tr>
                <tr>
                    <td><strong>CIRCLE RX,RY,MX,MY</strong></td>
                    <td>— Zeichnet einen Kreis mit den Mittelpunktkoordinaten (MX,MY) und den X,Y Achsen-Radien RX,RY</td>
                </tr>
                <tr>
                    <td><strong>ANGL MX,MY,DX,DY,WI</strong></td>
                    <td>— Zeichnet einen Winkel der Größe WI, vom Punkt (MX,MY) mit den entsprechenden X,Y Achsen-Radien DX,DY</td>
                </tr>
                <tr>
                    <td><strong>PMOB SN,X,Y</strong></td>
                    <td>— Setzt das Sprite mit der Nummer »SN« an den Punkt (X,Y) ('X' darf Werte von 0 - 344 enthalten)</td>
                </tr>
                <tr>
                    <td><strong>SMOB SN,MC,EX,CO,PR</strong></td>
                    <td>— Setzt die Parameter für ein Sprite; »SN«=Sprite.Nummer. »MC«=1:Multicolor; »MC«=0:Monochrom; (im Falle Multicolor müssen zwei weitere Parameter für die Farben angegeben werden) »EX«=0:Keine Expansion; »EX«=1:X- Expansion; »EX«=3:Y-Expansion; »CO«=Farbe; »PR«:Sprite- Hintergrund Priorität</td>
                </tr>
                <tr>
                    <td><strong>DMOB SN,BL</strong></td>
                    <td>— »BL« gibt den Block an, der dem Sprite Nummer »SN« zugeordnet wird</td>
                </tr>
                <tr>
                    <td><strong>EMOB SN,A</strong></td>
                    <td>— Wenn »A«= 0, dann ist das Sprite mit der Nummer »SN« zu sehen, wenn »A«=1, dann ist das Sprite mit der Nummer »SN« nicht zu sehen</td>
                </tr>
                <tr>
                    <td><strong>SCR X,Y</strong></td>
                    <td>— Setzt Bildschirm-Rahmenfarbe »X«; Hintergrundfarbe »Y«</td>
                </tr>


            </table>
            <figcaption>Tabelle. Befehlsübersicht</figcaption>
        </figure>

        <figure>
            <pre data-filename="code free.prg" data-name="Code Free" data-mse=mse1></pre>
            <figcaption>Listing »Basic-Erweiterung«. Bitte beachten Sie die Eingabehinweise auf Seite 8.</figcaption>
        </figure>
        <div class="binary_download" data-filename="code free.prg" data-name="Code Free"></div>

    </article>
</body>

</html>
