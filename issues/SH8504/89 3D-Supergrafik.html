<!DOCTYPE html>
<html lang="de">

<head>
    <title>3D-Supergrafik</title>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="../style.css">
    <meta name="author" content="Oliver Günter, gk">
    <meta name="64er.issue" content="Sonderheft 4/85">
    <meta name="64er.pages" content="89-92,94-95">
    <meta name="64er.toc_category" content="Grafik">
    <meta name="64er.id" content="3d">
    <meta name="64er.head1" content="Grafik">
</head>

<body>
    <article>
        <h1>3D-Supergrafik</h1>
        <p class="intro">Ein dreidimensionales Grafikprogramm, das sich auch vor professionellen 3D-Programmen nicht zu verstecken braucht. Bewiesen wurde das, indem dieses Programm im Rahmen des Wettbewerbs »Jugend forscht ’85« mit dem Sonderpreis Elektronik ausgezeichnet wurde.</p>

        <p>Mit diesem Programm ist es möglich, beliebige dreidimensionale Körper zu drehen und in verschiedenen Perspektiven darzustellen. Die Besonderheit dieses Programms ist jedoch, daß es eine Routine zur Lösung des Hinterschneidungsproblems besitzt. Diese Routine ermöglicht es, Körper naturgetreu darzustellen, indem sie Kanten, die von dem Körper verdeckt werden, löscht. Außer der Darstellung von Körpern besitzt das Programm natürlich auch Routinen zum Eingeben, Laden, Speichern und Ausdrucken von Körpern sowie eine eigene Grafikerweiterung in Maschinensprache.</p>

        <p>Insgesamt ist das Programm sehr übersichtlich und leicht zu bedienen. Nur die Routine zur Eingabe von Körpern erfordert eine kurze Einarbeitungszeit. Denn zuerst müssen die Eckpunkt-Koordinaten eingegeben werden, dann die Nummern der Punkte, aus denen die Fläche besteht, und zwar in der Reihenfolge, in der sie verbunden werden sollen.</p>

        <p>Die Routine zur Berechnung des Bildes erlaubt keine Fehleingaben, so daß man durch Probieren die Auswirkungen der einzelnen Faktoren auf das Bild bestimmen kann. Außerdem braucht sich der Benutzer nicht um die Größe der Darstellung zu kümmern, da dies vom Computer erledigt wird.</p>

        <h3>Die Speicherbelegung</h3>

        <p>Bei 3D-Supergrafik handelt es sich eigentlich um drei Programme: Einem Lader (Listing 1), eine Grafikerweiterung in Maschinensprache (Listing 3) und das Hauptprogramm in Basic (Listing 2). Diese Grafikerweiterung belegt den Speicherplatz von $C400 bis $CAFF. Außerdem benutzt sie zwei Grafikbildschirme unter den beiden ROM-Bereichen ($AOOO-$BFFF/$EOOO-$FFFF). Die dazugehörigen Farbspeicher liegen von $8C00 bis $8FFF und von $C000 bis $C3FF. Daraus folgt, daß das Hauptprogramm mit den Variablen im Bereich von $0800 bis $8BFF liegt. Soviel zur Speicherbelegung.</p>

        <h3>Das Programm</h3>

        <p>Nach Laden und Starten des Laders gelangt man nach dreißig Sekunden ins Hauptmenü, das fünf Menüpunkte zur Verfügung stellt. Auf die Bedienung der einzelnen Punkte werde ich im folgenden eingehen.</p>

        <h3>1. Daten eingeben</h3>

        <p>Bevor man einen dreidimensionalen Körper in den Computer eingeben kann, muß man ihn erst in mathematische Daten zerlegen. Das hört sich schwerer an als es eigentlich ist. Man zeichnet sich einfach eine Vorderansicht und eine Draufsicht des Körpers in Koordinatensysteme. Daraus kann man dann die Eckpunktkoordinaten und die Verbindungsvorschrift ablesen (siehe Bild 1). Nachdem Sie diese Arbeit erledigt haben, können Sie mit der Eingabe der Daten in den Computer beginnen.</p>

        <figure>
            <img src="89-1.png" alt="">
            <figcaption>Bild 1. Beispiel für die Erstellung eines Körpers</figcaption>
        </figure>

        <p>Zuerst muß man die Anzahl der Eckpunkte (im Bild 1: 8 Punkte) und die Anzahl der Flächen (im Bild 1: 6 Flächen) des gewünschten Körpers eingeben. Danach sind die räumlichen Koordinaten der Eckpunkte an der Reihe. Nachdem man die Koordinaten des Punktes eingegeben hat, wird man vom Computer gefragt, ob die Eingabe richtig ist. Falls dies so ist, tippt man einfach weiter, falls nicht, drückt man die Taste »N«. Dann kann man die Werte noch einmal eingeben.</p>

        <p>Nachdem man alle Eckpunkte definiert hat, muß man eingeben, in welcher Reihenfolge die Punkte zu jeder Fläche verbunden werden sollen. Ist man mit einer Fläche fertig, gibt man nur RETURN ein. Jetzt folgt wieder die Richtigkeitsabfrage des Computers, die analog zur vorherigen Frage beantwortet werden muß. Leider gibt es bei der Flächeneingabe noch eine Einschränkung. Eine Fläche darf nämlich nur aus vier Eckpunkten bestehen. Daraus folgt, daß große Flächen zerlegt, und auf mehrere kleine Flächen verteilt werden müssen (siehe Bild 2). Durch diese Maßnahme entstehen Linien, die die große Fläche teilen. Um so etwas zu vermeiden, kann der Anwender Linien eingeben, die später im Bild nicht gezeichnet werden. Das geht folgendermaßen:</p>

        <p>Man schreibt hinter den Punkt, zu dem die nachher nicht sichtbare Linie führen soll, ein »I«.</p>

        <p>So, das war das Schlimmste. Alles weitere ist einfach.</p>

        <figure>
            <img src="89-2.png" alt="">
            <figcaption>Bild 2. Beispiel für die Teilung einer »großen« Fläche</figcaption>
        </figure>

        <h3>2. Daten laden</h3>

        <p>Dieser Menüpunkt dient dazu, die Daten eines Körpers von Diskette zu laden. Er bietet noch zwei Sonderfunktionen: »$« druckt das Directory der Datenfiles auf der Disk »@« Rückkehr zum Hauptmenü</p>

        <p>Bei der Angabe, welches Bild zu laden ist, darfdas »3D-« nicht mit eingegeben werden.</p>

        <h3>3. Daten speichern</h3>

        <p>Diesen Menüpunkt sollte man sofort nach der Eingabe eines Körpers aufrufen, um die Daten zu sichern. Er speichert die Daten in einem platzsparendem Format auf Disk. Die Sonderfunktiorien sind analog zu Punkt 2. Dem Dateinamen wird automatisch ein »3D-« vorangestellt.</p>

        <h3>4. Bild berechnen</h3>

        <p>Es handelt sich hierbei um den umfangreichsten Punkt des Programmes, der aber nicht schwer zu verstehen ist. Die Auswirkung der einzelnen Parameterauf das Bild läßt sich am besten durch folgende Methode herausfinden: Probieren, probieren, probieren &hellip;</p>

        <p>Für Interessierte möchte ich hier noch erwähnen, wie ich das Hinterschneidungsproblem in meinem Programm gelöst habe:</p>

        <p>Der Computer zeichnet die hinterste Fläche zuerst und füllt sie im unsichtbaren Grafikschirm aus (zu sehen, wenn Sie »F2« drücken). Jeden Punkt, den er dort setzt, löscht er in der sichtbaren Grafik.Auf diese Weise verfährt er auch mit den anderen Flächen, die vorderste Fläche zeichnet er zuletzt. Diese Verfahrensweise läßt sich sehr gut beim Bildaufbau beobachten. Es sieht aus, als ob der Computer den Körper aus einzelnen Teilen zusammensetzt. Es lohnt sich auch, mit den Funktionstasten F1 und F2 beim Bildaufbau zwischen den beiden Grafikseiten hin- und herzuschalten.</p>

        <p>Wenn das Bild .fertig gezeichnet ist, kommt man mit der Leertaste wieder in den Textbildschirm. Dort wird man gefragt, ob noch etwas an der Grafik zu ändern ist. Wenn diese Frage bejaht wird, gelangt man in einen kleinen Grafikeditor. Man bewegt das Kreuz mit dem Joystick (Port 2) über den Bildschirm. Bei gedrücktem Feuerknopf werden Punkte gesetzt oder gelöscht. Mit den Tasten »%« und »L« kann man zwischen Punkt setzen und Punkt löschen hin- und herschalten. Verlassen kann man den Editor mit »E«.</p>

        <h3>5. Hardcopy</h3>

        <p>Dieser Menüpunkt sendet eine Hardcopy für einen Epson FX/RX-80 auf den seriellen Bus. Falls Sie über einen solchen Drucker verfügen, brauchen Sie nur noch die Sekundäradressen an Ihr Interface anpassen. In Zeile 395 setzen Sie die Sekundäradresse für Groß-/Klein-Schrift ein, in Zeile 407 die Sekundäradresse für den Epson-Direkt-Modus (ohne Auto-Linefeed !).</p>

        <p>Sonstige Hinweise</p>

        <ul>
            <li>Falls Sie das Programm mit RUN/STOP unterbrochen haben und die Variablen noch vorhanden sind, können sie es mit »GOTO 115« wieder starten.</li>
            <li>Die Funktionstasten sind folgendermaßen belegt:<br>
                F1: Grafik 1<br>
                F3: Grafik 2<br>
                F5: Textbildschirm<br>
                F7: Textbildschirm</li>
            <li>Drücken Sie die Funktionstasten nie während Operationen auf dem seriellen Bus (Laden/Speichern/Hardcopy).</li>
            <li>Der Bereich von $9000 bis $9FFF ist aus Hardwaregründen unbenutzt (»Geisterbilder« des Zeichen-ROMs). Dort können eigene Hardcopyroutinen untergebracht werden.</li>
            <li>Man kann sich unter dem Menüpunkt »Bild berechnen« auch die Werte ausgeben lassen, um dann ein Bild von Hand zu zeichnen.</li>
        </ul>


        <p>In Bild 3 bis Bild 6 sehen Sie noch einige Beispiele.</p>

        <p>Zum Schluß möchte ich Ihnen noch viel Spaß bei der Arbeit mit meinem Programm wünschen.</p>

        <address class="author">(Oliver Günter/gk)</address>

        <figure>
            <img src="89-3.png" alt="">
            <figcaption>Bild 3. Die Hardcopy eines Bildes mit verdeckten »unsichtbaren« Linien</figcaption>
        </figure>
        <figure>
            <img src="89-4.png" alt="">
            <figcaption>Bild 4. Die gleiche Figur wie in Bild 3, nur aus einem anderen Blickwinkel</figcaption>
        </figure>
        <figure>
            <img src="89-5.png" alt="">
            <figcaption>Bild 5. Der Magische Würfel mit Hinterschneidung</figcaption>
        </figure>
        <figure>
            <img src="89-6.png" alt="">
            <figcaption>Bild 6. Bild 5 ohne Hinterschneidung. Er ist sozusagen durchsichtig.</figcaption>
        </figure>

        <figure>
            <table>
                <tbody>
                    <tr>
                        <td>$0000</td>
                        <td>Zeropage</td>
                    </tr>
                    <tr>
                        <td>$0400</td>
                        <td>Textbildschirm</td>
                    </tr>
                    <tr>
                        <td>$0800</td>
                        <td>Programm und Variablen</td>
                    </tr>
                    <tr>
                        <td>$8000</td>
                        <td>Farbspeicher 2</td>
                    </tr>
                    <tr>
                        <td>$9000</td>
                        <td>frei</td>
                    </tr>
                    <tr>
                        <td>$A000</td>
                        <td>Basic-ROM und Grafik 2</td>
                    </tr>
                    <tr>
                        <td>$C000</td>
                        <td>Farbspeicher 1</td>
                    </tr>
                    <tr>
                        <td>$C400</td>
                        <td>Grafikerweiterung</td>
                    </tr>
                    <tr>
                        <td>$D000</td>
                        <td>I/O-Bereich</td>
                    </tr>
                    <tr>
                        <td>$E000</td>
                        <td>Kernal-ROM und Grafik 1</td>
                    </tr>
                </tbody>
            </table>
            <figcaption>Tabelle 1: Speicherbelegung</figcaption>
        </figure>

        <figure>
            <table>
                <tbody>
                    <tr>
                        <td>SYS 50176</td>
                        <td>Grafik 1 ein</td>
                    </tr>
                    <tr>
                        <td>SYS 50179</td>
                        <td>Grafik 2 ein</td>
                    </tr>
                    <tr>
                        <td>SYS 50182</td>
                        <td>Textbildschirm ein</td>
                    </tr>
                    <tr>
                        <td>SYS 50185</td>
                        <td>Grafik 1 löschen</td>
                    </tr>
                    <tr>
                        <td>SYS 50188</td>
                        <td>Grafik 2 löschen</td>
                    </tr>
                    <tr>
                        <td>SYS 50191,F1,F2</td>
                        <td>Farbe setzen für Grafik 1+2</td>
                    </tr>
                    <tr>
                        <td>SYS 50194,X,Y</td>
                        <td>Punkt setzen</td>
                    </tr>
                    <tr>
                        <td>SYS 50197,X,Y</td>
                        <td>Punkt löschen</td>
                    </tr>
                    <tr>
                        <td>SYS 50200,X1,Y1,X2,Y2</td>
                        <td>Linie ziehen</td>
                    </tr>
                    <tr>
                        <td>SYS 50203,X1,Y1,X2,Y2</td>
                        <td>Linie löschen</td>
                    </tr>
                    <tr>
                        <td>SYS 50206,X,Y</td>
                        <td>Hinterschneidungsroutine</td>
                    </tr>
                    <tr>
                        <td>SYS 50209</td>
                        <td>Directory</td>
                    </tr>
                    <tr>
                        <td>SYS 50212</td>
                        <td>Funktionstasten initialisieren</td>
                    </tr>
                    <tr>
                        <td>SYS 50215,LF</td>
                        <td>Hardcopy</td>
                    </tr>
                </tbody>
            </table>
            <figcaption>Tabelle 2: Befehle der Grafikerweiterung</figcaption>
        </figure>

        <figure>
            <table>
                <tbody>
                    <tr>
                        <td colspan="2"><strong>Arrays:</strong></td>
                    </tr>
                    <tr>
                        <td>DX,DY,DZ</td>
                        <td>Eckpunktkoordinaten eines Körpers</td>
                    </tr>
                    <tr>
                        <td>WX,WY,WZ</td>
                        <td>Eckpunktkoordinaten nach dem Drehen</td>
                    </tr>
                    <tr>
                        <td>BX,BY</td>
                        <td>Bildschirmkoordinaten der Eckpunkte</td>
                    </tr>
                    <tr>
                        <td>MX,MY,MZ</td>
                        <td>Koordinaten der Flächenmitteltunkte</td>
                    </tr>
                    <tr>
                        <td>FL</td>
                        <td>Eckpunkte einer Fläche</td>
                    </tr>
                    <tr>
                        <td>PF</td>
                        <td>Punktanzahl einer Fläche</td>
                    </tr>
                    <tr>
                        <td>RF</td>
                        <td>Reihenfolge der Flächen</td>
                    </tr>
                    <tr>
                        <td colspan="2"><strong>Strings:</strong></td></td>
                    </tr>
                    <tr>
                        <td>IN$</td>
                        <td>Gedrückte Taste</td>
                    </tr>
                    <tr>
                        <td>FU$</td>
                        <td>Funktionsstring (Überschrift)</td>
                    </tr>
                    <tr>
                        <td>FL$</td>
                        <td>Filename</td>
                    </tr>
                    <tr>
                        <td  colspan="2"><strong>Einfache Variablen:</strong></td>
                    </tr>
                    <tr>
                        <td>V</td>
                        <td>VIC-Basisadresse</td>
                    </tr>
                    <tr>
                        <td>Q,W,E,R</td>
                        <td>Laufvariablen</td>
                    </tr>
                    <tr>
                        <td>AP</td>
                        <td>Anzahl Punkte</td>
                    </tr>
                    <tr>
                        <td>AF</td>
                        <td>Anzahl Flächen</td>
                    </tr>
                    <tr>
                        <td>FX,FY,FZ</td>
                        <td>Koordinaten des Augpunktes</td>
                    </tr>
                    <tr>
                        <td>ZX,ZY,ZZ</td>
                        <td>Zwischenwertspeicher</td>
                    </tr>
                    <tr>
                        <td>AE</td>
                        <td>Vergrößerungsfaktor</td>
                    </tr>
                    <tr>
                        <td>JO</td>
                        <td>Joystickregister Port 2</td>
                    </tr>
                    <tr>
                        <td>XD,YD,ZD</td>
                        <td>Drehwinkel um X-, Y- und Z-Achse</td>
                    </tr>
                    <tr>
                        <td>FE,T,S</td>
                        <td>Nummer des Diskfehlers, Track, Sector</td>
                    </tr>
                    <tr>
                        <td>XP,YP,WI,WK</td>
                        <td>Hilfsvariablen der Drehroutine</td>
                    </tr>
                    <tr>
                        <td>M,N,B,C</td>
                        <td>Hilfsvariablen der Fluchtpunktroutine</td>
                    </tr>
                    <tr>
                        <td>PX,NX,PY,NY</td>
                        <td>Hilfsvariablen bei der Größenberechnung</td>
                    </tr>
                    <tr>
                        <td>AX,AY,BX,BY</td>
                        <td>Hilfsvariablen bei der Größenberechnung</td>
                    </tr>
                    <tr>
                        <td>LO</td>
                        <td>Löschvariable</td>
                    </tr>
                </tbody>
            </table>
            <figcaption>Tabelle 3: Variablenliste</figcaption>
        </figure>

        <figure>
            <pre data-filename="3d-lader" data-name="3D-Supergrafik (Lader)"></pre>
            <figcaption>Listing 1. Das Ladeprogramm für 3D-Supergrafik</figcaption>
        </figure>
        <figure>
            <pre data-filename="3d-1.prg" data-name="3D-Supergrafik (Maschinenroutine)" data-mse=mse1></pre>
            <figcaption>Listing 3. Die Maschinenroutine zu »3D-Supergrafik«</figcaption>
        </figure>
        <div class="binary_download" data-filename="3d-1.prg" data-name="3D-Supergrafik (Maschinenroutine)"></div>
        <figure>
            <pre data-filename="3d-2" data-name="3D-Supergrafik"></pre>
            <figcaption>Listing 2. Hauptprogramm »3D-Supergrafik«</figcaption>
        </figure>

        <div class="binary_download" data-filename="3d-tetraeder.prg" data-name="3D Tetraeder"></div>
        <div class="binary_download" data-filename="3d-hexaeder.prg" data-name="3D Hexaeder"></div>
        <div class="binary_download" data-filename="3d-oktaeder.prg" data-name="3D Oktaeder"></div>
        <div class="binary_download" data-filename="3d-ikosaeder.prg" data-name="3D Ikosaeder"></div>
        <div class="binary_download" data-filename="3d-kreuz.prg" data-name="3D Kreuz"></div>
        <div class="binary_download" data-filename="3d-vader.prg" data-name="3D Vader"></div>
        <div class="binary_download" data-filename="3d-rubik's cube.prg" data-name="3D Rubik's Cube"></div>
    </article>
</body>

</html>
