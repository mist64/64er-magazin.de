<!DOCTYPE html>
<html lang="de">

<head>
    <title>Formatierte Eingabe</title>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="../style.css">
    <meta name="author" content="Thomas Graf, hm">
    <meta name="64er.issue" content="6/85">
    <meta name="64er.pages" content="148">
    <meta name="64er.head1" content="Tips & Tricks">
    <meta name="64er.head2" content="C 64">
    <meta name="64er.toc_category" content="Listings zum Abtippen|Tips und Tricks">
    <meta name="64er.index_title" content="Formatierte Eingabe">
    <meta name="64er.index_category" content="Software-Tips|Tips & Tricks">
    <meta name="64er.id" content="e-routine">
</head>

<body>
    <article>
        <h1>Formatierte Eingabe</h1>
        <p class="intro">Für professionelle Programme wird oft eine INPUT-Routine benötigt, die nur bestimmte Zeichen zuläßt. Mit diesem Maschinenprogramm können Sie sehr einfach Eingabemasken realisieren.</p>

        <p>Haben Sie schon mal wirklich professionelle Programme geschrieben? Dann hat Ihnen mit Sicherheit die INPUT-Routine des C 64-Betriebssystems zu schaffen gemacht, die sämtliche Zeichen zuläßt. Auch solche, die zu völligem Unsinn oder Fehlermeldungen führen. Dieser Mißstand wird in Basic-Programmen meist mit einer GET-Schleife umgangen. Bei dieser Methode wird ständig ein Zeichen von der Tastatur geholt, auf Zulässigkeit überprüft und auf den Bildschirm gedruckt. Die einzelnen Zeichen werden in einem String addiert. Wenn sie mit INS oder DEL im Eingabefeld Korrekturen ausführen wollen, können Sie sich vorstellen, wie kompliziert und zeitraubend eine solche Routine werden kann.</p>

        <p>Eine schnelle Lösung dieses Problems schafft dieses Maschinenprogramm, das einen neuen Input-Befehl generiert. Die Syntax des Befehls lautet:</p>

        <p class="noindent">INPUT>Eingabelänge, Spalte, Zeile, Variable</p>

        <p>Wie Sie schon an der Syntax sehen, ein recht komfortabler INPUT-Befehl. Mit der Eingabelänge geben Sie an, wie lang das Eingabefeld höchstens sein darf. Durch Angabe von Zeile und Spalte können Sie das Eingabefeld direkt an jeder beliebigen Bildschirmstelle positionieren. Als Variable müssen Sie eine Stringvariable einsetzen, zum Beispiel A$. Sollen ausschließlich Zahlen eingegeben werden, braucht der String nur noch auf Buchstaben hin überprüft werden. Beispielsweise mit folgender Routine:
            <code>10 INPUT>4,1,1,A$
                20 IF STR$(VAL(A$))=" "+A$ THEN PRINT "ES IST EINE ZAHL":END
                30 PRINT "KEINE ZAHL":GOTO 10
            </code>
        </p>

        <h3>Tips zur Eingabe</h3>

        <p>Das Programm müssen Sie mit dem MSE eingeben und abspeichern. Laden Sie dann die Input-Routine mit LOAD »name«,8,1 oder LOAD "name",1,1 und geben Sie NEW und SYS 49152 zur Initialisierung ein. Danach können Sie Ihre Basic-Programme eintippen und mit dem neuen INPUT>-Befehl verwenden. Die Routine können Sie natürlich auch mit dem Basic-Programm nachladen und mit dem neuen INPUT>-Befehl verwenden.</p>

        <h3>Zusammenfassung</h3>

        <ul>
            <li>Die Routine wird mit SYS49152 initialisiert</li>
            <li>Das Programm benötigt den Speicherbereich von Adresse 49152 bis 49617</li>
            <li>Die Syntax lautet: INPUT>Eingabelänge, Zeile, Spalte, Stringvariable</li>
            <li>Die CLR-, HOME-, RUN-, STOP- und SHIFT-Taste ist bei der Eingabe gesperrt.</li>
            <li>Das Eingabefeld kann mit den Cursortasten nicht verlassen werden.</li>
            <li>INST/DEL wirkt nur innerhalb des Eingabefeldes</li>
            <li>Leerzeichen am Ende der Eingabe werden nicht mit übernommen.</li>
            <li>Benötigen Sie die Leerzeichen am Schluß geben Sie einfach POKE 49298,131 ein. POKE 49298,94 schaltet wieder in den Normalzustand.</li>
        </ul>


        <p>Ein Nachteil soll nicht verschwiegen werden:</p>

        <p>Fragetext kann nicht, wie beim serienmäßigen INPUT-Befehl, ausgegeben werden. Der Text muß mit PRINT gedruckt werden.</p>

        <address class="author">(Thomas Graf/hm)</address>

        <figure>
            <pre data-filename="e-routine 64.prg" data-name="Formatierte Eingabe" data-mse=mse1></pre>
            <div class="binary_download" data-filename="e-routine 64.prg" data-name="Formatierte Eingabe"></div>
            <figcaption>Listing zu »Formatierte Eingabe«. Das Listing ist mit dem MSE einzugeben.</figcaption>
        </figure>
    </article>
</body>

</html>