<!DOCTYPE html>
<html lang="de">

<head>
    <title>Weißt Du wieviel Sternlein stehen…</title>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="../style.css">
    <meta name="author" content="Horst Hinkelmann, hm">
    <meta name="64er.issue" content="5/85">
    <meta name="64er.pages" content="52,57-60,62-63">
    <meta name="64er.head1" content="Anwendung des Monats">
    <meta name="64er.head2" content="C 64 + SB">
    <meta name="64er.toc_title" content="Anwendung des Monats: Weißt Du wieviel Sternlein stehen…">
    <meta name="64er.toc_category" content="Wettbewerbe">
    <meta name="64er.index_title" content="Weißt du, wieviel Sternlein stehen (Sternkarte) (AdM)">
    <meta name="64er.index_category" content="Listings zum Abtippen|Anwendungen">
    <meta name="64er.id" content="sternenhimmel">
</head>

<body>
    <article>
        <h1>Weißt Du wieviel Sternlein stehen&hellip;</h1>
        <p class="intro">Der C 64 als elektronische Sternenkarte bringt Klarheit ins Dunkel der Nacht. Das Programm zeigt Ihnen, wo Planeten und Sternbilder am Himmel stehen.</p>

        <figure>
            <img src="52-1.png" alt="">
        </figure>

        <p>Das Programm entstand aus dem Bedürfnis, den Standort von Sternen, Sternbildern und Planeten zu ermitteln. Vor allem die Planeten lassen sich so ohne weiteres mit dem bloßen Auge, nicht erkennen. Man kann sie nur identifizieren, wenn man genaue Informationen über ihren jeweiligen Standort hat. Deshalb wurde die Berechnung der Planetenbahnen, der Bahn der Sonne und der des Mondes in das Programm aufgenommen. Das Programm erstellt eine Sternenkarte für einen eingegebenen Standort zum gewünschten Beobachtungszeitpunkt.</p>

        <p>Die Sternenkarte enthält die hellsten und bekanntesten Fixsterne beziehungsweise Sternbilder des nördlichen Sternenhimmels.</p>

        <p>Sehr interessant ist es, neben der Ausgabe der Sternenkarte für eigene Beobachtungen, sich die Sternenkarte für jeden Punkt der Erde zeichnen zu lassen.</p>

        <p>So kann man sich zum Beispiel in Gedanken auf den Nordpol versetzen. Der Polarstern (Polaris) steht im Zenit, also genau über dem Beobachter. Gibt man als Beobachtungszeitpunkt den 21. März (Frühlingsanfang für die Nordhalbkugel) ein, kann man feststellen, daß die Sonne den ganzen Tag über scheint.</p>

        <p>Am Nordpol hat der Tag begonnen. Die Sonne scheint nun ein halbes Jahr ohne Unterbrechung. Erst zum Herbstanfang geht sie wieder unter. Es ist dann für ein halbes Jahr Nacht. Auch die Verhältnisse am Äquator (Breite 0°) sind sehr interessant.</p>

        <address class="author">(H. Hinkelmann/hm)</address>

        <aside>
            <h2>Lebenslauf</h2>

            <img src="52-0.png" alt="" class="inline">

            <p>Ich wurde am 02.10.26 in Ahlen (Westfalen) geboren und lebe seit 1951 in Hamm. Seit dem 01.04.43 bin ich in der Finanzverwaltung und dort seit 1955 als Betriebsprüfer tätig.</p>

            <p>Bereits als Kind interessierte ich mich sehr für Naturwissenschaften und Technik. Ich baute mir selbst ein Fernrohr, um die Sterne beobachten zu können. Ende der 60er Jahre begann ich mit dem Basteln in der Mikroelektronik. Es entstand eine Digitaluhr mit Kalenderfunktion. Diese stellte sich automatisch nach dem Zeitzeichen des WDR. Mein erster »Computer« war der programmierbare Taschenrechner Casio FX 501 mit 112 (!) Programmschritten. Es folgte der Sharp CP 1211 und dann der VC 20. Meinen C 64 besitze ich seit etwa einem Jahr. Von Anfang an wurden die Computer bei den Betriebsprüfungen und hier insbesondere bei den Prüfungsvorbereitungen und den Berichtsabfassungen eingesetzt. Seit einiger Zeit bin ich Mitglied des Arbeitskreises EDV bei der Oberfinanzdirektion Münster und für die Einführung der Datenverarbeitung im Prüfdienst tätig.</p>

            <p>Die ersten Steuerberechnungen nahm ich noch mit dem Taschenrechner vor. Es folgten dann Programme für den VC 20 und nun für den C 64. Inzwischen habe ich kaum noch Zeit, private Programme zu entwickeln.</p>

            <address class="author">(Horst Hinkelmann)</address>
        </aside>

        <p class="intro">Um über die Positionen von Fixsternen und Planeten informiert zu sein, schrieb Horst Hinkelmann dieses Programm für den C 64 mit Simons Basic.</p>

        <p>Nach dem Start des Programms werden zunächst das aktuelle Datum sowie die aktuelle Uhrzeit (MEZ) und die geografischen Koordinaten des Beobachtungsortes eingegeben. Dabei müssen nördliche Breiten und westliche Längen positiv, südliche Breiten und östliche Längen negativ angegeben werden. Nun kann man den Beobachtungszeitpunkt wählen, wenn sich dieser vom bereits im Programm festgelegten Zeitpunkt unterscheidet.</p>

        <p>Es folgt eine kurze Erläuterung des Programmablaufs und das Zeichnen der Sternkarte. Mit den Cursor-Tasten kann über ein Kreuz jedes Objekt der Sternkarte angesteuert werden. Die Bewegungsgeschwindigkeit ist abhängig von der Dauer des Tastendrucks; das heißt je länger eine Cursortaste gedrückt wird, desto schneller bewegt sich das Kreuz. Drückt man nach der Wahl die Funktionstaste F1, gibt der Computer den Namen des Sterns oder Planeten, der dem Kreuz am nächsten ist, an. Dabei wird der Cursor genau auf das Objekt positioniert. Möchte man wissen, um welches Sternbild es sich bei einer bestimmten Konstellation handelt, bringt man das Kreuz auf das betreffende Sternbild und drückt die Funktionstaste F3. Der Computer positioniert den Cursor auf den nächsten Stern des Sternbildes und zeigt den Namen des Sternes und des Sternbildes an. Das gesamte Sternbild blinkt. Es besteht auch die Möglichkeit, einen Stern, ein Sternbild oder einen Planeten nach dem Namen suchen zu lassen. Dazu gibt man einfach mit der Tastatur den Namen oder einen Teil des Namens des gesuchten Objekts ein und schließt die Eingabe mit der RETURN-Taste ab. Der Computer positioniert das Kreuz auf dieses Objekt und gibt den vollständigen Namen aus. Ist das gesuchte Objekt nicht gespeichert oder zum Beobachtungszeitpunktam Beobachtungsortnichtzu sehen, erhält man eine entsprechende Fehlermeldung.</p>

        <p>Will man die Sternkarte für einen anderen Beobachtungsort oder einen anderen Beobachtungszeitpunkt erstellen lassen, drückt man die Funktionstaste F7.</p>

        <p>Mit F5 wird die Sternkarte auf einen MPS 801 gedruckt</p>

        <h3>Programmerläuterung</h3>

        <p>Auf die Formeln, die den Berechnungen zugrunde liegen, soll verzichtet werden. Diese Berechnungen sind (zumindest für Mond- und Planetenpositionen) ziemlich kompliziert und können bei Interesse jedem größeren Werk über Astronomie entnommen werden.</p>

        <p>Von programmtechnischem Interesse dürften allerdings die Suchroutinen sein. Deren Funktionsweise soll deshalb erläutert werden.</p>

        <p>Zum Suchen werden die folgenden Arrays verwendet:</p>

        <table class="plain">
            <tr>
                <td>P$</td><td>Namen der Planeten</td>
            </tr>
            <tr>
                <td>Z$</td><td>Namen der Sternbilder</td>
            </tr>
            <tr>
                <td>P</td><td>Bildschirmkoordinaten der Planeten</td>
            </tr>
            <tr>
                <td>Z%</td><td>Bildschirmkoordinaten der Fixsterne</td>
            </tr>
            <tr>
                <td>Z</td><td> Zeiger auf Fixsterne (für jedes Sternbild)</td>
            </tr>
        </table>

        <h3>Suchen Fixstern/Planet (Funktionstaste F1)</h3>

        <p>Zunächst werden die Bildschirmkoordinaten des Kreuzes (X,Y) mit denen der Planeten (X mit P(0), P(2), &hellip;, Y mit P(1), P(3), &hellip;) verglichen. Bei Übereinstimmung ist XX=0 und die Suche kann abgebrochen werden. In Zeile 42090 verzweigt das Programm nach 45000, wo der Name des Planeten geschrieben wird. Liegt keine Übereinstimmung vor, wird der Planet mit dem geringsten Abstand gespeichert (XP = Abstand<sup>2</sup>, ZP = Kennziffer des Planeten). Nun werden die Fixsterne in gleicher Weise überprüft. Der Stern mit dem geringsten Abstand wird gespeichert (Z = Kennziffer des Sterns; Zeile 44020). Wird kein Stern mit geringerem Abstand als der nächste Planet gefunden, wird der gespeicherte Planet genannt (Zeilen 44070 bis 45010). Dabei wird ab der Zeile 500 das Kreuz exakt auf den Planeten beziehungsweise Stern positioniert und dessen Bezeichnungen ausgegeben. Der Name eines Planeten ergibt sich aus dem Array P$ mit dem Index ZP. Der Name eines Sternes wird durch berechnetes RESET (Zeile 44080) aus den DATA-Zeilen 60000 bis 61240 ermittelt. Die Schreibroutine befindet sich ab Zeile 300.</p>

        <h3>Suchen Sternbild (Funktionstaste F3)</h3>

        <p>Zunächst wird die Suchroutine für Sterne mit Ausnahme des Abschnitts für die Planeten durchlaufen. Der gefundene nächste Stern bestimmt das Sternbild. Die Kennziffer Z des Sterns wird in Z1, die letzte Ziffer des gelesenen Datensatzes für den Stern (D; Zeile 44090) wird in Z gespeichert. Das Programm verzweigt nun in die Blink-Routine (Zeile 48060 bis 48250). Dort werden die zum Sternbild gehörenden Sterne (Punkte) abwechselnd gesetzt und gelöscht (Zeile 48170).</p>

        <h3>Suchen nach Namen</h3>

        <p>Wird ein Name, oder ein Teil eines Namens eingegeben, verzweigt das Programm in 40100 nach Zeile 47000. Das komplizierte Löschen des zu überschreibenden Textes (GOSUB 340, GOSUB 360 in Zeile 47030) ist erforderlich, da Simons Basic Text mit den auf dem Grafik-Bildschirm gesetzten Punkten ODER- verknüpft. Aus diesem Grund wird der vorige Text erst gelöscht Nun wird geprüft, ob ein Planetenname mit der eingegebenen Bezeichnung übereinstimmt (47060 bis 47090). Ist dies der Fall, werden die Bildschirmkoordinaten des Planeten zu denen des Kreuzes (Zeile 47120). Ist der Planet zur Beobachtungszeit nicht sichtbar, dann ist X = 0 und eine Fehlermeldung wird ausgegeben (47140). Ansonsten wird das Kreuz auf den Planeten positioniert und in die Eingaberoutine gesprungen (47150). Handelt es sich bei der eingegebenen Bezeichnung um keinen Planeten, wird die Suchroutine in 48000 fortgesetzt. Dort werden zunächst die Namen der Sternbilder (deutsch und lateinisch) auf Übereinstimmung untersucht. Wird keine Übereinstimmung gefunden, springt das Programm in die Zeile 49000. Hier werden nun die Sternbezeichnungen eingelesen und mit der Eingabe verglichen. Kommt es zu keiner Übereinstimmung, wird die Fehlermeldung »&hellip; nicht gespeichert« ausgegeben und das Kreuz in die linke obere Ecke des Bildschirms gesetzt (Zeile 49050). Darauf kehrt das Programm in die Eingaberoutine (ab Zeile 40000) zurück.</p>

        <address class="author">(Horst Hinkelmann/hm)</address>

        <figure>
            <img src="57-1.png" alt="">
            <figcaption>Hardcopy des Sternenhimmels von Hamm (zirka 52° nördliche Breite und 8° östliche Länge), wobei der Beobachtungszeitpunkt der 7. Februar 1985, 19.30 GMT (Weltzeit) beziehungsweise 20.30 MEZ (Ortszeit) ist. Wie bei Sternkarten üblich, ist Osten links, Westen rechts, Norden unten und Süden oben. Der Mond steht tief im Osten.</figcaption>
        </figure>

        <figure>
            <table class="plain nobreak0 right0 right1">
                <tbody>
                    <tr class="strong">
                        <td>Zeilen</td>
                        <td></td>
                        <td>Bedeutung</td>
                    </tr>
                    <tr>
                        <td>100 -</td>
                        <td>120</td>
                        <td>Berechnung des Stundenwinkels</td>
                    </tr>
                    <tr>
                        <td>130 -</td>
                        <td>140</td>
                        <td>Berechnung Bogenmaß</td>
                    </tr>
                    <tr>
                        <td>150 -</td>
                        <td>190</td>
                        <td>Koordinaten-Transformation</td>
                    </tr>
                    <tr>
                        <td>200 -</td>
                        <td>240</td>
                        <td>Berechnung Gradmaß</td>
                    </tr>
                    <tr>
                        <td>296 -</td>
                        <td>395</td>
                        <td>Text auf Grafikbildschirm überschreiben</td>
                    </tr>
                    <tr>
                        <td>396 -</td>
                        <td>480</td>
                        <td>Ausgabe Fehlermeldungen</td>
                    </tr>
                    <tr>
                        <td>496 -</td>
                        <td>520</td>
                        <td>Kreuz (Cursor) bewegen</td>
                    </tr>
                    <tr>
                        <td>596 -</td>
                        <td>630</td>
                        <td>Buchstaben auf Grafikbildschirm löschen</td>
                    </tr>
                    <tr>
                        <td>996 -</td>
                        <td>2190</td>
                        <td>Bildschirmmaske erstellen</td>
                    </tr>
                    <tr>
                        <td>4996 -</td>
                        <td>5260</td>
                        <td>Definition Kreuz als Sprite</td>
                    </tr>
                    <tr>
                        <td>9996 -</td>
                        <td>15080</td>
                        <td>Stellung Erde/Sonne/Mond berechnen</td>
                    </tr>
                    <tr>
                        <td>19996 -</td>
                        <td>20160</td>
                        <td>Stellung Planeten berechnen</td>
                    </tr>
                    <tr>
                        <td>24996 -</td>
                        <td>25080</td>
                        <td>Stellung Fixsterne berechnen</td>
                    </tr>
                    <tr>
                        <td>29996 -</td>
                        <td>30050</td>
                        <td>Rektaszension und Deklination berechnen</td>
                    </tr>
                    <tr>
                        <td>39996 -</td>
                        <td>49100</td>
                        <td>Eingabeschleife</td>
                    </tr>
                    <tr>
                        <td>49996 -</td>
                        <td>56050</td>
                        <td>Programmbeginn und Funktionsdefinitionen:</td>
                    </tr>
                    <tr>
                        <td>52010 -</td>
                        <td>52020</td>
                        <td>arc sin</td>
                    </tr>
                    <tr>
                        <td>52030 -</td>
                        <td>52040</td>
                        <td>arc cos</td>
                    </tr>
                    <tr>
                        <td>52050 -</td>
                        <td>52060</td>
                        <td>Modulo 360</td>
                    </tr>
                    <tr>
                        <td>57000 -</td>
                        <td>57110</td>
                        <td>Hardcopy</td>
                    </tr>
                    <tr>
                        <td>58000 -</td>
                        <td>58020</td>
                        <td>Neustart des Programms</td>
                    </tr>
                    <tr>
                        <td>60000 -</td>
                        <td>61240</td>
                        <td>Daten Fixsterne (Rektaszension, Deklination, Name, Nummer des Sternbildes)</td>
                    </tr>
                    <tr>
                        <td>62000 -</td>
                        <td>62230</td>
                        <td>Daten Sternbilder (Name lateinisch, Name deutsch, Zahl Sterne —1, Beginn der Sterndaten DATA-Zeile 60000 + X*10)</td>
                    </tr>
                    <tr>
                        <td>62500 -</td>
                        <td>62700</td>
                        <td>Daten Planeten (Name, Bahnelemente)</td>
                    </tr>
                </tbody>
            </table>
            <figcaption>Programmstruktur von Sternenhimmel</figcaption>
        </figure>

        <figure>
            <pre data-filename="sternenhimmel" data-name="Sternenhimmel"></pre>
            <figcaption>Listing zu Sternenhimmel. Geben Sie das Listing nur dann ein, wenn Sie vorher Simons Basic geladen haben.</figcaption>
        </figure>

        <aside class="fehlerteufelchen" id="fehlerteufelchen">
            <h2>Fehlerteufelchen</h2>
            
            <p>In den Zeilen 50140, 50340, 50360, 50400, 50440, 50470, und 50510 muß zwischen den Anführungszeichen jeweils ein Cursor up durchgeführt werden. In Zeile 50300 zwischen den Anführungsstrichen ein CLR (Bildschirm löschen) einfügen. In Zeile 50210 muß der Variablen pi der Wert π zugewiesen werden, also pi = π.</p>
            
            <!-- 64'er 6/1985 -->
        </aside>
    </article>
</body>

</html>
