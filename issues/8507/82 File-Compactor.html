<!DOCTYPE html>
<html lang="de">

<head>
    <title>File-Compactor</title>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="../style.css">
    <meta name="author" content="Marcus Breiing, hm">
    <meta name="64er.issue" content="7/85">
    <meta name="64er.pages" content="82">
    <meta name="64er.toc_category" content="Listings zum Abtippen|Tips und Tricks">
    <!-- <meta name="64er.toc_title" content="XXX"> -->
    <meta name="64er.id" content="file-compactor">
</head>

<body>
    <article>
        <h1>File-Compactor</h1>
        <p class="intro">Wozu unnötigen Ballast auf Diskette speichern und laden? Der File-Compactor kürzt fast jedes Programm — bis zu 50 Prozent. Einzige Voraussetzung: mindestens eine Basic-Zeile.</p>

        <p>Fast alle Programme, egal ob Basic oder Assembler, weisen Folgen von gleichen Zeichen auf. Denken Sie nur an Grafikbilder, die in einem Programm enthalten sein könnten. Diese Zeichenfolgen lassen sich kürzen.</p>

        <p>Man geht dazu folgendermaßen vor: Man durchsucht das ganze Programm nach Folgen von gleichen Bytes. Wurde eine Folge gefunden, wird ein Merkzeichen (in diesem Fall $bf oder $cf) an die momentane Stelle geschrieben. Danach der Zeichencode und die Anzahl der Zeichen. Verwechslungen mit eventuell vorkommenden $bf- oder $cf-Codes können dadurch ausgeschlossen werden, indem man vor diese Codes noch mal den Code und für die Anzahl eine »1« schreibt.</p>

        <p>Damit die gekürzte Version lauffähig ist, wird vor das eigentliche Programm noch ein »Entpacker« gesetzt, der auch mit abgespeichert werden muß. Von jedem Programm bleibt nach dem Komprimieren nur noch eine Zeile mit einem SYS-Befehl (zum Start des Entpackers) übrig.</p>

        <p>Tippen Sie RUN ein, wird vor dem eigentlichen Programmstart das ursprüngliche Programm aus den komprimierten Daten wieder zusammengesetzt; erkenntlich an der dunkelblauen Rahmenfarbe. Das komprimierte Programm wird dazu an das Speicherende verschoben und dann Byte für Byte wieder an die Stelle gesetzt, wo es vor der Behandlung mit dem File-Compactor stand. Stoppen Sie das Basic-Programm nach dem Entpacken mit STOP oder STOP/RESTORE, sehen Sie wieder das normale Basic-Programm in seiner vollen Länge.</p>

        <h2>Spart Platz auf Disketten</h2>

        <p>Ein Beispiel: Bestimmte Versionen des Spiels »Apocalypse« sind 153 Blocks lang. Nach der Behandlung mit dem File-Compactor aber nur noch 83 Blocks, also um 46 Prozent kürzer.</p>

        <h3>Tips zur Benutzung</h3>

        <ol>
            <li>File-Compactor mit dem MSE eingeben und abspeichern.</li>
            <li>Das so gespeicherte Programm mit LOAD"FILE-COMPACTOR",8 laden und mit RUN starten.</li>
            <li>Diskette mit dem zu kürzenden Programm einlegen.</li>
            <li>Namen des Programms eingeben und RETURN drücken. Das Programm wird geladen.</li>
            <li>Diskette mit genügend freiem Platz einlegen.</li>
            <li>Namen des gekürzten Programmes eingeben und RETURN drücken. Die gekürzte Version wird gespeichert.</li>
        </ol>


        <p>Wollen Sie ein Maschinenprogramm kürzen, das mit LOAD "name",8,1 geladen und mit SYS gestartet wird, müssen Sie das Programm erst mit dem Basic-Start-Generator auf Seite 74 »vorbehandeln«.</p>

        <address class="author">(Marcus Breiing/hm)</address>
        <figure>
            <pre data-filename="file-compactor.prg" data-name="File-Compactor" data-mse=mse1></pre>
            <figcaption>Listing zum File-Compactor. Es muß mit dem MSE eingegeben werden.</figcaption>
        </figure>
        <div class="binary_download" data-filename="file-compactor.prg" data-name="File-Compactor"></div>
    </article>
</body>

</html>
